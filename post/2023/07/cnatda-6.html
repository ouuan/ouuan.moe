<!DOCTYPE html><html lang="zh-CN"><head>
    <meta charset="UTF-8">
<title>CNATDA 第六章学习笔记 - ouuan's blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="《Computer Networking: A Top-Down Approach (8th Edition)》第六章 “The Link Layer and LANs” 的学习笔记。">
<meta property="og:url" content="https://ouuan.moe/post/2023/07/cnatda-6">
<meta property="og:site_name" content="ouuan's blog">
<meta property="og:title" content="CNATDA 第六章学习笔记 · ouuan's blog">
<meta property="og:description" content="《Computer Networking: A Top-Down Approach (8th Edition)》第六章 “The Link Layer and LANs” 的学习笔记。">
<meta property="twitter:domain" content="ouuan.moe">
<meta property="twitter:title" content="CNATDA 第六章学习笔记 · ouuan's blog">
<meta property="twitter:description" content="《Computer Networking: A Top-Down Approach (8th Edition)》第六章 “The Link Layer and LANs” 的学习笔记。">
<meta property="twitter:url" content="https://ouuan.moe/post/2023/07/cnatda-6">
<style>html:not(.dark):not(.light) { visibility: hidden; } body { visibility: hidden; }</style>
<script>(() => { let dark; try { const theme = localStorage && localStorage.getItem('vueuse-color-scheme'); if (theme === 'dark') dark = true; else if (theme === 'light') dark = false; else dark = window.matchMedia('(prefers-color-scheme: dark)').matches; } catch (e) { dark = false; } document.documentElement.classList.add(dark ? 'dark' : 'light'); })()</script>
<noscript><style>@media (prefers-color-scheme: light) { :root:not(.dark):not(.light) { color-scheme: light; --text-color: #232637; --bg-color: #DEE6EE; --card-color: #EFF3F7; --link-color: #1E66B8; --hover-color: #2E80DD; --active-color: #164C89; --bghover-color: #D6E0EA; --popup-color: #F7F9FB; --footer-color: #5F627B; --area-color: #E1E2E8; --nested-color: #F0F0F3; } } @media (prefers-color-scheme: dark) { :root:not(.dark):not(.light) { color-scheme: dark; --text-color: #E6EDF2; --bg-color: #0D0E15; --card-color: #1F2130; --link-color: #8BB8EC; --hover-color: #A2C6F0; --active-color: #74AAE8; --bghover-color: #353853; --popup-color: #2C2F45; --footer-color: #9699AE; --area-color: #2F313D; --nested-color: #3C3E4E; } } html { visibility:visible !important; }</style></noscript>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="canonical" href="https://ouuan.moe/post/2023/07/cnatda-6">
<link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS Feed - ouuan's blog">
<link rel="alternate" type="application/atom+xml" href="/feed.atom" title="Atom Feed - ouuan's blog">
<link rel="alternate" type="application/json" href="/feed.json" title="JSON Feed - ouuan's blog">
<link rel="dns-prefetch" href="https://plausible.ouuan.moe">
<link rel="preconnect" href="https://blog-visitor-count.ouuan.moe">
<link rel="stylesheet" href="/vendors/katex/katex.css">
<link rel="sitemap" href="https://ouuan.moe/sitemap.xml">
<meta name="author" content="ouuan">
<meta name="twitter:creator" content="@ouuan">
<meta name="twitter:card" content="summary">
<meta property="og:image" content="https://ouuan.moe/images/2023/07/cnatda-6.png">
<meta property="generator" content="îles">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-07-15T09:18:30.000Z">
<meta property="article:modified_time" content="2023-07-15T09:18:30.000Z">
<meta property="article:author" content="ouuan">
<meta property="article:tag" content="cnatda">
<meta property="article:tag" content="学习笔记">
<link rel="preconnect" href="https://giscus.app">
<link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
    <link rel="stylesheet" href="/assets/style-167972a4.css">
    
  <link rel="modulepreload" href="/assets/iles.5d187450.js" crossorigin=""><link rel="modulepreload" href="/assets/vendor-vue.196b627b.js" crossorigin=""><link rel="modulepreload" href="/assets/vite.5ce4fca4.js" crossorigin=""><link rel="modulepreload" href="/assets/SearchBar.775ef7aa.js" crossorigin=""><link rel="modulepreload" href="/assets/PostHead.78b113a4.js" crossorigin=""><link rel="modulepreload" href="/assets/VisitorCount.8ea9f53a.js" crossorigin=""><link rel="modulepreload" href="/assets/site.0440d0dc.js" crossorigin=""><link rel="modulepreload" href="/assets/GiscusCommentsInner.244b88fd.js" crossorigin=""><link rel="modulepreload" href="/assets/useTheme.2f87a670.js" crossorigin=""><link rel="modulepreload" href="/assets/TableOfContents.fc6616e4.js" crossorigin=""><style>@font-face { font-family: "Noto Serif SC Web Font"; font-weight: 400; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Regular.unique.2ead8785.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Regular.unique.c5267945.woff') format('woff'); unicode-range: U+0-9760; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 400; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Regular.common.050e7b1a.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Regular.common.9df1965b.woff') format('woff'); unicode-range: U+0-ff1b; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 700; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Bold.common.c5285db9.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Bold.common.bc3fc7f5.woff') format('woff'); unicode-range: U+0-7684; }</style><link rel="preload" href="/assets/fonts/NotoSerifSC-Regular.unique.2ead8785.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Regular.common.050e7b1a.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Bold.common.c5285db9.woff2" as="font" type="font/woff2" crossorigin=""></head>
  <body itemscope="" itemtype="https://schema.org/ItemPage">
    <div id="app"><header class="bg-card shadow print:hidden" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPHeader"><div class="flex flex-wrap justify-center whitespace-nowrap px-4 page-container sm:flex-nowrap"><div class="flex basis-full items-stretch justify-center sm:mr-3 sm:basis-auto"><a class="flex items-center p-3 text-xl font-serif bghover" href="/"><span>ouuan<span class="mojikumi-narrow-left">’</span>s blog</span></a></div><nav class="flex"><ul class="flex"><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/"><span>首页</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/posts"><span>文章</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/tags"><span>标签</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/about"><span>关于</span></a></li></ul></nav><div class="sm:basis-full"></div><ul class="flex"><li class="flex"><ile-root id="ile-1"><div class="flex items-stretch lg:hidden"><a class="flex items-center p-2 bghover" href="/search" title="全站搜索"><span class="i-mdi-magnify text-xl"></span></a></div><form role="search" class="hidden items-stretch justify-center lg:flex"><div class="flex items-center"><input value="" class="w-48 rd-full bg-area px-3 py-1" type="search" placeholder="关键词" aria-label="全站搜索"></div><a class="flex items-center p-2 bghover" href="/search?q=" title="全站搜索"><span class="i-mdi-magnify text-xl"></span></a></form></ile-root><script></script><script type="module" async="">import{h as r,c as a}from"/assets/iles.5d187450.js";import{_ as m}from"/assets/SearchBar.775ef7aa.js";import"/assets/vendor-vue.196b627b.js";import"/assets/vite.5ce4fca4.js";r(a,m,"ile-1",{},{});
</script></li><li class="flex items-stretch"><a class="flex items-center p-2 bghover" href="/feed.xml" title="RSS 订阅"><span class="i-mdi-rss text-xl"></span></a></li><li class="flex"><ile-root id="ile-2"><div class="relative flex items-stretch"><button title="暗色模式设置" class="flex items-center p-2 bghover" aria-haspopup="menu" aria-controls="__theme-switcher" aria-expanded="false"><span class="i-mdi-theme-light-dark text-xl"></span></button><ul style="display:none;" id="__theme-switcher" class="absolute right-0 top-full z-20 whitespace-nowrap rd-1 bg-popup shadow-md" role="menu" aria-label="暗色模式选项"><li class="bghover" role="menuitemradio" aria-checked="true"><button class="flex items-center p-1 text-hover"><span class="i-mdi-cellphone md:i-mdi-tablet lg:i-mdi-monitor mr-1"></span><span>跟随系统</span></button></li><li class="bghover" role="menuitemradio" aria-checked="false"><button class="flex items-center p-1"><span class="i-mdi-white-balance-sunny mr-1"></span><span>总是亮色</span></button></li><li class="bghover" role="menuitemradio" aria-checked="false"><button class="flex items-center p-1"><span class="i-mdi-weather-night mr-1"></span><span>总是暗色</span></button></li></ul></div></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.5d187450.js";import"/assets/vendor-vue.196b627b.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.5d187450.js").then(o=>o.v),["assets/iles.5d187450.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/ThemeSwitcher.746a16cf.js"),["assets/ThemeSwitcher.746a16cf.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js","assets/useTheme.2f87a670.js"])).default});s(u,v,"ile-2",{},{})});export default E();
</script></li></ul></div></header><main class="min-h-100vh py-6 page-container" itemprop="mainContentOfPage" itemscope="" itemtype="https://schema.org/WebPageElement"><div class="flex justify-center"><div class="grow m-4 standard-card max-w-200"><article itemprop="mainEntity" itemscope="" itemtype="https://schema.org/BlogPosting"><div class="hidden" itemscope="" itemtype="https://schema.org/Person" itemprop="author"><meta itemprop="name" content="ouuan"><meta itemprop="givenName" content="Yufan"><meta itemprop="familyName" content="You"><meta itemprop="url" content="https://github.com/ouuan"><link itemprop="gender" href="https://schema.org/Male"><meta itemprop="image" content="/android-chrome-512x512.png"></div><meta itemprop="inLanguage" content="zh-CN"><meta itemprop="mainEntityOfPage" content="https://ouuan.moe/post/2023/07/cnatda-6"><meta itemprop="image" content="https://ouuan.moe/images/2023/07/cnatda-6.png"><ile-root id="ile-3" class="my-12"><header class="my-12" data-v-2045e486=""><h1 class="mb-3 mt-6 text-center text-8" itemprop="headline" data-v-2045e486=""><span class="inline-block font-serif break-anywhere" data-v-2045e486=""><span data-v-2045e486="" data-v-6544d8e8="">CNATDA 第六章学习笔记</span></span></h1><div class="flex flex-wrap justify-center gap-x-4 gap-y-1 text-footer md:text-sm" data-v-2045e486=""><span class="flex items-center" title="创建于 2023-07-11 13:01:10 GMT+8" data-v-2045e486=""><span class="i-mdi-folder-plus-outline mr-1" data-v-2045e486=""></span><span class="sr-only" data-v-2045e486="">创建于</span><a class="hover:underline" href="https://github.com/ouuan/iles-blog/blob/master/src/pages/post/2023/07/cnatda-6.mdx?plain=1" data-v-2045e486=""><time datetime="2023-07-11T13:01:10+08:00" itemprop="dateCreated" data-v-2045e486="">2023-07-11</time></a></span><span class="flex items-center" title="修改于 2023-07-15 17:18:30 GMT+8" data-v-2045e486=""><span class="i-mdi-update mr-1" data-v-2045e486=""></span><span class="sr-only" data-v-2045e486="">修改于</span><a class="hover:underline" href="https://github.com/ouuan/iles-blog/commits/master/src/pages/post/2023/07/cnatda-6.mdx" data-v-2045e486=""><time datetime="2023-07-15T17:18:30+08:00" itemprop="dateModified" data-v-2045e486="">2023-07-15</time></a></span><span class="flex items-center" title="访问量" data-v-2045e486=""><span class="i-mdi-eye-outline mr-1" data-v-2045e486=""></span><span class="sr-only" data-v-2045e486="">访问量</span><span data-v-2045e486="">76</span></span><span class="flex flex-wrap justify-center gap-x-2 gap-y-1" data-v-2045e486=""><span title="标签: cnatda" class="flex items-center" data-v-2045e486=""><span class="i-mdi-tag-outline mr-1" data-v-2045e486=""></span><span class="sr-only" data-v-2045e486="">标签</span><a href="/tag/cnatda" class="hover:underline" data-v-2045e486=""><span itemprop="keywords" data-v-2045e486="" data-v-6544d8e8="">cnatda</span></a></span><span title="标签: 学习笔记" class="flex items-center" data-v-2045e486=""><span class="i-mdi-tag-outline mr-1" data-v-2045e486=""></span><span class="sr-only" data-v-2045e486="">标签</span><a href="/tag/学习笔记" class="hover:underline" data-v-2045e486=""><span itemprop="keywords" data-v-2045e486="" data-v-6544d8e8="">学习笔记</span></a></span></span></div></header></ile-root><script></script><script type="module" async="">import{h as t,c as a}from"/assets/iles.5d187450.js";import{c as e}from"/assets/PostHead.78b113a4.js";import"/assets/vendor-vue.196b627b.js";import"/assets/vite.5ce4fca4.js";import"/assets/VisitorCount.8ea9f53a.js";import"/assets/site.0440d0dc.js";t(a,e,"ile-3",{class:"my-12",href:"/post/2023/07/cnatda-6",filename:"src/pages/post/2023/07/cnatda-6.mdx",frontmatter:{title:"CNATDA 第六章学习笔记",date:new Date(168905167e4),image:"/images/2023/07/cnatda-6.png",tags:["cnatda","学习笔记"],lastUpdated:new Date(168941271e4),published:new Date(168941271e4),visitor:76,description:"《Computer Networking: A Top-Down Approach (8th Edition)》第六章 “The Link Layer and LANs” 的学习笔记。"}},{});
</script><section class="article-style" itemprop="articleBody">
<p><span class="mojikumi-line-start">《</span>Computer Networking: A Top-Down Approach (8th Edition)<span class="mojikumi-line-end">》</span>第六章 <span class="mojikumi">“</span>The Link Layer and LANs<span class="mojikumi">”</span> 的学习笔记<span class="mojikumi-line-end">。</span></p>

<h2 id="introduction-to-the-link-layer" class="heading"><a href="#introduction-to-the-link-layer" class="heading-anchor" aria-label="章节： Introduction to the Link Layer" tabindex="-1"></a><span>Introduction to the Link Layer</span></h2>
<p>link layer 的主要功能是将 datagram 从一个 node 传输到另一个 node<span class="mojikumi-line-end">，</span>还可以提供下列 service<span class="mojikumi-line-end">：</span></p>
<ul>
<li>framing: 将 network-layer datagram 封装在 link-layer frame 中进行传输<span class="mojikumi-line-end">。</span></li>
<li>link access: 通过 medium access control (MAC) protocol 控制 frame 在 link 上如何传输<span class="mojikumi-line-end">。</span>这对于 point-to-point link 来说是简单的<span class="mojikumi-line-end">，</span>但在 broadcast link 中会遇到 multiple access problem<span class="mojikumi-line-end">，</span>需要 MAC protocol 来进行协调<span class="mojikumi-line-end">。</span></li>
<li>reliable delivery: 通过与 TCP 类似的方式<span class="mojikumi-line-start">（</span>acknowledgement<span class="mojikumi-line-end">、</span>retransmission<span class="mojikumi-line-end">）</span>来保证单个 link 上的 reliable delivery<span class="mojikumi-line-end">。</span>这在出错率较高时可以避免单个 link 的传输错误导致 end-to-end retransmission<span class="mojikumi-line-end">，</span>而在出错率较低时会造成不必要的 overhead<span class="mojikumi-line-end">，</span>所以一般是出错率较高的 wireless link 才会提供 reliable delivery<span class="mojikumi-line-end">。</span></li>
<li>error detection and correction</li>
</ul>
<p>在 host 中<span class="mojikumi-line-end">，</span>link layer 一般实现于外接的 network adapter (network interface controller, NIC) 中<span class="mojikumi-line-end">，</span>由硬件实现<span class="mojikumi-line-end">。</span>host 中还会有软件用来连接 link layer 和 network layer<span class="mojikumi-line-end">。</span></p>
<h2 id="error-detection-and-correction-techniques" class="heading"><a href="#error-detection-and-correction-techniques" class="heading-anchor" aria-label="章节： Error-Detection and -Correction Techniques" tabindex="-1"></a><span>Error-Detection and -Correction Techniques</span></h2>
<p>参见 <a href="/post/2023/01/ddpp-2#codes-for-detecting-and-correcting-errors">DDPP 第二章的相关内容</a><span class="mojikumi-line-end">。</span></p>
<h2 id="multiple-access-links-and-protocols" class="heading"><a href="#multiple-access-links-and-protocols" class="heading-anchor" aria-label="章节： Multiple Access Links and Protocols" tabindex="-1"></a><span>Multiple Access Links and Protocols</span></h2>
<p>在 broadcast link 中<span class="mojikumi-line-end">，</span>同时只能有一方发送信息<span class="mojikumi-line-end">。</span>如果多方同时发送<span class="mojikumi-line-end">，</span>则会产生 collision<span class="mojikumi-line-end">，</span>每一方发送的信息都会丢失<span class="mojikumi-line-end">。</span>为了解决 multiple access problem<span class="mojikumi-line-end">，</span>需要使用 multiple access protocol 来进行协调<span class="mojikumi-line-end">。</span></p>
<p>一个理想的 multiple access protocol 能做到<span class="mojikumi-line-end">：</span></p>
<ul>
<li>只有一方发送时<span class="mojikumi-line-end">，</span>完全利用带宽</li>
<li>多方同时发送时<span class="mojikumi-line-end">，</span>均分全部的带宽</li>
<li>decentralized<span class="mojikumi-line-end">，</span>没有 single point of failure</li>
<li>simple, inexpensive to implement</li>
</ul>
<p>multiple access protocol 有非常多<span class="mojikumi-line-end">，</span>总体可以分为三大类<span class="mojikumi-line-end">：</span>channel partitioning protocols<span class="mojikumi-line-end">、</span>ramdom access protocols<span class="mojikumi-line-end">、</span>taking-turns protocols<span class="mojikumi-line-end">。</span></p>
<h3 id="channel-partitioning-protocols" class="heading"><a href="#channel-partitioning-protocols" class="heading-anchor" aria-label="章节： Channel Partitioning Protocols" tabindex="-1"></a><span>Channel Partitioning Protocols</span></h3>
<p>将单个 channel 分成多个 channel<span class="mojikumi-line-end">。</span></p>
<p>TDM (time-division multiplexing) 将时间分成 time frames<span class="mojikumi-line-end">，</span>将每个 time frame 分成 time slots<span class="mojikumi-line-end">，</span>将每个 time frame 内的各个 time slot 分配给各个 node<span class="mojikumi-line-end">。</span></p>
<p>FDM (frequency-division multiplexing) 利用不同的频率作为不同的 channel<span class="mojikumi-line-end">。</span></p>
<p>TDM 和 FDM 都能完全避免 collision<span class="mojikumi-line-end">，</span>但在只有一方发送时效率非常低<span class="mojikumi-line-end">：</span>唯一的 active sender 不能使用分配给其他 node 的 channel<span class="mojikumi-line-end">。</span></p>
<p>CDMA (code-division multiple access) 通过给每个 node 分配一个 code 来允许各方同时发送<span class="mojikumi-line-end">，</span>在 wireless channel 中较为常用<span class="mojikumi-line-end">。</span></p>
<h3 id="random-access-protocols" class="heading"><a href="#random-access-protocols" class="heading-anchor" aria-label="章节： Random Access Protocols" tabindex="-1"></a><span>Random Access Protocols</span></h3>
<p>通过随机的等待时间来在 collision 发生后错开发送时机<span class="mojikumi-line-end">。</span></p>
<h4 id="aloha" class="heading"><a href="#aloha" class="heading-anchor" aria-label="章节： ALOHA" tabindex="-1"></a><span>ALOHA</span></h4>
<p>假设传输每个 frame 的用时相同<span class="mojikumi-line-end">，</span>将时间划分为长度为这一用时的 slots<span class="mojikumi-line-end">，</span>所有 node 是同步的<span class="mojikumi-line-end">，</span>只在 slot 的开头发送信息<span class="mojikumi-line-end">，</span>发生 collision 后能在这一 slot 内检测到<span class="mojikumi-line-end">。</span></p>
<p>slotted ALOHA 在没有 collision 时在每个 slot 开头发送 frame<span class="mojikumi-line-end">，</span>在发生了 collision 后在每个 slot 开头以 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> 的概率进行 retransmission 直到发送成功为止<span class="mojikumi-line-end">。</span></p>
<p>如果一个 slot 中没有任何一方发送信息或者有多方同时发送信息则这个 slot 就浪费掉了<span class="mojikumi-line-end">，</span>只有恰好有一方发送信息的 slot 才是 successful slot<span class="mojikumi-line-end">。</span></p>
<p>其 efficiency 就是 successful slot 的占比<span class="mojikumi-line-end">，</span>有 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 个 active slot 时<span class="mojikumi-line-end">，</span>efficiency 为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">np(1-p)^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>在 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 很大时<span class="mojikumi-line-end">，</span>其最大值是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>e</mi><mo>≈</mo><mn>0.37</mn></mrow><annotation encoding="application/x-tex">1/e \approx 0.37</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.37</span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<p>pure ALOHA 不进行 time slot 的划分<span class="mojikumi-line-end">，</span>或者说是每一方的 time slot 不是同步的<span class="mojikumi-line-end">，</span>这样更加去中心化<span class="mojikumi-line-end">，</span>但 efficiency 只有 slotted ALOHA 的一半<span class="mojikumi-line-end">。</span></p>
<h4 id="csmacd" class="heading"><a href="#csmacd" class="heading-anchor" aria-label="章节： CSMA(/CD)" tabindex="-1"></a><span>CSMA(/CD)</span></h4>
<p>CSMA (carrier sense multiple access) 基于 <span class="mojikumi">“</span>listen before speaking<span class="mojikumi">”</span> 的原则<span class="mojikumi-line-end">，</span>进行 <i>carrier sensing</i><span class="mojikumi-line-end">。</span></p>
<p>如果再加上 <span class="mojikumi">“</span>If someone else begins talking at the same time, stop talking<span class="mojikumi">”</span> 的原则<span class="mojikumi-line-end">，</span>即 <i>collision detection</i><span class="mojikumi-line-end">，</span>则是 CSMA/CD<span class="mojikumi-line-end">。</span></p>
<p>在理想状态下<span class="mojikumi-line-end">，</span>carrier sensing 可以完全消除 collision<span class="mojikumi-line-end">。</span>但实际上<span class="mojikumi-line-end">，</span>由于 propagation delay<span class="mojikumi-line-end">，</span>一方开始发送到另一方收到需要时间<span class="mojikumi-line-end">，</span>在这段时间内可能另一方也发送了信息<span class="mojikumi-line-end">。</span></p>
<p>在 CSMA/CD 中<span class="mojikumi-line-end">，</span>遇到 collision 需要等待一段时间再 retransmit<span class="mojikumi-line-end">，</span>等待时间通常由 binary exponential backoff 得到<span class="mojikumi-line-end">：</span>在一个范围内随机选择等待时间<span class="mojikumi-line-end">，</span>每多 retransmit 一次这个范围就加倍<span class="mojikumi-line-end">。</span>在 Ethernet 中<span class="mojikumi-line-end">，</span>第 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 次 retransmission 会在 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">0, 1, \ldots, 2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span> 中随机选择一个数 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="mojikumi-line-end">，</span>然后等待传输 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>512</mn><mo>⋅</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">512 \cdot k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">512</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> bits 的用时<span class="mojikumi-line-end">，</span>而 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 超过 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></span> 时也取 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></span><span class="mojikumi-line-end">。</span>这里 retransmission 次数是每个 frame 分别计算的<span class="mojikumi-line-end">，</span>新的 frame 会从 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> 开始<span class="mojikumi-line-end">。</span></p>
<p>CSMA/CD 的 efficiency 约为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mn>5</mn><msub><mi>d</mi><mrow><mi mathvariant="normal">p</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msub><mi mathvariant="normal">/</mi><msub><mi>d</mi><mrow><mi mathvariant="normal">t</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">s</mi></mrow></msub></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{1}{1 + 5 d_{\mathrm{prop}} / d_{\mathrm{trans}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2935em;vertical-align:-0.9721em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">5</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">prop</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">trans</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>其中 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi mathvariant="normal">p</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{\mathrm{prop}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">prop</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 表示 propagation delay<span class="mojikumi-line-end">，</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi mathvariant="normal">t</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{\mathrm{trans}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">trans</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 表示一个 maximum-size frame 的传输用时<span class="mojikumi-line-end">。</span></p>
<h3 id="taking-turns-protocols" class="heading"><a href="#taking-turns-protocols" class="heading-anchor" aria-label="章节： Taking-Turns Protocols" tabindex="-1"></a><span>Taking-Turns Protocols</span></h3>
<p>轮流让各方发送信息<span class="mojikumi-line-end">，</span>如果一方不想发送则交给下一位<span class="mojikumi-line-end">。</span></p>
<p>在 polling protocol 中<span class="mojikumi-line-end">，</span>设有一个 master node<span class="mojikumi-line-end">，</span>它轮流 poll 每个 node 来让它发送至多若干个 frame<span class="mojikumi-line-end">，</span>发完再 poll 下一个<span class="mojikumi-line-end">。</span>polling protocol 是 centralized 的<span class="mojikumi-line-end">，</span>有 single point of failure<span class="mojikumi-line-end">；</span>并且<span class="mojikumi-line-end">，</span>对 inactive node 的 poll 会造成浪费<span class="mojikumi-line-end">。</span></p>
<p>token-passing protocol 是 decentralized 的<span class="mojikumi-line-end">，</span>有一个 token 在各个 node 之间环状地传递<span class="mojikumi-line-end">，</span>拿着 token 就可以发送至多若干个 frame<span class="mojikumi-line-end">，</span>发送完<span class="mojikumi-line-start">（</span>或者不想发送<span class="mojikumi-line-end">）</span>就把 token 交给下一个<span class="mojikumi-line-end">。</span>token-passing protocol 在有任何一个 node 出错时就会卡住<span class="mojikumi-line-end">，</span>需要采取一些 recovery procedure<span class="mojikumi-line-end">。</span></p>
<h3 id="docsis-the-link-layer-protocol-for-cable-internet-access" class="heading"><a href="#docsis-the-link-layer-protocol-for-cable-internet-access" class="heading-anchor" aria-label="章节： DOCSIS: The Link-Layer Protocol for Cable Internet Access" tabindex="-1"></a><span>DOCSIS: The Link-Layer Protocol for Cable Internet Access</span></h3>
<p>DOCSIS 用于 cable access network<span class="mojikumi-line-end">，</span>将 residential cable modems 连接到 cable modem termination system (CMTS)<span class="mojikumi-line-end">。</span>它同时用到了多种 multiple access protocol<span class="mojikumi-line-end">，</span>是一个很好的例子<span class="mojikumi-line-end">。</span></p>
<p>使用 FDM 分为 downstream 和 upstream 两个 channel<span class="mojikumi-line-end">，</span>其中 downstream channel 由 CMTS 向 cable modem 发送<span class="mojikumi-line-end">，</span>sender 唯一<span class="mojikumi-line-end">，</span>比较简单<span class="mojikumi-line-end">。</span></p>
<p>upstream channel 被分成了若干 mini-slots<span class="mojikumi-line-start">（</span>与 TDM 类似<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>而这些 mini-slots 是由 CMTS 动态分配的<span class="mojikumi-line-end">，</span>需要由 cable modem 发送 mini-slot-request frame<span class="mojikumi-line-end">，</span>这些 request 在一些特殊的 mini-slots 以 random access 的方式发送<span class="mojikumi-line-end">，</span>通过是否收到来自 CMTS 的 mini-slot 分配来判断 request 是否成功发送<span class="mojikumi-line-end">，</span>使用 binary exponential backoff<span class="mojikumi-line-end">。</span></p>
<h2 id="switched-local-area-networks" class="heading"><a href="#switched-local-area-networks" class="heading-anchor" aria-label="章节： Switched Local Area Networks" tabindex="-1"></a><span>Switched Local Area Networks</span></h2>
<h3 id="link-layer-addressing" class="heading"><a href="#link-layer-addressing" class="heading-anchor" aria-label="章节： Link-Layer Addressing" tabindex="-1"></a><span>Link-Layer Addressing</span></h3>
<p>host 和 router 的每个 interface (adapter) 都有一个 link-layer address<span class="mojikumi-line-end">：</span>MAC address (physical address / LAN address)<span class="mojikumi-line-end">。</span></p>
<p>MAC address 的长度为 6 bytes<span class="mojikumi-line-end">，</span>与 IP address 不同<span class="mojikumi-line-end">，</span>物理上的每个 interface 的 MAC address 是固定的<span class="mojikumi-line-end">，</span>不会因移动而变化<span class="mojikumi-line-end">。</span>MAC address 由 IEEE 管理<span class="mojikumi-line-end">，</span>在全球范围内是唯一的<span class="mojikumi-line-end">。</span></p>
<p>如果使用 broadcast link<span class="mojikumi-line-end">，</span>多个 interface 都会收到同样的 frame<span class="mojikumi-line-end">。</span>只有 MAC address 符合时才会接收<span class="mojikumi-line-end">，</span>否则会丢弃<span class="mojikumi-line-start">（</span>不会传递给 network layer<span class="mojikumi">）</span><span class="mojikumi-line-end">。</span></p>
<p>MAC broadcast address 是 <code>ff<wbr>:<wbr>ff<wbr>:<wbr>ff<wbr>:<wbr>ff<wbr>:<wbr>ff<wbr>:<wbr>ff</code><span class="mojikumi-line-end">。</span></p>
<h3 id="address-resolution-protocol" class="heading"><a href="#address-resolution-protocol" class="heading-anchor" aria-label="章节： Address Resolution Protocol" tabindex="-1"></a><span>Address Resolution Protocol</span></h3>
<p>ARP 用来将 subnet 内部的 IP address 翻译为 MAC address<span class="mojikumi-line-end">。</span></p>
<p>每个 host / router 会维护一张 ARP table<span class="mojikumi-line-end">，</span>用来记录 IP address 和 MAC address 的对应关系<span class="mojikumi-line-end">。</span>表项有过期时间<span class="mojikumi-line-end">，</span>到期自动删除<span class="mojikumi-line-end">。</span></p>
<p>如果在 ARP table 内没有查询到需要的 IP address<span class="mojikumi-line-end">，</span>则会发送一个 ARP query<span class="mojikumi-line-start">（</span>一个 broadcast packet<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>具有这个 IP address 的 interface 在收到 ARP query 后会回复 ARP response<span class="mojikumi-line-start">（</span>一般不是 broadcast<span class="mojikumi-line-end">，</span>因为此时 broadcast 可能造成浪费<span class="mojikumi-line-end">；</span>但是若采用 broadcast 也有助于发现 address conflict<sup><a href="#user-content-fn-arp-response-broadcast" id="user-content-fnref-arp-response-broadcast" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup><span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>收到 ARP response 后更新 ARP table<span class="mojikumi-line-end">。</span>通过这样的机制<span class="mojikumi-line-end">，</span>ARP table 可以自动建立<span class="mojikumi-line-end">，</span>不需要任何手动配置<span class="mojikumi-line-end">。</span></p>
<p>如果要向 subnet 外发送信息<span class="mojikumi-line-end">，</span>则需要向 gateway (first-hop router) 发送信息<span class="mojikumi-line-end">，</span>所以需要查询的是 gateway 的 MAC address<span class="mojikumi-line-end">。</span></p>
<h3 id="ethernet" class="heading"><a href="#ethernet" class="heading-anchor" aria-label="章节： Ethernet" tabindex="-1"></a><span>Ethernet</span></h3>
<p>Ethernet 是现在最常用的 wired LAN<span class="mojikumi-line-end">。</span></p>
<p>Ethernet 通常使用 hub 或 switch 来连接各个 interface<span class="mojikumi-line-end">。</span>hub 会将收到的每个 bit 转发给其他所有 interface<span class="mojikumi-line-end">，</span>可能产生 collision<span class="mojikumi-line-end">。</span>switch 则根据 MAC address 进行转发<span class="mojikumi-line-end">，</span>不会产生 collision<span class="mojikumi-line-end">。</span></p>
<p>Ethernet frame 包含<span class="mojikumi-line-end">：</span></p>
<ol>
<li>preamble (8 bytes): 31 个 <span class="mojikumi">“</span>10<span class="mojikumi">”</span> 和 1 个 <span class="mojikumi">“</span>11<span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>用来标识 frame 的开头<span class="mojikumi-line-end">，</span>并同步时钟<span class="mojikumi-line-end">。</span></li>
<li>destination MAC address (6 bytes)</li>
<li>source MAC address (6 bytes)</li>
<li>type (2 bytes): upper layer protocol<span class="mojikumi-line-end">，</span>例如 IP<span class="mojikumi-line-end">、</span>ARP<span class="mojikumi-line-end">。</span></li>
<li>data (46 ~ 1500 bytes): 如果需要传送的数据不足 46 bytes 需要进行填充<span class="mojikumi-line-end">。</span>通过 type 以及 data 中的 header<span class="mojikumi-line-start">（</span>例如 IP header<span class="mojikumi-line-end">）</span>来判断 data 的长度<span class="mojikumi-line-end">。</span></li>
<li>CRC checksum (4 bytes)</li>
</ol>
<p>Ethernet 是 connectionless<span class="mojikumi-line-end">、</span>unreliable 的<span class="mojikumi-line-end">。</span></p>
<p>Ethernet 既是 link-layer protocol<span class="mojikumi-line-end">，</span>也是 physical layer protocol<span class="mojikumi-line-end">，</span>而且实际上是一类而非一个 protocol<span class="mojikumi-line-end">。</span>例如<span class="mojikumi-line-end">，</span>10BASE-T<span class="mojikumi-line-end">、</span>10BASE-2<span class="mojikumi-line-end">、</span>100BASE-T<span class="mojikumi-line-end">、</span>1000BASE-LX<span class="mojikumi-line-end">、</span>10GBASE-T<span class="mojikumi-line-end">、</span>40GBASE-T 是不同的 Ethernet technology<span class="mojikumi-line-end">。</span>开头表示 10Mbps<span class="mojikumi-line-end">、</span>100Mbps<span class="mojikumi-line-end">、</span>1Gbps<span class="mojikumi-line-end">、</span>10Gbps<span class="mojikumi-line-end">、</span>40Gbps 的传输速度<span class="mojikumi-line-end">，</span>BASE 表示 media 只传送 Ethernet traffic<span class="mojikumi-line-end">，</span>最后是不同的 physical media<span class="mojikumi-line-end">。</span></p>
<h3 id="link-layer-switches" class="heading"><a href="#link-layer-switches" class="heading-anchor" aria-label="章节： Link-Layer Switches" tabindex="-1"></a><span>Link-Layer Switches</span></h3>
<p>switch 和 router 的功能类似<span class="mojikumi-line-end">，</span>但它工作于 link layer<span class="mojikumi-line-end">，</span>而且是 <i>transparent</i> 的<span class="mojikumi-line-end">，</span>其他设备感受不到 switch 的存在<span class="mojikumi-line-end">，</span>也不需要手动进行任何配置<span class="mojikumi-line-end">。</span></p>
<p>switch 的每个 interface 都有一个 output buffer<span class="mojikumi-line-end">，</span>与 router 类似<span class="mojikumi-line-end">。</span></p>
<p>switch 维护了一张 switch table<span class="mojikumi-line-end">，</span>表示每个 MAC address 对应的 switch 的 interface<span class="mojikumi-line-end">，</span>以及表项的过期时间<span class="mojikumi-line-end">。</span></p>
<p>对于从 interface <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span> 收到的 destination MAC address 为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> 的 frame<span class="mojikumi-line-end">：</span></p>
<ol>
<li>若 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> 不在 switch table 中<span class="mojikumi-line-end">，</span>broadcast<span class="mojikumi-line-end">；</span></li>
<li>若 switch table 中 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> 对应 interface <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span class="mojikumi-line-end">，</span>discard<span class="mojikumi-line-end">；</span></li>
<li>若 switch table 中 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> 对应 interface <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo mathvariant="normal">≠</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">y \ne x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span class="mojikumi-line-end">，</span>forward to <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="mojikumi-line-end">。</span></li>
</ol>
<p>switch 是 <i>self-learning</i> 的<span class="mojikumi-line-end">：</span>如果在 interface <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span> 收到 source MAC address 为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> 的 frame<span class="mojikumi-line-end">，</span>则会在 switch table 中记录 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> 到 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span> 的对应关系<span class="mojikumi-line-end">。</span></p>
<p>相对于 hub<span class="mojikumi-line-end">，</span>switch 的优点有<span class="mojikumi-line-end">：</span></p>
<ul>
<li>没有 collision<span class="mojikumi-line-end">，</span>可以优化性能<span class="mojikumi-line-end">。</span></li>
<li>可以将不同 technology 的 link (media) 连接在一起<span class="mojikumi-line-end">。</span></li>
<li>switch 还提供了一些 network management 功能<span class="mojikumi-line-end">，</span>例如自动检测异常的 adapter 并禁用<span class="mojikumi-line-end">、</span>对流量进行统计<span class="mojikumi-line-end">。</span></li>
</ul>
<p>switch 减少了 broadcast<span class="mojikumi-line-end">，</span>在提升性能的同时也增强了安全性<span class="mojikumi-line-end">。</span>但是 attacker 可以设法用 bogus entries 将 switch table 填满<span class="mojikumi-line-end">，</span>使得大部分 frame 被 broadcast<span class="mojikumi-line-end">，</span>这被称作 <i>switch poisoning</i><span class="mojikumi-line-end">。</span></p>
<p>switch 和 router 都可以将多个 host 连接在一起<span class="mojikumi-line-end">：</span></p>
<ul>
<li>switch 不需要手动配置<span class="mojikumi-line-end">；</span>性能一般更好<span class="mojikumi-line-end">。</span>只能连成生成树<span class="mojikumi-line-end">，</span>不能连出环<span class="mojikumi-line-end">；</span>如果同一个 subnet 内有太多 host 可能影响性能<span class="mojikumi-line-end">；</span>可能遭受 broadcast storm<span class="mojikumi-line-end">。</span></li>
<li>router 需要手动配置<span class="mojikumi-line-end">；</span>性能可能略差<span class="mojikumi-line-end">。</span>可以随便连<span class="mojikumi-line-end">，</span>从而可以提供多条 route 供 routing protocol 选择<span class="mojikumi-line-end">；</span>提供 firewall 来防止遭受 broadcast storm<span class="mojikumi-line-end">。</span></li>
</ul>
<p>一般来说多至数百个 host 时用 switch 即可<span class="mojikumi-line-end">，</span>有更多 host 的话则需要适当使用 router 来进行中转<span class="mojikumi-line-end">。</span></p>
<h3 id="virtual-local-area-networks-vlans" class="heading"><a href="#virtual-local-area-networks-vlans" class="heading-anchor" aria-label="章节： Virtual Local Area Networks (VLANs)" tabindex="-1"></a><span>Virtual Local Area Networks (VLANs)</span></h3>
<p>有时<span class="mojikumi-line-end">，</span>物理上的 switch 会对网络管理造成一些限制<span class="mojikumi-line-end">：</span></p>
<ul>
<li>一个 switch 一般有很多 port<span class="mojikumi-line-end">，</span>但希望设置的 subnet 大小<span class="mojikumi-line-start">（</span>为了安全等原因想分成不同的 subnet<span class="mojikumi-line-end">）</span>可能和 port 数量不符<span class="mojikumi-line-end">。</span></li>
<li>如果要在不同 subnet 之间移动 host<span class="mojikumi-line-end">，</span>需要更改物理连线<span class="mojikumi-line-end">。</span></li>
</ul>
<p>VLAN 可以用来解决这些问题<span class="mojikumi-line-end">。</span></p>
<p>VLAN 通过软件控制一个 switch 上哪些 port 属于同一个 subnet<span class="mojikumi-line-end">。</span>为了将两个 subnet 相连<span class="mojikumi-line-end">，</span>需要将它们连到同一个 router 上<span class="mojikumi-line-end">，</span>为了方便这样操作<span class="mojikumi-line-end">，</span>支持 VLAN 的 switch 往往自带一个 router<span class="mojikumi-line-end">。</span></p>
<p>可以使用 VLAN trunking 来将多个 switch 上的 port 合并为一个 VLAN<span class="mojikumi-line-end">：</span>每个 switch 上有一个 trunk port<span class="mojikumi-line-end">，</span>将需要 trunking 的 switch 的 trunk port 相连<span class="mojikumi-line-end">，</span>发送到 VLAN 的 frame 会被 forward 到 trunk port<span class="mojikumi-line-end">。</span>trunking 时所属 VLAN 的识别通过扩展的 Ethernet frame format 802.1Q 来实现<span class="mojikumi-line-end">，</span>在 header 中添加 VLAN tag 来表示所属的 VLAN<span class="mojikumi-line-end">。</span></p>
<p>除了基于 switch port 的 VLAN<span class="mojikumi-line-end">，</span>还有基于 MAC address 的 VLAN<span class="mojikumi-line-end">，</span>以及基于 network-layer protocol 的 VLAN<span class="mojikumi-line-end">。</span></p>
<h2 id="multiprotocol-label-switching-mpls" class="heading"><a href="#multiprotocol-label-switching-mpls" class="heading-anchor" aria-label="章节： Multiprotocol Label Switching (MPLS)" tabindex="-1"></a><span>Multiprotocol Label Switching (MPLS)</span></h2>
<p>MPLS 基于 fixed-length label 进行 switch<span class="mojikumi-line-end">，</span>在 link-layer header 和 IP header 之间添加 MPLS header<span class="mojikumi-line-end">，</span>需要在支持 MPLS 的 router 之间进行传输<span class="mojikumi-line-end">，</span>switch 时不需要管 IP header<span class="mojikumi-line-end">。</span></p>
<p>MPLS 有 switch 速度快<span class="mojikumi-line-end">、</span>便于进行 traffic management 等优点<span class="mojikumi-line-end">。</span></p>
<p><span class="mojikumi-line-start">（</span>书中对它的介绍过于简略<span class="mojikumi-line-end">，</span>感觉说了和没说差不多<span class="mojikumi-line-end">，</span>我就在此基础上再简略一点（<span class="mojikumi">（</span></p>
<h2 id="data-center-networking" class="heading"><a href="#data-center-networking" class="heading-anchor" aria-label="章节： Data Center Networking" tabindex="-1"></a><span>Data Center Networking</span></h2>
<p>很多大型互联网公司都有由数万台 server 组成的 data center<span class="mojikumi-line-end">。</span>data center 对外接入 Internet<span class="mojikumi-line-end">，</span>而其内部又有一套 data center network<span class="mojikumi-line-end">。</span></p>
<p>data center 主要提供三部分的功能<span class="mojikumi-line-end">：</span>向终端用户 serve content<span class="mojikumi-line-end">，</span>进行 distributed computation<span class="mojikumi-line-end">，</span>对外提供 cloud computing 服务<span class="mojikumi-line-end">。</span></p>
<p>data center 中的 host 被称作 <i>blade</i><span class="mojikumi-line-end">，</span>一般数十个 blade 会放在一起组成一个 <i>rack</i><span class="mojikumi-line-end">，</span>连到同一个 switch<span class="mojikumi-line-start">（</span>top of rack, TOR switch<span class="mojikumi-line-end">）</span>上<span class="mojikumi-line-end">，</span>而整个 data center 通过多级 router 和 switch 构成一个 hierarchy<span class="mojikumi-line-end">，</span>其中 access router 的下方可以分为多个 VLAN<span class="mojikumi-line-end">。</span>如下图所示<span class="mojikumi-line-end">：</span><sup><a href="#user-content-fn-fig-6.30" id="user-content-fnref-fig-6.30" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-6.30.2bc76e92.webp"><img srcset="/assets/cnatda-fig-6.30.93c4cef6.png" loading="lazy" src="/assets/cnatda-fig-6.30.93c4cef6.png" width="1643" height="996" alt="A data center network with a hierarchical topology"></picture></p>
<p>在 data center 中<span class="mojikumi-line-end">，</span>一个 application 通常由很多 host 来提供同样的服务<span class="mojikumi-line-end">，</span>而对外只提供一个 IP address<span class="mojikumi-line-end">。</span>load balancer 通过类似 NAT 的方式<span class="mojikumi-line-end">，</span>将 request 均衡地分配给各个 host 进行处理<span class="mojikumi-line-end">。</span></p>
<p>树状的网络结构使得一个 data center 可以有数万台 server<span class="mojikumi-line-end">，</span>但 host-to-host capacity 还是会受限<span class="mojikumi-line-end">，</span>尤其是两个 host 的 LCA 位于较高层级时<span class="mojikumi-line-end">。</span>为了解决这一问题<span class="mojikumi-line-end">，</span>可以<span class="mojikumi-line-end">：</span></p>
<ul>
<li>使用更高速的 router 和 switch<span class="mojikumi-line-end">，</span>但这会大大增加开销<span class="mojikumi-line-end">。</span></li>
<li>尽量将需要互相通信的 host 放在较低的同一棵子树内<span class="mojikumi-line-end">，</span>但这不一定做得到<span class="mojikumi-line-start">（</span>可能大量 host 都需要互相通信<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>也会影响 host 位置的灵活性<span class="mojikumi-line-end">。</span></li>
<li>增加 interconnection 的数量<span class="mojikumi-line-end">，</span>从而增加 host-to-host 的路径数量<span class="mojikumi-line-end">，</span>在优化性能的同时也可以提升系统的可靠性<span class="mojikumi-line-end">。</span>例如<span class="mojikumi-line-end">，</span>每个 TOR switch 连接到 8 个 tier-2 switch<span class="mojikumi-line-end">，</span>每个 tier-2 switch 连接到 16 个 tier-1 switch…… 这也被称作 <i>Clos network</i><span class="mojikumi-line-end">。</span></li>
</ul>
<p>data center 通常使用 SDN 来对网络进行集中管理<span class="mojikumi-line-end">。</span></p>
<p>为了支持 cloud computing<span class="mojikumi-line-end">、</span>更方便地进行管理<span class="mojikumi-line-end">，</span>通常会使用 virtual machine (VM) 等技术将 software 和 hardware 解耦<span class="mojikumi-line-end">。</span>为了让 VM 能方便地在不同 host 之间移动<span class="mojikumi-line-end">，</span>可以将 ARP 的 broadcast 机制改为类似于 DNS 的机制<span class="mojikumi-line-end">，</span>存储 VM 的 IP address 到 TOR switch 的映射关系<span class="mojikumi-line-end">。</span></p>
<p>data center network 通常具有极低的延迟以及较小的 buffer size<span class="mojikumi-line-end">，</span>而 congestion control 需要快速作出反应<span class="mojikumi-line-end">，</span>传统的 TCP 不再适用<span class="mojikumi-line-end">，</span>通常会使用为 data center 设计的 TCP 等方式来进行优化<span class="mojikumi-line-end">。</span></p>
<p>modular data center (MDC) 是一个内有至多数千个 host 的 container<span class="mojikumi-line-end">，</span>用来作为 data center 的组成部分<span class="mojikumi-line-end">。</span>在 MDC 的部分 component 坏掉时<span class="mojikumi-line-end">，</span>MDC 可以继续以 degraded performance 工作<span class="mojikumi-line-end">，</span>而在坏掉的 component 过多时则会报废<span class="mojikumi-line-end">。</span></p>
<p>很多公司会自己定制 data center 中的各个组成部分<span class="mojikumi-line-end">，</span>包括 network adapter<span class="mojikumi-line-end">、</span>switch<span class="mojikumi-line-end">、</span>router<span class="mojikumi-line-end">、</span>software<span class="mojikumi-line-end">、</span>networking protocol<span class="mojikumi-line-end">。</span></p>
<p>Amazon 通过 <span class="mojikumi">“</span>availability zone<span class="mojikumi">”</span> 提高了服务的可靠性<span class="mojikumi-line-end">，</span>即将 data center 在邻近但不同的地理位置上进行复刻<span class="mojikumi-line-end">，</span>从而提供 fault tolerance<span class="mojikumi-line-end">，</span>而地理位置上的邻近保证了 low latency<span class="mojikumi-line-end">，</span>便于同步<span class="mojikumi-line-end">。</span></p>
<section data-footnotes="" class="footnotes"><h2 class="sr-only" id="footnote-label">Footnotes</h2>
<ol>
<li id="user-content-fn-arp-response-broadcast">
<p><a href="https://networkengineering.stackexchange.com/questions/7136/arp-replies-can-they-be-broadcast">ethernet - ARP Replies can they be Broadcast - Network Engineering Stack Exchange</a> <a href="#user-content-fnref-arp-response-broadcast" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content">↩</a></p>
</li>
<li id="user-content-fn-fig-6.30">
<p>p506, Figure 6.30: A data center network with a hierarchical topology <a href="#user-content-fnref-fig-6.30" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content">↩</a></p>
</li>
</ol>
</section></section><div class="article-style my-9"><hr></div><footer><div class="my-6 b-l-6 b-gray-4 bg-area p-6 shadow dark:b-gray-11" itemprop="copyrightNotice"><ul class="flex flex-col gap-1"><li class="flex gap-1"><span class="shrink-0">文章作者:</span><a href="https://github.com/ouuan" rel="author">ouuan</a></li><li class="flex gap-1"><span class="shrink-0">原文链接:</span><a href="https://ouuan.moe/post/2023/07/cnatda-6" rel="canonical" class="break-all">https://ouuan.moe/post/2023/07/cnatda-6</a></li><li class="flex gap-1"><span class="shrink-0">许可协议:</span><span> 本文采用 <span class="article-style"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh" class="font-sans" itemprop="license">CC BY-SA 4.0</a></span> 许可协议进行授权，未满足 <span class="underline decoration-dotted" title="简而言之，转载时必须标明出处（本文的链接），标明是转载而非原创，标明作了哪些修改，并使用相同的许可协议，但无需私信征求许可">许可协议要求</span> 不得转载。 </span></li></ul></div></footer></article><div class="my-6 print:hidden" itemprop="comment" itemscope="" itemtype="https://schema.org/Comment"><ile-root id="ile-4"></ile-root><script></script><script type="module" async="">import{h as r,c as m}from"/assets/iles.5d187450.js";import{_ as o}from"/assets/GiscusCommentsInner.244b88fd.js";import"/assets/vendor-vue.196b627b.js";import"/assets/vite.5ce4fca4.js";import"/assets/useTheme.2f87a670.js";import"/assets/site.0440d0dc.js";r(m,o,"ile-4",{term:"CNATDA 第六章学习笔记",lang:void 0},{});
</script></div><nav class="my-6 flex justify-between gap-6 print:hidden lg:text-justify"><div class="flex flex-1"><a class="flex items-center gap-1 hover:text-hover" href="/post/2023/07/cnatda-5"><span class="i-mdi-chevron-left"></span><span class="sr-only">上一篇</span><span class="break-anywhere">CNATDA 第五章学习笔记</span></a></div><div class="flex flex-1 justify-end"><a class="flex flex-row-reverse items-center gap-1 hover:text-hover" href="/post/2023/07/cnatda-8"><span class="i-mdi-chevron-right"></span><span class="sr-only">下一篇</span><span class="break-anywhere">CNATDA 第八章学习笔记</span></a></div></nav></div><ile-root id="ile-5"><div class="flex print:hidden"><aside style="max-height:calc(100vh - 10rem);" id="__toc" class="sticky top-16 m-4 hidden w-72 rd-2 bg-card py-6 shadow xl:block 2xl:w-84 3xl:w-96" aria-label="文章目录" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPSideBar"><div class="mb-3 flex flex-wrap items-center justify-between gap-2 pl-8 pr-4"><div class="flex items-center"><h2 class="text-xl font-bold"> 文章目录 </h2><button id="__toc-close" class="flex items-center px-1 text-xl" title="关闭目录" aria-controls="__toc" aria-expanded="true"><span class="i-mdi-close"></span></button></div><div><label class="ml-auto flex items-center gap-1"><span>展开全部</span><input type="checkbox"></label></div></div><div style="max-height:calc(100% - 2rem);" class="overflow-auto overscroll-contain pl-8 pr-4"><ol data-v-c5806953=""><li id="__toc-item-introduction-to-the-link-layer" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#introduction-to-the-link-layer" data-v-c5806953=""><span data-v-c5806953="">Introduction to the Link Layer</span></a></li><li id="__toc-item-error-detection-and-correction-techniques" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#error-detection-and-correction-techniques" data-v-c5806953=""><span data-v-c5806953="">Error-Detection and -Correction Techniques</span></a></li><li id="__toc-item-multiple-access-links-and-protocols" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#multiple-access-links-and-protocols" data-v-c5806953=""><span data-v-c5806953="">Multiple Access Links and Protocols</span></a></li><li id="__toc-item-switched-local-area-networks" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#switched-local-area-networks" data-v-c5806953=""><span data-v-c5806953="">Switched Local Area Networks</span></a></li><li id="__toc-item-multiprotocol-label-switching-mpls" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#multiprotocol-label-switching-mpls" data-v-c5806953=""><span data-v-c5806953="">Multiprotocol Label Switching (MPLS)</span></a></li><li id="__toc-item-data-center-networking" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#data-center-networking" data-v-c5806953=""><span data-v-c5806953="">Data Center Networking</span></a></li></ol></div></aside><button style="display:none;" id="__toc-open" title="显示文章目录" class="bottom-24 text-lg floating-button" aria-haspopup="dialog" aria-controls="__toc" aria-expanded="true"><span class="i-mdi-menu"></span></button></div></ile-root><script></script><script type="module" async="">import{h as o,c as i}from"/assets/iles.5d187450.js";import{_ as r}from"/assets/TableOfContents.fc6616e4.js";import"/assets/vendor-vue.196b627b.js";import"/assets/vite.5ce4fca4.js";o(i,r,"ile-5",function(e,l,t){return{headings:[{level:l,title:"Introduction to the Link Layer",slug:"introduction-to-the-link-layer"},{level:l,title:"Error-Detection and -Correction Techniques",slug:"error-detection-and-correction-techniques"},{level:l,title:"Multiple Access Links and Protocols",slug:"multiple-access-links-and-protocols"},{level:e,title:"Channel Partitioning Protocols",slug:"channel-partitioning-protocols"},{level:e,title:"Random Access Protocols",slug:"random-access-protocols"},{level:t,title:"ALOHA",slug:"aloha"},{level:t,title:"CSMA(/CD)",slug:"csmacd"},{level:e,title:"Taking-Turns Protocols",slug:"taking-turns-protocols"},{level:e,title:"DOCSIS: The Link-Layer Protocol for Cable Internet Access",slug:"docsis-the-link-layer-protocol-for-cable-internet-access"},{level:l,title:"Switched Local Area Networks",slug:"switched-local-area-networks"},{level:e,title:"Link-Layer Addressing",slug:"link-layer-addressing"},{level:e,title:"Address Resolution Protocol",slug:"address-resolution-protocol"},{level:e,title:"Ethernet",slug:"ethernet"},{level:e,title:"Link-Layer Switches",slug:"link-layer-switches"},{level:e,title:"Virtual Local Area Networks (VLANs)",slug:"virtual-local-area-networks-vlans"},{level:l,title:"Multiprotocol Label Switching (MPLS)",slug:"multiprotocol-label-switching-mpls"},{level:l,title:"Data Center Networking",slug:"data-center-networking"}]}}(3,2,4),{});
</script></div></main><footer class="flex flex-col gap-1 bg-card p-6 text-footer" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPFooter"><div class="flex flex-wrap items-center justify-center gap-x-1" itemprop="copyrightNotice"><span>Copyright ©</span><span>2022 - 2024</span><a class="flex items-center" href="/sponsor" title="赞赏支持"><span class="i-mdi-heart text-red dark:text-red-7"></span></a><span>ouuan</span></div><div class="flex flex-wrap items-center justify-center gap-x-1 print:hidden"><span> 当前有 <ile-root id="ile-6"><span><span class="i-mdi-loading motion-safe:animate-spin"></span><span class="sr-only">加载中</span></span></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.5d187450.js";import"/assets/vendor-vue.196b627b.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.5d187450.js").then(o=>o.v),["assets/iles.5d187450.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/VisitorCountRealtime.2f4e80fc.js"),["assets/VisitorCountRealtime.2f4e80fc.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-6",{},{})});export default E();
</script> 人在线 </span><span class="i-mdi-circle-small"></span><span title="实际上，为了保护用户隐私，同一用户的多次访问只有在同一天内使用同一浏览器在同一ip下才会被算作同一人"> 共有 <ile-root id="ile-7"><span><span class="i-mdi-loading motion-safe:animate-spin"></span><span class="sr-only">加载中</span></span></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.5d187450.js";import"/assets/vendor-vue.196b627b.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.5d187450.js").then(o=>o.v),["assets/iles.5d187450.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/VisitorCount.52c3e178.js"),["assets/VisitorCount.52c3e178.js","assets/VisitorCount.8ea9f53a.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-7",{},{})});export default E();
</script> 人到访过这里 </span></div><div class="flex flex-wrap items-center justify-center gap-x-1 print:hidden"> 基于 <a class="underline" href="https://github.com/ElMassimo/iles">îles</a><a class="underline" href="https://github.com/ouuan/iles-blog/blob/master/package.json">等项目</a><span class="i-mdi-circle-small"></span><span>由 ouuan 设计/制作</span><span class="i-mdi-circle-small"></span><a class="underline" href="https://github.com/ouuan/iles-blog">源代码</a></div></footer><meta itemprop="copyrightYear" content="2022"><meta itemprop="copyrightYear" content="2023"><meta itemprop="copyrightYear" content="2024"><div class="hidden" itemscope="" itemtype="https://schema.org/Person" itemprop="copyrightHolder"><meta itemprop="name" content="ouuan"><meta itemprop="givenName" content="Yufan"><meta itemprop="familyName" content="You"><meta itemprop="url" content="https://github.com/ouuan"><link itemprop="gender" href="https://schema.org/Male"><meta itemprop="image" content="/android-chrome-512x512.png"></div><ile-root id="ile-8"><button class="group bottom-10 flex-col floating-button" title="前往底部"><div aria-hidden="true" class="flex justify-center"><span class="i-mdi-chevron-double-up motion-safe:transition-font-size text-0"></span></div><div aria-hidden="true" class="text-0 group-hover:text-3.5 motion-safe:transition-font-size"></div><div aria-hidden="false" class="flex justify-center"><span class="i-mdi-chevron-double-down motion-safe:transition-font-size text-5 group-hover:text-3"></span></div></button></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.5d187450.js";import"/assets/vendor-vue.196b627b.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.5d187450.js").then(o=>o.v),["assets/iles.5d187450.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/BackToTop.23a36767.js"),["assets/BackToTop.23a36767.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-8",{},{})});export default E();
</script><div class="hidden"></div><ile-root id="ile-9"></ile-root><script></script><script type="module" async="">var p=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var e=(t,a,_)=>new Promise((c,n)=>{var f=o=>{try{i(_.next(o))}catch(r){n(r)}},l=o=>{try{i(_.throw(o))}catch(r){n(r)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,l);i((_=_.apply(t,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.5d187450.js";import"/assets/vendor-vue.196b627b.js";var u=p(m=>{const E=()=>e(m,null,function*(){return(yield d(()=>import("/assets/iles.5d187450.js").then(t=>t.d),["assets/iles.5d187450.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default}),h=()=>e(m,null,function*(){return(yield d(()=>import("/assets/PlausibleTrigger.4aff65c1.js"),["assets/PlausibleTrigger.4aff65c1.js","assets/plausible.a460982f.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).onLoad});s(E,h,"ile-9",{},{})});export default u();
</script><div></div><ile-root id="ile-10"></ile-root><script></script><script type="module" async="">var p=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var e=(t,a,_)=>new Promise((c,n)=>{var f=o=>{try{i(_.next(o))}catch(r){n(r)}},l=o=>{try{i(_.throw(o))}catch(r){n(r)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,l);i((_=_.apply(t,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.5d187450.js";import"/assets/vendor-vue.196b627b.js";var u=p(m=>{const E=()=>e(m,null,function*(){return(yield d(()=>import("/assets/iles.5d187450.js").then(t=>t.d),["assets/iles.5d187450.js","assets/vendor-vue.196b627b.js","assets/vite.5ce4fca4.js"])).default}),h=()=>e(m,null,function*(){return(yield d(()=>import("/assets/TextJustifyFix.4fa5e997.js"),[])).onLoad});s(E,h,"ile-10",{},{})});export default u();
</script></div>
  
</body></html>