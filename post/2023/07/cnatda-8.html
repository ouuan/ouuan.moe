<!DOCTYPE html><html lang="zh-CN"><head>
    <meta charset="UTF-8">
<title>CNATDA 第八章学习笔记 - ouuan's blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="《Computer Networking: A Top-Down Approach (8th Edition)》第八章 “Security in Computer Networks” 的学习笔记。
">
<meta property="og:url" content="https://ouuan.moe/post/2023/07/cnatda-8">
<meta property="og:site_name" content="ouuan's blog">
<meta property="og:title" content="CNATDA 第八章学习笔记 · ouuan's blog">
<meta property="og:description" content="《Computer Networking: A Top-Down Approach (8th Edition)》第八章 “Security in Computer Networks” 的学习笔记。
">
<meta property="twitter:domain" content="ouuan.moe">
<meta property="twitter:title" content="CNATDA 第八章学习笔记 · ouuan's blog">
<meta property="twitter:description" content="《Computer Networking: A Top-Down Approach (8th Edition)》第八章 “Security in Computer Networks” 的学习笔记。
">
<meta property="twitter:url" content="https://ouuan.moe/post/2023/07/cnatda-8">
<style>html:not(.dark):not(.light) { visibility: hidden; } body { visibility: hidden; }</style>
<script>(() => { let dark; try { const theme = localStorage && localStorage.getItem('vueuse-color-scheme'); if (theme === 'dark') dark = true; else if (theme === 'light') dark = false; else dark = window.matchMedia('(prefers-color-scheme: dark)').matches; } catch (e) { dark = false; } document.documentElement.classList.add(dark ? 'dark' : 'light'); })()</script>
<noscript><style>@media (prefers-color-scheme: light) { :root:not(.dark):not(.light) { color-scheme: light; --text-color: #232637; --bg-color: #DEE6EE; --card-color: #EFF3F7; --link-color: #1E66B8; --hover-color: #2E80DD; --active-color: #164C89; --bghover-color: #D6E0EA; --popup-color: #F7F9FB; --footer-color: #5F627B; --area-color: #E1E2E8; --nested-color: #F0F0F3; } } @media (prefers-color-scheme: dark) { :root:not(.dark):not(.light) { color-scheme: dark; --text-color: #E6EDF2; --bg-color: #0D0E15; --card-color: #1F2130; --link-color: #8BB8EC; --hover-color: #A2C6F0; --active-color: #74AAE8; --bghover-color: #353853; --popup-color: #2C2F45; --footer-color: #9699AE; --area-color: #2F313D; --nested-color: #3C3E4E; } } html { visibility:visible !important; }</style></noscript>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="canonical" href="https://ouuan.moe/post/2023/07/cnatda-8">
<link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS Feed - ouuan's blog">
<link rel="alternate" type="application/atom+xml" href="/feed.atom" title="Atom Feed - ouuan's blog">
<link rel="alternate" type="application/json" href="/feed.json" title="JSON Feed - ouuan's blog">
<link rel="dns-prefetch" href="https://plausible.ouuan.moe">
<link rel="preconnect" href="https://blog-visitor-count.ouuan.moe">
<link rel="stylesheet" href="/vendors/katex/katex.css">
<link rel="sitemap" href="https://ouuan.moe/sitemap.xml">
<meta name="author" content="ouuan">
<meta name="twitter:creator" content="@ouuan">
<meta name="twitter:card" content="summary">
<meta property="og:image" content="https://ouuan.moe/images/2023/07/cnatda-8.png">
<meta property="generator" content="îles">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-07-18T14:32:44.000Z">
<meta property="article:modified_time" content="2023-07-24T15:11:08.000Z">
<meta property="article:author" content="ouuan">
<meta property="article:tag" content="cnatda">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="WIP">
<link rel="preconnect" href="https://giscus.app">
<link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
    <link rel="stylesheet" href="/assets/style-cfd49c27.css">
    
  <link rel="modulepreload" href="/assets/iles.e381640b.js" crossorigin=""><link rel="modulepreload" href="/assets/vendor-vue.bda4d3d4.js" crossorigin=""><link rel="modulepreload" href="/assets/vite.5ce4fca4.js" crossorigin=""><link rel="modulepreload" href="/assets/SearchBar.a9e18075.js" crossorigin=""><link rel="modulepreload" href="/assets/PostHead.26f9e680.js" crossorigin=""><link rel="modulepreload" href="/assets/VisitorCount.065e72b2.js" crossorigin=""><link rel="modulepreload" href="/assets/site.b21fb919.js" crossorigin=""><link rel="modulepreload" href="/assets/GiscusCommentsInner.b6b2a6ec.js" crossorigin=""><link rel="modulepreload" href="/assets/useTheme.546d36da.js" crossorigin=""><link rel="modulepreload" href="/assets/TableOfContents.ee0e2b18.js" crossorigin=""><style>@font-face { font-family: "Noto Serif SC Web Font"; font-weight: 400; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Regular.unique.b7f4391f.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Regular.unique.631bd899.woff') format('woff'); unicode-range: U+0-1f54a; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 400; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Regular.common.79ca374e.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Regular.common.2a06c596.woff') format('woff'); unicode-range: U+0-ff1b; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 700; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Bold.common.8d2c4ede.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Bold.common.7f011ba7.woff') format('woff'); unicode-range: U+0-7684; }</style><link rel="preload" href="/assets/fonts/NotoSerifSC-Regular.unique.b7f4391f.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Regular.common.79ca374e.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Bold.common.8d2c4ede.woff2" as="font" type="font/woff2" crossorigin=""></head>
  <body itemscope="" itemtype="https://schema.org/ItemPage">
    <div id="app"><header class="bg-card shadow print:hidden" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPHeader"><div class="flex flex-wrap justify-center whitespace-nowrap px-4 page-container sm:flex-nowrap"><div class="flex basis-full items-stretch justify-center sm:mr-3 sm:basis-auto"><a class="flex items-center p-3 text-xl font-serif bghover" href="/"><span>ouuan<span class="mojikumi-narrow-left">’</span>s blog</span></a></div><nav class="flex"><ul class="flex"><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/"><span>首页</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/posts"><span>文章</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/tags"><span>标签</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/about"><span>关于</span></a></li></ul></nav><div class="sm:basis-full"></div><ul class="flex"><li class="flex"><ile-root id="ile-1"><div class="flex items-stretch lg:hidden"><a class="flex items-center p-2 bghover" href="/search" title="全站搜索"><span class="i-mdi-magnify text-xl"></span></a></div><form role="search" class="hidden items-stretch justify-center lg:flex"><div class="flex items-center"><input value="" class="w-48 rd-full bg-area px-3 py-1" type="search" placeholder="关键词" aria-label="全站搜索"></div><a class="flex items-center p-2 bghover" href="/search?q=" title="全站搜索"><span class="i-mdi-magnify text-xl"></span></a></form></ile-root><script></script><script type="module" async="">import{h as r,c as a}from"/assets/iles.e381640b.js";import{_ as m}from"/assets/SearchBar.a9e18075.js";import"/assets/vendor-vue.bda4d3d4.js";import"/assets/vite.5ce4fca4.js";r(a,m,"ile-1",{},{});
</script></li><li class="flex items-stretch"><a class="flex items-center p-2 bghover" href="/feed.xml" title="RSS 订阅"><span class="i-mdi-rss text-xl"></span></a></li><li class="flex"><ile-root id="ile-2"><div class="relative flex items-stretch"><button title="暗色模式设置" class="flex items-center p-2 bghover" aria-haspopup="menu" aria-controls="__theme-switcher" aria-expanded="false"><span class="i-mdi-theme-light-dark text-xl"></span></button><ul style="display:none;" id="__theme-switcher" class="absolute right-0 top-full z-20 whitespace-nowrap rd-1 bg-popup shadow-md" role="menu" aria-label="暗色模式选项"><li class="bghover" role="menuitemradio" aria-checked="true"><button class="flex items-center p-1 text-hover"><span class="i-mdi-cellphone md:i-mdi-tablet lg:i-mdi-monitor mr-1"></span><span>跟随系统</span></button></li><li class="bghover" role="menuitemradio" aria-checked="false"><button class="flex items-center p-1"><span class="i-mdi-white-balance-sunny mr-1"></span><span>总是亮色</span></button></li><li class="bghover" role="menuitemradio" aria-checked="false"><button class="flex items-center p-1"><span class="i-mdi-weather-night mr-1"></span><span>总是暗色</span></button></li></ul></div></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.e381640b.js";import"/assets/vendor-vue.bda4d3d4.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.e381640b.js").then(o=>o.v),["assets/iles.e381640b.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/ThemeSwitcher.9b91f8bf.js"),["assets/ThemeSwitcher.9b91f8bf.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js","assets/useTheme.546d36da.js"])).default});s(u,v,"ile-2",{},{})});export default E();
</script></li></ul></div></header><main class="min-h-100vh py-6 page-container" itemprop="mainContentOfPage" itemscope="" itemtype="https://schema.org/WebPageElement"><div class="flex justify-center"><div class="grow m-4 standard-card max-w-200"><article itemprop="mainEntity" itemscope="" itemtype="https://schema.org/BlogPosting"><div class="hidden" itemscope="" itemtype="https://schema.org/Person" itemprop="author"><meta itemprop="name" content="ouuan"><meta itemprop="givenName" content="Yufan"><meta itemprop="familyName" content="You"><meta itemprop="url" content="https://github.com/ouuan"><link itemprop="gender" href="https://schema.org/Male"><meta itemprop="image" content="/android-chrome-512x512.png"></div><meta itemprop="mainEntityOfPage" content="https://ouuan.moe/post/2023/07/cnatda-8"><meta itemprop="image" content="https://ouuan.moe/images/2023/07/cnatda-8.png"><ile-root id="ile-3" class="my-12"><header class="my-12" data-v-4039c18a=""><h1 class="mb-3 mt-6 text-center text-8" itemprop="headline" data-v-4039c18a=""><span class="inline-block font-serif break-anywhere" data-v-4039c18a="">CNATDA 第八章学习笔记</span></h1><div class="flex flex-wrap justify-center gap-x-4 gap-y-1 text-footer md:text-sm" data-v-4039c18a=""><span class="flex items-center" title="创建于 2023-07-17 19:47:50 GMT+8" data-v-4039c18a=""><span class="i-mdi-folder-plus-outline mr-1" data-v-4039c18a=""></span><span class="sr-only" data-v-4039c18a="">创建于</span><a class="hover:underline" href="https://github.com/ouuan/iles-blog/blob/master/src/pages/post/2023/07/cnatda-8.mdx?plain=1" data-v-4039c18a=""><time datetime="2023-07-17T19:47:50+08:00" itemprop="dateCreated" data-v-4039c18a="">2023-07-17</time></a></span><span class="flex items-center" title="修改于 2023-07-24 23:11:08 GMT+8" data-v-4039c18a=""><span class="i-mdi-update mr-1" data-v-4039c18a=""></span><span class="sr-only" data-v-4039c18a="">修改于</span><a class="hover:underline" href="https://github.com/ouuan/iles-blog/commits/master/src/pages/post/2023/07/cnatda-8.mdx" data-v-4039c18a=""><time datetime="2023-07-24T23:11:08+08:00" itemprop="dateModified" data-v-4039c18a="">2023-07-24</time></a></span><span class="flex items-center" title="访问量" data-v-4039c18a=""><span class="i-mdi-eye-outline mr-1" data-v-4039c18a=""></span><span class="sr-only" data-v-4039c18a="">访问量</span><span data-v-4039c18a="">45</span></span><span class="flex flex-wrap justify-center gap-x-2 gap-y-1" data-v-4039c18a=""><span title="标签: cnatda" class="flex items-center" itemprop="keywords" data-v-4039c18a=""><span class="i-mdi-tag-outline mr-1" data-v-4039c18a=""></span><span class="sr-only" data-v-4039c18a="">标签</span><a href="/tag/cnatda" class="hover:underline" data-v-4039c18a="">cnatda</a></span><span title="标签: 学习笔记" class="flex items-center" itemprop="keywords" data-v-4039c18a=""><span class="i-mdi-tag-outline mr-1" data-v-4039c18a=""></span><span class="sr-only" data-v-4039c18a="">标签</span><a href="/tag/学习笔记" class="hover:underline" data-v-4039c18a="">学习笔记</a></span><span title="标签: WIP" class="flex items-center" itemprop="keywords" data-v-4039c18a=""><span class="i-mdi-tag-outline mr-1" data-v-4039c18a=""></span><span class="sr-only" data-v-4039c18a="">标签</span><a href="/tag/WIP" class="hover:underline" data-v-4039c18a="">WIP</a></span></span></div></header></ile-root><script></script><script type="module" async="">import{h as t,c as e}from"/assets/iles.e381640b.js";import a from"/assets/PostHead.26f9e680.js";import"/assets/vendor-vue.bda4d3d4.js";import"/assets/vite.5ce4fca4.js";import"/assets/VisitorCount.065e72b2.js";import"/assets/site.b21fb919.js";t(e,a,"ile-3",{class:"my-12",href:"/post/2023/07/cnatda-8",filename:"src/pages/post/2023/07/cnatda-8.mdx",frontmatter:{title:"CNATDA 第八章学习笔记",date:new Date(168959447e4),image:"/images/2023/07/cnatda-8.png",tags:["cnatda","学习笔记","WIP"],lastUpdated:new Date(1690211468e3),published:new Date(1689690764e3),visitor:45,description:`《Computer Networking: A Top-Down Approach (8th Edition)》第八章 “Security in Computer Networks” 的学习笔记。
`}},{});
</script><section class="article-style" itemprop="articleBody"><p><span class="mojikumi-line-start">《</span>Computer Networking: A Top-Down Approach (8th Edition)<span class="mojikumi-line-end">》</span>第八章 <span class="mojikumi">“</span>Security in Computer Networks<span class="mojikumi">”</span> 的学习笔记<span class="mojikumi-line-end">。</span></p>

<h2 id="what-is-network-security" class="heading"><a href="#what-is-network-security" class="heading-anchor" aria-label="章节： What Is Network Security?" tabindex="-1"></a><span>What Is Network Security?</span></h2>
<p><i>secure communication</i> 有下列性质<span class="mojikumi-line-end">：</span></p>
<ul>
<li>confidentiality: 由于通信可以被拦截<span class="mojikumi-line-end">，</span>保密意味着需要以某种方式加密</li>
<li>message integrity: 保证消息未被修改</li>
<li>end-point authentication: 能够确认对方的身份</li>
<li>operational security: 保护 organization network 不被攻击</li>
</ul>
<p>intruder 可以对 message 进行 eavesdropping<span class="mojikumi-line-end">、</span>modification<span class="mojikumi-line-end">、</span>insertion<span class="mojikumi-line-end">、</span>deletion<span class="mojikumi-line-end">，</span>进而实现各种攻击<span class="mojikumi-line-end">。</span></p>
<p>在网络中<span class="mojikumi-line-end">，</span>需要进行 secure communication 的双方可能是两个人类用户<span class="mojikumi-line-end">、</span>可能是 client 和 server<span class="mojikumi-line-end">、</span>可能是两个 router……</p>
<p>security functionality 可以在网络的各个 layer 提供<span class="mojikumi-line-end">。</span>虽然底层的 security 看起来覆盖了高层的 security<span class="mojikumi-line-end">，</span>但并非完全如此<span class="mojikumi-line-end">，</span>例如 IP-layer security 不能区分 IP address 相同的多个用户<span class="mojikumi-line-end">。</span>并且<span class="mojikumi-line-end">，</span>底层协议的更新<span class="mojikumi-line-end">、</span>普及相对更慢<span class="mojikumi-line-end">，</span>在上层采取措施可以更快生效<span class="mojikumi-line-end">。</span></p>
<h2 id="principles-of-cryptography" class="heading"><a href="#principles-of-cryptography" class="heading-anchor" aria-label="章节： Principles of Cryptography" tabindex="-1"></a><span>Principles of Cryptography</span></h2>
<p>plaintext (cleartext) 经 encryption algorithm 得到 ciphertext<span class="mojikumi-line-end">，</span>由 decryption algorithm 回到 plaintext<span class="mojikumi-line-end">。</span></p>
<p>encryption algorithm 一般是公开的<span class="mojikumi-line-end">，</span>为了达到保密的效果<span class="mojikumi-line-end">，</span>还需要使用 key<span class="mojikumi-line-end">。</span>设 plaintext 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><span class="mojikumi-line-end">，</span>sender 使用 key <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">K_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 进行 encrypt 得到 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">K_A(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span><span class="mojikumi-line-end">，</span>receiver 使用 key <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">K_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 进行 decrypt 得到 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>B</mi></msub><mo stretchy="false">(</mo><msub><mi>K</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">K_B(K_A(m)) = m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<p>在 symmetric key system 中<span class="mojikumi-line-end">，</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>A</mi></msub><mo>=</mo><msub><mi>K</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">K_A = K_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>是保密的<span class="mojikumi-line-end">；</span>在 public key system 中<span class="mojikumi-line-end">，</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">K_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 是公开的<span class="mojikumi-line-end">，</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">K_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 是保密的<span class="mojikumi-line-end">。</span></p>
<h3 id="symmetric-key-cryptography" class="heading"><a href="#symmetric-key-cryptography" class="heading-anchor" aria-label="章节： Symmetric Key Cryptography" tabindex="-1"></a><span>Symmetric Key Cryptography</span></h3>
<p>在现代密码所使用的 block cipher 中<span class="mojikumi-line-end">，</span>plaintext 被划分为若干个 block<span class="mojikumi-line-end">，</span>例如在 AES 中每 128 bit 是一个 block<span class="mojikumi-line-end">，</span>cipher 会构建一个 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>128</mn></msup><mo>→</mo><msup><mn>2</mn><mn>128</mn></msup></mrow><annotation encoding="application/x-tex">2^{128} \to 2^{128}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">128</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">128</span></span></span></span></span></span></span></span></span></span></span></span></span> 的 plaintext 到 ciphertext 的一一对应<span class="mojikumi-line-end">，</span>而 key 用来生成这个对应关系<span class="mojikumi-line-end">，</span>AES 的 key length 可以是 128/192/256 bit<span class="mojikumi-line-end">。</span>太小的 block size / key length 会导致安全性不够<span class="mojikumi-line-end">；</span>将整个对应关系存下来 key 会过长<span class="mojikumi-line-end">，</span>所以只能用没那么长的 key 来生成对应关系<span class="mojikumi-line-end">；</span>太大的 block size / key length 可能会影响性能<span class="mojikumi-line-end">。</span></p>
<p>如果 plaintext 中有多个相同的 block<span class="mojikumi-line-end">，</span>它们对应的 ciphertext 也相同<span class="mojikumi-line-end">，</span>就会暴露出一定的信息<span class="mojikumi-line-end">。</span>为了避免这样的风险<span class="mojikumi-line-end">，</span>可以给每个 block 异或上一个随机数再加密<span class="mojikumi-line-end">。</span></p>
<p>如果真的每个 block 都独立地生成一个随机数<span class="mojikumi-line-end">，</span>则传输时需要附上这一堆随机数<span class="mojikumi-line-end">，</span>整个 message 的长度会翻倍<span class="mojikumi-line-end">。</span>所以实际上并不会这样做<span class="mojikumi-line-end">，</span>而是会使用称作 cipher block chaining (CBC) 的技术<span class="mojikumi-line-end">：</span>每条 message 只生成一个随机数<span class="mojikumi-line-end">，</span>称作 initialization vector (IV)<span class="mojikumi-line-end">，</span>记作 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">c_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>而 plaintext 的第一块记作 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">m_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>对 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⊕</mo><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">c_{i-1} \oplus m_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 加密得到 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">c_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>即每个 block 异或的是上一个 block 的加密结果<span class="mojikumi-line-end">，</span>这样传输时的 overhead 就只有一个 block size 的 IV 了<span class="mojikumi-line-end">。</span></p>
<h3 id="public-key-encryption" class="heading"><a href="#public-key-encryption" class="heading-anchor" aria-label="章节： Public Key Encryption" tabindex="-1"></a><span>Public Key Encryption</span></h3>
<p>symmetric key cryptography 需要双方以某种方式事先做到共享 key<span class="mojikumi-line-end">，</span>而这本身就需要 secure communication<span class="mojikumi-line-end">。</span>以前这可以通过线下之类的方式进行<span class="mojikumi-line-end">，</span>而在网络中则需要另外的方式<span class="mojikumi-line-end">。</span></p>
<p>在 public key encryption 中<span class="mojikumi-line-end">，</span>接收方有一对 key<span class="mojikumi-line-end">，</span>public key 用来加密<span class="mojikumi-line-end">，</span>private key 用来解密<span class="mojikumi-line-end">。</span>public key 是公开的<span class="mojikumi-line-end">，</span>从而不需要事先依赖于 secure communication 进行 key exchange<span class="mojikumi-line-end">。</span></p>
<p>public key encryption 带来身份认证的问题<span class="mojikumi-line-end">：</span>在 symmetric key cryptography 中<span class="mojikumi-line-end">，</span>知道 key 隐含了身份<span class="mojikumi-line-end">，</span>但知道 public key 则不代表身份<span class="mojikumi-line-end">，</span>所以需要额外的机制来进行认证<span class="mojikumi-line-end">。</span></p>
<p>RSA 是目前最流行的 public key encryption algorithm:</p>
<ol>
<li>选两个大质数 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="mojikumi-line-start">（</span>一般要达到 1024~4096 bit 长<span class="mojikumi-line-end">）</span></li>
<li>令 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mi>p</mi><mi>q</mi></mrow><annotation encoding="application/x-tex">n = pq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">pq</span></span></span></span></span><span class="mojikumi-line-end">，</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>=</mo><mo stretchy="false">(</mo><mi>p</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>q</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">z = (p-1)(q-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li>
<li>选一个比 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 小<span class="mojikumi-line-end">、</span>和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></span> 互质的数 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></span></li>
<li>算出 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></span> 的乘法逆元 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><msup><mi>e</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>z</mi></mrow><annotation encoding="application/x-tex">d = e^{-1} \bmod z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></span></li>
<li>public key 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n, e)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">e</span><span class="mclose">)</span></span></span></span></span><span class="mojikumi-line-end">，</span>private key 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n, d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span></span></span></span></span></li>
<li>encryption: 设 plaintext 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>&lt;</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">m &lt; n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>)<span class="mojikumi-line-end">，</span>则 ciphertext 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>=</mo><msup><mi>m</mi><mi>e</mi></msup><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">c = m^e \bmod n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span></li>
<li>decryption: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>=</mo><msup><mi>c</mi><mi>d</mi></msup><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">m = c^d \bmod n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span></li>
</ol>
<p>RSA 的计算比 AES 慢<span class="mojikumi-line-end">，</span>为了性能<span class="mojikumi-line-end">，</span>通常会结合 symmetric key cryptography 一起使用<span class="mojikumi-line-end">：</span>每次生成一个用于 symmetric key cipher 的 session key<span class="mojikumi-line-end">，</span>通过 public key encryption 来进行 key exchange<span class="mojikumi-line-end">，</span>实际的通信则使用 symmetric key cipher<span class="mojikumi-line-end">。</span></p>
<p>RSA 的安全性依赖于大数分解的困难性<span class="mojikumi-line-end">，</span>这受到量子计算的挑战<span class="mojikumi-line-end">。</span></p>
<h2 id="message-integrity-and-digital-signatures" class="heading"><a href="#message-integrity-and-digital-signatures" class="heading-anchor" aria-label="章节： Message Integrity and Digital Signatures" tabindex="-1"></a><span>Message Integrity and Digital Signatures</span></h2>
<p>message integrity 即 sender 身份真实<span class="mojikumi-line-end">，</span>message 未遭篡改<span class="mojikumi-line-end">。</span></p>
<p>cryptographic hash function 在一般的 hash 的基础上要求难以构造 collision<span class="mojikumi-line-end">，</span>从而可以用来验证消息未被篡改<span class="mojikumi-line-end">。</span></p>
<p>可以用 message authentication code (MAC) 来验证 message integrity<span class="mojikumi-line-end">：</span>双方共享保密的 authentication key<span class="mojikumi-line-end">，</span>设 message 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><span class="mojikumi-line-end">，</span>cryptographic hash function 是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="mojikumi-line-end">，</span>最终传输的是 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>H</mi><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(m, H(m + s))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span><span class="mojikumi-line-start">（</span>具体实现可能有所不同<span class="mojikumi-line-end">，</span>例如 HMAC 会 hash 两次<span class="mojikumi">）</span><span class="mojikumi-line-end">。</span>可以使用 public key encryption 或者其他方式来 exchange authentication key<span class="mojikumi-line-end">。</span>MAC 本身可以不涉及 encryption<span class="mojikumi-line-end">，</span>如果只需保证 message integrity 而不在意 confidentiality 则无需付出 encryption 的性能代价<span class="mojikumi-line-end">。</span></p>
<p>digital signature 相当于 MAC 的 <span class="mojikumi">“</span>public key 版本<span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>可以用来验证 sender 的身份<span class="mojikumi-line-end">，</span>而验证者只需知道 public key<span class="mojikumi-line-end">，</span>可以保持 private key 的私密<span class="mojikumi-line-end">。</span>RSA 的 encryption 和 decryption 其实是可交换的<span class="mojikumi-line-end">，</span>即先 public key 再 private key 或者先 private key 再 public key 都可以得到原来的 plaintext<span class="mojikumi-line-end">。</span>digital signature 即使用 private key 进行<span class="mojikumi-line-start">“</span>加密<span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>而使用 public key 进行<span class="mojikumi-line-start">“</span>解密<span class="mojikumi">”</span><span class="mojikumi-line-end">。</span>RSA 计算慢<span class="mojikumi-line-end">，</span>所以可以对 cryptographic hash 而非 message 本身计算 digital signature<span class="mojikumi-line-end">。</span></p>
<p>虽然 MAC 和 digital signature 功能有一定的类似<span class="mojikumi-line-end">，</span>但 MAC 可以完全不涉及 encryption<span class="mojikumi-line-end">，</span>digital signature 则依赖于 public key infrastructure (PKI)<span class="mojikumi-line-end">。</span></p>
<p>digital signature 验证的是 message 和 public key 的对应关系<span class="mojikumi-line-end">，</span>还需要额外的措施来保证 public key 和 entity (sender) 的对应关系<span class="mojikumi-line-end">。</span>certification authority (CA) 提供了这一服务<span class="mojikumi-line-end">，</span>通过某些手段认证 public key 和 entity 的对应关系<span class="mojikumi-line-end">，</span>并颁发 certificate<span class="mojikumi-line-end">，</span>certificate 包含 entity 和 public key 的相关信息<span class="mojikumi-line-start">（</span>以及有效期<span class="mojikumi-line-end">）</span>以及使用 CA 的 public key 对这些信息创建的 digital signature<span class="mojikumi-line-end">。</span>有了 certificate<span class="mojikumi-line-end">，</span>对 public key 和 entity 之间关联的信任取决于对 CA 的信任<span class="mojikumi-line-end">。</span></p>
<h2 id="end-point-authentication" class="heading"><a href="#end-point-authentication" class="heading-anchor" aria-label="章节： End-Point Authentication" tabindex="-1"></a><span>End-Point Authentication</span></h2>
<p>书上说了很多<span class="mojikumi-line-end">，</span>但感觉本质上就是<span class="mojikumi-line-end">，</span>Alice 要向 Bob 证明自己的身份<span class="mojikumi-line-end">，</span>则 Bob 提供一个一次性的随机数 <i>nonce</i><span class="mojikumi-line-end">，</span>Alice 通过某种方式<span class="mojikumi-line-start">（</span>例如 symmetric key cryptography / MAC<span class="mojikumi-line-end">）</span>发回 nonce 并保证 message integrity<span class="mojikumi-line-end">。</span>nonce 用来防止 playback attack<span class="mojikumi-line-end">。</span></p>
<h2 id="securing-e-mail" class="heading"><a href="#securing-e-mail" class="heading-anchor" aria-label="章节： Securing E-Mail" tabindex="-1"></a><span>Securing E-Mail</span></h2>
<h3 id="secure-e-mail" class="heading"><a href="#secure-e-mail" class="heading-anchor" aria-label="章节： Secure E-Mail" tabindex="-1"></a><span>Secure E-Mail</span></h3>
<p>就是上面这些东西的一个实例<span class="mojikumi-line-end">，</span>没啥新东西<span class="mojikumi-line-end">：</span>结合 digital signature 和使用 session key 的 encryption 即可<span class="mojikumi-line-end">；</span>需要双方互相知道对方的 public key<span class="mojikumi-line-start">（</span>分别用于 digital signature 的验证和 session key 的传输<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>public key 可以由 CA 认证<span class="mojikumi-line-end">。</span></p>
<p><span class="mojikumi-line-start">（</span>好怪<span class="mojikumi-line-end">，</span>为啥不讲 SPF<span class="mojikumi-line-end">、</span>DKIM<span class="mojikumi-line-end">、</span>DMARC<span class="mojikumi">。</span><span class="mojikumi-line-end">）</span></p>
<h3 id="pgp" class="heading"><a href="#pgp" class="heading-anchor" aria-label="章节： PGP" tabindex="-1"></a><span>PGP</span></h3>
<p>PGP 提供了 sign<span class="mojikumi-line-end">、</span>encrypt<span class="mojikumi-line-end">、</span>sign and encrypt 等功能<span class="mojikumi-line-end">，</span>public key 通过用户之间的 web of trust 而非 CA 来 certify<span class="mojikumi-line-end">，</span>可以线下举办 key-signing party 来互相 sign<sup><a href="#user-content-fn-sign" id="user-content-fnref-sign" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup><span class="mojikumi-line-end">。</span></p>
<h2 id="securing-tcp-connections-tls" class="heading"><a href="#securing-tcp-connections-tls" class="heading-anchor" aria-label="章节： Securing TCP Connections: TLS" tabindex="-1"></a><span>Securing TCP Connections: TLS</span></h2>
<p>TLS (Transport Layer Security) 为 TCP 提供了 security services<span class="mojikumi-line-end">，</span>是 SSL (Secure Sockets Layer) 标准化后的升级版<span class="mojikumi-line-start">（</span>只不过现在人们有时仍会把 TLS 误称为 SSL<span class="mojikumi-line-end">，</span>OpenSSL 的名字也有一定的误导性<sup><a href="#user-content-fn-opentls" id="user-content-fnref-opentls" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup><span class="mojikumi">）</span><span class="mojikumi-line-end">。</span></p>
<p>TLS 通常用于 HTTP<span class="mojikumi-line-end">，</span>表现为网址开头是 <code>https://</code><span class="mojikumi-line-end">，</span>但它实际上可以用于任何基于 TCP 的 application<span class="mojikumi-line-end">。</span>TLS 位于 application layer<span class="mojikumi-line-end">，</span>但它提供了类似 TCP 的 API<span class="mojikumi-line-end">，</span>对于 application developer 来说就像是 transport layer 的一部分<span class="mojikumi-line-end">。</span></p>
<h3 id="tls-handshake" class="heading"><a href="#tls-handshake" class="heading-anchor" aria-label="章节： TLS Handshake" tabindex="-1"></a><span>TLS Handshake</span></h3>
<ol>
<li>TCP 3-way handshake</li>
<li>client 发送 TLS version<span class="mojikumi-line-end">、</span>supported cipher suites (symmetric algorithm<span class="mojikumi-line-end">、</span>public key algorithm<span class="mojikumi-line-end">、</span>HMAC algorithm)<span class="mojikumi-line-end">、</span>client nonce<span class="mojikumi-line-end">。</span></li>
<li>server 发送 selected cipher suite<span class="mojikumi-line-end">、</span>certificate<span class="mojikumi-line-end">、</span>server nonce<span class="mojikumi-line-end">。</span></li>
<li>client 验证 certificate<span class="mojikumi-line-end">，</span>得到 server 的 public key<span class="mojikumi-line-end">；</span>随机生成 pre-master secret (PMS)<span class="mojikumi-line-end">，</span>发送经 server 的 public key 加密的 PMS<span class="mojikumi-line-end">。</span></li>
<li>由 PMS<span class="mojikumi-line-end">、</span>client nonce<span class="mojikumi-line-end">、</span>server nonce 可以计算得到 master key<span class="mojikumi-line-end">，</span>由 master key 可以得到一系列用于后续加密的 key<span class="mojikumi-line-end">：</span>client 和 server 各有用于 symmetric key encryption 的 key 和用于 HMAC 的 key<span class="mojikumi-line-end">，</span>如果使用 CBC 则还有双方的 IV<span class="mojikumi-line-end">。</span></li>
<li>client 发送上面这些 handshake message 的 HMAC<span class="mojikumi-line-start">（</span>可以和 encrypted PMS 一同发送<span class="mojikumi">）</span><span class="mojikumi-line-end">。</span></li>
<li>server 发送上面这些 handshake message 的 HMAC<span class="mojikumi-line-end">。</span></li>
</ol>
<p>其中<span class="mojikumi-line-end">，</span>一开始的 nonce 用来防止 replay attack<span class="mojikumi-line-end">，</span>并且 server nonce 参与 master key 的计算<span class="mojikumi-line-end">，</span>可以防止 key 完全由 client 决定<span class="mojikumi-line-end">。</span>而最后的 HMAC 用来防止篡改 handshake message<span class="mojikumi-line-end">，</span>例如将 supported cipher suites 改为只有 weak algorithm<span class="mojikumi-line-end">。</span></p>
<p>TLS 1.3 对 handshake 过程进行了简化<span class="mojikumi-line-end">。</span></p>
<h3 id="tls-data-transfer" class="heading"><a href="#tls-data-transfer" class="heading-anchor" aria-label="章节： TLS Data Transfer" tabindex="-1"></a><span>TLS Data Transfer</span></h3>
<p>在 TLS 中<span class="mojikumi-line-end">，</span>TCP byte stream 被切分为 records<span class="mojikumi-line-end">，</span>为每个 record 计算 HMAC<span class="mojikumi-line-end">，</span>并将 record + HMAC 进行 encrypt<span class="mojikumi-line-end">。</span>这只保证了每个 record 的 integrity<span class="mojikumi-line-end">，</span>为了保证整个 byte stream 的 integrity<span class="mojikumi-line-end">，</span>每个 record 还有一个 sequence number<span class="mojikumi-line-end">，</span>参与 HMAC 的计算<span class="mojikumi-line-end">，</span>来防止攻击者对 record 进行 reorder / replay / remove<span class="mojikumi-line-end">。</span></p>
<p>TLS record 包含<span class="mojikumi-line-end">：</span></p>
<ol>
<li>type: handshake / data</li>
<li>TLS version</li>
<li>length: 用来标记 record 的结尾</li>
<li>data + HMAC, encrypted</li>
</ol>
<h3 id="tls-connection-closure" class="heading"><a href="#tls-connection-closure" class="heading-anchor" aria-label="章节： TLS Connection Closure" tabindex="-1"></a><span>TLS Connection Closure</span></h3>
<p>为了防止 truncation attack<span class="mojikumi-line-end">，</span>即伪造 TCP FIN segment<span class="mojikumi-line-end">，</span>在 TLS 中需要先发送保证了 integrity 的 closure TLS record 再发送 TCP FIN segment 来结束连接<span class="mojikumi-line-end">。</span></p>
<h2 id="network-layer-security-ipsec-and-virtual-private-networks" class="heading"><a href="#network-layer-security-ipsec-and-virtual-private-networks" class="heading-anchor" aria-label="章节： Network-Layer Security: IPsec and Virtual Private Networks" tabindex="-1"></a><span>Network-Layer Security: IPsec and Virtual Private Networks</span></h2>
<h3 id="ipsec-and-virtual-private-networks-vpns" class="heading"><a href="#ipsec-and-virtual-private-networks-vpns" class="heading-anchor" aria-label="章节： IPsec and Virtual Private Networks (VPNs)" tabindex="-1"></a><span>IPsec and Virtual Private Networks (VPNs)</span></h3>
<p>如果一个 institution 位于多个地理位置而想保证 institution 内通信的私密<span class="mojikumi-line-end">，</span>一种选择是建立一个 private network<span class="mojikumi-line-end">，</span>在物理上与 Internet 进行隔离<span class="mojikumi-line-end">，</span>但这样需要自己搭建整套网络基础设施<span class="mojikumi-line-end">，</span>开销非常大<span class="mojikumi-line-end">。</span></p>
<p>另一种选择是使用 virtual private network<span class="mojikumi-line-end">。</span>在 VPN 内<span class="mojikumi-line-end">，</span>通过 Internet 传输数据时会进行加密<span class="mojikumi-line-end">，</span>具体来说是在内网的 gateway router 或直接连到公网的 host 处<span class="mojikumi-line-start">（</span>例如学校连到 Internet 的 gateway router / 回家了的学生的设备上<span class="mojikumi-line-end">；</span>为了叙述方便<span class="mojikumi-line-end">，</span>下文中都假设是 gateway router 而不是 host<span class="mojikumi-line-end">）</span>在 payload 前加上 IPsec header<span class="mojikumi-line-end">。</span></p>
<h3 id="the-ah-and-esp-protocols" class="heading"><a href="#the-ah-and-esp-protocols" class="heading-anchor" aria-label="章节： The AH and ESP Protocols" tabindex="-1"></a><span>The AH and ESP Protocols</span></h3>
<p>IPsec 可以使用 Authentication Header (AH) protocol 或者 Encapsulation Security Payload (ESP) protocol<span class="mojikumi-line-end">。</span>其中 AH 只提供了 source authentication 和 data integrity<span class="mojikumi-line-end">，</span>ESP 在此基础上还提供了 confidentiality<span class="mojikumi-line-end">。</span>使用 IPsec 的场景中通常需要保证 confidentiality<span class="mojikumi-line-end">，</span>所以 ESP 用得更多<span class="mojikumi-line-end">，</span>书中只讲 ESP<span class="mojikumi-line-end">。</span></p>
<h3 id="security-associations" class="heading"><a href="#security-associations" class="heading-anchor" aria-label="章节： Security Associations" tabindex="-1"></a><span>Security Associations</span></h3>
<p>两个 entity (gateway router) 通过 IPsec 通信时需要建立称作 <i>security association</i> (SA) 的 logical connection<span class="mojikumi-line-end">。</span>SA 是单向的<span class="mojikumi-line-end">，</span>如果要互发消息则需要建立两个 SA<span class="mojikumi-line-end">。</span></p>
<p>SA 有下列 state information<span class="mojikumi-line-end">：</span></p>
<ul>
<li><i>security parameter index</i> (SPI)<span class="mojikumi-line-end">，</span>一个 32-bit identifier</li>
<li>source &amp; destination IP address</li>
<li>encryption algorithm, encryption key</li>
<li>integrity check algorithm, authentication key</li>
</ul>
<p>一个 IPsec entity 可能同时 maintain 着很多 SA 的 state information<span class="mojikumi-line-end">，</span>存储在 security association database (SAD) 中<span class="mojikumi-line-end">。</span></p>
<h3 id="the-ipsec-datagram" class="heading"><a href="#the-ipsec-datagram" class="heading-anchor" aria-label="章节： The IPsec Datagram" tabindex="-1"></a><span>The IPsec Datagram</span></h3>
<p>IPsec 有两种 packet form<span class="mojikumi-line-end">，</span>分别用于 tunnel mode 和 transport mode<span class="mojikumi-line-end">，</span>其中 tunnel mode 更常用<span class="mojikumi-line-end">，</span>书中只讲 tunnel mode<span class="mojikumi-line-end">。</span></p>
<p>一个 IPsec datagram 的结构如下<span class="mojikumi-line-end">：</span></p>
<ul>
<li>new IP header (source / destination 是 gateway router<span class="mojikumi-line-end">，</span>protocol 是 ESP)</li>
<li><span class="mojikumi-line-start">“</span>enchilada<span class="mojikumi">”</span> (authenticated)
<ul>
<li>ESP header
<ul>
<li>SPI</li>
<li>sequence number</li>
</ul>
</li>
<li>(encrypted)
<ul>
<li>original IP header</li>
<li>original IP payload</li>
<li>ESP trailer
<ul>
<li>padding (for encryption block size requirement)</li>
<li>padding length</li>
<li>next header <span class="mojikumi">（</span><span class="mojikumi">“</span>4<span class="mojikumi">”</span> for <span class="mojikumi">“</span>IP Encapsulation within IP<span class="mojikumi">”</span> in tunnel mode<span class="mojikumi-line-end">）</span><sup><a href="#user-content-fn-esp-next-header" id="user-content-fnref-esp-next-header" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ESP MAC <span class="mojikumi">（</span>for authentication of the <span class="mojikumi">“</span>enchilada<span class="mojikumi">”</span><span class="mojikumi-line-end">）</span></li>
</ul>
<p>gateway router 会维护一个 security policy database (SPD)<span class="mojikumi-line-end">，</span>当其接收到一个待转发的 IP datagram 时<span class="mojikumi-line-end">，</span>会查询 SPD<span class="mojikumi-line-end">，</span>根据 source IP address<span class="mojikumi-line-end">、</span>destination IP address<span class="mojikumi-line-end">、</span>protocol 来决定是否使用 IPsec 进行处理<span class="mojikumi-line-end">。</span></p>
<h3 id="ike-key-management-in-ipsec" class="heading"><a href="#ike-key-management-in-ipsec" class="heading-anchor" aria-label="章节： IKE: Key Management in IPsec" tabindex="-1"></a><span>IKE: Key Management in IPsec</span></h3>
<p>IPsec 可以手动配置 key<span class="mojikumi-line-end">，</span>但大型的 VPN 往往需要使用 Internet Key Exchange (IKE) protocol 来自动建立 SA<span class="mojikumi-line-end">。</span></p>
<p><span class="mojikumi-line-start">（</span>书中对 IKE 的描述太简陋了<span class="mojikumi-line-end">，</span>说了跟没说差不多<span class="mojikumi-line-end">，</span>以后再说吧<span class="mojikumi-line-start">（</span></p>
<h2 id="securing-wireless-lans-and-4g5g-cellular-networks" class="heading"><a href="#securing-wireless-lans-and-4g5g-cellular-networks" class="heading-anchor" aria-label="章节： Securing Wireless LANs and 4G/5G Cellular Networks" tabindex="-1"></a><span>Securing Wireless LANs and 4G/5G Cellular Networks</span></h2>
<aside role="note" data-v-a2ab257f=""><div class="shadow-md rd-1 b-l-6 my-6 bg-gray-2 dark:bg-gray-11 b-gray-6" data-v-a2ab257f=""><div class="p-3 flex justify-between items-center" data-v-a2ab257f=""><h3 class="flex items-center gap-1 font-bold" data-v-a2ab257f=""><span class="text-5 i-mdi-timer-sand text-gray" data-v-a2ab257f=""></span><!--v-if--><span data-v-a2ab257f="">WIP</span></h3><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f=""><p>未完待续…… 🕊️</p></div></div></aside>
<h2 id="operational-security-firewalls-and-intrusion-detection-systems" class="heading"><a href="#operational-security-firewalls-and-intrusion-detection-systems" class="heading-anchor" aria-label="章节： Operational Security: Firewalls and Intrusion Detection Systems" tabindex="-1"></a><span>Operational Security: Firewalls and Intrusion Detection Systems</span></h2>
<h3 id="firewalls" class="heading"><a href="#firewalls" class="heading-anchor" aria-label="章节： Firewalls" tabindex="-1"></a><span>Firewalls</span></h3>
<p>firewall 用来控置哪些流量可以进入 internal network / host<span class="mojikumi-line-end">，</span>一般要保证所有出入的流量都经过 firewall<span class="mojikumi-line-end">，</span>并且 firewall 自身不会被攻击者控制<span class="mojikumi-line-end">。</span></p>
<h4 id="traditional-packet-filters" class="heading"><a href="#traditional-packet-filters" class="heading-anchor" aria-label="章节： Traditional Packet Filters" tabindex="-1"></a><span>Traditional Packet Filters</span></h4>
<p>通过 packet header 来控制是否允许 packet 通过<span class="mojikumi-line-end">。</span>例如根据 IP address<span class="mojikumi-line-end">、</span>protocol type<span class="mojikumi-line-end">、</span>port<span class="mojikumi-line-end">、</span>TCP flags<span class="mojikumi-line-end">、</span>ICMP message type<span class="mojikumi-line-end">、</span>router interface 等进行控制<span class="mojikumi-line-end">。</span></p>
<p>一些 packet filter 可以实现的 policy 的例子<span class="mojikumi-line-end">：</span></p>
<ul>
<li>drop outgoing 的对 port 80/443 的访问<span class="mojikumi-line-end">：</span>禁止访问外部 Web<span class="mojikumi-line-end">。</span></li>
<li>drop incoming TCP SYN segment<span class="mojikumi-line-end">：</span>禁止从外界创建 TCP connection<span class="mojikumi-line-end">。</span></li>
<li>drop 除了外界 port 是 53 的所有 UDP traffic<span class="mojikumi-line-end">：</span>禁止其他 UDP traffic<span class="mojikumi-line-end">，</span>只允许 DNS<span class="mojikumi-line-end">。</span></li>
<li>drop 发向 broadcast address 的 ICMP ping packets<span class="mojikumi-line-end">：</span>避免遭受 smurf DoS attack<span class="mojikumi-line-end">。</span></li>
<li>drop outgoing ICMP TTL expired packets<span class="mojikumi-line-end">：</span>避免被 traceroute<span class="mojikumi-line-end">。</span></li>
</ul>
<h4 id="stateful-packet-filters" class="heading"><a href="#stateful-packet-filters" class="heading-anchor" aria-label="章节： Stateful Packet Filters" tabindex="-1"></a><span>Stateful Packet Filters</span></h4>
<p>stateful packet filter 可以通过记录状态信息来实现更复杂的控制<span class="mojikumi-line-end">，</span>例如跟踪 TCP connection<span class="mojikumi-line-end">，</span>从而更加精准地只允许从内部建立的 TCP connection 而拒绝从外部建立的 TCP connection<span class="mojikumi-line-end">。</span></p>
<h4 id="application-gateway" class="heading"><a href="#application-gateway" class="heading-anchor" aria-label="章节： Application Gateway" tabindex="-1"></a><span>Application Gateway</span></h4>
<p>packet filter 只根据 header 中的信息进行控制<span class="mojikumi-line-end">，</span>而不管 application data<span class="mojikumi-line-end">。</span></p>
<p>application gateway 是一个 application-specific server<span class="mojikumi-line-end">，</span>所有 application data 都需要通过它<span class="mojikumi-line-end">。</span>一个 host 可以同时运行多个 application gateway<span class="mojikumi-line-end">。</span></p>
<p>application gateway 可以根据 application data 进行控制<span class="mojikumi-line-end">，</span>提供例如 authorization 的高级 filter 功能<span class="mojikumi-line-end">，</span>还可以提供除了 filter 外的其他功能<span class="mojikumi-line-end">，</span>例如 proxy<span class="mojikumi-line-end">。</span></p>
<h3 id="intrusion-detection-systems" class="heading"><a href="#intrusion-detection-systems" class="heading-anchor" aria-label="章节： Intrusion Detection Systems" tabindex="-1"></a><span>Intrusion Detection Systems</span></h3>
<p>和 application gateway 类似<span class="mojikumi-line-end">，</span>intrusion detection system (IDS) 不止查看 header<span class="mojikumi-line-end">，</span>还会查看 application data<span class="mojikumi-line-end">，</span>这称作 deep packet inspection<span class="mojikumi-line-end">。</span></p>
<p>与 application gateway 不同<span class="mojikumi-line-end">，</span>IDS 不是 application-specific 的<span class="mojikumi-line-end">，</span>而是会检测到各种各样的 suspicious packet / series of packets<span class="mojikumi-line-end">，</span>例如 network mapping<span class="mojikumi-line-end">、</span>port scan<span class="mojikumi-line-end">、</span>TCP stack scan<span class="mojikumi-line-end">、</span>DoS attack<span class="mojikumi-line-end">、</span>worm / virus<span class="mojikumi-line-end">、</span>OS / application vulnerability attack<span class="mojikumi-line-end">。</span>检测到时<span class="mojikumi-line-end">，</span>IDS 会向管理员发送警告<span class="mojikumi-line-end">，</span>而 intrustion prevention system (IPS) 则会 filter out 这些 packet<span class="mojikumi-line-end">。</span></p>
<p>因为 deep packet inspection 需要一定的算力<span class="mojikumi-line-end">，</span>当流量过大时<span class="mojikumi-line-end">，</span>一个 organization 往往需要多个 IDS<span class="mojikumi-line-end">，</span>分散在网络中<span class="mojikumi-line-end">，</span>而非只设置一个在整个网络的入口<span class="mojikumi-line-end">。</span></p>
<p>IDS 分为 signature-based 和 anomaly-based 两种<span class="mojikumi-line-end">。</span></p>
<p>signature 即 packet 的特征<span class="mojikumi-line-end">，</span>例如 header 的某些项以及 application data 包含某一内容<span class="mojikumi-line-end">。</span>IDS 维护了一个 signature database 用来进行匹配<span class="mojikumi-line-end">。</span>signature-based IDS 需要事先知道 attack 的特征<span class="mojikumi-line-end">，</span>所以无法防范新型 attack<span class="mojikumi-line-end">。</span>signature 的匹配容易出现 false alarm<span class="mojikumi-line-end">，</span>而且性能开销较大<span class="mojikumi-line-end">。</span></p>
<p>anomaly-based IDS 基于平时的 traffic 来检测 statistically unusual 的 traffic<span class="mojikumi-line-end">，</span>例如检测到突然增多的 ICMP packets<span class="mojikumi-line-end">。</span>anomaly-based IDS 不依赖于实现对攻击的了解<span class="mojikumi-line-end">，</span>所以有可能检测到新型的攻击<span class="mojikumi-line-end">。</span>但是区分 normal traffic 和 statistically unusual traffic 是困难的<span class="mojikumi-line-end">，</span>现在的 IDS 通常还是以 signature-based 为主<span class="mojikumi-line-end">。</span></p>
<p>Snort 是一款 open-source IDS<span class="mojikumi-line-end">，</span>有一个活跃的 community 维护着 signature database<span class="mojikumi-line-end">。</span></p>
<section data-footnotes="" class="footnotes"><h2 class="sr-only" id="footnote-label">Footnotes</h2>
<ol>
<li id="user-content-fn-sign">
<p>P.S. 我有幸在 <a href="https://tuna.moe/event/2021/welcome-and-debian/">第一次参加 tunight</a> 时获得了续老师的 signing<span class="mojikumi-line-end">，</span>当时还完全不懂这些<span class="mojikumi-line-start">（</span><s>现在也不是很懂<span class="mojikumi-line-start">（</span></s> <a href="#user-content-fnref-sign" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content">↩</a></p>
</li>
<li id="user-content-fn-opentls">
<p>See <a href="https://github.com/openssl/openssl/issues/6384">Rename OpenSSL to OpenTLS To Comply with RFC7568 · Issue #6384 · openssl/openssl</a> &amp; <a href="https://www.openssl.org/blog/blog/2018/12/20/20years/">Celebrating 20 Years of OpenSSL - OpenSSL Blog</a> <a href="#user-content-fnref-opentls" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content">↩</a></p>
</li>
<li id="user-content-fn-esp-next-header">
<p>可以参考 <a href="http://www.tcpipguide.com/free/t_IPSecEncapsulatingSecurityPayloadESP-2.htm" class="break-all">http://www.tcpipguide.com/free/t_IPSecEncapsulatingSecurityPayloadESP-2.htm</a> <a href="#user-content-fnref-esp-next-header" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content">↩</a></p>
</li>
</ol>
</section><aside role="note" data-v-a2ab257f=""><div class="shadow-md rd-1 b-l-6 my-6 bg-gray-2 dark:bg-gray-11 b-gray-6" data-v-a2ab257f=""><div class="p-3 flex justify-between items-center" data-v-a2ab257f=""><h2 class="flex items-center gap-1 font-bold" data-v-a2ab257f=""><span class="text-5 i-mdi-timer-sand text-gray" data-v-a2ab257f=""></span><!--v-if--><span data-v-a2ab257f="">WIP</span></h2><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f=""><p>未完待续…… 🕊️</p></div></div></aside></section><div class="article-style my-9"><hr></div><footer><div class="my-6 b-l-6 b-gray-4 bg-area p-6 shadow dark:b-gray-11" itemprop="copyrightNotice"><ul class="flex flex-col gap-1"><li class="flex gap-1"><span class="shrink-0">文章作者:</span><a href="https://github.com/ouuan" rel="author">ouuan</a></li><li class="flex gap-1"><span class="shrink-0">原文链接:</span><a href="https://ouuan.moe/post/2023/07/cnatda-8" rel="canonical" class="break-all">https://ouuan.moe/post/2023/07/cnatda-8</a></li><li class="flex gap-1"><span class="shrink-0">许可协议:</span><span> 本文采用 <span class="article-style"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh" class="font-sans" itemprop="license">CC BY-SA 4.0</a></span> 许可协议进行授权，未满足 <span class="underline decoration-dotted" title="简而言之，转载时必须标明出处（本文的链接），标明是转载而非原创，标明作了哪些修改，并使用相同的许可协议，但无需私信征求许可">许可协议要求</span> 不得转载。 </span></li></ul></div></footer></article><div class="my-6 print:hidden" itemprop="comment" itemscope="" itemtype="https://schema.org/Comment"><ile-root id="ile-4"></ile-root><script></script><script type="module" async="">import{h as r,c as m}from"/assets/iles.e381640b.js";import{_ as o}from"/assets/GiscusCommentsInner.b6b2a6ec.js";import"/assets/vendor-vue.bda4d3d4.js";import"/assets/vite.5ce4fca4.js";import"/assets/useTheme.546d36da.js";import"/assets/site.b21fb919.js";r(m,o,"ile-4",{term:"CNATDA 第八章学习笔记"},{});
</script></div><nav class="my-6 flex justify-between gap-6 print:hidden lg:text-justify"><div class="flex flex-1"><a class="flex items-center gap-1 hover:text-hover" href="/post/2023/07/cnatda-6"><span class="i-mdi-chevron-left"></span><span class="sr-only">上一篇</span><span class="break-anywhere">CNATDA 第六章学习笔记</span></a></div></nav></div><ile-root id="ile-5"><div class="flex print:hidden"><aside style="max-height:calc(100vh - 10rem);" id="__toc" class="sticky top-16 m-4 hidden w-72 rd-2 bg-card py-6 shadow xl:block 2xl:w-84 3xl:w-96" aria-label="文章目录" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPSideBar"><div class="mb-3 flex flex-wrap items-center justify-between gap-2 pl-8 pr-4"><div class="flex items-center"><h2 class="text-xl font-bold"> 文章目录 </h2><button id="__toc-close" class="flex items-center px-1 text-xl" title="关闭目录" aria-controls="__toc" aria-expanded="true"><span class="i-mdi-close"></span></button></div><div><label class="ml-auto flex items-center gap-1"><span>展开全部</span><input type="checkbox"></label></div></div><div style="max-height:calc(100% - 2rem);" class="overflow-auto overscroll-contain pl-8 pr-4"><ol data-v-c5806953=""><li id="__toc-item-what-is-network-security" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#what-is-network-security" data-v-c5806953=""><span data-v-c5806953="">What Is Network Security?</span></a></li><li id="__toc-item-principles-of-cryptography" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#principles-of-cryptography" data-v-c5806953=""><span data-v-c5806953="">Principles of Cryptography</span></a></li><li id="__toc-item-message-integrity-and-digital-signatures" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#message-integrity-and-digital-signatures" data-v-c5806953=""><span data-v-c5806953="">Message Integrity and Digital Signatures</span></a></li><li id="__toc-item-end-point-authentication" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#end-point-authentication" data-v-c5806953=""><span data-v-c5806953="">End-Point Authentication</span></a></li><li id="__toc-item-securing-e-mail" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#securing-e-mail" data-v-c5806953=""><span data-v-c5806953="">Securing E-Mail</span></a></li><li id="__toc-item-securing-tcp-connections-tls" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#securing-tcp-connections-tls" data-v-c5806953=""><span data-v-c5806953="">Securing TCP Connections: TLS</span></a></li><li id="__toc-item-network-layer-security-ipsec-and-virtual-private-networks" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#network-layer-security-ipsec-and-virtual-private-networks" data-v-c5806953=""><span data-v-c5806953="">Network-Layer Security: IPsec and Virtual Private Networks</span></a></li><li id="__toc-item-securing-wireless-lans-and-4g5g-cellular-networks" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-circle-medium" data-v-c5806953=""></span><a class="transition-color ease-out" href="#securing-wireless-lans-and-4g5g-cellular-networks" data-v-c5806953=""><span data-v-c5806953="">Securing Wireless LANs and 4G/5G Cellular Networks</span></a></li><li id="__toc-item-operational-security-firewalls-and-intrusion-detection-systems" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#operational-security-firewalls-and-intrusion-detection-systems" data-v-c5806953=""><span data-v-c5806953="">Operational Security: Firewalls and Intrusion Detection Systems</span></a></li></ol></div></aside><button style="display:none;" id="__toc-open" title="显示文章目录" class="bottom-24 text-lg floating-button" aria-haspopup="dialog" aria-controls="__toc" aria-expanded="true"><span class="i-mdi-menu"></span></button></div></ile-root><script></script><script type="module" async="">import{h as i,c as s}from"/assets/iles.e381640b.js";import{_ as r}from"/assets/TableOfContents.ee0e2b18.js";import"/assets/vendor-vue.bda4d3d4.js";import"/assets/vite.5ce4fca4.js";i(s,r,"ile-5",function(e,t,l){return{headings:[{level:t,title:"What Is Network Security?",slug:"what-is-network-security"},{level:t,title:"Principles of Cryptography",slug:"principles-of-cryptography"},{level:e,title:"Symmetric Key Cryptography",slug:"symmetric-key-cryptography"},{level:e,title:"Public Key Encryption",slug:"public-key-encryption"},{level:t,title:"Message Integrity and Digital Signatures",slug:"message-integrity-and-digital-signatures"},{level:t,title:"End-Point Authentication",slug:"end-point-authentication"},{level:t,title:"Securing E-Mail",slug:"securing-e-mail"},{level:e,title:"Secure E-Mail",slug:"secure-e-mail"},{level:e,title:"PGP",slug:"pgp"},{level:t,title:"Securing TCP Connections: TLS",slug:"securing-tcp-connections-tls"},{level:e,title:"TLS Handshake",slug:"tls-handshake"},{level:e,title:"TLS Data Transfer",slug:"tls-data-transfer"},{level:e,title:"TLS Connection Closure",slug:"tls-connection-closure"},{level:t,title:"Network-Layer Security: IPsec and Virtual Private Networks",slug:"network-layer-security-ipsec-and-virtual-private-networks"},{level:e,title:"IPsec and Virtual Private Networks (VPNs)",slug:"ipsec-and-virtual-private-networks-vpns"},{level:e,title:"The AH and ESP Protocols",slug:"the-ah-and-esp-protocols"},{level:e,title:"Security Associations",slug:"security-associations"},{level:e,title:"The IPsec Datagram",slug:"the-ipsec-datagram"},{level:e,title:"IKE: Key Management in IPsec",slug:"ike-key-management-in-ipsec"},{level:t,title:"Securing Wireless LANs and 4G/5G Cellular Networks",slug:"securing-wireless-lans-and-4g5g-cellular-networks"},{level:t,title:"Operational Security: Firewalls and Intrusion Detection Systems",slug:"operational-security-firewalls-and-intrusion-detection-systems"},{level:e,title:"Firewalls",slug:"firewalls"},{level:l,title:"Traditional Packet Filters",slug:"traditional-packet-filters"},{level:l,title:"Stateful Packet Filters",slug:"stateful-packet-filters"},{level:l,title:"Application Gateway",slug:"application-gateway"},{level:e,title:"Intrusion Detection Systems",slug:"intrusion-detection-systems"}]}}(3,2,4),{});
</script></div></main><footer class="flex flex-col gap-1 bg-card p-6 text-footer" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPFooter"><div class="flex flex-wrap items-center justify-center gap-x-1"><span>Copyright ©</span><span>2022 - 2023</span><a class="flex items-center" href="/sponsor" title="赞赏支持"><span class="i-mdi-heart text-red dark:text-red-7"></span></a><span>ouuan</span></div><div class="flex flex-wrap items-center justify-center gap-x-1"><span> 当前有 <ile-root id="ile-6"><span><span class="i-mdi-loading motion-safe:animate-spin"></span><span class="sr-only">加载中</span></span></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.e381640b.js";import"/assets/vendor-vue.bda4d3d4.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.e381640b.js").then(o=>o.v),["assets/iles.e381640b.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/VisitorCountRealtime.4d85595f.js"),["assets/VisitorCountRealtime.4d85595f.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-6",{},{})});export default E();
</script> 人在线 </span><span class="i-mdi-circle-small"></span><span title="实际上，为了保护用户隐私，同一用户的多次访问只有在同一天内使用同一浏览器在同一ip下才会被算作同一人"> 共有 <ile-root id="ile-7"><span><span class="i-mdi-loading motion-safe:animate-spin"></span><span class="sr-only">加载中</span></span></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.e381640b.js";import"/assets/vendor-vue.bda4d3d4.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.e381640b.js").then(o=>o.v),["assets/iles.e381640b.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/VisitorCount.11a0e95f.js"),["assets/VisitorCount.11a0e95f.js","assets/VisitorCount.065e72b2.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-7",{},{})});export default E();
</script> 人到访过这里 </span></div><div class="flex flex-wrap items-center justify-center gap-x-1"> 基于 <a class="underline" href="https://github.com/ElMassimo/iles">îles</a><a class="underline" href="https://github.com/ouuan/iles-blog/blob/master/package.json">等项目</a><span class="i-mdi-circle-small"></span><span>由 ouuan 设计/制作</span><span class="i-mdi-circle-small"></span><a class="underline" href="https://github.com/ouuan/iles-blog">源代码</a></div></footer><meta itemprop="copyrightYear" content="2022 - 2023"><div class="hidden" itemscope="" itemtype="https://schema.org/Person" itemprop="copyrightHolder"><meta itemprop="name" content="ouuan"><meta itemprop="givenName" content="Yufan"><meta itemprop="familyName" content="You"><meta itemprop="url" content="https://github.com/ouuan"><link itemprop="gender" href="https://schema.org/Male"><meta itemprop="image" content="/android-chrome-512x512.png"></div><ile-root id="ile-8"><button class="group bottom-10 flex-col floating-button" title="前往底部"><div aria-hidden="true" class="flex justify-center"><span class="i-mdi-chevron-double-up motion-safe:transition-font-size text-0"></span></div><div aria-hidden="true" class="text-0 group-hover:text-3.5 motion-safe:transition-font-size"></div><div aria-hidden="false" class="flex justify-center"><span class="i-mdi-chevron-double-down motion-safe:transition-font-size text-5 group-hover:text-3"></span></div></button></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.e381640b.js";import"/assets/vendor-vue.bda4d3d4.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.e381640b.js").then(o=>o.v),["assets/iles.e381640b.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/BackToTop.b700b311.js"),["assets/BackToTop.b700b311.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-8",{},{})});export default E();
</script><div class="hidden"></div><ile-root id="ile-9"></ile-root><script></script><script type="module" async="">var p=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var e=(t,a,_)=>new Promise((c,n)=>{var f=o=>{try{i(_.next(o))}catch(r){n(r)}},l=o=>{try{i(_.throw(o))}catch(r){n(r)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,l);i((_=_.apply(t,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.e381640b.js";import"/assets/vendor-vue.bda4d3d4.js";var u=p(m=>{const E=()=>e(m,null,function*(){return(yield d(()=>import("/assets/iles.e381640b.js").then(t=>t.d),["assets/iles.e381640b.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default}),h=()=>e(m,null,function*(){return(yield d(()=>import("/assets/PlausibleTrigger.097a6894.js"),["assets/PlausibleTrigger.097a6894.js","assets/plausible.72e01c7c.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).onLoad});s(E,h,"ile-9",{},{})});export default u();
</script><div></div><ile-root id="ile-10"></ile-root><script></script><script type="module" async="">var p=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var e=(t,a,_)=>new Promise((c,n)=>{var f=o=>{try{i(_.next(o))}catch(r){n(r)}},l=o=>{try{i(_.throw(o))}catch(r){n(r)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,l);i((_=_.apply(t,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.e381640b.js";import"/assets/vendor-vue.bda4d3d4.js";var u=p(m=>{const E=()=>e(m,null,function*(){return(yield d(()=>import("/assets/iles.e381640b.js").then(t=>t.d),["assets/iles.e381640b.js","assets/vendor-vue.bda4d3d4.js","assets/vite.5ce4fca4.js"])).default}),h=()=>e(m,null,function*(){return(yield d(()=>import("/assets/TextJustifyFix.4fa5e997.js"),[])).onLoad});s(E,h,"ile-10",{},{})});export default u();
</script><meta itemprop="inLanguage" content="zh-CN"></div>
  
</body></html>