<!DOCTYPE html><html lang="zh-CN"><head>
    <meta charset="UTF-8">
<title>CS:APP 第二章学习笔记 - ouuan's blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="CS:APP 第二章 “Representing and Manipulating Information” 的学习笔记。
这章的主要内容为 byte、整数和浮点数的存储及计算。
">
<meta property="og:url" content="https://ouuan.moe/post/2022/09/csapp-2">
<meta property="og:site_name" content="ouuan's blog">
<meta property="og:title" content="CS:APP 第二章学习笔记 · ouuan's blog">
<meta property="og:description" content="CS:APP 第二章 “Representing and Manipulating Information” 的学习笔记。
这章的主要内容为 byte、整数和浮点数的存储及计算。
">
<meta property="twitter:domain" content="ouuan.moe">
<meta property="twitter:title" content="CS:APP 第二章学习笔记 · ouuan's blog">
<meta property="twitter:description" content="CS:APP 第二章 “Representing and Manipulating Information” 的学习笔记。
这章的主要内容为 byte、整数和浮点数的存储及计算。
">
<meta property="twitter:url" content="https://ouuan.moe/post/2022/09/csapp-2">
<style>html:not(.dark):not(.light) { visibility: hidden; } body { visibility: hidden; }</style>
<script>(() => { let dark; try { const theme = localStorage && localStorage.getItem('vueuse-color-scheme'); if (theme === 'dark') dark = true; else if (theme === 'light') dark = false; else dark = window.matchMedia('(prefers-color-scheme: dark)').matches; } catch (e) { dark = false; } document.documentElement.classList.add(dark ? 'dark' : 'light'); })()</script>
<noscript><style>@media (prefers-color-scheme: light) { :root:not(.dark):not(.light) { color-scheme: light; --text-color: #232637; --bg-color: #DEE6EE; --card-color: #EFF3F7; --link-color: #1E66B8; --hover-color: #2E80DD; --active-color: #164C89; --bghover-color: #D6E0EA; --popup-color: #F7F9FB; --footer-color: #5F627B; --area-color: #E1E2E8; --nested-color: #F0F0F3; } } @media (prefers-color-scheme: dark) { :root:not(.dark):not(.light) { color-scheme: dark; --text-color: #E6EDF2; --bg-color: #0D0E15; --card-color: #1F2130; --link-color: #8BB8EC; --hover-color: #A2C6F0; --active-color: #74AAE8; --bghover-color: #353853; --popup-color: #2C2F45; --footer-color: #9699AE; --area-color: #2F313D; --nested-color: #3C3E4E; } } html { visibility:visible !important; }</style></noscript>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#a07e5b">
<link rel="canonical" href="https://ouuan.moe/post/2022/09/csapp-2">
<link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS Feed - ouuan's blog">
<link rel="alternate" type="application/atom+xml" href="/feed.atom" title="Atom Feed - ouuan's blog">
<link rel="alternate" type="application/json" href="/feed.json" title="JSON Feed - ouuan's blog">
<link rel="dns-prefetch" href="https://plausible.ouuan.moe">
<link rel="preconnect" href="https://blog-visitor-count.ouuan.moe">
<link rel="stylesheet" href="/vendors/katex/katex.css">
<link rel="sitemap" href="https://ouuan.moe/sitemap.xml">
<meta name="author" content="ouuan">
<meta name="twitter:creator" content="@ouuan">
<meta name="twitter:card" content="summary">
<meta property="og:image" content="https://ouuan.moe/images/2022/09/csapp-2.png">
<meta property="generator" content="îles">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-09-18T16:38:50.000Z">
<meta property="article:modified_time" content="2022-09-24T06:02:50.000Z">
<meta property="article:author" content="ouuan">
<meta property="article:tag" content="csapp">
<meta property="article:tag" content="学习笔记">
<link rel="preconnect" href="https://giscus.app">
<link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
    <link rel="stylesheet" href="/assets/style-eafb8557.css">
    
  <link rel="modulepreload" href="/assets/iles.c6dd5c6f.js" crossorigin=""><link rel="modulepreload" href="/assets/vendor-vue.0eea1c14.js" crossorigin=""><link rel="modulepreload" href="/assets/vite.5ce4fca4.js" crossorigin=""><link rel="modulepreload" href="/assets/SearchBar.8104d29d.js" crossorigin=""><link rel="modulepreload" href="/assets/TableOfContents.f9fa0cb2.js" crossorigin=""><link rel="modulepreload" href="/assets/PostHead.1c44431c.js" crossorigin=""><link rel="modulepreload" href="/assets/VisitorCount.83168c3c.js" crossorigin=""><link rel="modulepreload" href="/assets/site.b21fb919.js" crossorigin=""><link rel="modulepreload" href="/assets/GiscusCommentsInner.52a647a0.js" crossorigin=""><link rel="modulepreload" href="/assets/useTheme.11613ee1.js" crossorigin=""><style>@font-face { font-family: "Noto Serif SC Web Font"; font-weight: 400; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Regular.unique.820fe6b8.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Regular.unique.1d05a19a.woff') format('woff'); unicode-range: U+0-9ed8; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 400; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Regular.common.b4961831.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Regular.common.b7332db3.woff') format('woff'); unicode-range: U+0-ff1b; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 700; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Bold.unique.789aeb98.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Bold.unique.e2627418.woff') format('woff'); unicode-range: U+0-ff09; } @font-face { font-family: "Noto Serif SC Web Font"; font-weight: 700; font-style: normal; font-display: swap; src: url('/assets/fonts/NotoSerifSC-Bold.common.72c1f24d.woff2') format('woff2'), url('/assets/fonts/NotoSerifSC-Bold.common.176c74b1.woff') format('woff'); unicode-range: U+0-ff1f; }</style><link rel="preload" href="/assets/fonts/NotoSerifSC-Regular.unique.820fe6b8.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Regular.common.b4961831.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Bold.unique.789aeb98.woff2" as="font" type="font/woff2" crossorigin=""><link rel="preload" href="/assets/fonts/NotoSerifSC-Bold.common.72c1f24d.woff2" as="font" type="font/woff2" crossorigin=""></head>
  <body itemscope="" itemtype="https://schema.org/ItemPage">
    <div id="app"><header class="bg-card shadow print:hidden" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPHeader"><div class="flex flex-wrap justify-center whitespace-nowrap px-4 page-container sm:flex-nowrap"><div class="flex basis-full items-stretch justify-center sm:mr-3 sm:basis-auto"><a class="flex items-center p-3 text-xl font-serif bghover" href="/"><span>ouuan<span class="mojikumi-narrow-left">’</span>s blog</span></a></div><nav class="flex"><ul class="flex"><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/"><span>首页</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/posts"><span>文章</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/tags"><span>标签</span></a></li><li class="flex flex-1 items-stretch justify-center"><a class="flex items-center p-3 bghover" href="/about"><span>关于</span></a></li></ul></nav><div class="sm:basis-full"></div><ul class="flex"><li class="flex"><ile-root id="ile-1"><div class="flex items-stretch lg:hidden"><a class="flex items-center p-2 bghover" href="/search" title="全站搜索"><span class="i-mdi-magnify text-xl"></span></a></div><form role="search" class="hidden items-stretch justify-center lg:flex"><div class="flex items-center"><input value="" class="w-48 rd-full bg-area px-3 py-1" type="search" placeholder="关键词" aria-label="全站搜索"></div><a class="flex items-center p-2 bghover" href="/search?q=" title="全站搜索"><span class="i-mdi-magnify text-xl"></span></a></form></ile-root><script></script><script type="module" async="">import{h as r,c as a}from"/assets/iles.c6dd5c6f.js";import{_ as m}from"/assets/SearchBar.8104d29d.js";import"/assets/vendor-vue.0eea1c14.js";import"/assets/vite.5ce4fca4.js";r(a,m,"ile-1",{},{});
</script></li><li class="flex items-stretch"><a class="flex items-center p-2 bghover" href="/feed.xml" title="RSS 订阅"><span class="i-mdi-rss text-xl"></span></a></li><li class="flex"><ile-root id="ile-2"><div class="relative flex items-stretch"><button title="暗色模式设置" class="flex items-center p-2 bghover" aria-haspopup="menu" aria-controls="__theme-switcher" aria-expanded="false"><span class="i-mdi-theme-light-dark text-xl"></span></button><ul style="display:none;" id="__theme-switcher" class="absolute right-0 top-full z-20 whitespace-nowrap rd-1 bg-popup shadow-md" role="menu" aria-label="暗色模式选项"><li class="bghover" role="menuitemradio" aria-checked="true"><button class="flex items-center p-1 text-hover"><span class="i-mdi-cellphone md:i-mdi-tablet lg:i-mdi-monitor mr-1"></span><span>跟随系统</span></button></li><li class="bghover" role="menuitemradio" aria-checked="false"><button class="flex items-center p-1"><span class="i-mdi-white-balance-sunny mr-1"></span><span>总是亮色</span></button></li><li class="bghover" role="menuitemradio" aria-checked="false"><button class="flex items-center p-1"><span class="i-mdi-weather-night mr-1"></span><span>总是暗色</span></button></li></ul></div></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.c6dd5c6f.js";import"/assets/vendor-vue.0eea1c14.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.c6dd5c6f.js").then(o=>o.v),["assets/iles.c6dd5c6f.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/ThemeSwitcher.501df210.js"),["assets/ThemeSwitcher.501df210.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js","assets/useTheme.11613ee1.js"])).default});s(u,v,"ile-2",{},{})});export default E();
</script></li></ul></div></header><main class="min-h-100vh py-6 page-container" itemprop="mainContentOfPage" itemscope="" itemtype="https://schema.org/WebPageElement"><div class="flex flex-row-reverse justify-center"><ile-root id="ile-3"><div class="flex print:hidden"><aside style="max-height:calc(100vh - 10rem);" id="__toc" class="sticky top-16 m-4 hidden w-72 rd-2 bg-card py-6 shadow xl:block 2xl:w-84 3xl:w-96" aria-label="文章目录" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPSideBar"><div class="mb-3 flex flex-wrap items-center justify-between gap-2 pl-8 pr-4"><div class="flex items-center"><h2 class="text-xl font-bold"> 文章目录 </h2><button id="__toc-close" class="flex items-center px-1 text-xl" title="关闭目录" aria-controls="__toc" aria-expanded="true"><span class="i-mdi-close"></span></button></div><div><label class="ml-auto flex items-center gap-1"><span>展开全部</span><input type="checkbox"></label></div></div><div style="max-height:calc(100% - 2rem);" class="overflow-auto overscroll-contain pl-8 pr-4"><ol data-v-c5806953=""><li id="__toc-item-information-storage" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#information-storage" data-v-c5806953=""><span data-v-c5806953="">Information Storage</span></a></li><li id="__toc-item-integer-representations" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#integer-representations" data-v-c5806953=""><span data-v-c5806953="">Integer Representations</span></a></li><li id="__toc-item-integer-arithmetic" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#integer-arithmetic" data-v-c5806953=""><span data-v-c5806953="">Integer Arithmetic</span></a></li><li id="__toc-item-floating-point" class="relative my-1" data-v-c5806953=""><span class="absolute top-1.2 left--4
                   motion-safe:transition-transform ease-out i-mdi-chevron-right" data-v-c5806953=""></span><span class="sr-only" data-v-c5806953="">已折叠</span><a class="transition-color ease-out" href="#floating-point" data-v-c5806953=""><span data-v-c5806953="">Floating Point</span></a></li></ol></div></aside><button style="display:none;" id="__toc-open" title="显示文章目录" class="bottom-24 text-lg floating-button" aria-haspopup="dialog" aria-controls="__toc" aria-expanded="true"><span class="i-mdi-menu"></span></button></div></ile-root><script></script><script type="module" async="">import{h as d,c as p}from"/assets/iles.c6dd5c6f.js";import{_ as c}from"/assets/TableOfContents.f9fa0cb2.js";import"/assets/vendor-vue.0eea1c14.js";import"/assets/vite.5ce4fca4.js";d(p,c,"ile-3",function(e,l,t,i,s,g,n,r,u,o,v,m){return{headings:[{level:l,title:"Information Storage",slug:"information-storage"},{level:e,title:"Byte Ordering",slug:"byte-ordering"},{level:e,title:t,slug:t},{level:l,title:"Integer Representations",slug:"integer-representations"},{level:e,title:i,slug:i},{level:e,title:"signed unsigned 转换",slug:"signed-unsigned-转换"},{level:e,title:s,slug:s},{level:e,title:g,slug:g},{level:l,title:"Integer Arithmetic",slug:"integer-arithmetic"},{level:e,title:n,slug:n},{level:e,title:r,slug:r},{level:e,title:"除以 2 的幂",slug:"除以-2-的幂"},{level:e,title:u,slug:u},{level:l,title:"Floating Point",slug:"floating-point"},{level:e,title:"IEEE 浮点表示",slug:"ieee-浮点表示"},{level:e,title:o,slug:o},{level:e,title:v,slug:v},{level:e,title:m,slug:m},{level:e,title:"C 语言中浮点数类型转换",slug:"c-语言中浮点数类型转换"}]}}(3,2,"位运算","整型编码","整型增长","整型缩短","加法和取反","乘法","总结","特殊（标志性）的浮点数","浮点数舍入","浮点数运算"),{});
</script><div class="grow m-4 standard-card max-w-200"><article itemprop="mainEntity" itemscope="" itemtype="https://schema.org/BlogPosting"><div class="hidden" itemscope="" itemtype="https://schema.org/Person" itemprop="author"><meta itemprop="name" content="ouuan"><meta itemprop="givenName" content="Yufan"><meta itemprop="familyName" content="You"><meta itemprop="url" content="https://github.com/ouuan"><link itemprop="gender" href="https://schema.org/Male"><meta itemprop="image" content="/android-chrome-512x512.png"></div><meta itemprop="mainEntityOfPage" content="https://ouuan.moe/post/2022/09/csapp-2"><meta itemprop="image" content="https://ouuan.moe/images/2022/09/csapp-2.png"><ile-root id="ile-4" class="my-12"><header class="my-12" data-v-90fe8c98=""><h1 class="mb-3 mt-6 text-center text-8" itemprop="headline" data-v-90fe8c98=""><span class="inline-block font-serif break-anywhere" data-v-90fe8c98="">CS:APP 第二章学习笔记</span></h1><div class="flex flex-wrap justify-center gap-x-4 gap-y-1 text-footer md:text-sm" data-v-90fe8c98=""><span class="flex items-center" title="创建于 2022-09-18 13:28:17 GMT+8" data-v-90fe8c98=""><span class="i-mdi-folder-plus-outline mr-1" data-v-90fe8c98=""></span><span class="sr-only" data-v-90fe8c98="">创建于</span><a class="hover:underline" href="https://github.com/ouuan/iles-blog/blob/master/src/pages/post/2022/09/csapp-2.mdx?plain=1" data-v-90fe8c98=""><time datetime="2022-09-18T13:28:17+08:00" itemprop="dateCreated" data-v-90fe8c98="">2022-09-18</time></a></span><span class="flex items-center" title="修改于 2022-09-24 14:02:50 GMT+8" data-v-90fe8c98=""><span class="i-mdi-update mr-1" data-v-90fe8c98=""></span><span class="sr-only" data-v-90fe8c98="">修改于</span><a class="hover:underline" href="https://github.com/ouuan/iles-blog/commits/master/src/pages/post/2022/09/csapp-2.mdx" data-v-90fe8c98=""><time datetime="2022-09-24T14:02:50+08:00" itemprop="dateModified" data-v-90fe8c98="">2022-09-24</time></a></span><span class="flex items-center" title="访问量" data-v-90fe8c98=""><span class="i-mdi-eye-outline mr-1" data-v-90fe8c98=""></span><span class="sr-only" data-v-90fe8c98="">访问量</span><span data-v-90fe8c98="">87</span></span><span class="flex flex-wrap justify-center gap-x-2 gap-y-1" data-v-90fe8c98=""><span title="标签: csapp" class="flex items-center" itemprop="keywords" data-v-90fe8c98=""><span class="i-mdi-tag-outline mr-1" data-v-90fe8c98=""></span><span class="sr-only" data-v-90fe8c98="">标签</span><a href="/tag/csapp" class="hover:underline" data-v-90fe8c98="">csapp</a></span><span title="标签: 学习笔记" class="flex items-center" itemprop="keywords" data-v-90fe8c98=""><span class="i-mdi-tag-outline mr-1" data-v-90fe8c98=""></span><span class="sr-only" data-v-90fe8c98="">标签</span><a href="/tag/学习笔记" class="hover:underline" data-v-90fe8c98="">学习笔记</a></span></span></div></header></ile-root><script></script><script type="module" async="">import{h as t,c as e}from"/assets/iles.c6dd5c6f.js";import a from"/assets/PostHead.1c44431c.js";import"/assets/vendor-vue.0eea1c14.js";import"/assets/vite.5ce4fca4.js";import"/assets/VisitorCount.83168c3c.js";import"/assets/site.b21fb919.js";t(e,a,"ile-4",{class:"my-12",href:"/post/2022/09/csapp-2",filename:"src/pages/post/2022/09/csapp-2.mdx",frontmatter:{title:"CS:APP 第二章学习笔记",date:new Date(1663478897e3),image:"/images/2022/09/csapp-2.png",tags:["csapp","学习笔记"],lastUpdated:new Date(166399937e4),published:new Date(166351913e4),visitor:87,description:`CS:APP 第二章 “Representing and Manipulating Information” 的学习笔记。
这章的主要内容为 byte、整数和浮点数的存储及计算。
`},"title-link":!1},{});
</script><section class="article-style" itemprop="articleBody"><p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> 第二章 <span class="mojikumi">“</span>Representing and Manipulating Information<span class="mojikumi">”</span> 的学习笔记<span class="mojikumi-line-end">。</span></p>
<p>这章的主要内容为 byte<span class="mojikumi-line-end">、</span>整数和浮点数的存储及计算<span class="mojikumi-line-end">。</span></p>

<h2 id="information-storage" class="heading"><a href="#information-storage" class="heading-anchor" aria-label="章节： Information Storage" tabindex="-1"></a><span>Information Storage</span></h2>
<p>byte 而非 bit 是 memory 的基本单位<span class="mojikumi-line-end">，</span>memory 可以看作 array of bytes<span class="mojikumi-line-end">。</span></p>
<p>一个 byte 常用两个十六进制数码表示<span class="mojikumi-line-end">。</span></p>
<p>word size 表示 virtual memory 的位数<span class="mojikumi-line-start">（</span>大小<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>所以也是指针的位数<span class="mojikumi-line-end">。</span>在 C 语言中<span class="mojikumi-line-end">，</span>word size 也会影响到整型的大小<span class="mojikumi-line-end">。</span></p>
<h3 id="byte-ordering" class="heading"><a href="#byte-ordering" class="heading-anchor" aria-label="章节： Byte Ordering" tabindex="-1"></a><span>Byte Ordering</span></h3>
<p>很多时候<span class="mojikumi-line-end">，</span>单个数据需要用多个 byte 表示<span class="mojikumi-line-end">，</span>于是就有两种可能的 byte ordering: big endian 和 little endian<span class="mojikumi-line-end">。</span></p>
<p>如果把每个 byte 看作一个<span class="mojikumi-line-start">“</span>数位<span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>而把由多个 byte 组成的单个数据看作一个<span class="mojikumi-line-start">“</span>256 进制数<span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>那么 big endian 就是从高位开始<span class="mojikumi-line-start">“</span>书写<span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>little endian 就是从低位开始<span class="mojikumi-line-start">“</span>书写<span class="mojikumi">”</span><span class="mojikumi-line-end">。</span>也就是说<span class="mojikumi-line-end">，</span>big endian 看上去是更加符合人类的<span class="mojikumi-line-start">“</span>书写习惯<span class="mojikumi-line-end">”</span>的<span class="mojikumi-line-end">，</span>而 little endian 则像是把 1234 写成 4321<span class="mojikumi-line-end">。</span>但是<span class="mojikumi-line-end">，</span>little endian 会把低位存在低地址<span class="mojikumi-line-end">，</span>从这个角度来说又更加<span class="mojikumi-line-start">“</span>自然<span class="mojikumi-line-end">”</span>一些<span class="mojikumi-line-end">。</span></p>
<p>由于 byte 是 memory 的基本单位<span class="mojikumi-line-end">，</span>endian 影响的是 byte 的排列顺序<span class="mojikumi-line-end">，</span>而不是 bit 的排列顺序<span class="mojikumi-line-end">。</span>如果把一串 byte 分别用 big endian 和 little endian 写出来<span class="mojikumi-line-end">，</span>例如 big endian <code>0x1234</code><span class="mojikumi-line-end">，</span>little endian <code>0x3412</code><span class="mojikumi-line-end">，</span>可能会感觉 endian 不影响<span class="mojikumi-line-start">“</span>byte 内部的顺序<span class="mojikumi-line-end">”</span>很奇怪<span class="mojikumi-line-end">，</span>但其实 <code>0x12</code> 和 <code>0x34</code> 只是 byte 的一种表示方式<span class="mojikumi-line-end">，</span>并不代表<span class="mojikumi-line-start">“</span>byte 内部的顺序<span class="mojikumi">”</span><span class="mojikumi-line-end">。</span>上面说<span class="mojikumi-line-start">“</span>把由多个 byte 组成的单个数据看作一个<span class="mojikumi-line-start">‘</span>256 进制数<span class="mojikumi">’</span><span class="mojikumi">”</span><span class="mojikumi-line-end">，</span>也是考虑到 10 进制数的<span class="mojikumi-line-start">“</span>反过来写<span class="mojikumi-line-end">”</span>是为人熟知的<span class="mojikumi-line-end">，</span>这样的话用<span class="mojikumi-line-start">“</span>256 进制数<span class="mojikumi-line-end">”</span>来作类比会比较好理解且不容易误解<span class="mojikumi-line-end">。</span></p>
<p>一般来说<span class="mojikumi-line-end">，</span>byte ordering 对于程序员来说是无关紧要的<span class="mojikumi-line-end">。</span>但是<span class="mojikumi-line-end">，</span>如果要将数据与外界分享<span class="mojikumi-line-start">（</span>例如通过网络传输<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>或者需要查看原始的 byte array<span class="mojikumi-line-start">（</span>在 machine-level program 中<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>或者需要通过类型转换<span class="mojikumi-line-end">、</span>union 等方式绕开 C 语言的类型系统<span class="mojikumi-line-end">，</span>则 byte ordering 会非常重要<span class="mojikumi-line-end">。</span></p>
<p>字符串的表示是不受 byte ordering 影响的<span class="mojikumi-line-end">。</span></p>
<h3 id="位运算" class="heading"><a href="#位运算" class="heading-anchor" aria-label="章节： 位运算" tabindex="-1"></a><span>位运算</span></h3>
<p>主要是左移<span class="mojikumi-line-end">、</span>右移<span class="mojikumi-line-end">，</span>其它是熟知的<span class="mojikumi-line-end">。</span></p>
<p>左移时高位会被丢弃<span class="mojikumi-line-end">，</span>低位会填充零<span class="mojikumi-line-end">。</span></p>
<p>右移则有两种: 逻辑右移和算术右移<span class="mojikumi-line-end">。</span>两者都是丢弃低位<span class="mojikumi-line-end">，</span>但逻辑右移是高位填零<span class="mojikumi-line-end">，</span>算术右移是高位填原来最高位的值<span class="mojikumi-line-end">。</span></p>
<p>在 C 语言中<span class="mojikumi-line-end">，</span>unsigned integer 一定是逻辑右移<span class="mojikumi-line-end">，</span>而 signed integer 则一般是算术右移<span class="mojikumi-line-end">。</span></p>
<p>算术右移的行为是为了在使用补码表示负数时得到正确的结果<span class="mojikumi-line-end">。</span></p>
<p>在位移过大<span class="mojikumi-line-start">（</span>超过 word size<span class="mojikumi-line-end">）</span>时<span class="mojikumi-line-end">，</span>行为是不确定的<span class="mojikumi-line-end">，</span>但一般会将位移对 word size 取模<span class="mojikumi-line-end">。</span></p>
<h2 id="integer-representations" class="heading"><a href="#integer-representations" class="heading-anchor" aria-label="章节： Integer Representations" tabindex="-1"></a><span>Integer Representations</span></h2>
<h3 id="整型编码" class="heading"><a href="#整型编码" class="heading-anchor" aria-label="章节： 整型编码" tabindex="-1"></a><span>整型编码</span></h3>
<p>unsigned integer 的编码就是普通的二进制<span class="mojikumi-line-end">。</span></p>
<p>signed integer 一般采用补码 (two<span class="mojikumi-narrow-left">’</span>s-complement encoding)<span class="mojikumi-line-end">，</span>即在 word size 为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></span> 时最高位表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msup><mn>2</mn><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">-2^{w-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span> 而非 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{w-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">。</span>也就是说<span class="mojikumi-line-end">，</span>最高位为 0 表示非负<span class="mojikumi-line-end">，</span>为 1 表示负数<span class="mojikumi-line-end">；</span>在最高位为 0 时和 unsigned integer 是一致的<span class="mojikumi-line-end">，</span>而在最高位为 1 时是同样编码的 unsigned integer 减去 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">2^w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<h3 id="signed-unsigned-转换" class="heading"><a href="#signed-unsigned-转换" class="heading-anchor" aria-label="章节： signed unsigned 转换" tabindex="-1"></a><span>signed unsigned 转换</span></h3>
<p>在 C 语言中<span class="mojikumi-line-end">，</span>在同样长度的 signed 和 unsigned 之间转换时<span class="mojikumi-line-end">，</span>虽然不一定<span class="mojikumi-line-end">，</span>但一般是不改变编码地只进行类型的转换<span class="mojikumi-line-end">。</span></p>
<p>若算术运算符的两侧分别是 signed 和 unsigned<span class="mojikumi-line-end">，</span>则会将 signed 隐式转换为 unsigned<span class="mojikumi-line-end">，</span>这在运算符为比较运算符时尤其可能导致意外的结果<span class="mojikumi-line-end">，</span>例如 <code>-1 &gt; 0u</code><span class="mojikumi-line-end">。</span></p>
<aside role="note" data-v-a2ab257f=""><div class="shadow-md rd-1 b-l-6 my-6 bg-orange-1 dark:bg-orange-9 b-orange" data-v-a2ab257f=""><div class="p-3 flex justify-between items-center" data-v-a2ab257f=""><h4 class="flex items-center gap-1 font-bold" data-v-a2ab257f=""><span class="text-5 i-mdi-alert-circle-outline text-orange" data-v-a2ab257f=""></span><!--v-if--><span data-v-a2ab257f="">Warning</span></h4><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f=""><p>由于 signed 与 unsigned 转换可能带来意外的结果<span class="mojikumi-line-end">，</span>很多时候最好避免使用 unsigned integer<span class="mojikumi-line-end">。</span>如果要将 signed 和 unsigned 放在同一个表达式中运算一般是会有 warning 的<span class="mojikumi-line-end">，</span>如果要显式进行转换则要小心<span class="mojikumi-line-end">。</span></p></div></div></aside>
<h3 id="整型增长" class="heading"><a href="#整型增长" class="heading-anchor" aria-label="章节： 整型增长" tabindex="-1"></a><span>整型增长</span></h3>
<p>将某个长度的 unsigned integer 转换为更长的 unsigned integer 时<span class="mojikumi-line-end">，</span>会在高位补零<span class="mojikumi-line-end">。</span></p>
<p>将某个长度的 signed integer 转换为更长的 signed integer 时<span class="mojikumi-line-end">，</span>会在高位补原来的最高位<span class="mojikumi-line-end">，</span>类似于 arithmetic right shift<span class="mojikumi-line-end">，</span>以保证转换后数值不变<span class="mojikumi-line-end">。</span></p>
<p>如果一个类型转换既要增长又要转变 signed/unsigned<span class="mojikumi-line-end">，</span>会先转换长度再转换 signed/unsigned<span class="mojikumi-line-end">。</span></p>
<h3 id="整型缩短" class="heading"><a href="#整型缩短" class="heading-anchor" aria-label="章节： 整型缩短" tabindex="-1"></a><span>整型缩短</span></h3>
<p>无论是 signed 还是 unsigned<span class="mojikumi-line-end">，</span>在缩短整型时会直接将高位截去<span class="mojikumi-line-end">。</span>在新的整型长度为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></span> 时<span class="mojikumi-line-end">，</span>这相当于对 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">2^w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span></span> 取模<span class="mojikumi-line-end">。</span></p>
<h2 id="integer-arithmetic" class="heading"><a href="#integer-arithmetic" class="heading-anchor" aria-label="章节： Integer Arithmetic" tabindex="-1"></a><span>Integer Arithmetic</span></h2>
<h3 id="加法和取反" class="heading"><a href="#加法和取反" class="heading-anchor" aria-label="章节： 加法和取反" tabindex="-1"></a><span>加法和取反</span></h3>
<p>unsigned integer 的加法<span class="mojikumi-line-end">：</span>模 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">2^w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<p>判断 unsigned integer 加法是否发生溢出<span class="mojikumi-line-end">：</span><code>x + y</code> 溢出当且仅当 <code>x + y &lt; x</code><span class="mojikumi-line-end">。</span></p>
<p>unsigned integer 取反<span class="mojikumi-line-end">：</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msup><mn>2</mn><mi>w</mi></msup><mo>−</mo><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">x \mapsto \begin{cases} 0 &amp; x = 0 \\ 2^w - x &amp; x &gt; 0 \end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>取反有两种计算方式<span class="mojikumi-line-end">：</span></p>
<ul>
<li>按位取反后加一<span class="mojikumi-line-end">；</span></li>
<li>或者找到二进制表示中最低位的 <code>1</code> 然后将比这一位高的位取反<span class="mojikumi-line-end">。</span></li>
</ul>
<p>signed integer 的加法<span class="mojikumi-line-end">：</span>把编码当作 unsigned integer 算<span class="mojikumi-line-end">，</span>就可以实现 positive overflow 和 negative overflow 的效果<span class="mojikumi-line-end">，</span>即 overflow 后保持模 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">2^w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span></span> 不变<span class="mojikumi-line-end">。</span></p>
<p>判断 signed integer 加法是否发生溢出<span class="mojikumi-line-end">：</span><code>x + y</code> positive overflow 当且仅当 <code>x &gt; 0 &amp;&amp; y &gt; 0 &amp;&amp; x + y &lt;= 0</code><span class="mojikumi-line-end">，</span>negative overflow 当且仅当 <code>x &lt; 0 &amp;&amp; y &lt; 0 &amp;&amp; x + y &gt;= 0</code><span class="mojikumi-line-end">。</span></p>
<p>signed integer 取反: 把编码当作 unsigned integer 来取反即可<span class="mojikumi-line-end">，</span>表现为<span class="mojikumi-line-end">，</span>能表示的最小值取反得到自身<span class="mojikumi-line-end">，</span>其它值取反就是其相反数<span class="mojikumi-line-end">。</span></p>
<aside role="note" data-v-a2ab257f=""><div class="shadow-md rd-1 b-l-6 my-6 bg-orange-1 dark:bg-orange-9 b-orange" data-v-a2ab257f=""><div class="p-3 flex justify-between items-center" data-v-a2ab257f=""><h4 class="flex items-center gap-1 font-bold" data-v-a2ab257f=""><span class="text-5 i-mdi-alert-circle-outline text-orange" data-v-a2ab257f=""></span><!--v-if--><span data-v-a2ab257f="">Warning</span></h4><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f=""><p>signed integer 取最小值时取反得到自身而非其相反数<span class="mojikumi-line-end">，</span>这可能会是被忽视的 corner case 而导致 bug<span class="mojikumi-line-end">。</span></p></div></div></aside>
<h3 id="乘法" class="heading"><a href="#乘法" class="heading-anchor" aria-label="章节： 乘法" tabindex="-1"></a><span>乘法</span></h3>
<p>无论 signed integer 还是 unsigned integer<span class="mojikumi-line-end">，</span>乘法都是丢弃高位即模 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">2^w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>且在编码上是等价的<span class="mojikumi-line-end">。</span></p>
<p>如果乘法运算中的某个因数是常数<span class="mojikumi-line-end">，</span>编译器可能会把乘法优化为位移和加法的组合<span class="mojikumi-line-end">。</span>是否以及如何进行优化取决于常数的值以及相关指令<span class="mojikumi-line-start">（</span>加法<span class="mojikumi-line-end">、</span>位移<span class="mojikumi-line-end">、</span>乘法<span class="mojikumi-line-end">，</span>可能还有 <code>LEA</code> 等指令<span class="mojikumi-line-end">）</span>的相对速度<span class="mojikumi-line-end">，</span>与具体机器密切相关<span class="mojikumi-line-end">。</span></p>
<h3 id="除以-2-的幂" class="heading"><a href="#除以-2-的幂" class="heading-anchor" aria-label="章节： 除以 2 的幂" tabindex="-1"></a><span>除以 2 的幂</span></h3>
<p>如果除法运算中除数是 2 的幂<span class="mojikumi-line-end">，</span>编译器会将除法优化为右移<span class="mojikumi-line-end">。</span></p>
<h3 id="总结" class="heading"><a href="#总结" class="heading-anchor" aria-label="章节： 总结" tabindex="-1"></a><span>总结</span></h3>
<p>计算机的整数运算总的来说通过取模来处理溢出<span class="mojikumi-line-end">，</span>而使用补码表示 signed integer 可以使 signed integer 和 unsigned integer 的运算在编码层面上的实现相同<span class="mojikumi-line-end">。</span></p>
<h2 id="floating-point" class="heading"><a href="#floating-point" class="heading-anchor" aria-label="章节： Floating Point" tabindex="-1"></a><span>Floating Point</span></h2>
<h3 id="ieee-浮点表示" class="heading"><a href="#ieee-浮点表示" class="heading-anchor" aria-label="章节： IEEE 浮点表示" tabindex="-1"></a><span>IEEE 浮点表示</span></h3>
<p>浮点数大体上是一个二进制的科学计数法<span class="mojikumi-line-end">，</span>形如 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo>×</mo><mi>M</mi><mo>×</mo><msup><mn>2</mn><mi>E</mi></msup></mrow><annotation encoding="application/x-tex">(-1)^s \times M \times 2^E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<p>IEEE 浮点表示的编码包含三部分<span class="mojikumi-line-end">：</span></p>
<ol>
<li>sign bit<span class="mojikumi-line-end">，</span>表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span></li>
<li>exponent field<span class="mojikumi-line-end">，</span>表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="mojikumi-line-end">，</span>下文中记其表示的 unsigned integer 为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></span></li>
<li>fraction field<span class="mojikumi-line-end">，</span>表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="mojikumi-line-end">，</span>下文中记 fraction field 为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⋯</mo><msub><mi>f</mi><mn>1</mn></msub><msub><mi>f</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">f_{n-1} \cdots f_1 f_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li>
</ol>
<p>如果简单地使用普通整数的表示法来表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="mojikumi-line-end">，</span>会遇到一些问题<span class="mojikumi-line-end">：</span></p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> 需要能是负数<span class="mojikumi-line-end">，</span>以用来表示比较小的数</li>
<li>若 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>0.</mn><msub><mi>f</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⋯</mo><msub><mi>f</mi><mn>1</mn></msub><msub><mi>f</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">M = 0.f_{n-1} \cdots f_1 f_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"></span><span class="mord">0.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>那么<span class="mojikumi-line-end">：</span>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> 不同的编码可能表示同一个值<span class="mojikumi-line-end">，</span>造成编码的浪费</li>
<li>可能会出现 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> 更大但值更小的情况<span class="mojikumi-line-end">，</span>会给比较两个数造成困难</li>
</ul>
</li>
<li>不能表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\pm \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">∞</span></span></span></span></span> 和 <code>NaN</code> 等特殊值</li>
</ul>
<p>为了解决这些问题<span class="mojikumi-line-end">，</span>IEEE 浮点表示采取了如下措施<span class="mojikumi-line-end">。</span></p>
<p>首先<span class="mojikumi-line-end">，</span>浮点数被分为三类<span class="mojikumi-line-end">：</span>normalized values, denormalized values 和 special values<span class="mojikumi-line-end">。</span></p>
<p>Normalized values:</p>
<ul>
<li>一个浮点数是 normalized value<span class="mojikumi-line-end">，</span>当且仅当其 exponent field 既不全零也不全一</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mi>e</mi><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow><annotation encoding="application/x-tex">E = e - \mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span><span class="mojikumi-line-end">，</span>其中 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow><annotation encoding="application/x-tex">\mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span> 是一个预先设置的常量</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1.</mn><msub><mi>f</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⋯</mo><msub><mi>f</mi><mn>1</mn></msub><msub><mi>f</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">M = 1.f_{n-1} \cdots f_1 f_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"></span><span class="mord">1.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>Denormalized values:</p>
<ul>
<li>一个浮点数是 denormalized value<span class="mojikumi-line-end">，</span>当且仅当其 exponent field 全零</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mn>1</mn><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow><annotation encoding="application/x-tex">E = 1 - \mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>0.</mn><msub><mi>f</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⋯</mo><msub><mi>f</mi><mn>1</mn></msub><msub><mi>f</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">M = 0.f_{n-1} \cdots f_1 f_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"></span><span class="mord">0.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>Special values:</p>
<ul>
<li>一个浮点数是 special value<span class="mojikumi-line-end">，</span>当且仅当其 exponent field 全一</li>
<li>若 fraction field 全零<span class="mojikumi-line-end">，</span>则根据 sign bit 表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\pm \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">∞</span></span></span></span></span></li>
<li>若 fraction field 非全零<span class="mojikumi-line-end">，</span>则表示 <code>NaN</code></li>
</ul>
<p>现在来看这套编码规则如何解决了上面提出的问题<span class="mojikumi-line-end">：</span></p>
<ol>
<li>设置 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow><annotation encoding="application/x-tex">\mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span><span class="mojikumi-line-end">，</span>以表示小于零的 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span></li>
<li>将 normalized values 的 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span> 的最高位钦定为 1<span class="mojikumi-line-end">，</span>以避免不同 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> 表示同一个数<span class="mojikumi-line-end">。</span>这和标准的十进制科学计数法要求小数在 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>10</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[1, 10)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">10</span><span class="mclose">)</span></span></span></span></span> 的范围内是一个道理<span class="mojikumi-line-end">，</span>在二进制科学计数法中就是要求小数在 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[1, 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span> 的范围内<span class="mojikumi-line-end">。</span></li>
<li>由于 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> 的取值范围有限<span class="mojikumi-line-end">，</span>normalized values 的 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span> 最高位强制为 1 使其无法表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.0</mn></mrow><annotation encoding="application/x-tex">0.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.0</span></span></span></span></span> 以及接近 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> 的数<span class="mojikumi-line-start">（</span>能够表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow></msup></mrow><annotation encoding="application/x-tex">2^{-\mathrm{Bias}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mathrm mtight">Bias</span></span></span></span></span></span></span></span></span></span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>ε</mi><mo stretchy="false">)</mo><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow></msup></mrow><annotation encoding="application/x-tex">(1 + \varepsilon) \times 2^{-\mathrm{Bias}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ε</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mathrm mtight">Bias</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>却无法表示位于 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mrow><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[0, 2^{-\mathrm{Bias}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mathrm mtight">Bias</span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 内的数<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>所以增设 denormalized values 这一分类用来表示接近 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> 的数以及 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mn>0.0</mn></mrow><annotation encoding="application/x-tex">\pm 0.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">0.0</span></span></span></span></span><span class="mojikumi-line-end">。</span>由于 denormalized values 没有将 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span> 的最高位设为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi-line-end">，</span>它的 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> 设置为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow><annotation encoding="application/x-tex">1 - \mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span> 而非 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow></mrow><annotation encoding="application/x-tex">-\mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span> 作为补偿<span class="mojikumi-line-end">。</span></li>
<li>通过 special values 的分类<span class="mojikumi-line-end">，</span>表示了 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\pm \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">∞</span></span></span></span></span> 以及 <code>NaN</code><span class="mojikumi-line-end">。</span></li>
<li>使用 exponent fields 按照 denormalized -&gt; normalized -&gt; special 的顺序进行分类<span class="mojikumi-line-end">，</span>对于同一符号的浮点数<span class="mojikumi-line-end">，</span>只需将 exponent field 和 fraction field 看作无符号整数即可比较大小<span class="mojikumi-line-start">（</span>实际比较时<span class="mojikumi-line-end">，</span>除了先比较符号位<span class="mojikumi-line-end">，</span>可能还要考虑 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mn>0.0</mn></mrow><annotation encoding="application/x-tex">\pm 0.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">0.0</span></span></span></span></span><span class="mojikumi-line-end">、</span><code>NaN</code> 等特殊情况<span class="mojikumi">）</span><span class="mojikumi-line-end">。</span></li>
</ol>
<p>IEEE 浮点表示还规定了每个 field 的长度<span class="mojikumi-line-end">：</span></p>
<ul>
<li>32 位: exponent field 8 位<span class="mojikumi-line-end">，</span>fraction field 23 位</li>
<li>64 位: exponent field 11 位<span class="mojikumi-line-end">，</span>fraction field 52 位</li>
</ul>
<p>记 exponent field 的位数为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="mojikumi-line-end">，</span>则 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow><mo>=</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\mathrm{Bias} = 2^{k-1} - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi-line-end">，</span>即 32 位为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>127</mn></mrow><annotation encoding="application/x-tex">127</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">127</span></span></span></span></span><span class="mojikumi-line-end">，</span>64 位为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1023</mn></mrow><annotation encoding="application/x-tex">1023</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1023</span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<h3 id="特殊（标志性）的浮点数" class="heading"><a href="#特殊（标志性）的浮点数" class="heading-anchor" aria-label="章节： 特殊（标志性）的浮点数" tabindex="-1"></a><span>特殊<span class="mojikumi-line-start">（</span>标志性<span class="mojikumi-line-end">）</span>的浮点数</span></h3>
<p>exponent field 和 fraction field 全零表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mn>0.0</mn></mrow><annotation encoding="application/x-tex">\pm 0.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">0.0</span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<p>exponent field 全零<span class="mojikumi-line-end">，</span>fraction field 最低位 1 其它位 0<span class="mojikumi-line-end">，</span>是能够表示的最接近零的数<span class="mojikumi-line-start">（</span>32 位约为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.4</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>45</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1.4 \times 10^{-45}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1.4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">45</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>64 位约为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4.9</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>324</mn></mrow></msup></mrow><annotation encoding="application/x-tex">4.9 \times 10^{-324}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4.9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">324</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi">）</span><span class="mojikumi">。</span><wbr><span class="mojikumi-line-start">（</span>注意这个数的值为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>2</mn><mo>−</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{2-2^k-n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0119em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0119em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.927em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>=</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\varepsilon = 2^{-n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7713em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span> 不同<span class="mojikumi">。</span><span class="mojikumi-line-end">）</span></p>
<p>exponent field 最高位 0 其它位 1<span class="mojikumi-line-start">（</span>这得益于 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">s</mi></mrow><annotation encoding="application/x-tex">\mathrm{Bias}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathrm">Bias</span></span></span></span></span></span> 的设定<span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>fraction field 全零<span class="mojikumi-line-end">，</span>表示 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo><mn>1.0</mn></mrow><annotation encoding="application/x-tex">\pm 1.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">±</span><span class="mord">1.0</span></span></span></span></span><span class="mojikumi-line-end">。</span></p>
<p>exponent field 最低位 0 其它位 1<span class="mojikumi-line-end">，</span>fraction field 全一<span class="mojikumi-line-end">，</span>是能够表示<span class="mojikumi-line-start">（</span>非 special value<span class="mojikumi-line-end">）</span>的最大的数<span class="mojikumi-line-start">（</span>32 位约为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3.4</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>38</mn></msup></mrow><annotation encoding="application/x-tex">3.4 \times 10^{38}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3.4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">38</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">，</span>64 位约为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.8</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>308</mn></msup></mrow><annotation encoding="application/x-tex">1.8 \times 10^{308}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1.8</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">308</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi">）</span><span class="mojikumi-line-end">。</span></p>
<h3 id="浮点数舍入" class="heading"><a href="#浮点数舍入" class="heading-anchor" aria-label="章节： 浮点数舍入" tabindex="-1"></a><span>浮点数舍入</span></h3>
<p>浮点数的舍入有四种模式可供选择<span class="mojikumi-line-end">：</span></p>
<ul>
<li>round-to-even: 类似于<span class="mojikumi-line-start">“</span>四舍六入五成双<span class="mojikumi-line-end">”</span>但是二进制<span class="mojikumi-line-end">，</span>是默认的舍入模式</li>
<li>round-toward-zero</li>
<li>round-down</li>
<li>round-up</li>
</ul>
<h3 id="浮点数运算" class="heading"><a href="#浮点数运算" class="heading-anchor" aria-label="章节： 浮点数运算" tabindex="-1"></a><span>浮点数运算</span></h3>
<p>除了一些特殊值<span class="mojikumi-line-start">（</span>如 <code>sqrt(-1.0)</code><span class="mojikumi-line-end">、</span><code>1/0.0</code><span class="mojikumi">）</span><span class="mojikumi-line-end">，</span>浮点数的运算结果被定义为精确计算后进行舍入得到的结果<span class="mojikumi-line-end">，</span>但具体计算的实现方式是随意的<span class="mojikumi-line-start">（</span>不需要真的先精确计算再进行舍入<span class="mojikumi">）</span><span class="mojikumi-line-end">。</span></p>
<p>浮点数的加法和乘法会进行舍入<span class="mojikumi-line-end">、</span>可能溢出<span class="mojikumi-line-end">，</span>所以不满足结合律<span class="mojikumi-line-end">、</span>分配律<span class="mojikumi-line-start">（</span>但是满足交换律<span class="mojikumi">）</span><span class="mojikumi-line-end">。</span>调换结合顺序可能改变计算结果<span class="mojikumi-line-end">，</span>意味着编译器无法以改变结合顺序为代价进行优化<span class="mojikumi-line-end">。</span></p>
<h3 id="c-语言中浮点数类型转换" class="heading"><a href="#c-语言中浮点数类型转换" class="heading-anchor" aria-label="章节： C 语言中浮点数类型转换" tabindex="-1"></a><span>C 语言中浮点数类型转换</span></h3>
<p>简单来说<span class="mojikumi-line-end">，</span>整数转成浮点数或不同类型的浮点数之间进行转换可能舍入也可能溢出<span class="mojikumi-line-end">。</span>浮点数转成整数会向零取整<span class="mojikumi-line-end">，</span>溢出时行为不确定<span class="mojikumi-line-end">。</span></p></section><div class="article-style my-9"><hr></div><footer><div class="my-6 b-l-6 b-gray-4 bg-area p-6 shadow dark:b-gray-11" itemprop="copyrightNotice"><ul class="flex flex-col gap-1"><li class="flex gap-1"><span class="shrink-0">文章作者:</span><a href="https://github.com/ouuan" rel="author">ouuan</a></li><li class="flex gap-1"><span class="shrink-0">原文链接:</span><a href="https://ouuan.moe/post/2022/09/csapp-2" rel="canonical" class="break-all">https://ouuan.moe/post/2022/09/csapp-2</a></li><li class="flex gap-1"><span class="shrink-0">许可协议:</span><span> 本文采用 <span class="article-style"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh" class="font-sans" itemprop="license">CC BY-SA 4.0</a></span> 许可协议进行授权，未满足 <span class="underline decoration-dotted" title="简而言之，转载时必须标明出处（本文的链接），标明是转载而非原创，标明作了哪些修改，并使用相同的许可协议，但无需私信征求许可">许可协议要求</span> 不得转载。 </span></li></ul></div></footer></article><div class="my-6 print:hidden" itemprop="comment" itemscope="" itemtype="https://schema.org/Comment"><ile-root id="ile-5"></ile-root><script></script><script type="module" async="">import{h as r,c as m}from"/assets/iles.c6dd5c6f.js";import{_ as o}from"/assets/GiscusCommentsInner.52a647a0.js";import"/assets/vendor-vue.0eea1c14.js";import"/assets/vite.5ce4fca4.js";import"/assets/useTheme.11613ee1.js";import"/assets/site.b21fb919.js";r(m,o,"ile-5",{term:"CS:APP 第二章学习笔记"},{});
</script></div><nav class="my-6 flex justify-between gap-6 print:hidden lg:text-justify"><div class="flex flex-1"><a class="flex items-center gap-1 hover:text-hover" href="/post/2022/09/csapp"><span class="i-mdi-chevron-left"></span><span class="sr-only">上一篇</span><span class="break-anywhere">CS:APP 学习笔记系列 序</span></a></div><div class="flex flex-1 justify-end"><a class="flex flex-row-reverse items-center gap-1 hover:text-hover" href="/post/2022/09/csapp-3"><span class="i-mdi-chevron-right"></span><span class="sr-only">下一篇</span><span class="break-anywhere">CS:APP 第三章学习笔记</span></a></div></nav></div></div></main><footer class="flex flex-col gap-1 bg-card p-6 text-footer" itemprop="hasPart" itemscope="" itemtype="https://schema.org/WPFooter"><div class="flex flex-wrap items-center justify-center gap-x-1"><span>Copyright ©</span><span>2022 - 2023</span><a class="flex items-center" href="/sponsor" title="赞赏支持"><span class="i-mdi-heart text-red dark:text-red-7"></span></a><span>ouuan</span><span class="i-mdi-circle-small"></span><span title="实际上，为了保护用户隐私，同一用户的多次访问只有在同一天内使用同一浏览器在同一ip下才会被算作同一人"> 共有 <ile-root id="ile-6"><span><span class="i-mdi-loading motion-safe:animate-spin"></span><span class="sr-only">加载中</span></span></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.c6dd5c6f.js";import"/assets/vendor-vue.0eea1c14.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.c6dd5c6f.js").then(o=>o.v),["assets/iles.c6dd5c6f.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/VisitorCount.81804d3b.js"),["assets/VisitorCount.81804d3b.js","assets/VisitorCount.83168c3c.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-6",{},{})});export default E();
</script> 人到访过这里 </span></div><div class="flex flex-wrap items-center justify-center gap-x-1"> 基于 <a class="underline" href="https://github.com/ElMassimo/iles">îles</a> 及 <a class="underline" href="https://github.com/ouuan/iles-blog/blob/master/package.json">很多其他项目</a><span class="i-mdi-circle-small"></span><span>由 ouuan 设计/制作</span><span class="i-mdi-circle-small"></span><a class="underline" href="https://github.com/ouuan/iles-blog">源代码</a><span class="i-mdi-circle-small"></span><a class="underline" href="https://github.com/ouuan/iles-blog/discussions">Discussions</a></div></footer><meta itemprop="copyrightYear" content="2022 - 2023"><div class="hidden" itemscope="" itemtype="https://schema.org/Person" itemprop="copyrightHolder"><meta itemprop="name" content="ouuan"><meta itemprop="givenName" content="Yufan"><meta itemprop="familyName" content="You"><meta itemprop="url" content="https://github.com/ouuan"><link itemprop="gender" href="https://schema.org/Male"><meta itemprop="image" content="/android-chrome-512x512.png"></div><ile-root id="ile-7"><button class="group bottom-10 flex-col floating-button" title="前往底部"><div aria-hidden="true" class="flex justify-center"><span class="i-mdi-chevron-double-up motion-safe:transition-font-size text-0"></span></div><div aria-hidden="true" class="text-0 group-hover:text-3.5 motion-safe:transition-font-size"></div><div aria-hidden="false" class="flex justify-center"><span class="i-mdi-chevron-double-down motion-safe:transition-font-size text-5 group-hover:text-3"></span></div></button></ile-root><script></script><script type="module" async="">var p=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var r=(o,a,_)=>new Promise((c,n)=>{var f=t=>{try{e(_.next(t))}catch(i){n(i)}},l=t=>{try{e(_.throw(t))}catch(i){n(i)}},e=t=>t.done?c(t.value):Promise.resolve(t.value).then(f,l);e((_=_.apply(o,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.c6dd5c6f.js";import"/assets/vendor-vue.0eea1c14.js";var E=p(m=>{const u=()=>r(m,null,function*(){return(yield d(()=>import("/assets/iles.c6dd5c6f.js").then(o=>o.v),["assets/iles.c6dd5c6f.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default}),v=()=>r(m,null,function*(){return(yield d(()=>import("/assets/BackToTop.27b70c9c.js"),["assets/BackToTop.27b70c9c.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default});s(u,v,"ile-7",{},{})});export default E();
</script><div class="hidden"></div><ile-root id="ile-8"></ile-root><script></script><script type="module" async="">var p=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var e=(t,a,_)=>new Promise((c,n)=>{var f=o=>{try{i(_.next(o))}catch(r){n(r)}},l=o=>{try{i(_.throw(o))}catch(r){n(r)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,l);i((_=_.apply(t,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.c6dd5c6f.js";import"/assets/vendor-vue.0eea1c14.js";var u=p(m=>{const E=()=>e(m,null,function*(){return(yield d(()=>import("/assets/iles.c6dd5c6f.js").then(t=>t.d),["assets/iles.c6dd5c6f.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default}),h=()=>e(m,null,function*(){return(yield d(()=>import("/assets/PlausibleTrigger.2ab6dea5.js"),["assets/PlausibleTrigger.2ab6dea5.js","assets/plausible.4c5b3faa.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).onLoad});s(E,h,"ile-8",{},{})});export default u();
</script><div></div><ile-root id="ile-9"></ile-root><script></script><script type="module" async="">var p=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var e=(t,a,_)=>new Promise((c,n)=>{var f=o=>{try{i(_.next(o))}catch(r){n(r)}},l=o=>{try{i(_.throw(o))}catch(r){n(r)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,l);i((_=_.apply(t,a)).next())});import{_ as d}from"/assets/vite.5ce4fca4.js";import{a as s}from"/assets/iles.c6dd5c6f.js";import"/assets/vendor-vue.0eea1c14.js";var u=p(m=>{const E=()=>e(m,null,function*(){return(yield d(()=>import("/assets/iles.c6dd5c6f.js").then(t=>t.d),["assets/iles.c6dd5c6f.js","assets/vendor-vue.0eea1c14.js","assets/vite.5ce4fca4.js"])).default}),h=()=>e(m,null,function*(){return(yield d(()=>import("/assets/TextJustifyFix.4fa5e997.js"),[])).onLoad});s(E,h,"ile-9",{},{})});export default u();
</script><meta itemprop="inLanguage" content="zh-CN"></div>
  
</body></html>