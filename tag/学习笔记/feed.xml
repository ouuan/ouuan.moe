<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>ouuan's blog: æ ‡ç­¾: å­¦ä¹ ç¬”è®°</title>
        <link>https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0</link>
        <description>æ ‡ç­¾: å­¦ä¹ ç¬”è®° - ouuan å†™ä¸œè¥¿çš„åœ°æ–¹ï¼Œæ¶µç›–äº† Web å¼€å‘ã€è®¡ç®—æœºç³»ç»Ÿã€Linux ä½¿ç”¨ã€å¤§å­¦å­¦ä¹ ç”Ÿæ´»ç­‰å¤šä¸ªä¸»é¢˜ã€‚</description>
        <lastBuildDate>Fri, 16 Jun 2023 15:24:34 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-CN</language>
        <copyright>Copyright Â© 2022 - 2023 ouuan
Licensed under CC BY-SA 4.0</copyright>
        <atom:link href="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/feed.xml" rel="self" type="application/rss+xml"/>
        <item>
            <title><![CDATA[CNATDA ç¬¬äºŒç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2023/06/cnatda-2</link>
            <guid>https://ouuan.moe/post/2023/06/cnatda-2</guid>
            <pubDate>Fri, 16 Jun 2023 15:24:34 GMT</pubDate>
            <description><![CDATA[


<p><span class="mojikumi-line-start">ã€Š</span>Computer Networking A Top-Down Approach (8th Edition)<span class="mojikumi-line-end">ã€‹</span>ç¬¬äºŒç«  <span class="mojikumi">â€œ</span>Application Layer<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[


<p><span class="mojikumi-line-start">ã€Š</span>Computer Networking A Top-Down Approach (8th Edition)<span class="mojikumi-line-end">ã€‹</span>ç¬¬äºŒç«  <span class="mojikumi">â€œ</span>Application Layer<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>

<h2 id="principles-of-network-applications" class="heading"><a href="#principles-of-network-applications" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Principles of Network Applications" tabindex="-1"></a><span>Principles of Network Applications</span></h2>
<p>application architecture ä¸»è¦åˆ†ä¸º client-server å’Œ P2P ä¸¤ç§<span class="mojikumi-line-end">ã€‚</span></p>
<p><i>process</i> å³åœ¨æŸä¸ª end system ä¸Šè¿è¡Œçš„ç¨‹åº<span class="mojikumi-line-start">ï¼ˆ</span>è¿›ç¨‹<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒ end system ä¸Šçš„ process åœ¨ç½‘ç»œä¸Šäº’ç›¸å‘é€ message ä»¥è¿›è¡Œé€šä¿¡<span class="mojikumi-line-start">ï¼ˆ</span>æ³¨<span class="mojikumi-line-end">ï¼š</span>message å³ application-layer packet<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸€æ¬¡é€šä¿¡ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å‘èµ·é€šä¿¡çš„ä¸€æ–¹è¢«ç§°ä½œ <i>client</i><span class="mojikumi-line-end">ï¼Œ</span>ç­‰å¾…æ¥æ”¶æ¶ˆæ¯çš„ä¸€æ–¹è¢«ç§°ä½œ <i>server</i><span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>æ³¨<span class="mojikumi-line-end">ï¼š</span>åœ¨ P2P ä¸­<span class="mojikumi-line-end">ï¼Œ</span>client å’Œ server çš„èº«ä»½ä¸æ˜¯å›ºå®šçš„<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>process å’Œç½‘ç»œ<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…è¯´å’Œ transport layer ä¹‹é—´ä»¥ <i>socket</i> ä½œä¸º API<span class="mojikumi-line-end">ã€‚</span></p>
<p>host ç”± IP åœ°å€è¯†åˆ«<span class="mojikumi-line-end">ï¼Œ</span>è€Œ process ç”± IP åœ°å€ + ç«¯å£è¯†åˆ«<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ª application å¯ä»¥é€‰æ‹© TCP æˆ–è€… UDP æ¥æä¾› transport service<span class="mojikumi-line-end">ã€‚</span>TCP æä¾› connection-oriented service<span class="mojikumi-line-start">ï¼ˆ</span>éœ€è¦é€šè¿‡ handshaking å»ºç«‹ TCP connection<span class="mojikumi-line-end">ï¼‰</span>å’Œ reliable data transfer service<span class="mojikumi-line-start">ï¼ˆ</span>ä¿è¯æ¥æ”¶åˆ° &#x26; ä¿åº<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠ congestion control<span class="mojikumi-line-end">ã€‚</span>UDP åˆ™è¿™äº›éƒ½ä¸æä¾›<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬ä¼šæ ¹æ®æ˜¯å¦ loss-tolerant<span class="mojikumi-line-start">ï¼ˆ</span>æ˜¯å¦å…è®¸ä¸¢å¤±éƒ¨åˆ†æ•°æ®<span class="mojikumi-line-end">ï¼‰</span>ä»¥åŠå¯¹å»¶æ—¶çš„æ•æ„Ÿåº¦æ¥è¿›è¡Œé€‰æ‹©<span class="mojikumi-line-end">ã€‚</span></p>
<p>TLS (Transport Layer Security) å¯ä»¥åœ¨ TCP çš„åŸºç¡€ä¸Šæä¾› encryption<span class="mojikumi-line-end">ã€</span>data integrity<span class="mojikumi-line-end">ã€</span>end-point authentication<span class="mojikumi-line-end">ã€‚</span>å®ƒè‡ªèº«ä½äº application layer<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€…å¯ä»¥è¯´æ˜¯ application ä¸ transport layer ä¹‹é—´ ğŸ¤”<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä¸ä¸ TCP<span class="mojikumi-line-end">ã€</span>UDP å¹¶åˆ—<span class="mojikumi-line-end">ã€‚</span></p>
<p>application-layer protocol å†³å®šäº† message çš„ç»“æ„ä»¥åŠç›¸åº”çš„è¡Œä¸º<span class="mojikumi-line-end">ã€‚</span>å¸¸è§çš„ application-layer protocol åŒ…æ‹¬ HTTP<span class="mojikumi-line-end">ã€</span>SMTP<span class="mojikumi-line-end">ã€</span>Telnet<span class="mojikumi-line-end">ã€</span>FTP<span class="mojikumi-line-end">ã€</span>SIP<span class="mojikumi-line-end">ã€</span>RTP<span class="mojikumi-line-end">ã€</span>DASH ç­‰<span class="mojikumi-line-end">ã€‚</span>æœ‰çš„ application ä¼šä½¿ç”¨ä¸“æœ‰è€Œé public domain çš„ application-layer protocol<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="the-web-and-http" class="heading"><a href="#the-web-and-http" class="heading-anchor" aria-label="ç« èŠ‚ï¼š The Web and HTTP" tabindex="-1"></a><span>The Web and HTTP</span></h2>
<p>HTTP (HyperText Transfer Protocol) æ˜¯ Web çš„ application-layer protocol<span class="mojikumi-line-end">ï¼Œ</span>å®šä¹‰äº† client (browser) å¦‚ä½•å‘ server è¯·æ±‚æ–‡ä»¶<span class="mojikumi-line-start">ï¼ˆ</span>web page<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€</span>server å¦‚ä½•å°†æ–‡ä»¶ä¼ è¾“ç»™ client<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP çš„é»˜è®¤ç«¯å£æ˜¯ 80<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP ä¸å­˜å‚¨ client çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯ä¸€ä¸ª <i>stateless protocol</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP<span class="mojikumi-line-start">ï¼ˆ</span>1.0<span class="mojikumi-line-end">ã€</span>1.1<span class="mojikumi-line-end">ã€</span>2<span class="mojikumi-line-end">ï¼‰</span>åŸºäº TCP<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ persistent connection å’Œ non-persistent connection ä¸¤ç§å·¥ä½œæ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>non-persistent connection<span class="mojikumi-line-end">ï¼š</span>æ¯æ¬¡ request-response éƒ½ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ TCP connection<span class="mojikumi-line-end">ï¼Œ</span>æ”¶åˆ° response åç«‹åˆ»å…³é—­ TCP connection<span class="mojikumi-line-end">ã€‚</span></li>
<li>persistent connection<span class="mojikumi-line-end">ï¼š</span>åŒä¸€å¯¹ client-server çš„å¤šæ¬¡ request-response<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ä¸€ä¸ªé¡µé¢å¼•ç”¨çš„å¤šä¸ªèµ„æº<span class="mojikumi-line-end">ï¼‰</span>å¯ä»¥å…±ç”¨åŒä¸€ä¸ª TCP connection<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨é—²ç½®ä¸€æ®µæ—¶é—´åè‡ªåŠ¨å…³é—­<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ— éœ€ç­‰å¾… response å°±å¯ä»¥è¿ç»­å‘é€å¤šä¸ª request<span class="mojikumi-line-start">ï¼ˆ</span>è¢«ç§°ä½œ <i>pipelining</i><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œçœä¸‹æ¯æ¬¡å»ºç«‹ TCP connection è€—è´¹çš„ RTT (round-trip time)<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>HTTP message æ˜¯çº¯æ–‡æœ¬<span class="mojikumi-line-end">ï¼Œ</span>æ ¼å¼å¦‚ä¸‹<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP request:<sup><a href="#user-content-fn-fig2.8" id="user-content-fnref-fig2.8" data-footnote-ref aria-describedby="footnote-label">1</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-2.8.6bb26d3f.webp"><img srcset="/assets/cnatda-fig-2.8.de34594f.png" loading="lazy" src="/assets/cnatda-fig-2.8.de34594f.png" width="793" height="439" alt="General format of an HTTP request message"></picture></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="http ä»£ç å—" data-v-ad49d235>http</h3><ile-root id="ile-8"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-8--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">GET</span><span style="color: #D6DEEB"> /wireshark-labs/INTRO-wireshark-file1.html </span><span style="color: #C792EA">HTTP</span><span style="color: #D6DEEB">/</span><span style="color: #F78C6C">1.1</span></span>
<span><span style="color: #CAECE6">Host</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">gaia.cs.umass.edu</span></span>
<span><span style="color: #CAECE6">User-Agent</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">curl/8.1.2</span></span>
<span><span style="color: #CAECE6">Accept</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">*/*</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">GET</span><span style="color: #403F53"> /wireshark-labs/INTRO-wireshark-file1.html </span><span style="color: #994CC3">HTTP</span><span style="color: #403F53">/</span><span style="color: #AA0982">1.1</span></span>
<span><span style="color: #994CC3">Host:</span><span style="color: #403F53"> </span><span style="color: #4876D6">gaia.cs.umass.edu</span></span>
<span><span style="color: #994CC3">User-Agent:</span><span style="color: #403F53"> </span><span style="color: #4876D6">curl/8.1.2</span></span>
<span><span style="color: #994CC3">Accept:</span><span style="color: #403F53"> </span><span style="color: #4876D6">*/*</span></span></code></pre></div></section>
<p>HTTP response:<sup><a href="#user-content-fn-fig2.9" id="user-content-fnref-fig2.9" data-footnote-ref aria-describedby="footnote-label">2</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-2.9.d6740f57.webp"><img srcset="/assets/cnatda-fig-2.9.c01ee471.png" loading="lazy" src="/assets/cnatda-fig-2.9.c01ee471.png" width="792" height="443" alt="General format of an HTTP response message"></picture></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="http ä»£ç å—" data-v-ad49d235>http</h3><ile-root id="ile-9"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-9--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #D6DEEB">HTTP/1.1 200 OK</span></span>
<span><span style="color: #CAECE6">Date</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">Tue, 13 Jun 2023 11:14:57 GMT</span></span>
<span><span style="color: #CAECE6">Server</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/7.4.33 mod_perl/2.0.11 Perl/v5.16.3</span></span>
<span><span style="color: #CAECE6">Last-Modified</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">Tue, 13 Jun 2023 05:59:01 GMT</span></span>
<span><span style="color: #CAECE6">ETag</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">&quot;51-5fdfc882a3e6f&quot;</span></span>
<span><span style="color: #CAECE6">Accept-Ranges</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">bytes</span></span>
<span><span style="color: #CAECE6">Content-Length</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">81</span></span>
<span><span style="color: #CAECE6">Content-Type</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">text/html; charset=UTF-8</span></span>
<span></span>
<span><span style="color: #D6DEEB">&lt;html&gt;</span></span>
<span><span style="color: #D6DEEB">Congratulations!  You&#39;ve downloaded the first Wireshark lab file!</span></span>
<span><span style="color: #D6DEEB">&lt;/html&gt;</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #403F53">HTTP/1.1 200 OK</span></span>
<span><span style="color: #994CC3">Date:</span><span style="color: #403F53"> </span><span style="color: #4876D6">Tue, 13 Jun 2023 11:14:57 GMT</span></span>
<span><span style="color: #994CC3">Server:</span><span style="color: #403F53"> </span><span style="color: #4876D6">Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/7.4.33 mod_perl/2.0.11 Perl/v5.16.3</span></span>
<span><span style="color: #994CC3">Last-Modified:</span><span style="color: #403F53"> </span><span style="color: #4876D6">Tue, 13 Jun 2023 05:59:01 GMT</span></span>
<span><span style="color: #994CC3">ETag:</span><span style="color: #403F53"> </span><span style="color: #4876D6">&quot;51-5fdfc882a3e6f&quot;</span></span>
<span><span style="color: #994CC3">Accept-Ranges:</span><span style="color: #403F53"> </span><span style="color: #4876D6">bytes</span></span>
<span><span style="color: #994CC3">Content-Length:</span><span style="color: #403F53"> </span><span style="color: #4876D6">81</span></span>
<span><span style="color: #994CC3">Content-Type:</span><span style="color: #403F53"> </span><span style="color: #4876D6">text/html; charset=UTF-8</span></span>
<span></span>
<span><span style="color: #403F53">&lt;html&gt;</span></span>
<span><span style="color: #403F53">Congratulations!  You&#39;ve downloaded the first Wireshark lab file!</span></span>
<span><span style="color: #403F53">&lt;/html&gt;</span></span></code></pre></div></section>
<p>server å¯ä»¥é€šè¿‡ Cookie è¯†åˆ«ç”¨æˆ·<span class="mojikumi-line-end">ï¼Œ</span>cookie é€šè¿‡ response ä¸­çš„ <code>Set-Cookie</code> header è®¾ç½®<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ä¹‹åçš„æ¯æ¬¡ request ä¸­é€šè¿‡ <code>Cookie</code> header å‘ç»™ server<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœºæ„å¯ä»¥è®¾ç½® Web cache<span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”¨æˆ·å…ˆå‘ Web cache å‘é€è¯·æ±‚<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ cache hit åˆ™ç›´æ¥ç”± Web cache å‘ç»™ç”¨æˆ·<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ cache miss åˆ™ Web cache å‘ origin server å‘é€è¯·æ±‚å†è¿”å›ç»™ç”¨æˆ·<span class="mojikumi-line-end">ã€‚</span>Web cache å¯ä»¥å‡å°å»¶è¿Ÿ<span class="mojikumi-line-end">ï¼Œ</span>é™ä½å¸¦å®½å‹åŠ›<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ä¸ä¹‹ç±»ä¼¼çš„ CDN åˆ™åœ¨<a href="#content-distribution-networks">åæ–‡</a>æœ‰è¯¦ç»†è®²è§£<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>å¯ä»¥é€šè¿‡ <code>If<wbr>-<wbr>Modified<wbr>-<wbr>Since</code> header è¿›è¡Œ <i>conditional GET</i><span class="mojikumi-line-end">ï¼Œ</span>è‹¥æ²¡æœ‰ä¿®æ”¹åˆ™ä¼šè¿”å› body ä¸ºç©ºçš„ 304 Not Modified<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP/2 æä¾›äº† request and response multiplexing<span class="mojikumi-line-end">ã€</span>prioritization<span class="mojikumi-line-end">ã€</span>server push æ¥ä¼˜åŒ–æ€§èƒ½<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>multiplexing<span class="mojikumi-line-end">ï¼š</span>persistent connection å‡å°‘äº†å»ºç«‹ TCP connection å¸¦æ¥çš„ RTT<span class="mojikumi-line-end">ï¼Œ</span>ä½†åˆå¼•å…¥äº† Head of Line (HOL) blocking<span class="mojikumi-line-end">ï¼Œ</span>å³å…±ç”¨ä¸€ä¸ª TCP connection æ—¶è¾ƒå°çš„èµ„æºéœ€è¦ç­‰å¾…è¾ƒå¤§çš„èµ„æºåŠ è½½å®Œæ¯•<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥åœ¨ HTTP/1.1 ä¸­æµè§ˆå™¨ç»å¸¸è¿˜æ˜¯ä¼šå»ºç«‹å¤šä¸ª TCP è¿æ¥<span class="mojikumi-line-end">ï¼Œ</span>é™¤äº†è§£å†³ HOL blocking<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥åœ¨ TCP çš„ congestion control ä¸­å–å¾—æ›´å¤šå¸¦å®½<span class="mojikumi-line-end">ã€‚</span>HTTP/2 åˆ™å°†æ¯ä¸ª message åˆ’åˆ†æˆäº†å¤šä¸ªå°çš„ frame<span class="mojikumi-line-end">ï¼Œ</span>å¹¶äº¤æ›¿å‘é€ä¸åŒ message çš„ frame<span class="mojikumi-line-start">ï¼ˆ</span>frame interleaving<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œå°çš„èµ„æºæ— éœ€ç­‰å¾…å¤§çš„èµ„æºå‘é€å®Œæ¯•<span class="mojikumi-line-end">ã€‚</span></li>
<li>prioritization<span class="mojikumi-line-end">ï¼š</span>åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä¸ºæ¯ä¸ª response è®¾ç½®ä¼˜å…ˆçº§<span class="mojikumi-line-end">ï¼Œ</span>è®© server ä¼˜å…ˆå‘é€é«˜ä¼˜å…ˆçº§çš„ response<span class="mojikumi-line-end">ã€‚</span>é™¤æ­¤ä¹‹å¤–<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯ä»¥è®¾ç½® response ä¹‹é—´çš„ä¾èµ–å…³ç³»<span class="mojikumi-line-end">ã€‚</span></li>
<li>server push<span class="mojikumi-line-end">ï¼š</span>ä¸€ä¸ª request å¯ä»¥æœ‰å¤šä¸ª response<span class="mojikumi-line-end">ï¼Œ</span>å³é™¤äº†å¯¹åº”äº request çš„ response<span class="mojikumi-line-end">ï¼Œ</span>server è¿˜å¯ä»¥é¢å¤– <i>push</i><span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚åœ¨è¿”å›ä¸€ä¸ª HTML é¡µé¢æ—¶å¯ä»¥ push è¿™ä¸ªé¡µé¢å¼•ç”¨çš„å…¶ä»–èµ„æº<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>HTTP/3 ä½¿ç”¨åŸºäº UDP çš„ QUIC ä»£æ›¿äº† TCP<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="electronic-mail-in-the-internet" class="heading"><a href="#electronic-mail-in-the-internet" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Electronic Mail in the Internet" tabindex="-1"></a><span>Electronic Mail in the Internet</span></h2>
<p>e-mail ç³»ç»Ÿæœ‰ä¸‰ä¸ªä¸»è¦ç»„ä»¶<span class="mojikumi-line-end">ï¼š</span>user agent<span class="mojikumi-line-end">ã€</span>mail server å’Œ SMTP (Simple Mail Transfer Protocol)<span class="mojikumi-line-end">ã€‚</span></p>
<p>å‘é€é‚®ä»¶æ—¶<span class="mojikumi-line-end">ï¼Œ</span>Alice å†™å®Œé‚®ä»¶åç”±å¥¹çš„ user agent å‘é€åˆ°å¥¹çš„ mail server<span class="mojikumi-line-end">ï¼Œ</span>å¥¹çš„ mail server å†å‘åˆ° Bob çš„ mail server ä¸­å±äº Bob çš„ mailbox<span class="mojikumi-line-end">ï¼Œ</span>ä¹‹å Bob å†é€šè¿‡ä»–çš„ user agent ä»ä»–çš„ mail server è·å–ä»–çš„ mailbox ä¸­çš„é‚®ä»¶å¹¶é˜…è¯»<span class="mojikumi-line-end">ã€‚</span></p>
<p>å‘é€æ–¹çš„ mail server ä¼šç»´æŠ¤ä¸€ä¸ªå¾…å‘é€é‚®ä»¶åˆ—è¡¨<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæ¥æ”¶æ–¹çš„ mail server åœ¨å½“æ—¶ä¸å¯ç”¨<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡å°è¯•<span class="mojikumi-line-end">ï¼Œ</span>å¤šæ¬¡å¤±è´¥åˆ™ä¼šé€€å›<span class="mojikumi-line-end">ã€‚</span></p>
<p>mail server ä½¿ç”¨ SMTP å‘å…¶ä»– mail server å‘é€é‚®ä»¶<span class="mojikumi-line-end">ï¼Œ</span>å‘é€æ–¹ä½œä¸º SMTP client<span class="mojikumi-line-end">ï¼Œ</span>æ¥æ”¶æ–¹ä½œä¸º SMTP server<span class="mojikumi-line-end">ã€‚</span></p>
<p>SMTP çš„é»˜è®¤ç«¯å£æ˜¯ 25<span class="mojikumi-line-end">ã€‚</span></p>
<p>SMTP æ˜¯ä¸€ä¸ªæ¯” HTTP è¿˜å¤è€çš„åè®®<span class="mojikumi-line-end">ï¼Œ</span>å¸¦æ¥çš„åæœä¹‹ä¸€æ˜¯å®ƒæ•´ä¸ª message éƒ½åªèƒ½åŒ…å« ASCII<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€æ¬¡ SMTP é€šä¿¡å¦‚ä¸‹æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span><sup><a href="#user-content-fn-smtp-example" id="user-content-fnref-smtp-example" data-footnote-ref aria-describedby="footnote-label">3</a></sup></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="plain ä»£ç å—" data-v-ad49d235>plain</h3><ile-root id="ile-10"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-10--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><samp><span><span style="color: #d6deeb">S: 220 smtp.example.com ESMTP Postfix</span></span>
<span><span style="color: #d6deeb">C: HELO relay.example.org</span></span>
<span><span style="color: #d6deeb">S: 250 Hello relay.example.org, I am glad to meet you</span></span>
<span><span style="color: #d6deeb">C: MAIL FROM:&lt;bob@example.org&gt;</span></span>
<span><span style="color: #d6deeb">S: 250 Ok</span></span>
<span><span style="color: #d6deeb">C: RCPT TO:&lt;alice@example.com&gt;</span></span>
<span><span style="color: #d6deeb">S: 250 Ok</span></span>
<span><span style="color: #d6deeb">C: RCPT TO:&lt;theboss@example.com&gt;</span></span>
<span><span style="color: #d6deeb">S: 250 Ok</span></span>
<span><span style="color: #d6deeb">C: DATA</span></span>
<span><span style="color: #d6deeb">S: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span></span>
<span><span style="color: #d6deeb">C: From: &quot;Bob Example&quot; &lt;bob@example.org&gt;</span></span>
<span><span style="color: #d6deeb">C: To: &quot;Alice Example&quot; &lt;alice@example.com&gt;</span></span>
<span><span style="color: #d6deeb">C: Cc: theboss@example.com</span></span>
<span><span style="color: #d6deeb">C: Date: Tue, 15 Jan 2008 16:02:43 -0500</span></span>
<span><span style="color: #d6deeb">C: Subject: Test message</span></span>
<span><span style="color: #d6deeb">C:</span></span>
<span><span style="color: #d6deeb">C: Hello Alice.</span></span>
<span><span style="color: #d6deeb">C: This is a test message with 5 header fields and 4 lines in the message body.</span></span>
<span><span style="color: #d6deeb">C: Your friend,</span></span>
<span><span style="color: #d6deeb">C: Bob</span></span>
<span><span style="color: #d6deeb">C: .</span></span>
<span><span style="color: #d6deeb">S: 250 Ok: queued as 12345</span></span>
<span><span style="color: #d6deeb">C: QUIT</span></span>
<span><span style="color: #d6deeb">S: 221 Bye</span></span></samp></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><samp><span><span style="color: #403f53">S: 220 smtp.example.com ESMTP Postfix</span></span>
<span><span style="color: #403f53">C: HELO relay.example.org</span></span>
<span><span style="color: #403f53">S: 250 Hello relay.example.org, I am glad to meet you</span></span>
<span><span style="color: #403f53">C: MAIL FROM:&lt;bob@example.org&gt;</span></span>
<span><span style="color: #403f53">S: 250 Ok</span></span>
<span><span style="color: #403f53">C: RCPT TO:&lt;alice@example.com&gt;</span></span>
<span><span style="color: #403f53">S: 250 Ok</span></span>
<span><span style="color: #403f53">C: RCPT TO:&lt;theboss@example.com&gt;</span></span>
<span><span style="color: #403f53">S: 250 Ok</span></span>
<span><span style="color: #403f53">C: DATA</span></span>
<span><span style="color: #403f53">S: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span></span>
<span><span style="color: #403f53">C: From: &quot;Bob Example&quot; &lt;bob@example.org&gt;</span></span>
<span><span style="color: #403f53">C: To: &quot;Alice Example&quot; &lt;alice@example.com&gt;</span></span>
<span><span style="color: #403f53">C: Cc: theboss@example.com</span></span>
<span><span style="color: #403f53">C: Date: Tue, 15 Jan 2008 16:02:43 -0500</span></span>
<span><span style="color: #403f53">C: Subject: Test message</span></span>
<span><span style="color: #403f53">C:</span></span>
<span><span style="color: #403f53">C: Hello Alice.</span></span>
<span><span style="color: #403f53">C: This is a test message with 5 header fields and 4 lines in the message body.</span></span>
<span><span style="color: #403f53">C: Your friend,</span></span>
<span><span style="color: #403f53">C: Bob</span></span>
<span><span style="color: #403f53">C: .</span></span>
<span><span style="color: #403f53">S: 250 Ok: queued as 12345</span></span>
<span><span style="color: #403f53">C: QUIT</span></span>
<span><span style="color: #403f53">S: 221 Bye</span></span></samp></pre></div></section>
<p>å…¶ä¸­ <code>HELO</code><span class="mojikumi-line-end">ã€</span><code>MAIL FROM</code><span class="mojikumi-line-end">ã€</span><code>RCPT TO</code><span class="mojikumi-line-end">ã€</span><code>DATA</code><span class="mojikumi-line-end">ã€</span><code>QUIT</code> ç­‰æ˜¯ <i>command</i><span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥è¿›è¡Œ handshake ç­‰æ“ä½œ<span class="mojikumi-line-end">ã€‚</span>å¦‚æœè¦å‘åŒä¸€ä¸ª mail server è¿ç»­å‘é€å¤šå°é‚®ä»¶<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åª <code>HELO</code><span class="mojikumi-line-end">ã€</span><code>QUIT</code> ä¸€æ¬¡<span class="mojikumi-line-start">ï¼ˆ</span>ä½†è¦ <code>MAIL FROM</code><span class="mojikumi-line-end">ã€</span><code>RCPT TO</code> å¤šæ¬¡<span class="mojikumi-line-end">ï¼‰</span>ä»è€Œå…±ç”¨ä¸€ä¸ª TCP è¿æ¥<span class="mojikumi-line-end">ã€‚</span><code>DATA</code> åæ˜¯é‚®ä»¶çš„å†…å®¹<span class="mojikumi-line-end">ï¼Œ</span>è¿™ä¸€å†…å®¹çš„å¼€å¤´æ˜¯é‚®ä»¶çš„ header<span class="mojikumi-line-end">ï¼Œ</span>ç»“å°¾æ˜¯ä»…åŒ…å« <code>.</code> çš„ä¸€è¡Œ<span class="mojikumi-line-end">ã€‚</span></p>
<p>email æ˜¯ user agent â†’ mail server â†’ mail server â†’ user agent è€Œé user agent â†’ user agent<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å¤§åŸå› æ˜¯å¦‚æœ user agent ç»å¸¸ä¸åœ¨çº¿åˆ™ç›´æ¥å‘å¾ˆå¯èƒ½æ”¶ä¸åˆ°é‚®ä»¶<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ç”¨ mail server æ¥æé«˜åœ¨çº¿ç‡ä»¥åŠæä¾›å¯¹æ–¹ä¸åœ¨çº¿æ—¶é‡è¯•çš„æœºåˆ¶<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä» user agent å‘åˆ° mail server æ—¶å¯ä»¥ä½¿ç”¨ SMTP æˆ– HTTP<span class="mojikumi-line-end">ï¼Œ</span>ä» mail server æ‹‰å–åˆ° user agent æ—¶å¯ä»¥ä½¿ç”¨ HTTP æˆ– IMAP (Internet Mail Access Protocol)<span class="mojikumi-line-start">ï¼ˆ</span>ä¸èƒ½ç”¨ SMTP<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸º SMTP æ˜¯ push protocol<span class="mojikumi-line-end">ï¼Œ</span>ä¸èƒ½ç”¨æ¥ pull<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="dns--the-internetâ€™s-directory-service" class="heading"><a href="#dns--the-internetâ€™s-directory-service" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DNSâ€”The Internetâ€™s Directory Service" tabindex="-1"></a><span>DNSâ€”The Internet<span class="mojikumi-narrow-left">â€™</span>s Directory Service</span></h2>
<h3 id="services-provided-by-dns" class="heading"><a href="#services-provided-by-dns" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Services Provided by DNS" tabindex="-1"></a><span>Services Provided by DNS</span></h3>
<p>host ç”± hostname æˆ– IP åœ°å€è¯†åˆ«<span class="mojikumi-line-end">ï¼Œ</span>hostname å¯¹äººç±»æ›´å‹å¥½<span class="mojikumi-line-end">ï¼Œ</span>è€Œ IP åœ°å€å¯¹è·¯ç”±å™¨æ›´å‹å¥½<span class="mojikumi-line-end">ã€‚</span></p>
<p>å°† hostname ç¿»è¯‘ä¸º IP åœ°å€æ˜¯ DNS çš„ä¸»è¦ä»»åŠ¡<span class="mojikumi-line-end">ã€‚</span>DNS æ˜¯ç”±å¤šä¸ªå±‚çº§çš„ DNS server å…±åŒæ„æˆçš„ distributed database<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæ˜¯ä½¿å¾— application èƒ½å¤ŸæŸ¥è¯¢è¿™ä¸ª distributed database çš„ application-layer protocol<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS è¢«å¾ˆå¤šå…¶ä»– application-layer protocol æ‰€ä½¿ç”¨<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚åœ¨ HTTP/SMTP ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ hostname æ¥è®¿é—®ç½‘ç«™ / mail server<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ—¶å°±ä¼šè°ƒç”¨ DNS<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS åœ¨æä¾› hostname åˆ° IP åœ°å€çš„ç¿»è¯‘çš„åŒæ—¶<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æä¾›äº†ä¸‹åˆ—åŠŸèƒ½<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>host aliasing: å¯ä»¥è®©ä¸€ä¸ª host åœ¨æœ‰ canonical hostname çš„åŒæ—¶è¿˜æœ‰å…¶ä»– alias<span class="mojikumi-line-end">ã€‚</span></li>
<li>mail server aliasing: å¯ä»¥è®©åŒä¸€ä¸ª hostname åœ¨ä½œä¸º Web server å’Œä½œä¸º mail server æ—¶æŒ‡å‘ä¸åŒçš„ host<span class="mojikumi-line-end">ã€‚</span></li>
<li>load distribution: å¯ä»¥è®©åŒä¸€ä¸ª hostname æŒ‡å‘å¤šä¸ª host<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è¿”å›æŸ¥è¯¢ç»“æœæ—¶è¿›è¡Œ rotate<span class="mojikumi-line-start">ï¼ˆ</span>å³æ”¹å˜ä½äºé¦–ä½çš„ IP åœ°å€<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="overview-of-how-dns-works" class="heading"><a href="#overview-of-how-dns-works" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Overview of How DNS Works" tabindex="-1"></a><span>Overview of How DNS Works</span></h3>
<p>ç”±äºä¸‹åˆ—åŸå› <span class="mojikumi-line-end">ï¼Œ</span>DNS å¿…é¡»æ˜¯åˆ†å¸ƒå¼çš„<span class="mojikumi-line-end">ï¼Œ</span>å•ç‚¹å¼çš„ DNS æ— æ³• scale<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>single point of failure</li>
<li>traffic volume è¿‡å¤§</li>
<li>ç¦»éƒ¨åˆ†ç”¨æˆ·è·ç¦»è¿‡è¿œ<span class="mojikumi-line-end">ï¼Œ</span>å¸¦æ¥è¾ƒå¤§çš„å»¶æ—¶</li>
<li>éš¾ä»¥ç»´æŠ¤<span class="mojikumi-line-start">ï¼ˆ</span>æ•°æ®æ€»é‡å¤§<span class="mojikumi-line-end">ï¼Œ</span>æ›´æ–°é¢‘ç¹<span class="mojikumi-line-end">ï¼‰</span></li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>DNS åˆ†ä¸ºä»¥ä¸‹å‡ å±‚<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>root DNS server: åˆ†æ•£åœ¨ä¸–ç•Œå„åœ°çš„ 13 ä¸ªä¸åŒ root server å„è‡ªçš„å…±ä¸Šåƒä¸ª copy<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æŸ¥è¯¢ TLD server</li>
<li>top-level domain (TLD) server: æ¯ä¸ª TLD æœ‰è‡ªå·±çš„ TLD server (or server cluster)<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æŸ¥è¯¢ authoritative DNS server</li>
<li>authoritative DNS server: æ¯ä¸ª subdomain æœ‰è‡ªå·±çš„ authoritative DNS server<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æ˜¯ç»„ç»‡è‡ªå·±ç»´æŠ¤çš„æˆ–è€…ç”±æœåŠ¡å•†æä¾›çš„<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æŸ¥è¯¢ hostname åˆ° IP åœ°å€çš„æ˜ å°„</li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–<span class="mojikumi-line-end">ï¼Œ</span>TLD server å’Œ authoritative DNS server ä¹‹é—´è¿˜å¯èƒ½æœ‰ intermediate DNS server<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸Šè¿° DNS server çš„ hierarchy ä¹‹å¤–<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æœ‰ local DNS server<span class="mojikumi-line-start">ï¼ˆ</span>å°±æ˜¯ç”µè„‘çš„ç½‘ç»œè®¾ç½®é‡Œè®¾çš„ DNS æœåŠ¡å™¨<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½œä¸º proxy æ¥ä»£æ›¿ requesting host å‘ DNS server è¿›è¡ŒæŸ¥è¯¢<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä»é€»è¾‘ä¸Šæ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>å‘ä¸€ä¸ª DNS server è¿›è¡ŒæŸ¥è¯¢æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœå®ƒè‡ªå·±ä¸çŸ¥é“æœ€ç»ˆçš„ answer (IP åœ°å€)<span class="mojikumi-line-end">ï¼Œ</span>å®ƒå¯ä»¥è®©ä½ æ¢ä¸€ä¸ª DNS server ç»§ç»­æŸ¥ (iterative query)<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…å¸®ä½ å‘å…¶ä»– DNS server å‘é€æŸ¥è¯¢ (recursive query) ç„¶åè¿”å›æœ€ç»ˆçš„ç»“æœ<span class="mojikumi-line-end">ã€‚</span>è€Œåœ¨å®é™…ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¦‚ä¸Šæ–‡æ‰€è¿°<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯å‘ local DNS server æŸ¥è¯¢æ—¶ä¼šè¿›è¡Œ recursive query<span class="mojikumi-line-end">ï¼Œ</span>è€Œ local DNS server å†ä» root DNS server å‘ä¸‹ç›´åˆ° authoritative DNS server è¿›è¡Œ iterative query<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸ºäº†å‡å°‘æŸ¥è¯¢çš„æ•°é‡<span class="mojikumi-line-end">ï¼Œ</span>DNS è®¾æœ‰ caching<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ªæŸ¥è¯¢çš„å‘èµ·è€…<span class="mojikumi-line-start">ï¼ˆ</span>requesting host æˆ–è€… local DNS server<span class="mojikumi-line-end">ï¼‰</span>ä¼šå°†æ”¶åˆ°çš„æŸ¥è¯¢ç»“æœä¿å­˜ä¸€æ®µæ—¶é—´<span class="mojikumi-line-end">ï¼Œ</span>cache miss æ‰ä¼šå‘å…¶ä»– DNS server å‘èµ·æŸ¥è¯¢<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>å¸¸ç”¨çš„ TLD server çš„ IP åœ°å€å¾€å¾€éƒ½åœ¨ cache ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¤§å¤§å‡å°‘äº† root DNS server æ”¶åˆ°çš„è¯·æ±‚æ•°é‡<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="dns-records" class="heading"><a href="#dns-records" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DNS Records" tabindex="-1"></a><span>DNS Records</span></h3>
<p>DNS distributed database å­˜å‚¨çš„ä¿¡æ¯å•å…ƒæ˜¯ <i>resource record</i> (RR)<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ª RR åŒ…å« type<span class="mojikumi-line-end">ã€</span>name<span class="mojikumi-line-end">ã€</span>value<span class="mojikumi-line-end">ã€</span>TTL å››é¡¹ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ TTL è¡¨ç¤º cache å¤šä¹…è¿‡æœŸ<span class="mojikumi-line-end">ã€‚</span>å¸¸è§çš„ type åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ª<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>A: name æ˜¯ hostname<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯ IP åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºä¸€ä¸ª hostname åˆ° IP åœ°å€çš„æ˜ å°„<span class="mojikumi-line-end">ã€‚</span></li>
<li>NS: name æ˜¯ domain<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯å…¶ name server çš„ hostname<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºå¯ä»¥åœ¨è¿™ä¸ª name server è¿›è¡Œè¿™ä¸ª domain çš„è¿›ä¸€æ­¥æŸ¥è¯¢<span class="mojikumi-line-end">ã€‚</span></li>
<li>CNAME: name æ˜¯ alias hostname<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯ canonical hostname<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æä¾› host aliasing<span class="mojikumi-line-end">ã€‚</span></li>
<li>MX: name æ˜¯ alias hostname<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯ canonical hostname<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æä¾› mail server aliasing<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>å¯¹ä¸€ä¸ª hostname æ¥è¯´ authoritative çš„ DNS server ä¼šåŒ…å«è¢«æŸ¥è¯¢çš„ host çš„ A record<span class="mojikumi-line-end">ã€‚</span>ä¸ authoritative çš„ DNS server åˆ™ä¼šåŒ…å«ç›¸åº”çš„ NS record<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠè¿™ä¸ª name server çš„ A record<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<div class="overflow-auto my-6"><table>
<thead>
<tr>
<th align="center">type</th>
<th align="center">name</th>
<th align="center">value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">NS</td>
<td align="center"><code>.</code></td>
<td align="center"><code>a<wbr>.<wbr>root<wbr>-<wbr>servers<wbr>.<wbr>net<wbr>.</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>a<wbr>.<wbr>root<wbr>-<wbr>servers<wbr>.<wbr>net<wbr>.</code></td>
<td align="center"><code>198.41.0.4</code></td>
</tr>
<tr>
<td align="center">NS</td>
<td align="center"><code>moe.</code></td>
<td align="center"><code>ns1<wbr>.<wbr>dns<wbr>.<wbr>nic<wbr>.<wbr>moe<wbr>.</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>ns1<wbr>.<wbr>dns<wbr>.<wbr>nic<wbr>.<wbr>moe<wbr>.</code></td>
<td align="center"><code>156<wbr>.<wbr>154<wbr>.<wbr>144<wbr>.<wbr>114</code></td>
</tr>
<tr>
<td align="center">NS</td>
<td align="center"><code>ouuan.moe.</code></td>
<td align="center"><code>amos<wbr>.<wbr>ns<wbr>.<wbr>cloudflare<wbr>.<wbr>com<wbr>.</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>amos<wbr>.<wbr>ns<wbr>.<wbr>cloudflare<wbr>.<wbr>com<wbr>.</code></td>
<td align="center"><code>172<wbr>.<wbr>64<wbr>.<wbr>35<wbr>.<wbr>120</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>ouuan.moe.</code></td>
<td align="center"><code>172<wbr>.<wbr>67<wbr>.<wbr>181<wbr>.<wbr>123</code></td>
</tr>
</tbody>
</table></div>
<p>åœ¨ registar è´­ä¹°åŸŸåæ—¶å¯ä»¥å¡«å†™ name server çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>ç”± registar è´Ÿè´£å°†ç›¸åº”çš„ NS ä»¥åŠ A record æ·»åŠ åˆ° TLD server<span class="mojikumi-line-end">ã€‚</span>å¯ä»¥ä½¿ç”¨åŸŸåå•†çš„ DNS server<span class="mojikumi-line-end">ã€</span>å…¶ä»–æœåŠ¡å•†<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ Cloudflare<span class="mojikumi-line-end">ï¼‰</span>çš„ DNS server æˆ–è€…è‡ªå·±æ­å»ºçš„ DNS server ä½œä¸º authoritative DNS server<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS æœ€åˆåªèƒ½é™æ€æ›´æ–°<span class="mojikumi-line-start">ï¼ˆ</span>é€šè¿‡é…ç½®æ–‡ä»¶ç­‰æ–¹å¼<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åæ¥æœ‰äº† DDNS æ¥é€šè¿‡ DNS message åŠ¨æ€æ›´æ–°<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="dns-messages" class="heading"><a href="#dns-messages" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DNS Messages" tabindex="-1"></a><span>DNS Messages</span></h3>
<p>DNS message é€šè¿‡ UDP å‘é€åˆ° port 53<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS message çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span><sup><a href="#user-content-fn-fig-2.21" id="user-content-fnref-fig-2.21" data-footnote-ref aria-describedby="footnote-label">4</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-2.21.b9121041.webp"><img srcset="/assets/cnatda-fig-2.21.8f9be477.png" loading="lazy" src="/assets/cnatda-fig-2.21.8f9be477.png" width="1349" height="804" alt="DNS message format"></picture></p>
<p>identification ç”± client è®¾ç½®<span class="mojikumi-line-end">ï¼Œ</span>å³ç”¨æ¥è¯†åˆ« query å’Œ reply å¯¹åº”å…³ç³»çš„ ID<span class="mojikumi-line-end">ã€‚</span></p>
<p>flags åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ª<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>query or reply: è¿™æ¡ message æ˜¯ query è¿˜æ˜¯ reply</li>
<li>authoritative or not: è¿”å›çš„ç»“æœæ˜¯å¦æ˜¯æœ€ç»ˆçš„ç­”æ¡ˆ</li>
<li>recursion desired: client æ˜¯å¦å¸Œæœ› server è¿›è¡Œ recursive query</li>
<li>recursion available: server æ˜¯å¦å¯ä»¥è¿›è¡Œ recursive query</li>
</ul>
<p>4 ä¸ª section ä¸­éƒ½åŒ…å«è‹¥å¹² RR<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ query ä¸­<span class="mojikumi-line-end">ï¼Œ</span>question section é‡Œä¼šåŒ…å« name å’Œ type<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯¹äº type A çš„æŸ¥è¯¢<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>å¦‚æœ reply æ˜¯ authoritative çš„<span class="mojikumi-line-start">ï¼ˆ</span>å‘ authoritative DNS server æŸ¥è¯¢<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…è¿›è¡Œäº† recursive query<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šåœ¨ answer section ä¸­åˆ—å‡ºæ‰€æŸ¥è¯¢çš„ A record<span class="mojikumi-line-end">ã€‚</span></li>
<li>å¦‚æœä¸æ˜¯ authoritative çš„<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šåœ¨ authority section ä¸­åˆ—å‡º NS record<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ additional section ä¸­åˆ—å‡ºè¿™äº› name server çš„ A record<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>åœ¨ additional section ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯èƒ½åˆ—å‡º canonical hostname çš„ A record ä¹‹ç±»çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="peer-to-peer-file-distribution" class="heading"><a href="#peer-to-peer-file-distribution" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Peer-to-Peer File Distribution" tabindex="-1"></a><span>Peer-to-Peer File Distribution</span></h2>
<p>åœ¨ä¼ è¾“å¤§æ–‡ä»¶æ—¶<span class="mojikumi-line-end">ï¼Œ</span>client-server çš„æ¶æ„åœ¨ç”¨æˆ·æ•°é‡å¢å¤šæ—¶éœ€è¦æ›´å¤§çš„ server bandwidth æ‰èƒ½ä¿è¯ç”¨æˆ·çš„ä¸‹è½½é€Ÿåº¦<span class="mojikumi-line-end">ï¼Œ</span>è€Œ P2P çš„æ¶æ„åˆ™æ˜¯ self-scalable çš„<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ä¹¦ä¸­æœ‰ç®€åŒ–æ¨¡å‹çš„å®šé‡è®¡ç®—<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>BitTorrent æ˜¯è¾ƒä¸ºæµè¡Œçš„ P2P file distribution protocol<span class="mojikumi-line-end">ã€‚</span>åœ¨ BitTorrent ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä»¥ chunk ä¸ºä¸‹è½½æ–‡ä»¶çš„åŸºæœ¬å•ä½<span class="mojikumi-line-end">ã€‚</span>ä¸€ä¸ª peer åˆšåŠ å…¥ torrent æ—¶æ²¡æœ‰ trunk æ‰€ä»¥åªèƒ½ä¸‹è½½<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è·å–åˆ°ä¸€äº› trunk åå°±ä¼šå¼€å§‹ä¸Šä¼ ç»™å…¶ä»– peer<span class="mojikumi-line-end">ï¼Œ</span>ä¸‹è½½å®Œæˆåå¯ä»¥è‡ªç§åœ°ç¦»å¼€æˆ–è€…æ— ç§åœ°ä¿ç§<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ª torrent ä¼šæœ‰<span class="mojikumi-line-start">ï¼ˆ</span>è‡³å°‘<span class="mojikumi-line-end">ï¼‰</span>ä¸€ä¸ª tracker<span class="mojikumi-line-end">ï¼Œ</span>peer åœ¨åŠ å…¥/ç¦»å¼€æ—¶ä¼šé€šçŸ¥ tracker<span class="mojikumi-line-end">ï¼Œ</span>å¹¶åœ¨è¿‡ç¨‹ä¸­å®šæœŸå‘ŠçŸ¥ tracker è‡ªå·±ä»åœ¨æ´»åŠ¨<span class="mojikumi-line-end">ã€‚</span>tracker ä¼šç»™æ¯ä¸ª peer æä¾›ä¸€äº›å…¶ä»– peer çš„ IP åœ°å€å’Œç«¯å£<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª peer æ‹¥æœ‰ä¸€éƒ¨åˆ† chunk<span class="mojikumi-line-end">ï¼Œ</span>å¹¶å‘å…¶ä»– peer è¯·æ±‚ chunk<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª peer éœ€è¦å†³å®šä¼˜å…ˆä¸‹è½½å“ªä¸ª trunk ä»¥åŠä¸Šä¼ ç»™è°<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¼˜å…ˆä¸‹è½½çš„ trunk å¯ä»¥é‡‡ç”¨ <i>rarest first</i> çš„ç­–ç•¥<span class="mojikumi-line-end">ï¼Œ</span>å³ä¼˜å…ˆä¸‹è½½å·²çŸ¥çš„ peer ä¸­æ‹¥æœ‰äººæ•°æœ€å°‘çš„ chunk<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„è¯å°±èƒ½ä½¿å¾—å„ä¸ª trunk è¾ƒä¸ºå‡åŒ€åœ°åœ¨ peer é—´åˆ†å¸ƒ<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¼šé‡‡ç”¨è¢«ç§°ä½œ<span class="mojikumi-line-start">â€œ</span>tit-for-tat<span class="mojikumi-line-end">â€</span>çš„ç­–ç•¥å†³å®šä¸Šä¼ ç»™è°<span class="mojikumi-line-end">ï¼š</span>ä¸Šä¼ ç»™è‡ªå·±<span class="mojikumi-line-start">ï¼ˆ</span>å³ä»ä»–é‚£ä¸‹è½½<span class="mojikumi-line-end">ï¼‰</span>çš„é€Ÿåº¦æœ€å¿«çš„å‡ ä¸ª peer è¢«ç§°ä½œ<span class="mojikumi-line-start">â€œ</span>unchoked<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>é™¤æ­¤ä¹‹å¤–è¿˜ä¼šæ¯éš”ä¸€æ®µæ—¶é—´éšæœºé€‰æ‹©ä¸€ä¸ª peer è¢«ç§°ä½œ<span class="mojikumi-line-start">â€œ</span>optimistically unchoked<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>æœ€ååšå‡ºçš„é€‰æ‹©å°±æ˜¯ä¸Šä¼ ç»™<span class="mojikumi-line-start">â€œ</span>unchoked<span class="mojikumi-line-end">â€</span>å’Œ<span class="mojikumi-line-start">â€œ</span>optimistically unchoked<span class="mojikumi-line-end">â€</span>çš„è¿™äº› peer<span class="mojikumi-line-end">ã€‚</span>è¿™ä¸ªç­–ç•¥å®é™…ä¸Šå¯ä»¥è¢«ç»•è¿‡<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¸è¢«ç»•è¿‡æ—¶å®ƒæä¾›äº†ä¸€ä¸ªæ¿€åŠ±å¤§å®¶ä¸Šä¼ çš„æœºåˆ¶<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>æ³¨<span class="mojikumi-line-end">ï¼š</span>åœ¨ä¸‹è½½å®Œæ¯•åä¿ç§æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šä½¿ç”¨å¦å¤–çš„ç­–ç•¥<span class="mojikumi-line-end">ã€‚</span><sup><a href="#user-content-fn-seed-choking" id="user-content-fnref-seed-choking" data-footnote-ref aria-describedby="footnote-label">5</a></sup><span class="mojikumi-line-end">ï¼‰</span></p>
<p>é™¤äº†é€šè¿‡ tracker<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯ä»¥é€šè¿‡ Distributed Hash Table (DHT<span class="mojikumi-line-end">ï¼Œ</span>ä¸€ç§ P2P æ¶æ„çš„ distributed database) æ¥è·å– peer<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="video-streaming-and-content-distribution-networks" class="heading"><a href="#video-streaming-and-content-distribution-networks" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Video Streaming and Content Distribution Networks" tabindex="-1"></a><span>Video Streaming and Content Distribution Networks</span></h2>
<h3 id="http-streaming-and-dash" class="heading"><a href="#http-streaming-and-dash" class="heading-anchor" aria-label="ç« èŠ‚ï¼š HTTP Streaming and DASH" tabindex="-1"></a><span>HTTP Streaming and DASH</span></h3>
<p>è§†é¢‘éœ€è¦è€—è´¹å¤§é‡çš„æµé‡<span class="mojikumi-line-start">ï¼ˆ</span>ä»¥åŠå­˜å‚¨ç©ºé—´<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è€Œ streaming æ—¶éœ€è¦ä¿è¯è‡³å°‘æœ‰è§†é¢‘ bitrate è¿™ä¹ˆå¤šçš„å¸¦å®½æ‰èƒ½é¿å…å¡é¡¿<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ä¸€èˆ¬ä¼šæ ¹æ®å¯ç”¨çš„å¸¦å®½é€‰æ‹©ä¸åŒè´¨é‡çš„è§†é¢‘ç‰ˆæœ¬<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ€åŸºç¡€çš„ streaming æ–¹å¼æ˜¯ HTTP streaming<span class="mojikumi-line-end">ï¼Œ</span>å³é€šè¿‡ HTTP GET è·å–è§†é¢‘æ–‡ä»¶è‡³ç¼“å†²åŒºå¹¶æ’­æ”¾<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¿™æ ·æ— æ³•é€‚åº”ä¸åŒç”¨æˆ·çš„ä¸åŒå¸¦å®½<span class="mojikumi-line-end">ï¼Œ</span>æ›´æ— æ³•é€‚åº”åŒä¸€ä¸ªç”¨æˆ·éšæ—¶é—´å˜åŒ–çš„å¸¦å®½<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ Dynamic Adaptive Streaming over HTTP (DASH) ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è§†é¢‘è¢«ç¼–ç ä¸ºå¤šä¸ªä¸åŒè´¨é‡çš„ç‰ˆæœ¬<span class="mojikumi-line-end">ï¼Œ</span>client æ¯æ¬¡è·å–ä¸€ä¸ªå‡ ç§’çš„è§†é¢‘ç‰‡æ®µ<span class="mojikumi-line-end">ï¼Œ</span>å¹¶æ ¹æ®å¯ç”¨å¸¦å®½åŠ¨æ€è°ƒæ•´é€‰æ‹©çš„ç‰ˆæœ¬<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨å¼€å§‹æ’­æ”¾ä¹‹å‰<span class="mojikumi-line-end">ï¼Œ</span>client é¦–å…ˆä¼šè·å– manifest file æ¥å¾—åˆ°å„ä¸ªè§†é¢‘ç‰ˆæœ¬çš„ URL ä»¥åŠ bitrate<span class="mojikumi-line-end">ã€‚</span>åœ¨æ’­æ”¾è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>é€šè¿‡ HTTP GET è¯·æ±‚ä»¥åŠ byte range header è·å–è§†é¢‘ç‰‡æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åŒæ—¶è®¡ç®—å¯ç”¨å¸¦å®½<span class="mojikumi-line-end">ï¼Œ</span>å†³å®šæ¥ä¸‹æ¥é€‰æ‹©çš„è§†é¢‘ç‰ˆæœ¬<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="content-distribution-networks" class="heading"><a href="#content-distribution-networks" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Content Distribution Networks" tabindex="-1"></a><span>Content Distribution Networks</span></h3>
<p>å’Œ DNS ç±»ä¼¼<span class="mojikumi-line-end">ï¼Œ</span>video streaming å¾€å¾€ä¹Ÿä¸èƒ½ä»…é€šè¿‡å•ä¸ª data center å®ç°<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸º<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>ç¦»éƒ¨åˆ†ç”¨æˆ·è¿‡è¿œ<span class="mojikumi-line-end">ï¼Œ</span>è™½ç„¶ streaming å¯¹å»¶æ—¶è¦æ±‚ä¸é«˜<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ›´å¤šçš„ communication link å¾ˆå¯èƒ½æ„å‘³ç€æ›´ä½çš„ bottleneck bandwidth<span class="mojikumi-line-end">ã€‚</span></li>
<li>åŒä¸€ä¸ªè§†é¢‘ä¼šåœ¨åŒä¸€ä¸ª communication link ä¸Šè¢«ä¼ è¾“å¤šæ¬¡<span class="mojikumi-line-end">ï¼Œ</span>é€ æˆç½‘ç»œèµ„æºä»¥åŠèµ„è´¹çš„æµªè´¹<span class="mojikumi-line-end">ã€‚</span></li>
<li>single point of failure</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜<span class="mojikumi-line-end">ï¼Œ</span>video-streaming company å¾€å¾€ä¼šä½¿ç”¨ Content Distribution Networks (CDN) æ¥åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ã€‚</span></p>
<p>CDN ä¼šåœ¨å…¨çƒå„åœ°æ”¾ç½® server (cluster)<span class="mojikumi-line-end">ï¼Œ</span>åœ¨æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾ä¸€ä»½ content çš„ copy<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å¤„ç† user request æ—¶å°½é‡ç”±æœ€å¥½<span class="mojikumi-line-start">ï¼ˆ</span>æœ€è¿‘<span class="mojikumi-line-end">ï¼‰</span>çš„èŠ‚ç‚¹è´Ÿè´£å“åº”<span class="mojikumi-line-end">ã€‚</span></p>
<p>CDN å¯ä»¥æ˜¯ private CDN<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ Google çš„ CDN<span class="mojikumi-line-end">ï¼‰</span>æˆ–è€… third-party CDN<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ Akamai<span class="mojikumi-line-end">ã€</span>Limelight<span class="mojikumi-line-end">ã€</span>Level-3<span class="mojikumi-line-end">ï¼Œ</span><s>ä¹¦ä¸­ç«Ÿç„¶æ²¡æåˆ° Cloudflare</s><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>CDN é€šå¸¸æœ‰ä¸¤ç§æ”¾ç½®ç­–ç•¥<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>Enter Deep: æ”¾åœ¨ access ISP<span class="mojikumi-line-end">ï¼Œ</span>cluster æ•°é‡å¤š<span class="mojikumi-line-end">ï¼Œ</span>æ€§èƒ½æ›´å¥½<span class="mojikumi-line-end">ï¼Œ</span>ç»´æŠ¤æˆæœ¬æ›´é«˜<span class="mojikumi-line-end">ã€‚</span></li>
<li>Bring Home: æ”¾åœ¨ IXP<span class="mojikumi-line-end">ï¼Œ</span>cluster æ•°é‡å°‘<span class="mojikumi-line-end">ï¼Œ</span>ç»´æŠ¤æˆæœ¬æ›´ä½<span class="mojikumi-line-end">ï¼Œ</span>æ€§èƒ½ç›¸å¯¹å·®<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>CDN çš„æ›´æ–°æœ‰ push å’Œ pull ä¸¤ç§æ–¹å¼<span class="mojikumi-line-end">ï¼Œ</span>push å°±æ˜¯å†…å®¹æ›´æ–°æ—¶ push åˆ°å„ä¸ª cluster<span class="mojikumi-line-end">ï¼Œ</span>pull åˆ™ä¸ cache ç±»ä¼¼<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ cache miss æ—¶å†ä»ä¸Šæ¸¸è·å–å¹¶<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ stream ç»™ç”¨æˆ·çš„åŒæ—¶<span class="mojikumi-line-end">ï¼‰</span>ä¿å­˜ä¸‹æ¥<span class="mojikumi-line-end">ã€‚</span></p>
<p>å°†ç”¨æˆ·é‡å®šå‘åˆ° CDN èŠ‚ç‚¹çš„ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ DNS<span class="mojikumi-line-end">ï¼š</span>authoritative DNS server è¿”å› CDN çš„ DNS server çš„ NS record<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åå†ç”± CDN çš„ DNS server è¿›è¡ŒèŠ‚ç‚¹é€‰æ‹©å¹¶è¿”å›èŠ‚ç‚¹çš„ IP åœ°å€<span class="mojikumi-line-end">ã€‚</span></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>åŸºäº DNS è¿›è¡Œ CDN é‡å®šå‘æ—¶<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>é€‰æ‹©èŠ‚ç‚¹çš„ä¸¤ç§æ–¹å¼æ˜¯<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>
<p>geographically closest: ç”± local DNS server çš„ IP ç¡®å®šåœ°ç†ä½ç½®<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åé€‰æ‹©æœ€è¿‘çš„èŠ‚ç‚¹<span class="mojikumi-line-end">ã€‚</span>è¿™æ ·åšçš„ä¸»è¦é—®é¢˜åœ¨äº<span class="mojikumi-line-end">ï¼Œ</span>åœ°ç†ä½ç½®è¿‘ä¸ä¸€å®šæ„å‘³ç€ç½‘ç»œè·ç¦»è¿‘/å¸¦å®½é«˜<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸” local DNS server æœ‰å¯èƒ½ç¦»ç”¨æˆ·å¾ˆè¿œ<span class="mojikumi-line-end">ã€‚</span></p>
</li>
<li>
<p>real-time measurements: å¯ä»¥æ¯éš”ä¸€æ®µæ—¶é—´å‘å„ä¸ª local DNS server å‘é€æ¢æµ‹ä¿¡å·æ¥æ£€æµ‹ç½‘ç»œæ€§èƒ½<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·åšçš„ä¸»è¦é—®é¢˜åœ¨äº DNS server å¯èƒ½ä¼šæ‹’ç»å“åº”è¿™æ ·çš„æ¢æµ‹<span class="mojikumi-line-end">ã€‚</span></p>
</li>
</ul>
<h3 id="case-studies-netflix-and-youtube" class="heading"><a href="#case-studies-netflix-and-youtube" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Case Studies: Netflix and YouTube" tabindex="-1"></a><span>Case Studies: Netflix and YouTube</span></h3>
<p>Netflix å’Œ YouTube éƒ½æ˜¯å¤§å‹ video streaming æœåŠ¡å•†<span class="mojikumi-line-end">ï¼Œ</span>ä½†å®ƒä»¬çš„æ¶æ„æœ‰å¾ˆå¤§ä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºå®ƒä»¬è§†é¢‘ç±»å‹çš„ä¸åŒ<span class="mojikumi-line-start">ï¼ˆ</span>å‰§ vs UGC<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="netflix" class="heading"><a href="#netflix" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Netflix" tabindex="-1"></a><span>Netflix</span></h4>
<p>Netflix ä½¿ç”¨ Amazon cloud è¿è¡Œ Web server ä»¥åŠè§†é¢‘å¤„ç†<span class="mojikumi-line-end">ï¼Œ</span>è€Œä½¿ç”¨ç§æœ‰çš„ CDN åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ã€‚</span></p>
<p>Netflix çš„ç§æœ‰ CDN cluster å®‰è£…åœ¨ ISP å’Œ IXP ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ IXP çš„ cluster å¾€å¾€å®¹é‡è¾ƒå¤§<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥è£…ä¸‹æ•´ä¸ª Netflix çš„æ‰€æœ‰è§†é¢‘çš„å„ä¸ªç‰ˆæœ¬<span class="mojikumi-line-end">ï¼Œ</span>è€Œ ISP çš„ cluster å¾€å¾€å®¹é‡è¾ƒå°<span class="mojikumi-line-end">ï¼Œ</span>åªå­˜æ”¾æœ€çƒ­é—¨çš„è§†é¢‘<span class="mojikumi-line-end">ã€‚</span></p>
<p>Netflix ä¸ä½¿ç”¨ pull-caching<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯åœ¨æ¯å¤©çš„ä½å³°æœŸé‡‡ç”¨ push è¿›è¡Œæ›´æ–°<span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸º Netflix çš„ç§æœ‰ CDN åªè´Ÿè´£åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ï¼Œ</span>å®ƒä¸éœ€è¦ä½¿ç”¨ DNS redirect<span class="mojikumi-line-end">ï¼Œ</span>ç›´æ¥ç”± Web server å‘Šè¯‰ client IP åœ°å€å³å¯<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="youtube" class="heading"><a href="#youtube" class="heading-anchor" aria-label="ç« èŠ‚ï¼š YouTube" tabindex="-1"></a><span>YouTube</span></h4>
<a id="google-çš„-network-infrastructure" name="google-çš„-network-infrastructure" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h5 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-pencil text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Note: </span><span data-v-a2ab257f>Google çš„ network infrastructure</span></h5><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>Google éƒ¨ç½²äº†ä¸€ä¸ªåºå¤§çš„ private network and CDN infrastructure<span class="mojikumi-line-end">ï¼Œ</span>åŒ…å«ä»¥ä¸‹ä¸‰çº§ server clusters<span class="mojikumi-line-end">ï¼š</span></p><ol>
<li>çº¦ 20 ä¸ª<span class="mojikumi-line-start">â€œ</span>mega data center<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>åˆ†å¸ƒåœ¨åŒ—ç¾<span class="mojikumi-line-end">ã€</span>æ¬§æ´²å’Œäºšæ´²<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cluster æœ‰æ•°åä¸‡æœåŠ¡å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥ serve dynamic content<span class="mojikumi-line-end">ã€‚</span></li>
<li>çº¦ 90 ä¸ªéƒ¨ç½²åœ¨ IXP çš„ cluster<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cluster æœ‰æ•°ç™¾ä¸ªæœåŠ¡å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥ serve åŒ…æ‹¬ YouTube è§†é¢‘åœ¨å†…çš„ static content<span class="mojikumi-line-end">ã€‚</span></li>
<li>æ•°ç™¾ä¸ªéƒ¨ç½²åœ¨ access ISP çš„ cluster<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cluster æœ‰æ•°åä¸ªæœåŠ¡å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥è¿›è¡Œ TCP splitting ä»¥åŠ server static content<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ç½‘é¡µä¸Šçš„é™æ€èµ„æº<span class="mojikumi-line-end">ã€‚</span></li>
</ol><p>åœ¨è®¿é—® Google çš„æœåŠ¡æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒå†…å®¹å¾€å¾€ä¼šæ¥è‡ªä¸åŒå±‚çº§çš„ cluster<span class="mojikumi-line-end">ã€‚</span></p><p>è¿™äº› cluster é€šè¿‡ Google çš„ private network è¿æ¥<span class="mojikumi-line-end">ï¼Œ</span>ä½¿å¾—å®ƒä»¬ä¹‹é—´çš„å¾ˆå¤šé€šä¿¡éƒ½ä¸ä¾èµ–äº public Internet<span class="mojikumi-line-end">ï¼Œ</span>ä¸ç”¨æˆ·çš„é€šä¿¡ä¹Ÿå¾€å¾€åªæ¶‰åŠåˆ° access ISP è¿™ä¸€å±‚<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<p>YouTube ä½¿ç”¨ Google çš„ç§æœ‰ CDN åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”ä½¿ç”¨ pull-caching å’Œ DNS redirect<span class="mojikumi-line-end">ã€‚</span>åœ¨é€‰æ‹©èŠ‚ç‚¹æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šç»¼åˆè€ƒè™‘ client åˆ° cluster çš„ RTT ä»¥åŠè´Ÿè½½å‡è¡¡<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ç”¨æˆ·ä¸Šä¼ è§†é¢‘æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šåœ¨ Google çš„ data center è¿›è¡Œå¤„ç†<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="socket-programming-creating-network-applications" class="heading"><a href="#socket-programming-creating-network-applications" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Socket Programming: Creating Network Applications" tabindex="-1"></a><span>Socket Programming: Creating Network Applications</span></h2>
<p>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>ç¼–å†™ network application éœ€è¦ç¼–å†™ client program å’Œ server program<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="socket-programming-with-udp" class="heading"><a href="#socket-programming-with-udp" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Socket Programming with UDP" tabindex="-1"></a><span>Socket Programming with UDP</span></h3>
<p>ä½¿ç”¨ UDP æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æ¯æ¬¡å‘é€ datagram<sup><a href="#user-content-fn-datagram" id="user-content-fnref-datagram" data-footnote-ref aria-describedby="footnote-label">6</a></sup> éƒ½éœ€è¦æŒ‡å®š address<span class="mojikumi-line-start">ï¼ˆ</span>IP åœ°å€ &#x26; ç«¯å£<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ¥æ”¶ datagram æ—¶ä¹Ÿä¼šæ”¶åˆ°å¯¹æ–¹çš„ address<span class="mojikumi-line-end">ã€‚</span></p>
<p><s>ä¸€çœ‹å°±æ‡‚ä½†ä¹¦ä¸Šè§£é‡Šäº†åŠå¤©çš„</s> ä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-11"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-11--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverName </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">hostname</span><span style="color: #D9F5DD">&#39;</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">clientSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_DGRAM</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># AF_INET è¡¨ç¤º IPv4 åœ°å€ï¼ŒSOCK_DGRAM è¡¨ç¤º UDP</span></span>
<span><span style="color: #D6DEEB">message </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">Input lowercase sentence:</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">sendto</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">message.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">()</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> (serverName, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">modifiedMessage, serverAddress </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> clientSocket.</span><span style="color: #B2CCD6">recvfrom</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">2048</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># 2048 æ˜¯ buffer size</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">modifiedMessage.</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">close</span><span style="color: #D6DEEB">()</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverName </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">hostname</span><span style="color: #111111">&#39;</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">clientSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_DGRAM</span><span style="color: #403F53">) </span><span style="color: #989FB1"># AF_INET è¡¨ç¤º IPv4 åœ°å€ï¼ŒSOCK_DGRAM è¡¨ç¤º UDP</span></span>
<span><span style="color: #403F53">message </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">input</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">Input lowercase sentence:</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">sendto</span><span style="color: #403F53">(</span><span style="color: #4876D6">message.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">()</span><span style="color: #111111">,</span><span style="color: #4876D6"> (serverName, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">modifiedMessage, serverAddress </span><span style="color: #994CC3">=</span><span style="color: #403F53"> clientSocket.</span><span style="color: #0C969B">recvfrom</span><span style="color: #403F53">(</span><span style="color: #AA0982">2048</span><span style="color: #403F53">) </span><span style="color: #989FB1"># 2048 æ˜¯ buffer size</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #4876D6">modifiedMessage.</span><span style="color: #0C969B">decode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">close</span><span style="color: #403F53">()</span></span></code></pre></div></section>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-12"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-12--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">serverSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_DGRAM</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">serverSocket.</span><span style="color: #B2CCD6">bind</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">(</span><span style="color: #D9F5DD">&#39;&#39;</span><span style="color: #82AAFF">, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">The server is ready to receive</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C792EA">while</span><span style="color: #D6DEEB"> </span><span style="color: #FF5874">True</span><span style="color: #D6DEEB">:</span></span>
<span><span style="color: #D6DEEB">    message, clientAddress </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> serverSocket.</span><span style="color: #B2CCD6">recvfrom</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">2048</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">    modifiedMessage </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> message.</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">().</span><span style="color: #B2CCD6">upper</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    serverSocket.</span><span style="color: #B2CCD6">sendto</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">modifiedMessage.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">()</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> clientAddress</span><span style="color: #D6DEEB">)</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">serverSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_DGRAM</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">serverSocket.</span><span style="color: #0C969B">bind</span><span style="color: #403F53">(</span><span style="color: #4876D6">(</span><span style="color: #111111">&#39;&#39;</span><span style="color: #4876D6">, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">The server is ready to receive</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #994CC3">while</span><span style="color: #403F53"> </span><span style="color: #BC5454">True</span><span style="color: #403F53">:</span></span>
<span><span style="color: #403F53">    message, clientAddress </span><span style="color: #994CC3">=</span><span style="color: #403F53"> serverSocket.</span><span style="color: #0C969B">recvfrom</span><span style="color: #403F53">(</span><span style="color: #AA0982">2048</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">    modifiedMessage </span><span style="color: #994CC3">=</span><span style="color: #403F53"> message.</span><span style="color: #0C969B">decode</span><span style="color: #403F53">().</span><span style="color: #0C969B">upper</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    serverSocket.</span><span style="color: #0C969B">sendto</span><span style="color: #403F53">(</span><span style="color: #4876D6">modifiedMessage.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">()</span><span style="color: #111111">,</span><span style="color: #4876D6"> clientAddress</span><span style="color: #403F53">)</span></span></code></pre></div></section>
<h3 id="socket-programming-with-tcp" class="heading"><a href="#socket-programming-with-tcp" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Socket Programming with TCP" tabindex="-1"></a><span>Socket Programming with TCP</span></h3>
<p>TCP æ˜¯ä¸€ä¸ª connection-oriented protocol<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ server ä¸Šåˆ†ä¸º welcoming socket å’Œ connection socket<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å¼€å§‹éœ€è¦é€šè¿‡ welcoming socket å»ºç«‹ connection å¹¶å¾—åˆ° connection socket<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨å»ºç«‹äº† connection ä¹‹åå°±æ— éœ€å†æŒ‡å®šå¯¹æ–¹çš„ address<span class="mojikumi-line-end">ã€‚</span></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>ä¸‹é¢çš„ä»£ç é™¤äº†æ¢æˆ TCP è¿˜å¯¹ä¸Šé¢çš„ UDP ä»£ç æœ‰è‹¥å¹²æ²¡æœ‰æœ¬è´¨åŒºåˆ«çš„ä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>è¦æ˜¯æˆ‘å†™è‚¯å®šä¼šé¿å…<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ˜¯ä»ä¹¦ä¸Šå¤åˆ¶å°±æ‡’å¾—æ”¹äº†<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-13"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-13--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverName </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">servername</span><span style="color: #D9F5DD">&#39;</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">clientSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_STREAM</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># SOCK_STREAM æ˜¯ TCP</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">connect</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">(serverName, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">sentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">Input lowercase sentence:</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">send</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">sentence.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">modifiedSentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> clientSocket.</span><span style="color: #B2CCD6">recv</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1024</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">From Server: </span><span style="color: #D9F5DD">&#39;</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> modifiedSentence.</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">close</span><span style="color: #D6DEEB">()</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverName </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">servername</span><span style="color: #111111">&#39;</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">clientSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_STREAM</span><span style="color: #403F53">) </span><span style="color: #989FB1"># SOCK_STREAM æ˜¯ TCP</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">connect</span><span style="color: #403F53">(</span><span style="color: #4876D6">(serverName, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">sentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">input</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">Input lowercase sentence:</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">send</span><span style="color: #403F53">(</span><span style="color: #4876D6">sentence.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">modifiedSentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> clientSocket.</span><span style="color: #0C969B">recv</span><span style="color: #403F53">(</span><span style="color: #AA0982">1024</span><span style="color: #403F53">)</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">From Server: </span><span style="color: #111111">&#39;</span><span style="color: #111111">,</span><span style="color: #4876D6"> modifiedSentence.</span><span style="color: #0C969B">decode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">close</span><span style="color: #403F53">()</span></span></code></pre></div></section>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-14"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-14--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">serverSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_STREAM</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">serverSocket.</span><span style="color: #B2CCD6">bind</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">(</span><span style="color: #D9F5DD">&#39;&#39;</span><span style="color: #82AAFF">, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">serverSocket.</span><span style="color: #B2CCD6">listen</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># 1 æ˜¯ connection queue çš„æœ€å¤§é•¿åº¦</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">The server is ready to receive</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C792EA">while</span><span style="color: #D6DEEB"> </span><span style="color: #FF5874">True</span><span style="color: #D6DEEB">:</span></span>
<span><span style="color: #D6DEEB">    connectionSocket, addr </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> serverSocket.</span><span style="color: #B2CCD6">accept</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    sentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> connectionSocket.</span><span style="color: #B2CCD6">recv</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1024</span><span style="color: #D6DEEB">).</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    capitalizedSentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> sentence.</span><span style="color: #B2CCD6">upper</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    connectionSocket.</span><span style="color: #B2CCD6">send</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">capitalizedSentence.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">    connectionSocket.</span><span style="color: #B2CCD6">close</span><span style="color: #D6DEEB">()</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">serverSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_STREAM</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">serverSocket.</span><span style="color: #0C969B">bind</span><span style="color: #403F53">(</span><span style="color: #4876D6">(</span><span style="color: #111111">&#39;&#39;</span><span style="color: #4876D6">, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">serverSocket.</span><span style="color: #0C969B">listen</span><span style="color: #403F53">(</span><span style="color: #AA0982">1</span><span style="color: #403F53">) </span><span style="color: #989FB1"># 1 æ˜¯ connection queue çš„æœ€å¤§é•¿åº¦</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">The server is ready to receive</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #994CC3">while</span><span style="color: #403F53"> </span><span style="color: #BC5454">True</span><span style="color: #403F53">:</span></span>
<span><span style="color: #403F53">    connectionSocket, addr </span><span style="color: #994CC3">=</span><span style="color: #403F53"> serverSocket.</span><span style="color: #0C969B">accept</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    sentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> connectionSocket.</span><span style="color: #0C969B">recv</span><span style="color: #403F53">(</span><span style="color: #AA0982">1024</span><span style="color: #403F53">).</span><span style="color: #0C969B">decode</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    capitalizedSentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> sentence.</span><span style="color: #0C969B">upper</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    connectionSocket.</span><span style="color: #0C969B">send</span><span style="color: #403F53">(</span><span style="color: #4876D6">capitalizedSentence.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">    connectionSocket.</span><span style="color: #0C969B">close</span><span style="color: #403F53">()</span></span></code></pre></div></section>
<section data-footnotes class="footnotes"><h2 class="sr-only" id="footnote-label">Footnotes</h2>
<ol>
<li id="user-content-fn-fig2.8">
<p>p103, Figure 2.8: General format of an HTTP request message <a href="#user-content-fnref-fig2.8" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-fig2.9">
<p>p104, Figure 2.9: General format of an HTTP response message <a href="#user-content-fnref-fig2.9" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-smtp-example">
<p><a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol#SMTP_transport_example">SMTP transport example - Simple Mail Transfer Protocol - Wikipedia</a> <a href="#user-content-fnref-smtp-example" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-fig-2.21">
<p>p133, Figure 2.21: DNS message format <a href="#user-content-fnref-fig-2.21" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-seed-choking">
<p><a href="https://www.libtorrent.org/reference-Settings.html#seed_choking_algorithm_t">seed_choking_algorithm - libtorrent</a> <a href="#user-content-fnref-seed-choking" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-datagram">
<p>åœ¨ä¹¦ä¸­ 1.5 èŠ‚<span class="mojikumi-line-end">ï¼Œ</span>transport-layer packet è¢«ç§°ä½œ <span class="mojikumi">â€œ</span>segment<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>network-layer packet è¢«ç§°ä½œ <span class="mojikumi">â€œ</span>datagram<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>ä½†å®é™…ä¸Š UDP çš„ <span class="mojikumi">â€œ</span>D<span class="mojikumi">â€</span> å°±æ˜¯ <span class="mojikumi">â€œ</span>datagram<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>è€Œ TCP çš„ packet æ‰å« <span class="mojikumi">â€œ</span>segment<span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span>ref: <a href="https://stackoverflow.com/questions/11636405/definition-of-network-units-fragment-segment-packet-frame-datagram">networking - Definition of Network Units: Fragment, Segment, Packet, Frame, Datagram - Stack Overflow</a> <a href="#user-content-fnref-datagram" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/cnatda">cnatda</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[DDPP ç¬¬äº”ç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2023/04/ddpp-5</link>
            <guid>https://ouuan.moe/post/2023/04/ddpp-5</guid>
            <pubDate>Sat, 29 Apr 2023 16:24:36 GMT</pubDate>
            <description><![CDATA[<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬äº”ç«  <span class="mojikumi">â€œ</span>Verilog Hardware Description Language<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¹Ÿå°±æ˜¯åˆå­¦ (System)Verilog çš„ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬äº”ç«  <span class="mojikumi">â€œ</span>Verilog Hardware Description Language<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¹Ÿå°±æ˜¯åˆå­¦ (System)Verilog çš„ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>

<p>æœ¬æ¥æƒ³å¯’å‡å­¦<span class="mojikumi-line-end">ï¼Œ</span>ç»“æœè¿˜æ˜¯æ‹–åˆ°äº†æ•°å­—é€»è¾‘å®éªŒå¼€å§‹ç”¨ FPGA<span class="mojikumi-line-end">ï¼Œ</span>åªä¸è¿‡æ‰‹ä¸Šæœ‰æ¨¡å—äº†å†æ¥å­¦ä¹ŸæŒºå¥½çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>è™½ç„¶ä»åˆ›å»ºåˆ°å‘å¸ƒæ‹–äº†å¾ˆä¹…<span class="mojikumi-line-end">ï¼Œ</span>ä½†å…¶å®å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯æ–°å»ºæ–‡ä»¶åä¸€å‘¨å†…å†™çš„<span class="mojikumi-line-end">ï¼Œ</span>åªæ˜¯åæ¥æ„Ÿè§‰å­¦çš„ä¸œè¥¿å·²ç»å·®ä¸å¤šèƒ½åº”ä»˜ä¸Šè¯¾äº†<span class="mojikumi-line-end">ï¼Œ</span>å°±ä¸€ç›´å’•ç€æ²¡æŠŠæœ€åä¸€ç‚¹å­¦å®Œ &#x26; å†™å®Œ<span class="mojikumi-line-start">ï¼ˆ</span></p>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h2 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-info-circle-outline text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Info: </span><span data-v-a2ab257f>SystemVerilog</span></h2><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>DDPP5 ä¸­è®²çš„æ˜¯ Verilog è€Œä¸æ˜¯ SystemVerilog<span class="mojikumi-line-end">ï¼Œ</span>æˆ‘æ ¹æ®åœ¨å…¶ä»–åœ°æ–¹æ‰¾åˆ°çš„ä¸€äº›èµ„æ–™è¡¥å……äº†å°‘é‡ SystemVerilog çš„å†…å®¹<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<h2 id="neovim-é…ç½®" class="heading"><a href="#neovim-é…ç½®" class="heading-anchor" aria-label="ç« èŠ‚ï¼š neovim é…ç½®" tabindex="-1"></a><span>neovim é…ç½®</span></h2>
<p>ç”¨çš„æ˜¯è€å¸ˆæ¨èçš„ Vivado 2019.2 WebPack<span class="mojikumi-line-end">ï¼Œ</span>è€Œå®ƒè‡ªå¸¦çš„æ–‡æœ¬ç¼–è¾‘å™¨å¤šå°‘æœ‰ç‚¹æ‹‰èƒ¯<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ç ”ç©¶äº†ä¸€ä¸‹é… neovim<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ€åé€‰æ‹©çš„æ˜¯ <a href="https://github.com/vivekmalneedi/veridian">veridian</a> + é€šè¿‡ <a href="https://github.com/jose-elias-alvarez/null-ls.nvim">null-ls</a> ä½¿ç”¨ Vivado çš„ <code>xvlog</code><span class="mojikumi-line-end">ã€‚</span>ä¸€å¼€å§‹æˆ‘è¿˜çœ‹ veridian æ²¡åœ¨ç»´æŠ¤è€Œä¸” star å°‘<span class="mojikumi-line-start">ï¼ˆ</span><s>ä½†å®ƒå¥½æ­¹æœ€åæ›´æ–°æ˜¯åœ¨ 2021<span class="mojikumi-line-end">ï¼Œ</span>Vivado è¿˜åœ¨ç”¨ 2019</s><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å…ˆè¯•äº†å¦å¤–å‡ ä¸ª<span class="mojikumi-line-end">ï¼Œ</span>åæ¥å‘ç°<span class="mojikumi-line-end">ï¼Œ</span>ä¸è¯´åˆ«çš„<span class="mojikumi-line-end">ï¼Œ</span>åªæœ‰ veridian æ”¯æŒ hover<span class="mojikumi-line-end">ã€‚</span>åŒæ—¶ä½¿ç”¨ <code>xvlog</code> æ˜¯è§‰å¾—è¿˜æ˜¯ Vivado è‡ªå¸¦çš„ lint æ¯”è¾ƒé è°±<span class="mojikumi-line-end">ã€‚</span></p>
<p>veridian å°±æ˜¯ç”¨ <a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md#veridian">lspconfig</a><span class="mojikumi-line-end">ï¼Œ</span>è®°å¾—åŒæ—¶è£… <a href="https://github.com/chipsalliance/verible">verible</a> æ‰èƒ½ä½¿ç”¨æŸäº› feature<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ lspconfig é‡Œåªéœ€å¯ç”¨ veridian<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>å¯ä»¥æŠŠ <code>root_dir</code> è®¾ä¸º <code>util<wbr>.<wbr>root_pattern<wbr>('*.<wbr>xpr<wbr>', '.<wbr>git<wbr>')</code> æ¥æ£€æµ‹ Vivado é¡¹ç›®çš„æ ¹ç›®å½•<span class="mojikumi-line-end">ã€‚</span></p>
<p>null-ls çš„é…ç½®å¦‚ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸º <code>xvlog</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ªä¸èƒ½ç¦ç”¨æ–‡ä»¶è¾“å‡ºçš„ simulator<span class="mojikumi-line-end">ï¼Œ</span>é‡‡å–äº†ä¸€äº›æªæ–½æ¥é˜²æ­¢å®ƒåˆ°å¤„å€’åƒåœ¾<span class="mojikumi-line-end">ã€‚</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="lua ä»£ç å—" data-v-ad49d235>lua</h3><ile-root id="ile-15"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-15--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">local</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">null_ls</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">require</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">null-ls</span><span style="color: #D9F5DD">&quot;</span></span>
<span><span style="color: #C792EA">local</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">utils</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">require</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">null-ls.utils</span><span style="color: #D9F5DD">&quot;</span></span>
<span><span style="color: #C792EA">local</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">helpers</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">require</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">null-ls.helpers</span><span style="color: #D9F5DD">&quot;</span></span>
<span></span>
<span><span style="color: #C792EA">local</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">xvlog_sv</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">name</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">xvlog</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">method</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">null_ls</span><span style="color: #D6DEEB">.methods.DIAGNOSTICS,</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">filetypes</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> { </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">systemverilog</span><span style="color: #D9F5DD">&quot; </span><span style="color: #D6DEEB">},</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">generator</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">null_ls</span><span style="color: #D6DEEB">.</span><span style="color: #C5E478">generator</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">command</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">bwrap</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #637777">-- only permit writing in /tmp</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">args</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">--ro-bind</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">--bind</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/tmp/xvlog</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/tmp/xvlog</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">--dev</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/dev</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">/home/ouuan/Xilinx/Vivado/2019.2/bin/xvlog</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">--sv</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">$FILENAME</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">    },</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">cwd</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">function</span><span style="color: #D9F5DD">(</span><span style="color: #7FDBCA">params</span><span style="color: #D9F5DD">)</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #637777">-- output in /tmp</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #C792EA">local</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">dir</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">/tmp/xvlog/</span><span style="color: #D9F5DD">&#39; </span><span style="color: #7FDBCA">..</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">params</span><span style="color: #D6DEEB">.bufnr</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #C5E478">vim</span><span style="color: #D6DEEB">.fn.</span><span style="color: #C5E478">mkdir</span><span style="color: #D6DEEB">(</span><span style="color: #C5E478">dir</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">p</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #C792EA">return</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">dir</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">end</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">to_temp_file</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">true</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">format</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">line</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">check_exit_code</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> { </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB"> },</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">on_output</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">helpers</span><span style="color: #D6DEEB">.diagnostics.</span><span style="color: #C5E478">from_patterns</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">      {</span></span>
<span><span style="color: #D6DEEB">        </span><span style="color: #C5E478">pattern</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">(.+): %[.+%] (.+) %[.+:(%d+)%]</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">        </span><span style="color: #C5E478">groups</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> { </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">severity</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">message</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">row</span><span style="color: #D9F5DD">&quot; </span><span style="color: #D6DEEB">},</span></span>
<span><span style="color: #D6DEEB">        </span><span style="color: #C5E478">overrides</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">          </span><span style="color: #C5E478">severities</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">            [</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">ERROR</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">] </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">            [</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">WARNING</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">] </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">2</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">            [</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">INFO</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">] </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">3</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">          },</span></span>
<span><span style="color: #D6DEEB">        },</span></span>
<span><span style="color: #D6DEEB">      },</span></span>
<span><span style="color: #D6DEEB">    },</span></span>
<span><span style="color: #D6DEEB">  },</span></span>
<span><span style="color: #D6DEEB">}</span></span>
<span></span>
<span><span style="color: #C5E478">null_ls</span><span style="color: #D6DEEB">.</span><span style="color: #C5E478">setup</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">sources</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> {</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">xvlog_sv</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #D6DEEB">  },</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">root_dir</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">utils</span><span style="color: #D6DEEB">.</span><span style="color: #C5E478">root_pattern</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">*.xpr</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">.git</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">}</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">local</span><span style="color: #403F53"> </span><span style="color: #4876D6">null_ls</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">require</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">null-ls</span><span style="color: #111111">&quot;</span></span>
<span><span style="color: #994CC3">local</span><span style="color: #403F53"> </span><span style="color: #4876D6">utils</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">require</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">null-ls.utils</span><span style="color: #111111">&quot;</span></span>
<span><span style="color: #994CC3">local</span><span style="color: #403F53"> </span><span style="color: #4876D6">helpers</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">require</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">null-ls.helpers</span><span style="color: #111111">&quot;</span></span>
<span></span>
<span><span style="color: #994CC3">local</span><span style="color: #403F53"> </span><span style="color: #4876D6">xvlog_sv</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">name</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">xvlog</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">method</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">null_ls</span><span style="color: #403F53">.methods.DIAGNOSTICS,</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">filetypes</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> { </span><span style="color: #111111">&quot;</span><span style="color: #C96765">systemverilog</span><span style="color: #111111">&quot; </span><span style="color: #403F53">},</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">generator</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">null_ls</span><span style="color: #403F53">.</span><span style="color: #4876D6">generator</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">command</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">bwrap</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #989FB1">-- only permit writing in /tmp</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">args</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">      </span><span style="color: #111111">&quot;</span><span style="color: #C96765">--ro-bind</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">/</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">/</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">      </span><span style="color: #111111">&quot;</span><span style="color: #C96765">--bind</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">/tmp/xvlog</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">/tmp/xvlog</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">      </span><span style="color: #111111">&quot;</span><span style="color: #C96765">--dev</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">/dev</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">      </span><span style="color: #111111">&quot;</span><span style="color: #C96765">/home/ouuan/Xilinx/Vivado/2019.2/bin/xvlog</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">      </span><span style="color: #111111">&quot;</span><span style="color: #C96765">--sv</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">$FILENAME</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">    },</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">cwd</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #994CC3">function</span><span style="color: #111111">(</span><span style="color: #0C969B">params</span><span style="color: #111111">)</span></span>
<span><span style="color: #403F53">      </span><span style="color: #989FB1">-- output in /tmp</span></span>
<span><span style="color: #403F53">      </span><span style="color: #994CC3">local</span><span style="color: #403F53"> </span><span style="color: #4876D6">dir</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">/tmp/xvlog/</span><span style="color: #111111">&#39; </span><span style="color: #0C969B">..</span><span style="color: #403F53"> </span><span style="color: #4876D6">params</span><span style="color: #403F53">.bufnr</span></span>
<span><span style="color: #403F53">      </span><span style="color: #4876D6">vim</span><span style="color: #403F53">.fn.</span><span style="color: #4876D6">mkdir</span><span style="color: #403F53">(</span><span style="color: #4876D6">dir</span><span style="color: #403F53">, </span><span style="color: #111111">&#39;</span><span style="color: #C96765">p</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">      </span><span style="color: #994CC3">return</span><span style="color: #403F53"> </span><span style="color: #4876D6">dir</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">end</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">to_temp_file</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">true</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">format</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">line</span><span style="color: #111111">&quot;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">check_exit_code</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> { </span><span style="color: #AA0982">0</span><span style="color: #403F53">, </span><span style="color: #AA0982">1</span><span style="color: #403F53"> },</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">on_output</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">helpers</span><span style="color: #403F53">.diagnostics.</span><span style="color: #4876D6">from_patterns</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">      {</span></span>
<span><span style="color: #403F53">        </span><span style="color: #4876D6">pattern</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">(.+): %[.+%] (.+) %[.+:(%d+)%]</span><span style="color: #111111">&#39;</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">        </span><span style="color: #4876D6">groups</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> { </span><span style="color: #111111">&quot;</span><span style="color: #C96765">severity</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">message</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">row</span><span style="color: #111111">&quot; </span><span style="color: #403F53">},</span></span>
<span><span style="color: #403F53">        </span><span style="color: #4876D6">overrides</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">          </span><span style="color: #4876D6">severities</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">            [</span><span style="color: #111111">&quot;</span><span style="color: #C96765">ERROR</span><span style="color: #111111">&quot;</span><span style="color: #403F53">] </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">            [</span><span style="color: #111111">&quot;</span><span style="color: #C96765">WARNING</span><span style="color: #111111">&quot;</span><span style="color: #403F53">] </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">2</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">            [</span><span style="color: #111111">&quot;</span><span style="color: #C96765">INFO</span><span style="color: #111111">&quot;</span><span style="color: #403F53">] </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">3</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">          },</span></span>
<span><span style="color: #403F53">        },</span></span>
<span><span style="color: #403F53">      },</span></span>
<span><span style="color: #403F53">    },</span></span>
<span><span style="color: #403F53">  },</span></span>
<span><span style="color: #403F53">}</span></span>
<span></span>
<span><span style="color: #4876D6">null_ls</span><span style="color: #403F53">.</span><span style="color: #4876D6">setup</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">sources</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> {</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">xvlog_sv</span><span style="color: #403F53">,</span></span>
<span><span style="color: #403F53">  },</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">root_dir</span><span style="color: #403F53"> </span><span style="color: #0C969B">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">utils</span><span style="color: #403F53">.</span><span style="color: #4876D6">root_pattern</span><span style="color: #403F53">(</span><span style="color: #111111">&quot;</span><span style="color: #C96765">*.xpr</span><span style="color: #111111">&quot;</span><span style="color: #403F53">, </span><span style="color: #111111">&quot;</span><span style="color: #C96765">.git</span><span style="color: #111111">&quot;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">}</span></span></code></pre></div></section>
<p>å¦å¤–å¯ä»¥ç”¨ <a href="https://github.com/amal-khailtash/vim-xdc-syntax">vim-xdc-syntax</a> æ·»åŠ ç®¡è„šçº¦æŸæ–‡ä»¶çš„é«˜äº®<span class="mojikumi-line-end">ã€‚</span></p>
<p>Vivado çš„ custom text editor ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬<span class="mojikumi-line-end">ã€‚</span>æ˜¯é’ˆå¯¹ <a href="https://i3wm.org/">i3</a> é…çš„<span class="mojikumi-line-end">ï¼Œ</span>ç»™ konsole è®¾äº† name å‚æ•°<span class="mojikumi-line-end">ï¼Œ</span>i3 è®¾æˆ <code>assign<wbr> [<wbr>instance<wbr>="<wbr>konsole<wbr>"]</code><span class="mojikumi-line-start">ï¼ˆ</span><code>instance</code> è€Œé <code>class</code><span class="mojikumi-line-end">ï¼‰</span>å°±å¯ä»¥ä¸æŠŠè¿™ä¸ª konsole æŒªåˆ°å…¶ä»– konsole æ‰€åœ¨çš„ workspace<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”å¯ä»¥åœ¨æ‰“å¼€æ–°æ–‡ä»¶æ—¶ focus è¿‡å»<span class="mojikumi-line-end">ã€‚</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="bash ä»£ç å—" data-v-ad49d235>bash</h3><ile-root id="ile-16"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-16--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #637777">#!/bin/bash</span></span>
<span></span>
<span><span style="color: #637777"># vivado-nvim.sh &quot;[file name]&quot; [line number]</span></span>
<span></span>
<span><span style="color: #C5E478">set</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">-euo</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">pipefail</span></span>
<span></span>
<span><span style="color: #C5E478">unset</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">LD_LIBRARY_PATH</span></span>
<span></span>
<span><span style="color: #C5E478">NVIM_LISTEN_ADDRESS</span><span style="color: #C792EA">=</span><span style="color: #ECC48D">/tmp/vivado-nvim.pipe</span></span>
<span></span>
<span><span style="color: #C792EA">if</span><span style="color: #D6DEEB"> [[ </span><span style="color: #C792EA">!</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">-e</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">$NVIM_LISTEN_ADDRESS</span><span style="color: #D6DEEB"> ]]; </span><span style="color: #C792EA">then</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">exec</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">konsole</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">--name</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">vivado-nvim</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">-e</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">nvim</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">--listen</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">$NVIM_LISTEN_ADDRESS</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #D7DBE0">$1</span><span style="color: #D9F5DD">&quot;</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">+</span><span style="color: #D7DBE0">$2</span><span style="color: #D9F5DD">&quot;</span></span>
<span><span style="color: #C792EA">else</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">nvim</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">--server</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">$NVIM_LISTEN_ADDRESS</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">--remote</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #D7DBE0">$1</span><span style="color: #D9F5DD">&quot;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">nvim</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">--server</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">$NVIM_LISTEN_ADDRESS</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">--remote-send</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">:</span><span style="color: #D7DBE0">$2</span><span style="color: #ECC48D">&lt;CR&gt;</span><span style="color: #D9F5DD">&quot;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">i3-msg</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">[instance=&quot;vivado-nvim&quot;] focus</span><span style="color: #D9F5DD">&#39;</span></span>
<span><span style="color: #C792EA">fi</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #989FB1">#!/bin/bash</span></span>
<span></span>
<span><span style="color: #989FB1"># vivado-nvim.sh &quot;[file name]&quot; [line number]</span></span>
<span></span>
<span><span style="color: #4876D6">set</span><span style="color: #403F53"> </span><span style="color: #4876D6">-euo</span><span style="color: #403F53"> </span><span style="color: #4876D6">pipefail</span></span>
<span></span>
<span><span style="color: #4876D6">unset</span><span style="color: #403F53"> </span><span style="color: #4876D6">LD_LIBRARY_PATH</span></span>
<span></span>
<span><span style="color: #4876D6">NVIM_LISTEN_ADDRESS</span><span style="color: #994CC3">=</span><span style="color: #4876D6">/tmp/vivado-nvim.pipe</span></span>
<span></span>
<span><span style="color: #994CC3">if</span><span style="color: #403F53"> [[ </span><span style="color: #994CC3">!</span><span style="color: #403F53"> </span><span style="color: #994CC3">-e</span><span style="color: #403F53"> </span><span style="color: #4876D6">$NVIM_LISTEN_ADDRESS</span><span style="color: #403F53"> ]]; </span><span style="color: #994CC3">then</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">exec</span><span style="color: #403F53"> </span><span style="color: #4876D6">konsole</span><span style="color: #403F53"> </span><span style="color: #4876D6">--name</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">vivado-nvim</span><span style="color: #111111">&quot;</span><span style="color: #403F53"> </span><span style="color: #4876D6">-e</span><span style="color: #403F53"> </span><span style="color: #4876D6">nvim</span><span style="color: #403F53"> </span><span style="color: #4876D6">--listen</span><span style="color: #403F53"> </span><span style="color: #4876D6">$NVIM_LISTEN_ADDRESS</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #403F53">$1</span><span style="color: #111111">&quot;</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">+</span><span style="color: #403F53">$2</span><span style="color: #111111">&quot;</span></span>
<span><span style="color: #994CC3">else</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">nvim</span><span style="color: #403F53"> </span><span style="color: #4876D6">--server</span><span style="color: #403F53"> </span><span style="color: #4876D6">$NVIM_LISTEN_ADDRESS</span><span style="color: #403F53"> </span><span style="color: #4876D6">--remote</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #403F53">$1</span><span style="color: #111111">&quot;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">nvim</span><span style="color: #403F53"> </span><span style="color: #4876D6">--server</span><span style="color: #403F53"> </span><span style="color: #4876D6">$NVIM_LISTEN_ADDRESS</span><span style="color: #403F53"> </span><span style="color: #4876D6">--remote-send</span><span style="color: #403F53"> </span><span style="color: #111111">&quot;</span><span style="color: #C96765">:</span><span style="color: #403F53">$2</span><span style="color: #C96765">&lt;CR&gt;</span><span style="color: #111111">&quot;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">i3-msg</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">[instance=&quot;vivado-nvim&quot;] focus</span><span style="color: #111111">&#39;</span></span>
<span><span style="color: #994CC3">fi</span></span></code></pre></div></section>
<h2 id="åŸºç¡€è¯­æ³•" class="heading"><a href="#åŸºç¡€è¯­æ³•" class="heading-anchor" aria-label="ç« èŠ‚ï¼š åŸºç¡€è¯­æ³•" tabindex="-1"></a><span>åŸºç¡€è¯­æ³•</span></h2>
<h3 id="module" class="heading"><a href="#module" class="heading-anchor" aria-label="ç« èŠ‚ï¼š module" tabindex="-1"></a><span>module</span></h3>
<p>Verilog ä»¥ module ä¸ºåŸºæœ¬å•ä½<span class="mojikumi-line-start">ï¼ˆ</span>å’Œå‰ç«¯çš„ component æœ‰ç‚¹ç±»ä¼¼<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-17"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-17--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> inhibit (</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  in,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  invin,</span></span>
<span><span style="color: #C5E478">    output</span><span style="color: #D6DEEB"> out</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">assign</span><span style="color: #D6DEEB"> out </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> in </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">~</span><span style="color: #D6DEEB">invin;</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> inhibit (</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  in,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  invin,</span></span>
<span><span style="color: #4876D6">    output</span><span style="color: #403F53"> out</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">assign</span><span style="color: #403F53"> out </span><span style="color: #994CC3">=</span><span style="color: #403F53"> in </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> </span><span style="color: #994CC3">~</span><span style="color: #403F53">invin;</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>convention æ˜¯æ¯ä¸ªæ–‡ä»¶åªå†™ä¸€ä¸ª module<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="signal-net-variable" class="heading"><a href="#signal-net-variable" class="heading-anchor" aria-label="ç« èŠ‚ï¼š signal (net &#x26; variable)" tabindex="-1"></a><span>signal (net &#x26; variable)</span></h3>
<p>ä¸€ä¸ª 1-bit çš„ signal æœ‰å››ç§å–å€¼<span class="mojikumi-line-end">ï¼š</span>0<span class="mojikumi-line-end">ã€</span>1<span class="mojikumi-line-end">ã€</span>x<span class="mojikumi-line-start">ï¼ˆ</span>æœªçŸ¥<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€</span>z<span class="mojikumi-line-start">ï¼ˆ</span>é«˜é˜»æŠ—<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>ä½è¿ç®—<span class="mojikumi-line-end">ï¼š</span><code>&#x26;</code><span class="mojikumi-line-end">ã€</span><code>|</code><span class="mojikumi-line-end">ã€</span><code>~</code><span class="mojikumi-line-end">ã€</span><code>^</code><span class="mojikumi-line-end">ã€</span><code>~^</code>/<code>^~</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>signal æœ‰ä¸¤å¤§ç±»<span class="mojikumi-line-end">ï¼š</span><i>net</i> å’Œ <i>variable</i><span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>net è¡¨ç¤ºçº¿è·¯<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯ <code>wire</code><span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯ä»¥æ˜¯ <code>supply0</code><span class="mojikumi-line-end">ã€</span><code>supply1</code> ç­‰<span class="mojikumi-line-start">ï¼ˆ</span>æˆ‘ç”¨ <code>supply1</code> çš„æ—¶å€™å‡ºç°äº†ç¥ç§˜çš„é—®é¢˜<span class="mojikumi-line-end">ï¼Œ</span>æ²¡ç»†ç©¶<span class="mojikumi-line-end">ï¼Œ</span>åæ­£ç”¨æ’ä¸º 1 çš„ <code>logic</code> ä¹Ÿå·®ä¸å¤š<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></li>
<li>variable ç”¨äº procedural statement ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸ä¸€å®šå¯¹åº”åˆ°ç‰©ç†ä¸Šçš„çº¿è·¯<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æ˜¯ <code>reg</code> æˆ–è€… <code>integer</code><span class="mojikumi-line-end">ã€‚</span>å…¶ä¸­ <code>reg</code> å°±æ˜¯å˜é‡çš„æ„æ€<span class="mojikumi-line-start">ï¼ˆ</span>åå­—å–å¾—ä¸å¤ªå¥½<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºå•ä¸ª bit æˆ–è€… vector<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŸºäº flip-flop çš„å¯„å­˜å™¨æ— å…³<span class="mojikumi-line-end">ã€‚</span><code>integer</code> æ˜¯æœ‰ç¬¦å·æ•´å‹<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¸ç”¨æ¥å­˜å‚¨æ•°æ®æˆ–ä¿¡å·<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ç”¨äº for å¾ªç¯ä¹‹ç±»çš„åœ°æ–¹<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>input åªèƒ½æ˜¯ net<span class="mojikumi-line-end">ï¼Œ</span>è€Œ output å¯ä»¥æ˜¯ net æˆ– <code>reg</code><span class="mojikumi-line-end">ã€‚</span>ä¸å†™ <code>wire</code> / <code>reg</code> æ—¶é»˜è®¤æ˜¯ <code>wire</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ SystemVerilog ä¸­æ¨èç”¨ <code>logic</code> æ¥ä»£æ›¿ <code>reg</code><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="æ•°å­—å­—é¢é‡-parameter" class="heading"><a href="#æ•°å­—å­—é¢é‡-parameter" class="heading-anchor" aria-label="ç« èŠ‚ï¼š æ•°å­—å­—é¢é‡ &#x26; parameter" tabindex="-1"></a><span>æ•°å­—å­—é¢é‡ &#x26; parameter</span></h3>
<p>ç›´æ¥å†™åè¿›åˆ¶æ•°ä¼šå¾—åˆ°ä¸€ä¸ª signed number<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯ä»¥æŒ‡å®šä½æ•°å’Œè¿›åˆ¶<span class="mojikumi-line-end">ï¼š</span><code>1'b0</code> æ˜¯ 1 bit çš„ 0<span class="mojikumi-line-end">ï¼Œ</span><code>4'ha</code> æ˜¯ 4 bit çš„ 10<span class="mojikumi-line-start">ï¼ˆ</span>åå…­è¿›åˆ¶çš„ A<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span><code>8<wbr>'<wbr>b01x0z1x1</code> çš„ä¸€äº› bit æ˜¯æœªçŸ¥ / é«˜é˜»æŠ—<span class="mojikumi-line-end">ã€‚</span>å¦‚æœåé¢å†™çš„å€¼çš„ä½æ•°è¶…è¿‡å‰é¢æŒ‡å®šçš„ä½æ•°<span class="mojikumi-line-end">ï¼Œ</span>é«˜ä½ä¼šè¢«æ‰”æ‰<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœå°‘äº†åˆ™ä¼šé«˜ä½è¡¥é›¶<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€…è¡¥ <code>x</code> æˆ– <code>z</code><span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæœ€é«˜ä½æ˜¯ <code>x</code> æˆ– <code>z</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>è¿™æ ·å¾—åˆ°çš„ä¼šæ˜¯ä¸€ä¸ª unsigned vector<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åŠ ä¸Š <code>s</code> å¾—åˆ° signed vector<span class="mojikumi-line-end">ï¼š</span><code>4'sb1101</code><span class="mojikumi-line-end">ã€‚</span></p>
<p><code>parameter</code> ç”¨æ¥è®¾ç½®å¸¦é»˜è®¤å€¼çš„å‚æ•°<span class="mojikumi-line-end">ï¼š</span><code>parameter SIZE = 32, MSB = SIZE - 1, LSB = 0</code><span class="mojikumi-line-end">ï¼Œ</span><code>parameter ESC = 7'h1b</code><span class="mojikumi">ã€‚</span> <code>parameter</code> ä¸€èˆ¬ç”¨ä½œå¸¸é‡<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨ <a href="#structural-model">instance statement</a> ä¸­å¯ä»¥è¢«ä¿®æ”¹<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="vector-ç®—æœ¯è¿ç®—" class="heading"><a href="#vector-ç®—æœ¯è¿ç®—" class="heading-anchor" aria-label="ç« èŠ‚ï¼š vector &#x26; ç®—æœ¯è¿ç®—" tabindex="-1"></a><span>vector &#x26; ç®—æœ¯è¿ç®—</span></h3>
<p>å¤šä¸ª bit å¯ä»¥ç»„æˆä¸€ä¸ª vector<span class="mojikumi-line-end">ï¼Œ</span>net<span class="mojikumi-line-end">ã€</span><code>reg</code><span class="mojikumi-line-end">ã€</span><code>parameter</code> éƒ½å¯ä»¥æ˜¯ vector<span class="mojikumi-line-end">ã€‚</span></p>
<p>vector çš„ä¸‹æ ‡å¯ä»¥æ˜¯å·¦è¾¹<span class="mojikumi-line-start">ï¼ˆ</span>MSB<span class="mojikumi-line-end">ï¼‰</span>å¤§<span class="mojikumi-line-start">ï¼ˆ</span><code>reg [7:0] byte1, byte2</code><span class="mojikumi-line-end">ï¼‰</span>ä¹Ÿå¯ä»¥æ˜¯å³è¾¹<span class="mojikumi-line-start">ï¼ˆ</span>LSB<span class="mojikumi-line-end">ï¼‰</span>å¤§<span class="mojikumi-line-start">ï¼ˆ</span><code>reg [1:16] bus</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>èµ·æ­¢çš„ä¸‹æ ‡éƒ½å¯ä»¥æŒ‡å®š<span class="mojikumi-line-end">ã€‚</span>å·¦è¾¹çš„ä¸‹æ ‡å¯¹åº”å­—é¢é‡ä¸­å·¦è¾¹çš„ bit<span class="mojikumi-line-end">ã€‚</span><code>byte1[7]</code> æ˜¯ <code>byte1</code> æœ€å·¦è¾¹çš„ bit<span class="mojikumi-line-end">ï¼Œ</span><code>bus[16]</code> æ˜¯ <code>bus</code> æœ€å³è¾¹çš„ bit<span class="mojikumi-line-end">ã€‚</span><code>bus[1:8]</code> å’Œ <code>bus[9:16]</code> æ˜¯ <code>bus</code> çš„å·¦å³ä¸¤è¾¹<span class="mojikumi-line-end">ã€‚</span>è¯»å–è¶Šç•Œä¼šè¯»åˆ° <code>x</code><span class="mojikumi-line-end">ï¼Œ</span>å†™å…¥ä¼šå¿½ç•¥è¶Šç•Œçš„éƒ¨åˆ†<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>{}</code> ç”¨æ¥è¿æ¥ vector<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ <code>{2'b10, 2'b01}</code> ç­‰äº <code>4'b1001</code><span class="mojikumi-line-end">ï¼Œ</span><code>{2{byte1}, 2{byte2}}</code> ç­‰äº <code>{byte1, byte1, byte2, byte2}</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>vector å¯ä»¥æŒ‰ä½è¿›è¡Œä½è¿ç®—<span class="mojikumi-line-end">ï¼Œ</span>åœ¨äºŒå…ƒè¿ç®—ä¸­çŸ­çš„ä¼šé«˜ä½è¡¥é›¶åè¿›è¡Œè¿ç®—<span class="mojikumi-line-end">ã€‚</span></p>
<p>äºŒå…ƒä½è¿ç®—ç¬¦ä¹Ÿæœ‰ä¸€å…ƒçš„ç‰ˆæœ¬<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºå°† vector å†…æ‰€æœ‰ bit è¿ç®—åœ¨ä¸€èµ·å¾—åˆ° 1-bit çš„ç»“æœ<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ <code>&#x26;byte1</code> æ˜¯ <code>1'b1</code> è¡¨ç¤º <code>byte1</code> çš„æ‰€æœ‰ bit éƒ½æ˜¯ 1<span class="mojikumi-line-end">ã€‚</span></p>
<p>vector ä¹‹é—´è¿›è¡Œèµ‹å€¼æ—¶ä¼šæˆªä½ä½æˆ–é«˜ä½è¡¥é›¶<span class="mojikumi-line-end">ã€‚</span></p>
<p>vector ä¹‹é—´å¯ä»¥è¿›è¡Œç®—æœ¯<span class="mojikumi-line-end">ï¼š</span><code>+</code><span class="mojikumi-line-end">ã€</span><code>-</code><span class="mojikumi-line-end">ã€</span><code>*</code><span class="mojikumi-line-end">ã€</span><code>/</code><span class="mojikumi-line-end">ã€</span><code>%</code><span class="mojikumi-line-end">ã€</span><code>**</code><span class="mojikumi-line-end">ã€</span><code>&#x3C;&#x3C;</code><span class="mojikumi-line-end">ã€</span><code>>></code><span class="mojikumi-line-end">ã€</span><code>&#x3C;&#x3C;&#x3C;</code><span class="mojikumi-line-start">ï¼ˆ</span>ç®—æœ¯å·¦ç§»<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€</span><code>>>></code><span class="mojikumi-line-start">ï¼ˆ</span>ç®—æœ¯å³ç§»<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>ç®—æœ¯çš„é«˜ä½å’Œä½ä½åŸºäºå·¦å³è€Œä¸ä¸‹æ ‡å¤§å°æ— å…³<span class="mojikumi-line-end">ã€‚</span></p>
<p>é™¤æ³•å’Œå–æ¨¡åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸ synthesizable<span class="mojikumi-line-end">ï¼Œ</span>é™¤éé™¤æ•°æ˜¯ 2 çš„æ¬¡å¹‚<span class="mojikumi-line-end">ã€‚</span>synthesizable æ—¶ä¹Ÿå¯èƒ½ä¼šç”Ÿæˆé™¤æ³•å™¨çš„ç”µè·¯è€Œéå¸¸æ˜‚è´µ<span class="mojikumi-line-end">ã€‚</span></p>
<p>é€»è¾‘ç§»ä½å¾—åˆ° unsigned<span class="mojikumi-line-end">ï¼Œ</span>ç®—æœ¯ç§»ä½ä¿æŒåŸæ¥çš„ signed/unsigned<span class="mojikumi-line-end">ï¼Œ</span>ç®—æœ¯å³ç§»é«˜ä½è¡¥ç¬¦å·ä½<span class="mojikumi-line-end">ã€‚</span>äºŒå…ƒç®—æœ¯ä¸­åªè¦æœ‰ä¸€ä¸ªæ˜¯ unsigned å°±ä¼šå°†å¦ä¸€ä¸ªè½¬æˆ unsigned å†è®¡ç®—<span class="mojikumi-line-end">ã€‚</span>signal å¯ä»¥å£°æ˜ä¸º signed<span class="mojikumi-line-end">ï¼š</span><code>reg signed [15:0] a</code><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="array" class="heading"><a href="#array" class="heading-anchor" aria-label="ç« èŠ‚ï¼š array" tabindex="-1"></a><span>array</span></h3>
<p>array æ˜¯ç›¸åŒç±»å‹çš„ä¸€åˆ—ä¸œè¥¿<span class="mojikumi-line-start">ï¼ˆ</span>ä¸€åˆ— <code>reg</code><span class="mojikumi-line-end">ã€</span><code>integer</code><span class="mojikumi-line-end">ã€</span><code>wire</code> ç­‰<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>array ä¹Ÿå¯ä»¥æŒ‡å®šä¸‹æ ‡èŒƒå›´<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¸ vector ç›¸å<span class="mojikumi-line-end">ï¼Œ</span>å£°æ˜ array æ—¶æ¡†æ”¾åœ¨å³è¾¹<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ <code>reg<wbr> [<wbr>7<wbr>:<wbr>0<wbr>] <wbr>byte1<wbr>, <wbr>mem1<wbr>[<wbr>0<wbr>:<wbr>255<wbr>]</code> è¡¨ç¤ºä¸€ä¸ª 8-bit <code>reg</code> å’Œä¸€ä¸ªç”± 256 ä¸ª 8-bit <code>reg</code> ç»„æˆçš„ array<span class="mojikumi-line-end">ã€‚</span></p>
<p>array å¯ä»¥åµŒå¥—ä¸ºé«˜ç»´æ•°ç»„<span class="mojikumi-line-end">ï¼Œ</span>è€Œè®¿é—®åªèƒ½è®¿é—®å•ä¸ªä¸‹æ ‡<span class="mojikumi-line-end">ï¼Œ</span>ä¸èƒ½åƒ vector ä¸€æ ·ä¸€ä¸‹è®¿é—®ä¸€ä¸ªåŒºé—´<span class="mojikumi-line-end">ã€‚</span>æ€»ä¹‹é™¤äº†èƒ½æŒ‡å®šä¸‹æ ‡èŒƒå›´éƒ½å’Œ C çš„æ•°ç»„å·®ä¸å¤š<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="é€»è¾‘è¿ç®—" class="heading"><a href="#é€»è¾‘è¿ç®—" class="heading-anchor" aria-label="ç« èŠ‚ï¼š é€»è¾‘è¿ç®—" tabindex="-1"></a><span>é€»è¾‘è¿ç®—</span></h3>
<p>å« <code>x</code> / <code>z</code> æˆ–è€…å…¨ 0 çš„ vector<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€… <code>1'b0</code><span class="mojikumi-line-end">ï¼‰</span>æ˜¯ false<span class="mojikumi-line-end">ï¼Œ</span>ä¸å« <code>x</code> / <code>z</code> ä¸”å« 1 çš„ vector<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€… <code>1'b1</code><span class="mojikumi-line-end">ï¼‰</span>æ˜¯ true<span class="mojikumi-line-end">ã€‚</span>false çš„å€¼æ˜¯ <code>1'b0</code><span class="mojikumi-line-end">ï¼Œ</span>true çš„å€¼æ˜¯ <code>1'b1</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>é€»è¾‘è¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦å’Œ C æ˜¯ä¸€æ ·çš„<span class="mojikumi-line-end">ã€‚</span>æ¯”è¾ƒæ—¶å¦‚æœä¸€ä¾§æ˜¯ unsigned åˆ™ä¼šæŒ‰ unsigned æ¯”è¾ƒ<span class="mojikumi-line-end">ã€‚</span>æ¯”è¾ƒè¿ç®—åœ¨ç”µè·¯ä¸­å¯èƒ½éœ€è¦æ¯”è¾ƒå™¨<span class="mojikumi-line-start">ï¼ˆ</span>å°¤å…¶æ˜¯ä¸¤ä¾§éƒ½ä¸æ˜¯å¸¸é‡æ—¶<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥å¯èƒ½æ˜¯æ˜‚è´µçš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸‰ç›®è¿ç®—ç¬¦ <code>?:</code> å’Œ C æ˜¯ä¸€æ ·çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ test bench ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¸¦ <code>x</code> / <code>z</code> çš„å€¼åœ¨æ¯”è¾ƒæ—¶ç»“æœä¸º <code>x</code><span class="mojikumi-line-start">ï¼ˆ</span>ç”¨åœ¨æ¡ä»¶åˆ¤æ–­æ—¶å³ä¸º false<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ <code>===</code> / <code>!==</code> æ¥é€ä½æ¯”è¾ƒ<span class="mojikumi-line-start">ï¼ˆ</span><code>x === x</code>, <code>z === z</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½†å®ƒä»¬ä¸èƒ½ç”¨åœ¨ synthesizable module ä¸­<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="compiler-directives" class="heading"><a href="#compiler-directives" class="heading-anchor" aria-label="ç« èŠ‚ï¼š compiler directives" tabindex="-1"></a><span>compiler directives</span></h3>
<p><code>`include</code> å’Œ <code>`define</code><span class="mojikumi-line-end">ï¼Œ</span>å’Œ C æ˜¯ä¸€æ ·çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="model" class="heading"><a href="#model" class="heading-anchor" aria-label="ç« èŠ‚ï¼š model" tabindex="-1"></a><span>model</span></h2>
<h3 id="structural-model" class="heading"><a href="#structural-model" class="heading-anchor" aria-label="ç« èŠ‚ï¼š structural model" tabindex="-1"></a><span>structural model</span></h3>
<p>å¯ä»¥ä½¿ç”¨ <i>instance statement</i> æ¥å†™ structural model<span class="mojikumi-line-end">ï¼Œ</span>è¯´ç™½äº†å°±æ˜¯å°†å…¶ä»– module å®ä¾‹åŒ–å¹¶è¿çº¿<span class="mojikumi-line-end">ã€‚</span></p>
<p>built-in gate æœ‰<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>and</code><span class="mojikumi-line-end">ã€</span><code>nand</code><span class="mojikumi-line-end">ã€</span><code>or</code><span class="mojikumi-line-end">ã€</span><code>nor</code><span class="mojikumi-line-end">ã€</span><code>xor</code><span class="mojikumi-line-end">ã€</span><code>xnor</code><span class="mojikumi-line-end">ï¼Œ</span>æ¥å—ä»»æ„ä¸ªè¾“å…¥</li>
<li><code>buf</code><span class="mojikumi-line-end">ã€</span><code>not</code><span class="mojikumi-line-end">ï¼Œ</span>æ¥å—å•ä¸ªè¾“å…¥</li>
<li><code>bufif0</code><span class="mojikumi-line-end">ã€</span><code>bufif1</code><span class="mojikumi-line-end">ã€</span><code>notif0</code><span class="mojikumi-line-end">ã€</span><code>notif1</code><span class="mojikumi-line-end">ï¼Œ</span>ä¸‰æ€é—¨<span class="mojikumi-line-end">ï¼Œ</span>æ¥å—ä¸€ä¸ª data input å’Œä¸€ä¸ª enable input<span class="mojikumi-line-start">ï¼ˆ</span>data input åœ¨å‰<span class="mojikumi-line-end">ï¼Œ</span>enable input åœ¨å<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>if è¡¨ç¤º enable çš„ active level</li>
</ul>
<p>ä½¿ç”¨ built-in gate çš„ä¾‹å­<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>built-in gate çš„ port æ²¡æœ‰åå­—<span class="mojikumi-line-end">ï¼Œ</span>åªèƒ½é€šè¿‡é¡ºåºæŒ‡å®š<span class="mojikumi-line-end">ï¼Œ</span>output åœ¨å‰<span class="mojikumi-line-end">ï¼‰</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-18"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-18--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> inhibit (</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  in,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  invin,</span></span>
<span><span style="color: #C5E478">    output</span><span style="color: #D6DEEB"> out</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #C792EA">  wire</span><span style="color: #D6DEEB"> notinvin;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">not</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">U1</span><span style="color: #D6DEEB"> (notinvin, invin);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">and</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">U2</span><span style="color: #D6DEEB"> (out, in, notinvin);</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> inhibit (</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  in,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  invin,</span></span>
<span><span style="color: #4876D6">    output</span><span style="color: #403F53"> out</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #994CC3">  wire</span><span style="color: #403F53"> notinvin;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">not</span><span style="color: #403F53"> </span><span style="color: #4876D6">U1</span><span style="color: #403F53"> (notinvin, invin);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">and</span><span style="color: #403F53"> </span><span style="color: #4876D6">U2</span><span style="color: #403F53"> (out, in, notinvin);</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>ä½¿ç”¨å…¶ä»– module çš„ä¾‹å­<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥æŒ‡å®šæ¯ä¸ª port çš„åå­—ä»è€Œä¸ä¾èµ–äºé¡ºåº<span class="mojikumi-line-end">ï¼‰</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-19"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-19--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> silly_xor (</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  in1,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> in2,</span></span>
<span><span style="color: #C5E478">    output</span><span style="color: #D6DEEB"> out</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #C792EA">  wire</span><span style="color: #D6DEEB"> inh1, inh2, notinh2, notout;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">inhibit</span><span style="color: #D6DEEB"> U1 (</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">out</span><span style="color: #D6DEEB">(inh1),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">in</span><span style="color: #D6DEEB">(in1),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">invin</span><span style="color: #D6DEEB">(in2)</span></span>
<span><span style="color: #D6DEEB">  );</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">inhibit</span><span style="color: #D6DEEB"> U2 (</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">out</span><span style="color: #D6DEEB">(inh2),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">in</span><span style="color: #D6DEEB">(in2),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">invin</span><span style="color: #D6DEEB">(in1)</span></span>
<span><span style="color: #D6DEEB">  );</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">not</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">U3</span><span style="color: #D6DEEB"> (notinh2, inh2);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">inhibit</span><span style="color: #D6DEEB"> U4 (</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">out</span><span style="color: #D6DEEB">(notout),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">in</span><span style="color: #D6DEEB">(notinh2),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">invin</span><span style="color: #D6DEEB">(inh1)</span></span>
<span><span style="color: #D6DEEB">  );</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C5E478">not</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">U5</span><span style="color: #D6DEEB"> (out, notout);</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> silly_xor (</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  in1,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> in2,</span></span>
<span><span style="color: #4876D6">    output</span><span style="color: #403F53"> out</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #994CC3">  wire</span><span style="color: #403F53"> inh1, inh2, notinh2, notout;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">inhibit</span><span style="color: #403F53"> U1 (</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">out</span><span style="color: #403F53">(inh1),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">in</span><span style="color: #403F53">(in1),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">invin</span><span style="color: #403F53">(in2)</span></span>
<span><span style="color: #403F53">  );</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">inhibit</span><span style="color: #403F53"> U2 (</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">out</span><span style="color: #403F53">(inh2),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">in</span><span style="color: #403F53">(in2),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">invin</span><span style="color: #403F53">(in1)</span></span>
<span><span style="color: #403F53">  );</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">not</span><span style="color: #403F53"> </span><span style="color: #4876D6">U3</span><span style="color: #403F53"> (notinh2, inh2);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">inhibit</span><span style="color: #403F53"> U4 (</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">out</span><span style="color: #403F53">(notout),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">in</span><span style="color: #403F53">(notinh2),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">invin</span><span style="color: #403F53">(inh1)</span></span>
<span><span style="color: #403F53">  );</span></span>
<span><span style="color: #403F53">  </span><span style="color: #4876D6">not</span><span style="color: #403F53"> </span><span style="color: #4876D6">U5</span><span style="color: #403F53"> (out, notout);</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>ä¿®æ”¹ <code>parameter</code> çš„ä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-20"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-20--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> maj </span><span style="color: #7FDBCA">#</span><span style="color: #D6DEEB">(</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">WID</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span></span>
<span><span style="color: #D6DEEB">) (</span></span>
<span><span style="color: #C5E478">    output</span><span style="color: #D6DEEB"> [</span><span style="color: #82AAFF">WID</span><span style="color: #C792EA">-</span><span style="color: #F78C6C">1</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] out,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  [</span><span style="color: #82AAFF">WID</span><span style="color: #C792EA">-</span><span style="color: #F78C6C">1</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] i0,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  [</span><span style="color: #82AAFF">WID</span><span style="color: #C792EA">-</span><span style="color: #F78C6C">1</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] i1,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">  [</span><span style="color: #82AAFF">WID</span><span style="color: #C792EA">-</span><span style="color: #F78C6C">1</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] i2</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">assign</span><span style="color: #D6DEEB"> out </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> i0 </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> i1 </span><span style="color: #C792EA">|</span><span style="color: #D6DEEB"> i0 </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> i2 </span><span style="color: #C792EA">|</span><span style="color: #D6DEEB"> i1 </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> i2;</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> maj </span><span style="color: #0C969B">#</span><span style="color: #403F53">(</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">WID</span><span style="color: #403F53"> </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span></span>
<span><span style="color: #403F53">) (</span></span>
<span><span style="color: #4876D6">    output</span><span style="color: #403F53"> [</span><span style="color: #4876D6">WID</span><span style="color: #994CC3">-</span><span style="color: #AA0982">1</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] out,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  [</span><span style="color: #4876D6">WID</span><span style="color: #994CC3">-</span><span style="color: #AA0982">1</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] i0,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  [</span><span style="color: #4876D6">WID</span><span style="color: #994CC3">-</span><span style="color: #AA0982">1</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] i1,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input</span><span style="color: #403F53">  [</span><span style="color: #4876D6">WID</span><span style="color: #994CC3">-</span><span style="color: #AA0982">1</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] i2</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">assign</span><span style="color: #403F53"> out </span><span style="color: #994CC3">=</span><span style="color: #403F53"> i0 </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> i1 </span><span style="color: #994CC3">|</span><span style="color: #403F53"> i0 </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> i2 </span><span style="color: #994CC3">|</span><span style="color: #403F53"> i1 </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> i2;</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>ç„¶åå°±å¯ä»¥ <code>maj #(8) U1 (.out(W), .i0(X), .i1(Y), .i2(Z))</code> æˆ–è€… <code>maj #(.WID(8)) U1 (.out(W), .i0(X), .i1(Y), .i2(Z))</code> äº†<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸æŒ‡å®š <code>parameter</code> æ—¶ä¼šä½¿ç”¨å…¶é»˜è®¤å€¼<span class="mojikumi-line-end">ï¼Œ</span><code>parameter</code> åªèƒ½åœ¨ instance statement ä¹Ÿå°±æ˜¯ structural model ä¸­è¢«ä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å…¶ä»–ç±»å‹çš„ model ä¸­åªèƒ½ä½¿ç”¨é»˜è®¤å€¼<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯ä»¥ä½¿ç”¨ <code>generate</code> block<span class="mojikumi-line-end">ï¼Œ</span>ä½œç”¨ç±»ä¼¼äº <code>v-for</code><span class="mojikumi-line-end">ã€</span><code>v-if</code><span class="mojikumi-line-end">ï¼Œ</span>é‡Œé¢å¯ä»¥ç”¨ <code>for</code><span class="mojikumi-line-start">ï¼ˆ</span>å¾ªç¯å˜é‡éœ€è¦æ˜¯ <code>genvar</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€</span><code>if</code><span class="mojikumi-line-end">ã€</span><code>case</code><span class="mojikumi-line-start">ï¼ˆ</span>è¢«åˆ¤æ–­çš„è¦æ˜¯ parameter<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-21"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-21--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">genvar</span><span style="color: #D6DEEB"> i;</span></span>
<span><span style="color: #C792EA">generate</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">for</span><span style="color: #D6DEEB"> (i </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">; i </span><span style="color: #C792EA">&lt;</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">; i </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> i </span><span style="color: #C792EA">+</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">) </span><span style="color: #C792EA">begin</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">half_adder</span><span style="color: #D6DEEB"> u0 (a[i], b[i], sum[i], cout[i]);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">end</span></span>
<span><span style="color: #C792EA">endgenerate</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">genvar</span><span style="color: #403F53"> i;</span></span>
<span><span style="color: #994CC3">generate</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">for</span><span style="color: #403F53"> (i </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">; i </span><span style="color: #994CC3">&lt;</span><span style="color: #403F53"> </span><span style="color: #4876D6">N</span><span style="color: #403F53">; i </span><span style="color: #994CC3">=</span><span style="color: #403F53"> i </span><span style="color: #994CC3">+</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">) </span><span style="color: #994CC3">begin</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">half_adder</span><span style="color: #403F53"> u0 (a[i], b[i], sum[i], cout[i]);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">end</span></span>
<span><span style="color: #994CC3">endgenerate</span></span></code></pre></div></section>
<h3 id="dataflow-model" class="heading"><a href="#dataflow-model" class="heading-anchor" aria-label="ç« èŠ‚ï¼š dataflow model" tabindex="-1"></a><span>dataflow model</span></h3>
<p>å¯ä»¥ä½¿ç”¨ <i>continuous-assignment statement</i> æ¥å†™ dataflow model<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå°±æ˜¯ <code>assign</code><span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-22"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-22--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> is_prime (</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> [</span><span style="color: #F78C6C">3</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] </span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">,</span></span>
<span><span style="color: #C5E478">    output</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">F</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">assign</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">F</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">3</span><span style="color: #D6DEEB">] </span><span style="color: #C792EA">?</span><span style="color: #D6DEEB"> (</span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> (</span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">] </span><span style="color: #C792EA">^</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">2</span><span style="color: #D6DEEB">])) </span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> (</span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] </span><span style="color: #C792EA">|</span><span style="color: #D6DEEB"> (</span><span style="color: #C792EA">~</span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">2</span><span style="color: #D6DEEB">] </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">N</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">]));</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> is_prime (</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> [</span><span style="color: #AA0982">3</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] </span><span style="color: #4876D6">N</span><span style="color: #403F53">,</span></span>
<span><span style="color: #4876D6">    output</span><span style="color: #403F53"> </span><span style="color: #4876D6">F</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">assign</span><span style="color: #403F53"> </span><span style="color: #4876D6">F</span><span style="color: #403F53"> </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">3</span><span style="color: #403F53">] </span><span style="color: #994CC3">?</span><span style="color: #403F53"> (</span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">0</span><span style="color: #403F53">] </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> (</span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">1</span><span style="color: #403F53">] </span><span style="color: #994CC3">^</span><span style="color: #403F53"> </span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">2</span><span style="color: #403F53">])) </span><span style="color: #994CC3">:</span><span style="color: #403F53"> (</span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">0</span><span style="color: #403F53">] </span><span style="color: #994CC3">|</span><span style="color: #403F53"> (</span><span style="color: #994CC3">~</span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">2</span><span style="color: #403F53">] </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> </span><span style="color: #4876D6">N</span><span style="color: #403F53">[</span><span style="color: #AA0982">1</span><span style="color: #403F53">]));</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<h3 id="behavioral-model" class="heading"><a href="#behavioral-model" class="heading-anchor" aria-label="ç« èŠ‚ï¼š behavioral model" tabindex="-1"></a><span>behavioral model</span></h3>
<h4 id="always-begin-end-block" class="heading"><a href="#always-begin-end-block" class="heading-anchor" aria-label="ç« èŠ‚ï¼š always &#x26; begin-end block" tabindex="-1"></a><span><code>always</code> &#x26; <code>begin</code>-<code>end</code> block</span></h4>
<p><code>always</code> statement ç”¨æ¥æ‰§è¡Œä¸€å¥ procedural statement<span class="mojikumi-line-end">ï¼Œ</span>begin-end block ç”¨æ¥å°†è‹¥å¹² procedural statement åˆæˆä¸€å¥<span class="mojikumi-line-end">ã€‚</span>begin-end block é‡Œçš„è¯­å¥æ˜¯é¡ºåºæ‰§è¡Œçš„<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>always</code> æ˜¯å’Œ module ä¸­çš„å…¶ä»–è¯­å¥ä¸€èµ·å¹¶è¡Œæ‰§è¡Œçš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ SystemVerilog ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¨èä½¿ç”¨ <code>always_comb</code><span class="mojikumi-line-end">ã€</span><code>always_ff</code><span class="mojikumi-line-end">ã€</span><code>always_latch</code> æ¥ä»£æ›¿ <code>always</code><span class="mojikumi-line-end">ï¼Œ</span>åˆ†åˆ«ç”¨äºç»„åˆé€»è¾‘<span class="mojikumi-line-end">ã€</span>ff å’Œ latch<span class="mojikumi-line-start">ï¼ˆ</span>ä½†ä¸€èˆ¬ä¸ä¼šç‰¹æ„å»å†™ latch<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span><code>always_comb</code> ä¼šæ£€æŸ¥æ¡ä»¶åˆ¤æ–­è¯­å¥æ²¡æœ‰æ¼æƒ…å†µ<span class="mojikumi-line-end">ï¼Œ</span>é¿å…æ„å¤–ç”Ÿæˆ latch<span class="mojikumi-line-end">ã€‚</span><code>always_ff</code> éœ€è¦åŠ å½¢å¦‚ <code>always_ff @(posedge clk)</code> çš„ sensitivity list<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœ begin-end é‡Œæœ‰ local <code>logic</code> åˆ™éœ€è¦ç»™ block èµ·åå­—<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ <code>begin</code> çš„åé¢å†™ä¸Š <code>: name</code><span class="mojikumi-line-end">ï¼‰</span>æ‰èƒ½åœ¨ simulation ä¹‹ç±»çš„åœ°æ–¹çœ‹åˆ°å¯è¯»çš„å˜é‡å<span class="mojikumi-line-end">ã€‚</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h5 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h5><ile-root id="ile-23"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-23--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> alarm_circuit (</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> panic,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> enable,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> exiting,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> window,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> door,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> garage,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">output</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">logic</span><span style="color: #D6DEEB"> alarm</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">always_comb</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">begin</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">:</span><span style="color: #D6DEEB"> blk</span></span>
<span><span style="color: #C792EA">    logic</span><span style="color: #D6DEEB"> secure;</span></span>
<span><span style="color: #D6DEEB">    secure </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> window </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> door </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> garage;</span></span>
<span><span style="color: #D6DEEB">    alarm  </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> panic </span><span style="color: #C792EA">|</span><span style="color: #D6DEEB"> (enable </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">~</span><span style="color: #D6DEEB">exiting </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">~</span><span style="color: #D6DEEB">secure);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">end</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> alarm_circuit (</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> panic,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> enable,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> exiting,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> window,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> door,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> garage,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">output</span><span style="color: #403F53"> </span><span style="color: #994CC3">logic</span><span style="color: #403F53"> alarm</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">always_comb</span><span style="color: #403F53"> </span><span style="color: #994CC3">begin</span><span style="color: #403F53"> </span><span style="color: #0C969B">:</span><span style="color: #403F53"> blk</span></span>
<span><span style="color: #994CC3">    logic</span><span style="color: #403F53"> secure;</span></span>
<span><span style="color: #403F53">    secure </span><span style="color: #994CC3">=</span><span style="color: #403F53"> window </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> door </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> garage;</span></span>
<span><span style="color: #403F53">    alarm  </span><span style="color: #994CC3">=</span><span style="color: #403F53"> panic </span><span style="color: #994CC3">|</span><span style="color: #403F53"> (enable </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> </span><span style="color: #994CC3">~</span><span style="color: #403F53">exiting </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> </span><span style="color: #994CC3">~</span><span style="color: #403F53">secure);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">end</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<h4 id="èµ‹å€¼" class="heading"><a href="#èµ‹å€¼" class="heading-anchor" aria-label="ç« èŠ‚ï¼š èµ‹å€¼" tabindex="-1"></a><span>èµ‹å€¼</span></h4>
<p>procedural statement ä¸­æœ‰ä¸¤ç§èµ‹å€¼<span class="mojikumi-line-end">ï¼Œ</span>blocking çš„ <code>=</code> å’Œ non-blocking çš„ <code>&#x3C;=</code><span class="mojikumi-line-end">ã€‚</span><code>=</code> è¡¨ç¤ºç«‹å³èµ‹å€¼<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>&#x3C;=</code> ä¼šå°†èµ‹å€¼æ¨è¿Ÿè‡³æ•´ä¸ª <code>always</code> çš„ç»“å°¾<span class="mojikumi-line-start">ï¼ˆ</span>å³ä¾§è¡¨è¾¾å¼çš„è®¡ç®—æ˜¯ç«‹åˆ»è¿›è¡Œçš„<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œåœ¨ <code>always</code> å‰©ä¸‹çš„éƒ¨åˆ†ä¸­å·¦ä¾§å˜é‡çš„å€¼ä¾ç„¶æ˜¯èµ‹å€¼å‰çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>èµ‹å€¼æœ€å¥½éµå¾ªä¸‹é¢çš„è§„åˆ™<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>åœ¨ç»„åˆé€»è¾‘ä¸­<span class="mojikumi-line-end">ï¼Œ</span>åªä½¿ç”¨ <code>=</code></li>
<li>åœ¨æ—¶åºé€»è¾‘ä¸­<span class="mojikumi-line-end">ï¼Œ</span>åªä½¿ç”¨ <code>&#x3C;=</code></li>
<li>ä¸è¦åœ¨åŒä¸€ä¸ª block ä¸­æ··åˆä½¿ç”¨ä¸¤ç§èµ‹å€¼</li>
<li>ä¸è¦åœ¨ä¸åŒçš„ <code>always</code> ä¸­å¯¹åŒä¸€ä¸ªå˜é‡èµ‹å€¼</li>
</ul>
<h4 id="if-else-è¯­å¥" class="heading"><a href="#if-else-è¯­å¥" class="heading-anchor" aria-label="ç« èŠ‚ï¼š if-else è¯­å¥" tabindex="-1"></a><span><code>if</code>-<code>else</code> è¯­å¥</span></h4>
<p>å’Œ C çš„è¯­æ³•æ˜¯ä¸€æ ·çš„<span class="mojikumi-line-end">ï¼Œ</span>å”¯ä¸€çš„ä¸åŒå°±æ˜¯å¤§æ‹¬å·å˜æˆ <code>begin</code> - <code>end</code><span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="case-è¯­å¥" class="heading"><a href="#case-è¯­å¥" class="heading-anchor" aria-label="ç« èŠ‚ï¼š case è¯­å¥" tabindex="-1"></a><span><code>case</code> è¯­å¥</span></h4>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h5 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h5><ile-root id="ile-24"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-24--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> prime (</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> [</span><span style="color: #F78C6C">3</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] n,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">output</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">logic</span><span style="color: #D6DEEB"> f</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">always_comb</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">case</span><span style="color: #D6DEEB"> (n)</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #F78C6C">4&#39;d2</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">4&#39;d3</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">4&#39;d5</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">4&#39;d7</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">4&#39;d11</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">4&#39;d13</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> f </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">      </span><span style="color: #C792EA">default:</span><span style="color: #D6DEEB"> f </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">endcase</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> prime (</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> [</span><span style="color: #AA0982">3</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] n,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">output</span><span style="color: #403F53"> </span><span style="color: #994CC3">logic</span><span style="color: #403F53"> f</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">always_comb</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">case</span><span style="color: #403F53"> (n)</span></span>
<span><span style="color: #403F53">      </span><span style="color: #AA0982">4&#39;d2</span><span style="color: #403F53">, </span><span style="color: #AA0982">4&#39;d3</span><span style="color: #403F53">, </span><span style="color: #AA0982">4&#39;d5</span><span style="color: #403F53">, </span><span style="color: #AA0982">4&#39;d7</span><span style="color: #403F53">, </span><span style="color: #AA0982">4&#39;d11</span><span style="color: #403F53">, </span><span style="color: #AA0982">4&#39;d13</span><span style="color: #994CC3">:</span><span style="color: #403F53"> f </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">      </span><span style="color: #994CC3">default:</span><span style="color: #403F53"> f </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">endcase</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>è™½ç„¶å¹¶éå¿…é¡»<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>é€‰é¡¹åº”å½“æ˜¯ä¸é‡å¤ä¸”æŒ‡å®šäº†å®½åº¦çš„å­—é¢é‡<span class="mojikumi-line-end">ã€‚</span></p>
<p>å³ä½¿é€‰é¡¹è¦†ç›–äº†æ‰€æœ‰å¯èƒ½<span class="mojikumi-line-end">ï¼Œ</span>åŠ ä¸Šä¸€ä¸ª <code>default</code> å¯ä»¥åœ¨ simulation ä¸­æ­£ç¡®å¤„ç†å¸¦ <code>x</code> çš„å€¼<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>casez</code> æ˜¯å…è®¸ä½¿ç”¨é€šé…ç¬¦ <code>?</code> çš„åŒ¹é…<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚é€‰é¡¹å¯ä»¥æ˜¯ <code>4'b10??</code><span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="å¾ªç¯è¯­å¥" class="heading"><a href="#å¾ªç¯è¯­å¥" class="heading-anchor" aria-label="ç« èŠ‚ï¼š å¾ªç¯è¯­å¥" tabindex="-1"></a><span>å¾ªç¯è¯­å¥</span></h4>
<p>æœ‰å¾ˆå¤šç§å¾ªç¯è¯­å¥<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ¨èä½¿ç”¨çš„åªæœ‰ä¸€ç§<span class="mojikumi-line-end">ï¼Œ</span>å°±æ˜¯ <code>for (integer i = 0; i &#x3C;= 7; i = i + 1)</code><span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="function-å’Œ-task" class="heading"><a href="#function-å’Œ-task" class="heading-anchor" aria-label="ç« èŠ‚ï¼š function å’Œ task" tabindex="-1"></a><span>function å’Œ task</span></h4>
<p>function å’Œ task æ˜¯ä¸€æ®µå¯å¤ç”¨çš„ procedural statement<span class="mojikumi-line-end">ï¼Œ</span>å†™èµ·æ¥å’Œ module å·®ä¸å¤š<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦å®šä¹‰åœ¨ module å†…éƒ¨<span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥é€šè¿‡ <code>`include</code> æ¥åœ¨ä¸åŒ module ä¸­å¤ç”¨<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>function æœ‰å•ä¸ªè¿”å›å€¼<span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥åœ¨å‡½æ•°åçš„å‰é¢ç»™è¿”å›å€¼è®¾ç½®ç±»å‹<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥çœç•¥<span class="mojikumi-line-end">ï¼Œ</span>é»˜è®¤ç±»å‹æ˜¯ 1-bit<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¸èƒ½æœ‰ <code>output</code> / <code>inout</code> port<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä»¥ function è‡ªèº«çš„åå­—ä½œä¸ºè¿”å›å€¼çš„åå­—<span class="mojikumi-line-end">ï¼Œ</span>ä»£ç ä¸­éœ€è¦å¯¹è¿™ä¸ªå‡½æ•°åè¿›è¡Œèµ‹å€¼<span class="mojikumi-line-end">ã€‚</span>function ä¸­ä¸èƒ½è®¾ç½®å»¶æ—¶<span class="mojikumi-line-end">ã€‚</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h5 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h5><ile-root id="ile-25"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-25--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> sillier_xor (</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> in1,</span></span>
<span><span style="color: #C5E478">    input</span><span style="color: #D6DEEB"> in2,</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">output</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">logic</span><span style="color: #D6DEEB"> out</span></span>
<span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">function</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">inhibit</span><span style="color: #D6DEEB">(</span><span style="color: #C5E478">input</span><span style="color: #D6DEEB"> in,</span><span style="color: #C5E478"> input</span><span style="color: #D6DEEB"> inv_in);</span></span>
<span><span style="color: #D6DEEB">    inhibit </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> in </span><span style="color: #C792EA">&amp;</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">~</span><span style="color: #D6DEEB">inv_in;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">endfunction</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">always_comb</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">begin</span></span>
<span><span style="color: #C792EA">    logic</span><span style="color: #D6DEEB"> inh1, inh2;</span></span>
<span><span style="color: #D6DEEB">    inh1 </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">inhibit</span><span style="color: #D6DEEB">(in1, in2);</span></span>
<span><span style="color: #D6DEEB">    inh2 </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">inhibit</span><span style="color: #D6DEEB">(in2, in1);</span></span>
<span><span style="color: #D6DEEB">    out  </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">~</span><span style="color: #C5E478">inhibit</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">~</span><span style="color: #D6DEEB">inh2, inh1);</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">end</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> sillier_xor (</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> in1,</span></span>
<span><span style="color: #4876D6">    input</span><span style="color: #403F53"> in2,</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">output</span><span style="color: #403F53"> </span><span style="color: #994CC3">logic</span><span style="color: #403F53"> out</span></span>
<span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">function</span><span style="color: #403F53"> </span><span style="color: #4876D6">inhibit</span><span style="color: #403F53">(</span><span style="color: #4876D6">input</span><span style="color: #403F53"> in,</span><span style="color: #4876D6"> input</span><span style="color: #403F53"> inv_in);</span></span>
<span><span style="color: #403F53">    inhibit </span><span style="color: #994CC3">=</span><span style="color: #403F53"> in </span><span style="color: #994CC3">&amp;</span><span style="color: #403F53"> </span><span style="color: #994CC3">~</span><span style="color: #403F53">inv_in;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">endfunction</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">always_comb</span><span style="color: #403F53"> </span><span style="color: #994CC3">begin</span></span>
<span><span style="color: #994CC3">    logic</span><span style="color: #403F53"> inh1, inh2;</span></span>
<span><span style="color: #403F53">    inh1 </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">inhibit</span><span style="color: #403F53">(in1, in2);</span></span>
<span><span style="color: #403F53">    inh2 </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">inhibit</span><span style="color: #403F53">(in2, in1);</span></span>
<span><span style="color: #403F53">    out  </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #994CC3">~</span><span style="color: #4876D6">inhibit</span><span style="color: #403F53">(</span><span style="color: #994CC3">~</span><span style="color: #403F53">inh2, inh1);</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">end</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>task æ²¡æœ‰è¿”å›å€¼<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¯ä»¥æœ‰ <code>output</code> / <code>inout</code> port<span class="mojikumi">ï¼Œ</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ç”¨äº simulation æ—¶<span class="mojikumi-line-end">ï¼‰</span>å¯ä»¥è®¾ç½®å»¶æ—¶<span class="mojikumi-line-end">ã€‚</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h5 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h5><ile-root id="ile-26"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-26--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> lock_sim;</span></span>
<span></span>
<span><span style="color: #D6DEEB">  ...</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">task</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">clock</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">#</span><span style="color: #F78C6C">500</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    clk </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">#</span><span style="color: #F78C6C">500</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    clk </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">endtask</span></span>
<span></span>
<span><span style="color: #D6DEEB">  ...</span></span>
<span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">module</span><span style="color: #403F53"> lock_sim;</span></span>
<span></span>
<span><span style="color: #403F53">  ...</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">task</span><span style="color: #403F53"> </span><span style="color: #4876D6">clock</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    </span><span style="color: #0C969B">#</span><span style="color: #AA0982">500</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    clk </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #0C969B">#</span><span style="color: #AA0982">500</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    clk </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">endtask</span></span>
<span></span>
<span><span style="color: #403F53">  ...</span></span>
<span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>æœ‰ä¸€äº›å†…ç½®çš„ task å’Œ function<span class="mojikumi-line-end">ï¼Œ</span>ç”¨äº simulation<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>$write</code><span class="mojikumi-line-end">ï¼š</span>å’Œ <code>printf</code> å·®ä¸å¤š<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>$display</code><span class="mojikumi-line-end">ï¼š</span>åœ¨ <code>$write</code> çš„åŸºç¡€ä¸Šå¤šä¸ªæ¢è¡Œ<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>$monitor</code><span class="mojikumi-line-end">ï¼š</span>æ¯æ¬¡ä¿¡å·å‘ç”Ÿæ”¹å˜æ—¶éƒ½è¾“å‡º<span class="mojikumi-line-end">ï¼Œ</span>åæŒ‡å®šçš„ monitor ä¼šè¦†ç›–ä¹‹å‰çš„<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>$<wbr>monitoroff</code> / <code>$monitoron</code></li>
<li><code>$fflush</code><span class="mojikumi-line-end">ï¼š</span>flush è¾“å‡º<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>$time</code><span class="mojikumi-line-end">ï¼š</span>è¾“å‡ºå½“å‰çš„ simulated time<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>$random</code><span class="mojikumi-line-end">ï¼š</span>è¿”å›ä¸€ä¸ªéšæœºæ•°<span class="mojikumi-line-end">ï¼Œ</span>æ¥å—ç§å­ä½œä¸ºå‚æ•°<span class="mojikumi-line-end">ï¼Œ</span>ä¸æŒ‡å®šç§å­çš„è¯åˆæ¬¡è¿è¡Œçš„ç§å­æ˜¯å›ºå®šçš„<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>$stop</code><span class="mojikumi-line-end">ï¼š</span>åœæ­¢æ¨¡æ‹Ÿ<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœä¼ å‚ <code>(1)</code> åˆ™ä¼šæ˜¾ç¤ºå½“å‰çš„ simulated time å’Œä»£ç ä½ç½®<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h2 id="timescale-æŒ‡å®šå»¶è¿Ÿ" class="heading"><a href="#timescale-æŒ‡å®šå»¶è¿Ÿ" class="heading-anchor" aria-label="ç« èŠ‚ï¼š timescale &#x26; æŒ‡å®šå»¶è¿Ÿ" tabindex="-1"></a><span>timescale &#x26; æŒ‡å®šå»¶è¿Ÿ</span></h2>
<p><code>`timescale 1ns / 10ps</code> æŒ‡å®šä»¥ 1ns ä½œä¸ºå»¶æ—¶çš„å•ä½<span class="mojikumi-line-end">ï¼Œ</span>ä»¥ 10ps ä½œä¸ºæ¨¡æ‹Ÿçš„ç²¾åº¦<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>assign</code> æ—¶å¯ä»¥æŒ‡å®šå»¶è¿Ÿ<span class="mojikumi-line-end">ï¼š</span><code>assign #5 a = b &#x26; c;</code></p>
<p>procedural model ä¸­å¯ä»¥ç”¨ delay statement (<code>#500;</code>) æ¥æš‚åœ<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="simulation-test-bench" class="heading"><a href="#simulation-test-bench" class="heading-anchor" aria-label="ç« èŠ‚ï¼š simulation (test bench)" tabindex="-1"></a><span>simulation (test bench)</span></h2>
<p>è¯­æ³•ä¸Šå’Œ synthesizable module æ²¡æœ‰åŒºåˆ«<span class="mojikumi-line-start">ï¼ˆ</span>åªä¸è¿‡æœ‰ä¸ª <code>initial</code><span class="mojikumi-line-end">ï¼Œ</span>å°±æ˜¯åªæ‰§è¡Œä¸€éçš„ <code>always</code><span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¸ç”¨äº synthesizable module<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>å†™èµ·æ¥ä¸€èˆ¬æ˜¯ä¸€ä¸ªæ²¡æœ‰è¾“å…¥è¾“å‡º<span class="mojikumi-line-end">ã€</span>æœ‰ä¸€ä¸ªè¢«æµ‹è¯• module çš„å®ä¾‹<span class="mojikumi-line-end">ã€</span>æœ‰ä¸€ä¸ª <code>initial</code> block çš„ module<span class="mojikumi-line-end">ï¼Œ</span>çœ‹çœ‹ä¾‹å­å°±è¡Œ<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ‡’å¾—æ”¹ DDPP ä¸Šçš„ä»£ç äº†<span class="mojikumi-line-end">ï¼Œ</span>ç›´æ¥å¤åˆ¶ä¸€ä»½æ•°å­—é€»è¾‘å®éªŒçš„ä»£ç <span class="mojikumi-line-start">ï¼ˆ</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h3><ile-root id="ile-27"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-27--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #82AAFF">`timescale</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1ns</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">/</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1ps</span></span>
<span></span>
<span><span style="color: #C792EA">module</span><span style="color: #D6DEEB"> lock_sim;</span></span>
<span><span style="color: #C792EA">  logic</span><span style="color: #D6DEEB"> clk </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #C792EA">  logic</span><span style="color: #D6DEEB"> rst </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #C792EA">  logic</span><span style="color: #D6DEEB"> mode </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #C792EA">  logic</span><span style="color: #D6DEEB"> [</span><span style="color: #F78C6C">3</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] digit_input </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #C792EA">  wire</span><span style="color: #D6DEEB"> unlocked, incorrect, alert;</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">lock</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">#</span><span style="color: #D6DEEB">(</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">ADMIN_PASSWORD</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;ha73f</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">  ) lock_inst (</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">clk</span><span style="color: #D6DEEB">(clk),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">rst</span><span style="color: #D6DEEB">(rst),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">mode</span><span style="color: #D6DEEB">(mode),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">digit_input</span><span style="color: #D6DEEB">(digit_input),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">unlocked</span><span style="color: #D6DEEB">(unlocked),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">incorrect</span><span style="color: #D6DEEB">(incorrect),</span></span>
<span><span style="color: #D6DEEB">      .</span><span style="color: #C5E478">alert</span><span style="color: #D6DEEB">(alert)</span></span>
<span><span style="color: #D6DEEB">  );</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">task</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">clock</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">#</span><span style="color: #F78C6C">500</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    clk </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">#</span><span style="color: #F78C6C">500</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    clk </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">endtask</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">task</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">reset</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    rst </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">#</span><span style="color: #F78C6C">500</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    rst </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">#</span><span style="color: #F78C6C">500</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">endtask</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">task</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #C5E478">input</span><span style="color: #D6DEEB"> [</span><span style="color: #F78C6C">15</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">] password);</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">reset</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    digit_input </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> password[</span><span style="color: #F78C6C">15</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">12</span><span style="color: #D6DEEB">];</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">clock</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    digit_input </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> password[</span><span style="color: #F78C6C">11</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">8</span><span style="color: #D6DEEB">];</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">clock</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    digit_input </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> password[</span><span style="color: #F78C6C">7</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">4</span><span style="color: #D6DEEB">];</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">clock</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">    digit_input </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> password[</span><span style="color: #F78C6C">3</span><span style="color: #C792EA">:</span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">];</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">clock</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">endtask</span></span>
<span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">initial</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">begin</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;ha73f</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// admin password</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h1234</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// incorrect</span></span>
<span></span>
<span><span style="color: #D6DEEB">    mode </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h1234</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// set password</span></span>
<span></span>
<span><span style="color: #D6DEEB">    mode </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// incorrect</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h1234</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// correct</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;ha73f</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// admin password</span></span>
<span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #637777">// incorrect three times</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);</span></span>
<span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h1234</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// locked</span></span>
<span></span>
<span><span style="color: #D6DEEB">    mode </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// cannot set password</span></span>
<span></span>
<span><span style="color: #D6DEEB">    mode </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h1234</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// locked</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// incorrect</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;ha73f</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// admin password</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h1234</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// correct</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C5E478">input_password</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">16&#39;h4321</span><span style="color: #D6DEEB">);  </span><span style="color: #637777">// incorrect</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">end</span></span>
<span><span style="color: #C792EA">endmodule</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #4876D6">`timescale</span><span style="color: #403F53"> </span><span style="color: #AA0982">1ns</span><span style="color: #403F53"> </span><span style="color: #994CC3">/</span><span style="color: #403F53"> </span><span style="color: #AA0982">1ps</span></span>
<span></span>
<span><span style="color: #994CC3">module</span><span style="color: #403F53"> lock_sim;</span></span>
<span><span style="color: #994CC3">  logic</span><span style="color: #403F53"> clk </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #994CC3">  logic</span><span style="color: #403F53"> rst </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #994CC3">  logic</span><span style="color: #403F53"> mode </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #994CC3">  logic</span><span style="color: #403F53"> [</span><span style="color: #AA0982">3</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] digit_input </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #994CC3">  wire</span><span style="color: #403F53"> unlocked, incorrect, alert;</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">lock</span><span style="color: #403F53"> </span><span style="color: #0C969B">#</span><span style="color: #403F53">(</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">ADMIN_PASSWORD</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;ha73f</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">  ) lock_inst (</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">clk</span><span style="color: #403F53">(clk),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">rst</span><span style="color: #403F53">(rst),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">mode</span><span style="color: #403F53">(mode),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">digit_input</span><span style="color: #403F53">(digit_input),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">unlocked</span><span style="color: #403F53">(unlocked),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">incorrect</span><span style="color: #403F53">(incorrect),</span></span>
<span><span style="color: #403F53">      .</span><span style="color: #4876D6">alert</span><span style="color: #403F53">(alert)</span></span>
<span><span style="color: #403F53">  );</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">task</span><span style="color: #403F53"> </span><span style="color: #4876D6">clock</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    </span><span style="color: #0C969B">#</span><span style="color: #AA0982">500</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    clk </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #0C969B">#</span><span style="color: #AA0982">500</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    clk </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">endtask</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">task</span><span style="color: #403F53"> </span><span style="color: #4876D6">reset</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    rst </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #0C969B">#</span><span style="color: #AA0982">500</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    rst </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #0C969B">#</span><span style="color: #AA0982">500</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">endtask</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">task</span><span style="color: #403F53"> </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #4876D6">input</span><span style="color: #403F53"> [</span><span style="color: #AA0982">15</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">] password);</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">reset</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    digit_input </span><span style="color: #994CC3">=</span><span style="color: #403F53"> password[</span><span style="color: #AA0982">15</span><span style="color: #994CC3">:</span><span style="color: #AA0982">12</span><span style="color: #403F53">];</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">clock</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    digit_input </span><span style="color: #994CC3">=</span><span style="color: #403F53"> password[</span><span style="color: #AA0982">11</span><span style="color: #994CC3">:</span><span style="color: #AA0982">8</span><span style="color: #403F53">];</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">clock</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    digit_input </span><span style="color: #994CC3">=</span><span style="color: #403F53"> password[</span><span style="color: #AA0982">7</span><span style="color: #994CC3">:</span><span style="color: #AA0982">4</span><span style="color: #403F53">];</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">clock</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">    digit_input </span><span style="color: #994CC3">=</span><span style="color: #403F53"> password[</span><span style="color: #AA0982">3</span><span style="color: #994CC3">:</span><span style="color: #AA0982">0</span><span style="color: #403F53">];</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">clock</span><span style="color: #403F53">();</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">endtask</span></span>
<span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">initial</span><span style="color: #403F53"> </span><span style="color: #994CC3">begin</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;ha73f</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// admin password</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h1234</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// incorrect</span></span>
<span></span>
<span><span style="color: #403F53">    mode </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h1234</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// set password</span></span>
<span></span>
<span><span style="color: #403F53">    mode </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// incorrect</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h1234</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// correct</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;ha73f</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// admin password</span></span>
<span></span>
<span><span style="color: #403F53">    </span><span style="color: #939DBB">// incorrect three times</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);</span></span>
<span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h1234</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// locked</span></span>
<span></span>
<span><span style="color: #403F53">    mode </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// cannot set password</span></span>
<span></span>
<span><span style="color: #403F53">    mode </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h1234</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// locked</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// incorrect</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;ha73f</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// admin password</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h1234</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// correct</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">input_password</span><span style="color: #403F53">(</span><span style="color: #AA0982">16&#39;h4321</span><span style="color: #403F53">);  </span><span style="color: #939DBB">// incorrect</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">end</span></span>
<span><span style="color: #994CC3">endmodule</span></span></code></pre></div></section>
<p>é€šè¿‡ä½¿ç”¨ <code>$display</code><span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æ›´ç›´è§‚åœ°è¾“å‡ºç»“æœ<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œä¸éœ€è¦å¯¹ç€æ³¢å½¢å›¾çœ‹<span class="mojikumi-line-end">ï¼›</span>æˆ–è€…è‡ªåŠ¨æ£€æŸ¥ç»“æœæ˜¯å¦æ­£ç¡®<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å‡ºé”™æ—¶è¾“å‡º<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰æ—¶å¯ä»¥é€šè¿‡æ–‡ä»¶è¯»å†™æ¥æ›´æ–¹ä¾¿åœ°ç¼–å†™æµ‹è¯•æ•°æ®<span class="mojikumi-line-end">ã€</span>æ£€æŸ¥è¾“å‡ºç»“æœ<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="æœ‰å…³-synthesize-çš„ä¸€äº›æ³¨æ„äº‹é¡¹" class="heading"><a href="#æœ‰å…³-synthesize-çš„ä¸€äº›æ³¨æ„äº‹é¡¹" class="heading-anchor" aria-label="ç« èŠ‚ï¼š æœ‰å…³ synthesize çš„ä¸€äº›æ³¨æ„äº‹é¡¹" tabindex="-1"></a><span>æœ‰å…³ synthesize çš„ä¸€äº›æ³¨æ„äº‹é¡¹</span></h2>
<ul>
<li>é•¿ä¸²çš„ <code>if</code><span class="mojikumi-line-end">ã€</span><code>else if</code><span class="mojikumi-line-end">ã€</span><code>else if</code>â€¦â€¦å¯èƒ½å¯¼è‡´ç”µè·¯ä¹Ÿæœ‰ä¸€é•¿ä¸²<span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”¨ <code>case</code> å¯èƒ½ä¼šæ›´ä¼˜<span class="mojikumi-line-end">ã€‚</span></li>
<li>ç»„åˆé€»è¾‘ä¸­çš„å¾ªç¯å¯èƒ½ä¼šåˆ›å»ºåŒä¸€å¥—ç”µè·¯çš„å¤šä¸ªå‰¯æœ¬<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœè¦ç”¨åŒä¸€ä¸ªç”µè·¯<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½éœ€è¦æ”¹å†™æˆæ—¶åºé€»è¾‘<span class="mojikumi-line-end">ã€‚</span></li>
<li>æ ¹æ®å…·ä½“ä½¿ç”¨çš„ tool<span class="mojikumi-line-end">ï¼Œ</span>æœ‰äº› language feature æ˜¯ä¸èƒ½è¢« synthesize çš„<span class="mojikumi-line-end">ã€‚</span></li>
<li>ä¸ºäº†æ›´å¥½çš„ synthesize ç»“æœè€Œéœ€è¦æŠŠä»£ç å†™æˆä»€ä¹ˆæ ·<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ä¾å…·ä½“ä½¿ç”¨çš„ tool è€Œå®š<span class="mojikumi-line-end">ã€‚</span></li>
</ul>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/ddpp">ddpp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[DDPP ç¬¬å››ç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2023/01/ddpp-4</link>
            <guid>https://ouuan.moe/post/2023/01/ddpp-4</guid>
            <pubDate>Tue, 07 Feb 2023 07:58:32 GMT</pubDate>
            <description><![CDATA[







<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬å››ç«  <span class="mojikumi">â€œ</span>Digital Design Practices<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸ºæ•°å­—è®¾è®¡çš„æ–‡æ¡£è§„èŒƒ<span class="mojikumi-line-end">ã€</span>åˆæ­¥è®¤è¯† circuit timing<span class="mojikumi-line-end">ã€</span>åŸºäº HDL çš„æ•°å­—è®¾è®¡æ‰€ä½¿ç”¨çš„å·¥å…·ä¸è®¾è®¡æµç¨‹<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[







<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬å››ç«  <span class="mojikumi">â€œ</span>Digital Design Practices<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸ºæ•°å­—è®¾è®¡çš„æ–‡æ¡£è§„èŒƒ<span class="mojikumi-line-end">ã€</span>åˆæ­¥è®¤è¯† circuit timing<span class="mojikumi-line-end">ã€</span>åŸºäº HDL çš„æ•°å­—è®¾è®¡æ‰€ä½¿ç”¨çš„å·¥å…·ä¸è®¾è®¡æµç¨‹<span class="mojikumi-line-end">ã€‚</span></p>

<h2 id="documentation-standards" class="heading"><a href="#documentation-standards" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Documentation Standards" tabindex="-1"></a><span>Documentation Standards</span></h2>
<p>ä¸€ä¸ª <dfn>document package</dfn> é€šå¸¸è‡³å°‘åŒ…å«ä»¥ä¸‹å†…å®¹<span class="mojikumi-line-end">ï¼š</span></p>
<dl>
<dt>specification (<i>spec</i>)</dt>
<dd>å‡†ç¡®åœ°æè¿°ç³»ç»Ÿçš„æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºä»¥åŠåŠŸèƒ½<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>block diagram</dt>
<dd>å¤§è‡´æè¿°ç³»ç»Ÿçš„ä¸»è¦æ¨¡å—ä¹‹é—´çš„è¿æ¥<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>logic-device description</dt>
<dd>åˆ†åˆ«æè¿°æ¯ä¸ª <span class="mojikumi">â€œ</span>custom<span class="mojikumi">â€</span> logic device çš„åŠŸèƒ½<span class="mojikumi-line-end">ï¼Œ</span>è¿™é‡Œ <span class="mojikumi">â€œ</span>custom<span class="mojikumi">â€</span> æ˜¯ä¸ç°æˆçš„<span class="mojikumi-line-end">ã€</span>ç”±å…¶ä»–åˆ¶é€ å•†ç”Ÿäº§çš„ç›¸å¯¹<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ ASIC<span class="mojikumi-line-end">ã€</span>FPGA<span class="mojikumi-line-end">ã€</span>CPLD ç­‰éƒ½æ˜¯ custom çš„<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>schematic diagram</dt>
<dd>å¯¹æ¯ä¸ªæ¨¡å—çš„ç»†èŠ‚æè¿°<span class="mojikumi-line-end">ï¼Œ</span>æ¯” <i>logic diagram</i> æ›´åŠ ç»†è‡´<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ board-level design ä¸­æ˜¯åŒ…æ‹¬ IC type<span class="mojikumi-line-end">ã€</span>reference designator<span class="mojikumi-line-end">ã€</span>signal name<span class="mojikumi-line-end">ã€</span>pin number ç­‰ç»†èŠ‚ä¿¡æ¯çš„ç”µè·¯å›¾<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ FPGA<span class="mojikumi-line-end">ã€</span>CPLD ä¸­åˆ™ç”± HDL model æ¥å……å½“è¿™ä¸€è§’è‰²<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>timing diagram</dt>
<dd>å±•ç¤ºå„ä¸ªä¿¡å·éšæ—¶é—´çš„å˜åŒ–æƒ…å†µ<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>circuit description</dt>
<dd>è§£é‡Šç”µè·¯çš„å·¥ä½œåŸç†ä»¥åŠæ³¨æ„äº‹é¡¹<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>test plan</dt>
<dd>å¦‚ä½•å¯¹ç³»ç»Ÿè¿›è¡Œæµ‹è¯•<span class="mojikumi-line-end">ã€‚</span>
</dd>
</dl>
<p>æ„Ÿè§‰å¤§è‡´ä¸Šæ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>ä¸è½¯ä»¶è¿›è¡Œç±»æ¯”çš„è¯<span class="mojikumi-line-end">ï¼Œ</span>logic-device description åƒæ˜¯ç»„ä»¶çš„ API æ–‡æ¡£<span class="mojikumi-line-end">ï¼Œ</span>circuit description åƒæ˜¯ä»£ç å†…çš„æ³¨é‡Š<span class="mojikumi-line-end">ï¼Œ</span>block diagram åƒæ˜¯æ•´ä¸ªç¨‹åºçš„ç»“æ„å›¾<span class="mojikumi-line-end">ï¼Œ</span>schematic åˆ™æ˜¯<span class="mojikumi-line-start">â€œ</span>ä»£ç <span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span>æ€»ä¹‹<span class="mojikumi-line-end">ï¼Œ</span>è¿™ä¸ª document package å’Œè½¯ä»¶çš„æ–‡æ¡£ä¸ä¸€æ ·<span class="mojikumi-line-end">ï¼Œ</span>è¿˜åŒ…å« schematic è¿™ç§å…·ä½“å®ç°<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="block-diagrams" class="heading"><a href="#block-diagrams" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Block Diagrams" tabindex="-1"></a><span>Block Diagrams</span></h3>
<p>å¤§æ¦‚å°±æ˜¯ DDPP5 Fig.4-1 è¿™ç§æ„Ÿè§‰<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-1.2330b557.webp"><img srcset="/assets/ddpp-fig-4-1.9607283c.png" loading="lazy" src="/assets/ddpp-fig-4-1.9607283c.png" width="914" height="856" alt="block diagram for a shift-and-add multiplier"></picture></p>
<p>æ•´ä¸ªç³»ç»Ÿè¢«åˆ’åˆ†ä¸ºè‹¥å¹² component<span class="mojikumi-line-end">ï¼Œ</span>block diagram å±•ç¤ºå®ƒä»¬ä¹‹é—´æœ€ä¸»è¦çš„ä¸€äº›è¿çº¿è€Œç•¥å»ç»†èŠ‚<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ block diagram ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¿¡å·çš„æµåŠ¨å¯ä»¥æ˜¯ä»»æ„æ–¹å‘çš„<span class="mojikumi-line-end">ï¼Œ</span>ä¸éœ€è¦éƒ½æ²¿ä¸€ä¸ªæ–¹å‘<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="gate-symbols" class="heading"><a href="#gate-symbols" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Gate Symbols" tabindex="-1"></a><span>Gate Symbols</span></h3>
<p>æ ¹æ® generalized DeMorgan<span class="mojikumi-narrow-left">â€™</span>s theorem<span class="mojikumi-line-end">ï¼Œ</span>AND<span class="mojikumi-line-end">ã€</span>OR<span class="mojikumi-line-end">ã€</span>NAND<span class="mojikumi-line-end">ã€</span>NOR<span class="mojikumi-line-end">ã€</span>NOT (inverter)<span class="mojikumi-line-end">ã€</span>BUFFER (non-inverting buffer) å„è‡ªéƒ½æœ‰ä¸¤ç§ä¸åŒçš„ç”»æ³•<span class="mojikumi-line-end">ï¼Œ</span>å¦‚ DDPP5 Fig.4-4 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-4.93ea8d42.webp"><img srcset="/assets/ddpp-fig-4-4.0796c532.png" loading="lazy" src="/assets/ddpp-fig-4-4.0796c532.png" width="1324" height="517" alt="åœ¨ generalized DeMorgan&#39;s theorem ä¸‹ç­‰ä»·çš„ gate symbols"></picture></p>
<h3 id="signal-names-and-active-levels" class="heading"><a href="#signal-names-and-active-levels" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Signal Names and Active Levels" tabindex="-1"></a><span>Signal Names and Active Levels</span></h3>
<p>ä¸ºäº†å…¼å®¹æ›´å¤šçš„ HDL å’Œ EDA<span class="mojikumi-line-end">ï¼Œ</span>signal name æœ€å¥½ä¸è¦æœ‰ç‰¹æ®Šå­—ç¬¦<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯åªä½¿ç”¨å­—æ¯<span class="mojikumi-line-end">ã€</span>æ•°å­—<span class="mojikumi-line-end">ã€</span>ä¸‹åˆ’çº¿<span class="mojikumi-line-end">ï¼Œ</span>ä»¥å­—æ¯å¼€å¤´<span class="mojikumi-line-end">ã€‚</span></p>
<p>signal name å¾€å¾€ä»£è¡¨æŸç§çŠ¶æ€æˆ–æŸç§æ“ä½œ<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¹¶ä¸æ€»æ˜¯åœ¨ä½äº HIGH æ—¶è¡¨ç¤ºç›¸åº”çš„æ„æ€<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª signal name ä¼šæœ‰ä¸€ä¸ª <dfn>active level</dfn><span class="mojikumi-line-end">ï¼Œ</span><dfn>active-high</dfn> æ„å‘³ç€è¿™ä¸ª signal ä½äº HIGH æ—¶<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ positive-logic ä¸­å³ä¸º 1 æ—¶<span class="mojikumi-line-end">ï¼‰</span>è¡¨ç¤ºè¿™æŸç§çŠ¶æ€æˆ–æŸç§æ“ä½œ<span class="mojikumi-line-end">ï¼Œ</span><dfn>active-low</dfn> åˆ™ä¸ä¹‹ç›¸å<span class="mojikumi-line-end">ã€‚</span>ä¸€ä¸ª signal ä½äºå…¶ active level æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æˆ‘ä»¬è¯´å®ƒ is <dfn>asserted</dfn><span class="mojikumi-line-end">ï¼Œ</span>åä¹‹åˆ™è¯´å®ƒ is <dfn>negated</dfn> (<i>deasserted</i>)<span class="mojikumi-line-end">ã€‚</span></p>
<p>signal name ä¼šä»¥æŸç§ naming convention æ¥è¡¨ç¤ºå…¶ active level<span class="mojikumi-line-end">ï¼Œ</span>DDPP5 é‡‡ç”¨çš„ convention æ˜¯ active-high ä¿æŒä¸å˜<span class="mojikumi-line-end">ï¼Œ</span>è€Œ active-low åŠ ä¸Š <code>_L</code> åç¼€<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span><code>READY</code> ä¸º 1 / <code>READY_L</code> ä¸º 0 è¡¨ç¤º ready<span class="mojikumi-line-end">ï¼Œ</span><code>READY</code> ä¸º 0 / <code>READY_L</code> ä¸º 1 è¡¨ç¤ºæ²¡æœ‰ ready<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€èˆ¬æ¥è¯´ active-high ç†è§£èµ·æ¥ç›¸å¯¹å®¹æ˜“<span class="mojikumi-line-end">ï¼Œ</span>ä½†ç”±äºæ€§èƒ½<span class="mojikumi-line-end">ã€</span>å…¼å®¹æ€§ç­‰åŸå› ä¹Ÿç»å¸¸ä¼šéœ€è¦ active-low<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="active-levels-for-pins" class="heading"><a href="#active-levels-for-pins" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Active Levels for Pins" tabindex="-1"></a><span>Active Levels for Pins</span></h3>
<p>gate æˆ–å…¶ä»– logic element çš„ pin ä¸Šæœ‰ inversion bubble æ—¶<span class="mojikumi-line-end">ï¼Œ</span>é™¤äº†ç†è§£æˆä¸åŒçš„é€»è¾‘å‡½æ•°<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥ç†è§£æˆ active-low çš„è¾“å…¥/è¾“å‡º<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>AND<span class="mojikumi-line-end">ã€</span>NAND<span class="mojikumi-line-end">ã€</span>NOR<span class="mojikumi-line-end">ã€</span>OR å¯ä»¥è¡¨ç¤ºå››ç§ä¸åŒ active level çš„ AND<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>DDPP5 Fig.4-6<span class="mojikumi-line-end">ï¼‰</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-6.751e7c1c.webp"><img srcset="/assets/ddpp-fig-4-6.ab9cd084.png" loading="lazy" src="/assets/ddpp-fig-4-6.ab9cd084.png" width="1317" height="134" alt="å››ç§ä¸åŒ active level çš„ AND: AND, NAND, NOR, OR"></picture></p>
<p>å› ä¸º inverting gate å¾€å¾€æ€§èƒ½æ›´å¥½<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥å°† noninverting gate æ›¿æ¢ä¸º inverting gate<span class="mojikumi-line-end">ï¼Œ</span>è€Œç†è§£æˆè¾“å…¥è¾“å‡ºçš„ active level ç›¸åçš„ noninverting gate<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="bubble-to-bubble-logic-design" class="heading"><a href="#bubble-to-bubble-logic-design" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Bubble-to-Bubble Logic Design" tabindex="-1"></a><span>Bubble-to-Bubble Logic Design</span></h3>
<p>åœ¨ç”»ç”µè·¯å›¾æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å°½é‡å°† active-low çš„ä¿¡å·è¿æ¥åˆ° inversion bubble ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ç†è§£ç”µè·¯æ—¶å°±å¯ä»¥å°‘ä¸€äº› logical negation<span class="mojikumi-line-start">ï¼ˆ</span>æœ¬è´¨ä¸Šæ˜¯å› ä¸º active-low ä¿¡å·çš„ä¸¤ä¾§éƒ½æœ‰ inversion bubble<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œèƒ½å¤Ÿæ¶ˆå»<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”µè·¯æ›´å¥½ç†è§£<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="constant-logic-signals" class="heading"><a href="#constant-logic-signals" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Constant Logic Signals" tabindex="-1"></a><span>Constant Logic Signals</span></h3>
<p>ç”µè·¯è®¾è®¡ä¸­å¶å°”ä¼šç”¨åˆ° constant 0 <span class="mojikumi">ï¼ˆ</span><i>ground</i><span class="mojikumi">ï¼‰</span> å’Œ constant 1 <span class="mojikumi">ï¼ˆ</span><i>power-supply voltage</i><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åœ¨ç”µè·¯å›¾ä¸­å®ƒä»¬çš„è®°å·å¦‚ä¸‹å›¾æ‰€ç¤º<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>DDPP5 Fig.4-9 (b))</p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-9-b.998459d0.webp"><img srcset="/assets/ddpp-fig-4-9-b.84bd89c1.png" loading="lazy" src="/assets/ddpp-fig-4-9-b.84bd89c1.png" width="502" height="273" alt="constant 0 and 1 inputs with individual gates"></picture></p>
<h3 id="drawing-layout" class="heading"><a href="#drawing-layout" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Drawing Layout" tabindex="-1"></a><span>Drawing Layout</span></h3>
<p>logic diagram å’Œ schematic ä¸€èˆ¬è¦ä»å·¦åˆ°å³ç”»<span class="mojikumi-line-end">ï¼Œ</span>æ‰€æœ‰è¾“å…¥éƒ½åœ¨æœ€å·¦ä¾§<span class="mojikumi-line-end">ï¼Œ</span>æ‰€æœ‰è¾“å‡ºéƒ½åœ¨æœ€å³ä¾§<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨çº¿è·¯å‘ç”Ÿäº¤å‰æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ä¸¤ç§åŒºåˆ†é‡å å’Œè¿æ¥çš„æ–¹æ³•<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>è¿æ¥å¤„æ‰“ç‚¹<span class="mojikumi-line-end">ï¼Œ</span>é‡å ä¸æ‰“ç‚¹</li>
<li>è¿æ¥éƒ½å½¢å¦‚ âŸ‚ / âŠ¤<span class="mojikumi-line-end">ï¼Œ</span>é‡å åˆ™å½¢å¦‚ +</li>
</ul>
<p>ç”±äº schematic éœ€è¦å¾ˆå¤šç»†èŠ‚<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å¼ å›¾å¯èƒ½ç”»ä¸ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ä¸¤ç§å¤„ç†æ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>åˆ†ä¸ºå¤šå¼ å¹¶åˆ—çš„å›¾<span class="mojikumi-line-end">ï¼Œ</span>æ ‡æ³¨å‡ºè·¨è¶Šä¸¤å¼ å›¾çš„è¿çº¿<span class="mojikumi-line-end">ã€‚</span></li>
<li>å°†å›¾ç»„ç»‡ä¸ºæ ‘çŠ¶<span class="mojikumi-line-start">ï¼ˆ</span>ä¸ Web å‰ç«¯çš„ component ç±»ä¼¼<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ ‘æ ¹ä¸ block diagram ç±»ä¼¼<span class="mojikumi-line-end">ã€‚</span>å›¾ä¸­çš„ component å¯ä»¥æ˜¯å¦ä¸€å¼  schematic<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥æ˜¯ standard logic device æˆ–è€… HDL model<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="buses" class="heading"><a href="#buses" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Buses" tabindex="-1"></a><span>Buses</span></h3>
<p>ä¸ºäº†æ–¹ä¾¿ç”»å›¾<span class="mojikumi-line-end">ï¼Œ</span>å¤šä¸ªå¹¶åˆ—çš„ä¿¡å·å¯ä»¥ç”»æˆä¸€ä¸ª <dfn>bus</dfn><span class="mojikumi-line-end">ã€‚</span></p>
<p>bus çš„åå­—ä¸€èˆ¬å½¢å¦‚ <code>ADDR[15:0]</code><span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤º <code>ADDR15</code><span class="mojikumi-line-end">ã€</span><code>ADDR14</code><span class="mojikumi-line-end">ã€</span>â€¦â€¦<span class="mojikumi-line-end">ã€</span><code>ADDR1</code><span class="mojikumi-line-end">ã€</span><code>ADDR0</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨å›¾ä¸Š bus ç”¨ä¸€æ¡è¾ƒç²—çš„çº¿è¡¨ç¤º<span class="mojikumi-line-end">ï¼Œ</span>ä»è¿™æ¡ç²—çº¿ä¸Šè¿å‡ºä¸€æ¡ç»†çº¿è¡¨ç¤ºä»ä¸­ <span class="mojikumi">â€œ</span>pull<span class="mojikumi">â€</span> å‡ºå•ç‹¬ä¸€ä¸ªä¿¡å·<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="additional-schematic-information" class="heading"><a href="#additional-schematic-information" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Additional Schematic Information" tabindex="-1"></a><span>Additional Schematic Information</span></h3>
<p>åœ¨ board-level design ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸€ä¸ª schematic åœ¨ç”µè·¯å›¾çš„åŸºç¡€ä¸Šè¿˜éœ€è¦æ ‡æ˜ IC type<span class="mojikumi-line-end">ã€</span>reference designator<span class="mojikumi-line-end">ã€</span>pin number ç­‰ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥ç²¾ç¡®åœ°æè¿°ç”µè·¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>å…¶ä¸­<span class="mojikumi-line-end">ï¼Œ</span>IC type æè¿°äº† IC çš„åŠŸèƒ½<span class="mojikumi-line-end">ï¼Œ</span><dfn>reference designator</dfn> ç”¨æ¥åœ¨ä¸€ç±» IC ä¸­æŒ‡å®šç‰¹å®šçš„ä¸€ä¸ªå®ä¾‹<span class="mojikumi-line-end">ï¼Œ</span><dfn>pin number</dfn> ç”¨æ¥æŒ‡å®šä»å“ªè¿åˆ°å“ª<span class="mojikumi-line-end">ã€‚</span></p>
<p>å…¨éƒ½æ ‡ä¸Šé•¿è¿™æ ·<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>DDPP5 Fig.4-18<span class="mojikumi-line-end">ï¼‰</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-18.957dcbfd.webp"><img srcset="/assets/ddpp-fig-4-18.e9c4823e.png" loading="lazy" src="/assets/ddpp-fig-4-18.e9c4823e.png" width="980" height="645" alt="schematic diagram for a circuit using several SSI parts"></picture></p>
<h2 id="circuit-timing" class="heading"><a href="#circuit-timing" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Circuit Timing" tabindex="-1"></a><span>Circuit Timing</span></h2>
<p>åœ¨æ—¶åºç”µè·¯ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ç”µè·¯ç”±ä¸€ä¸ª clock æ§åˆ¶<span class="mojikumi-line-end">ï¼Œ</span>è€Œ clock çš„é¢‘ç‡ä¼šæ ¹æ®å®Œæˆä¸€æ­¥æ“ä½œåœ¨æœ€åæƒ…å†µä¸‹çš„ç”¨æ—¶æ¥åˆ¶è®¢<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥è®¡ç®—<span class="mojikumi-line-end">ã€</span>ä¼˜åŒ–ç”µè·¯çš„ timing å¯¹ç”µè·¯çš„æ€§èƒ½å’Œæ­£ç¡®æ€§éƒ½éå¸¸é‡è¦<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="timing-diagrams" class="heading"><a href="#timing-diagrams" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Timing Diagrams" tabindex="-1"></a><span>Timing Diagrams</span></h3>
<p><i>timing diagram</i> ç”¨æ¥å±•ç¤ºç”µè·¯é‡Œå„ä¸ªä¿¡å·éšæ—¶é—´å˜åŒ–çš„æƒ…å†µ<span class="mojikumi-line-end">ï¼Œ</span>å¦‚ DDPP5 Fig.4-19 (b)(c) æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-19-bc.303e1075.webp"><img srcset="/assets/ddpp-fig-4-19-bc.010519a3.png" loading="lazy" src="/assets/ddpp-fig-4-19-bc.010519a3.png" width="907" height="729" alt="(b) å±•ç¤º causality å’Œ propagation delay çš„ timing diagram (c) å±•ç¤º minimum / maximum delay çš„ timing diagram"></picture></p>
<p>ä¿¡å·çš„è½¬å˜ä¸æ˜¯ç¬é—´å‘ç”Ÿçš„<span class="mojikumi-line-end">ï¼Œ</span>ä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„ç”¨æ—¶ç§°ä½œ <dfn>transition time</dfn><span class="mojikumi-line-end">ï¼Œ</span>ä» LOW åˆ° HIGH çš„ç”¨æ—¶å«åš <dfn>rise time</dfn><span class="mojikumi-line-end">ï¼Œ</span>ä» HIGH åˆ° LOW çš„ç”¨æ—¶å«åš <dfn>fall time</dfn><span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨å›¾ (b) ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒçš„ç®­å¤´ç”¨æ¥è¡¨ç¤º transition ä¹‹é—´çš„ causality <span class="mojikumi">ï¼ˆ</span>å› æœå…³ç³»<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰å› æœå…³ç³»çš„ transition å¹¶ä¸æ˜¯ç«‹åˆ»ä¸€ä¸ªæ¥ç€ä¸€ä¸ªå‘ç”Ÿ<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä¼šæœ‰ <i>delay</i><span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒçš„ä¿¡å·<span class="mojikumi-line-end">ã€</span>è·¯å¾„ä¼šæœ‰ä¸åŒçš„ delay<span class="mojikumi-line-end">ã€‚</span>delay ä¸€èˆ¬æ˜¯æŒ‡ä¸¤ä¸ª transition å„è‡ªä¸­ç‚¹çš„è·ç¦»<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¾ˆå¤šå› ç´ éƒ½ä¼šå¯¹ delay é€ æˆå½±å“<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ delay ä¸€èˆ¬ä¸æ˜¯å•ä¸ªæ•°å­—<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä¸€ä¸ªåŒºé—´<span class="mojikumi-line-end">ã€‚</span>å›¾ (c) ä¸­æ ‡æ˜äº† minimum delay å’Œ maximum delay<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰æ—¶å€™ timing diagram ä¸éœ€è¦åŒºåˆ† rise å’Œ fall<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ç”¨æ¥å­˜å‚¨æ•°æ®çš„ä¿¡å·<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥å¦‚ DDPP5 Fig.4-20 (a) è¿™æ ·ç”»<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-20-a.b0a1e1fd.webp"><img srcset="/assets/ddpp-fig-4-20-a.8ccddcf9.png" loading="lazy" src="/assets/ddpp-fig-4-20-a.8ccddcf9.png" width="799" height="365" alt="ä¸åŒºåˆ† rise å’Œ fall çš„ timing diagram"></picture></p>
<p>å¯ä»¥å°†ä¸€ä¸ª bus ç”»åœ¨ä¸€èµ·<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥ç”¨æ•°å­—æ ‡æ³¨ bus çš„å–å€¼<span class="mojikumi-line-end">ï¼Œ</span>å¦‚ DDPP5 Fig.4-20 (b) æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-4-20-b.97c7ef5b.webp"><img srcset="/assets/ddpp-fig-4-20-b.d8170ed4.png" loading="lazy" src="/assets/ddpp-fig-4-20-b.d8170ed4.png" width="794" height="229" alt="å°† bus ç”»åœ¨ä¸€èµ·çš„ timing diagram"></picture></p>
<h3 id="propagation-delay" class="heading"><a href="#propagation-delay" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Propagation Delay" tabindex="-1"></a><span>Propagation Delay</span></h3>
<p><dfn>propagation delay</dfn> æŒ‡çš„æ˜¯ç”µè·¯çš„æŸä¸ªè¾“å…¥å‘ç”Ÿæ”¹å˜åæ²¿ç€æŸä¸ªè·¯å¾„äº§ç”ŸæŸä¸ªè¾“å‡ºçš„ delay<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬è®°ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi mathvariant="normal">p</mi><mi mathvariant="normal">X</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{\mathrm{pX}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9012em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">pX</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{X}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathrm">X</span></span></span></span></span> ç”¨æ¥æ ‡è¯†è¿™ä¸ªè·¯å¾„<span class="mojikumi-line-end">ã€‚</span></p>
<p>å½±å“ propagation delay çš„å› ç´ æœ‰å¾ˆå¤š<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>Power-supply voltage: åŒ…æ‹¬æ ‡å®šçš„ç”µå‹<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠå°çš„ç”µå‹æ³¢åŠ¨</li>
<li>Temperature: åŒ…æ‹¬ç¯å¢ƒæ¸©åº¦å’Œç”µè·¯å·¥ä½œäº§ç”Ÿçš„çƒ­é‡</li>
<li>Output loading: ç”µè·¯çš„è¾“å‡ºå¯èƒ½ä¸åç»­ç”µè·¯çš„å¾ˆå¤šä¸ªè¾“å…¥ç›¸è¿<span class="mojikumi-line-end">ï¼Œ</span>è¿æ¥åˆ°çš„è¾“å…¥è¶Šå¤š<span class="mojikumi-line-end">ï¼Œ</span>å°†ä¿¡å·ä¼ é€’è¿‡å»å°±ç”¨æ—¶è¶Šé•¿</li>
<li>Input rise and fall times: å¦‚æœè¾“å…¥çš„ transition æ…¢<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿä¼šè®¡å…¥ propagation delay</li>
<li>Transition direction: æœ‰æ—¶ rise å’Œ fall çš„ç”¨æ—¶ä¼šä¸åŒ</li>
<li>Speed-of-light delays: å¦‚æœç”µè·¯çš„ç‰©ç†å°ºå¯¸å¤§<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…ç”µè·¯é€Ÿåº¦éå¸¸å¿«<span class="mojikumi-line-end">ï¼Œ</span>å…‰é€Ÿçš„é™åˆ¶å°±ä¸èƒ½å¿½ç•¥</li>
<li>Noise and crosstalk: ç¯å¢ƒä¸­çš„å„ç§å¹²æ‰°<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠç›¸é‚»çº¿è·¯ä¹‹é—´çš„å¹²æ‰°</li>
<li>Manufacturing tolerances: å…ƒä»¶è¢«åˆ¶é€ å‡ºæ¥çš„æ—¶å€™å¯èƒ½æœ‰ç»†å¾®çš„å·®å¼‚</li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>è®¡ç®— propagation delay å¯ä»¥ä¸è€ƒè™‘è¿™ä¹ˆå¤šå› ç´ <span class="mojikumi-line-end">ï¼Œ</span>è€Œåªéœ€æ ¹æ®ç”Ÿäº§å•†æä¾›çš„å…ƒä»¶çš„ <span class="mojikumi">â€œ</span>maximum<span class="mojikumi">â€</span> <span class="mojikumi">â€œ</span>typical<span class="mojikumi">â€</span> <span class="mojikumi">â€œ</span>minimum<span class="mojikumi">â€</span> propagation delay æ¥è¿›è¡Œè®¡ç®—<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœç”µè·¯æœ‰å¤šä¸ªè¾“å…¥è¾“å‡º<span class="mojikumi-line-end">ï¼Œ</span>å°±ä¼šæœ‰å¾ˆå¤šæ¡è·¯å¾„éœ€è¦è®¡ç®— delay<span class="mojikumi-line-end">ã€‚</span></p>
<a id="glitch-ä¸-delay" name="glitch-ä¸-delay" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h4 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-pencil text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Note: </span><span data-v-a2ab257f>glitch ä¸ delay</span></h4><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>ç¬¬ä¸‰ç« ä¸­æåˆ°çš„ <a href="/post/2023/01/ddpp-3#timing-hazards">glitch</a> æ˜¯å¦å®é™…å‘ç”Ÿ<span class="mojikumi-line-end">ï¼Œ</span>ä¸ç”µè·¯çš„ delay å¯†åˆ‡ç›¸å…³<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<h3 id="timing-specifications" class="heading"><a href="#timing-specifications" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Timing Specifications" tabindex="-1"></a><span>Timing Specifications</span></h3>
<p>ç”Ÿäº§å•†ä¸€èˆ¬ä¼šæä¾›å…ƒä»¶åœ¨æŸç§æ¡ä»¶ä¸‹æ¯ä¸ªè·¯å¾„<span class="mojikumi-line-end">ã€</span>æ¯ç§ transition æ–¹å‘çš„ propagation delay çš„èŒƒå›´<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¼šæä¾› maximum delay å’Œ minimum delay<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯èƒ½æä¾›ä¸€ä¸ª <span class="mojikumi">â€œ</span>typical<span class="mojikumi">â€</span> delay<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹<span class="mojikumi-line-end">ï¼Œ</span>maximum delay æ˜¯æœ€é‡è¦çš„<span class="mojikumi-line-end">ï¼Œ</span>minimum delay åªåœ¨å°‘æ•°æƒ…å†µä¸‹éœ€è¦è€ƒè™‘<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¾èµ–äº typical delay æ˜¯ä¸é è°±çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="timing-analysis-tools" class="heading"><a href="#timing-analysis-tools" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Timing Analysis Tools" tabindex="-1"></a><span>Timing Analysis Tools</span></h3>
<p>åœ¨å¤æ‚çš„ç”µè·¯ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¾€å¾€éœ€è¦å€ŸåŠ© EDA tool æ¥è®¡ç®— timing<span class="mojikumi-line-end">ã€‚</span>æ¯”èµ·æ‰‹åŠ¨è®¡ç®—<span class="mojikumi-line-end">ï¼Œ</span>EDA å¯èƒ½ä¼šåˆ©ç”¨å…ƒä»¶é™„å¸¦çš„æ¯” min/max delay æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯æ¥æ›´åŠ ç²¾ç¡®åœ°è®¡ç®— delay<span class="mojikumi-line-end">ã€‚</span>å¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿå™¨<span class="mojikumi-line-end">ï¼Œ</span>æ‰‹åŠ¨è®¾è®¡è¾“å…¥<span class="mojikumi-line-end">ï¼Œ</span>æ¥è®¡ç®— delay<span class="mojikumi-line-end">ã€‚</span>ä¹Ÿå¯ä»¥ä½¿ç”¨ timing analysis program<span class="mojikumi-line-end">ï¼Œ</span>æ¥è‡ªåŠ¨è®¡ç®—å‡ºæ‰€æœ‰å¯èƒ½çš„ delay<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨è®¾è®¡çš„ä¸åŒé˜¶æ®µå¯èƒ½ä¼šå¯¹ timing è¿›è¡Œå¤šæ¬¡ä¼°è®¡å’Œè®¡ç®—<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è®¾è®¡åŸºæœ¬å®Œæˆæ—¶å¦‚æœå‘ç° propagation delay ä¸ç¬¦åˆè®¾è®¡è¦æ±‚<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½éœ€è¦è¿›è¡Œè°ƒæ•´<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚é’ˆå¯¹ critical path è¿›è¡Œçº¿è·¯ä¼˜åŒ–<span class="mojikumi-line-end">ï¼Œ</span>å°† critical path ä¸Šçš„å…ƒä»¶å°½é‡æ”¾åœ¨ç›¸é‚»çš„ä½ç½®<span class="mojikumi-line-end">ï¼Œ</span>å°† high-fanout çš„ä¿¡å·å¤åˆ¶å‡ åˆ†æ¥å‡è½» output loadâ€¦â€¦è¿™æ ·å¯¹ timing è¿›è¡Œè°ƒæ•´çš„è¿‡ç¨‹å¯èƒ½ä¼šåå¤è¿›è¡Œå¾ˆå¤šé<span class="mojikumi-line-end">ï¼Œ</span>è¢«ç§°ä½œ <dfn>timing closure</dfn><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="hdl-based-digital-design" class="heading"><a href="#hdl-based-digital-design" class="heading-anchor" aria-label="ç« èŠ‚ï¼š HDL-Based Digital Design" tabindex="-1"></a><span>HDL-Based Digital Design</span></h2>
<h3 id="eda-tool-suites-for-hdls" class="heading"><a href="#eda-tool-suites-for-hdls" class="heading-anchor" aria-label="ç« èŠ‚ï¼š EDA Tool Suites for HDLs" tabindex="-1"></a><span>EDA Tool Suites for HDLs</span></h3>
<dl>
<dt>text editor</dt>
<dd>åŒ…å«ä»£ç é«˜äº®ç­‰åŠŸèƒ½çš„ HDL source file ç¼–è¾‘å™¨<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>compiler</dt>
<dd>æ£€æŸ¥ä»£ç ä¸­çš„è¯­æ³•é”™è¯¯<span class="mojikumi-line-end">ï¼Œ</span>å°† HDL ç¼–è¯‘ä¸º RTL <span class="mojikumi">ï¼ˆ</span>register-transfer language<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>synthesizer (synthesis tool)</dt>
<dd>å°† RTL design synthesis åˆ°æŸä¸ªå…·ä½“çš„ hardware technology ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>é€šå¸¸åˆ†ä¸ºè‹¥å¹²æ­¥éª¤<span class="mojikumi-line-end">ï¼š</span>
<ol>
<li>mapping: å°† RTL design å¯¹åº”åˆ°å…·ä½“çš„ hardware element</li>
<li>placement: åœ¨ FPGA / CPLD è®¾è®¡ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸ºæ¯ä¸ª element é€‰æ‹©å…·ä½“çš„ programmable resource instance<span class="mojikumi-line-end">ï¼›</span>åœ¨ ASIC è®¾è®¡ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸ºå„ç§ basic building block å®‰æ’ä½ç½®</li>
<li>routing: åœ¨ FPGA / ASIC è®¾è®¡ä¸­<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ element ä¹‹é—´è¿çº¿<span class="mojikumi-line-start">ï¼ˆ</span>CPLD ä¸­è¿çº¿æ˜¯å›ºå®šçš„<span class="mojikumi-line-end">ï¼Œ</span>è¦æ ¹æ®è¿çº¿é€‰æ‹© programmable resource<span class="mojikumi-line-end">ï¼‰</span></li>
</ol>
</dd>
<dt>simulator</dt>
<dd>å¯¹ç»™å®šçš„ HDL model å’Œéšæ—¶é—´å˜åŒ–çš„è¾“å…¥<span class="mojikumi-line-end">ï¼Œ</span>è®¡ç®—å‡ºéšæ—¶é—´å˜åŒ–çš„è¾“å‡º<span class="mojikumi-line-end">ã€‚</span>è¾“å…¥å¯ä»¥æ˜¯æ‰‹åŠ¨ç¼–è¾‘çš„<span class="mojikumi-line-end">ï¼Œ</span>ç”± <i>test bench</i> ç”Ÿæˆçš„<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…é€šè¿‡ <i>waveform editor</i> ç¼–è¾‘çš„<span class="mojikumi-line-end">ã€‚</span>è¾“å‡ºå¯ä»¥æ˜¯æ³¢å½¢å›¾æˆ–è€…åˆ—è¡¨<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯èƒ½åŒ…å«è­¦å‘Š<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>template generator</dt>
<dd>ç”Ÿæˆå¸¸ç”¨çš„ä»£ç æ¨¡æ¿<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>schematic viewer</dt>
<dd>ç”± HDL model <span class="mojikumi">ï¼ˆ</span>RTL<span class="mojikumi">ï¼‰</span> æˆ– synthesized result ç”Ÿæˆ schematic diagram<span class="mojikumi-line-end">ï¼Œ</span>synthesis å‰åçš„ schematic diagram å¯èƒ½ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>ä½†åŠŸèƒ½æ˜¯ä¸€è‡´çš„<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>chip viewer</dt>
<dd>æŸ¥çœ‹ synthesized result ä¸­çš„ç‰©ç†å¸ƒå±€å’Œè¿çº¿<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>constraints editor</dt>
<dd>ç»™ synthesizer è°ƒå‚<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚è®¾ç½® timing è¦æ±‚<span class="mojikumi-line-end">ï¼Œ</span>è°ƒæ•´ä¼˜åŒ–ç›®æ ‡<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>timing analyzer</dt>
<dd>è®¡ç®—æŸäº›æˆ–å…¨éƒ¨è·¯å¾„çš„ delay<span class="mojikumi-line-end">ã€‚</span>
</dd>
<dt>back annotator</dt>
<dd>å°† timing analyzer çš„è®¡ç®—ç»“æœæ’å…¥åˆ° HDL model ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åœ¨ simulation ä¸­å±•ç°å‡º timing<span class="mojikumi-line-end">ã€‚</span>
</dd>
</dl>
<h3 id="hdl-based-design-flow" class="heading"><a href="#hdl-based-design-flow" class="heading-anchor" aria-label="ç« èŠ‚ï¼š HDL-Based Design Flow" tabindex="-1"></a><span>HDL-Based Design Flow</span></h3>
<ol>
<li>specification / hierarchy / block diagram</li>
<li>coding</li>
<li>compilation</li>
<li>simulation / functional verification / pre-fitting timing verification</li>
<li>mapping</li>
<li>fitting / place &#x26; route</li>
<li>post-fitting timing verification</li>
</ol>
<p>å…¶ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å‰å››æ­¥è¢«ç§°ä½œ <dfn>front-end steps</dfn><span class="mojikumi-line-end">ï¼Œ</span>åä¸‰æ­¥è¢«ç§°ä½œ <dfn>back-end steps</dfn><span class="mojikumi-line-end">ã€‚</span></p>
<p>è®¾è®¡è¿‡ç¨‹ä¸€èˆ¬ä¸ä¼šæ˜¯ä¸€æ­¥ä¸€æ­¥é¡ºç€æ¥çš„<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä¼šä¸æ–­åå¤<span class="mojikumi-line-end">ã€‚</span>ä¸ºäº†å°‘æŠ˜è…¾<span class="mojikumi-line-end">ï¼Œ</span>ç¬¬ä¸€æ­¥ä¸­æ€»ä½“è®¾è®¡çš„åˆç†æ€§<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠç¬¬å››æ­¥ä¸­è¿›å…¥ back-end steps å‰çš„æµ‹è¯•<span class="mojikumi-line-end">ï¼Œ</span>éƒ½éå¸¸é‡è¦<span class="mojikumi-line-end">ã€‚</span>ç”±äºç²¾ç¡®çš„ timing è®¡ç®—ä¾èµ–äºå…·ä½“çš„ fitting<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ç¬¬ä¸ƒæ­¥å‘ç° timing ä¸ç¬¦åˆè¦æ±‚è€Œæ¨å€’é‡æ¥ä¹Ÿæ˜¯å¾ˆæœ‰å¯èƒ½çš„<span class="mojikumi-line-end">ã€‚</span></p>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/ddpp">ddpp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[DDPP ç¬¬ä¸‰ç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2023/01/ddpp-3</link>
            <guid>https://ouuan.moe/post/2023/01/ddpp-3</guid>
            <pubDate>Sun, 29 Jan 2023 07:52:32 GMT</pubDate>
            <description><![CDATA[
<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬ä¸‰ç«  <span class="mojikumi">â€œ</span>Switching Algebra and Combinational Logic<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸ºé€»è¾‘ä»£æ•°<span class="mojikumi-line-end">ã€</span>é€»è¾‘ä»£æ•°åœ¨ç”µè·¯ä¸­çš„ä½¿ç”¨åŠåŒ–ç®€<span class="mojikumi-line-end">ã€</span>timing hazard<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[
<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬ä¸‰ç«  <span class="mojikumi">â€œ</span>Switching Algebra and Combinational Logic<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸ºé€»è¾‘ä»£æ•°<span class="mojikumi-line-end">ã€</span>é€»è¾‘ä»£æ•°åœ¨ç”µè·¯ä¸­çš„ä½¿ç”¨åŠåŒ–ç®€<span class="mojikumi-line-end">ã€</span>timing hazard<span class="mojikumi-line-end">ã€‚</span></p>

<h2 id="switching-algebra" class="heading"><a href="#switching-algebra" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Switching Algebra" tabindex="-1"></a><span>Switching Algebra</span></h2>
<p>è¿™ä¸€èŠ‚åŸºæœ¬ä¸Šå°±æ˜¯ç¦»æ•£æ•°å­¦ (1) å¼€å¤´ä¸¤ç« çš„å†…å®¹<span class="mojikumi-line-end">ï¼Œ</span>æœ¯è¯­å’Œè®°å·æœ‰å¾ˆå¤šä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span><s>å¹¸å¥½å¿˜çš„å·®ä¸å¤šäº†<span class="mojikumi-line-end">ï¼Œ</span>ä¸ç„¶éƒ½è¦ææ··äº†</s><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="è®°å·" class="heading"><a href="#è®°å·" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è®°å·" tabindex="-1"></a><span>è®°å·</span></h3>
<ul>
<li>AND<span class="mojikumi-line-end">ï¼š</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\ \cdot\ Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></span></li>
<li><span class="inline-block w-3"></span>OR<span class="mojikumi-line-end">ï¼š</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>+</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X + Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></span></li>
<li>NOT<span class="mojikumi-line-end">ï¼š</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">X'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>AND çš„ä¼˜å…ˆçº§é«˜äº OR</li>
</ul>
<p><span class="mojikumi-line-start">ï¼ˆ</span>yysy æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ¨</mo><mo separator="true">,</mo><mo>âˆ§</mo></mrow><annotation encoding="application/x-tex">\lor, \land</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.75em;vertical-align:-0.1944em;"></span><span class="mord">âˆ¨</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">âˆ§</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">â‹…</span></span></span></span></span> ä¹Ÿè¿˜è¡Œ<span class="mojikumi-line-end">ï¼Œ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">+</span></span></span></span></span> çœŸçš„æœ‰ç‚¹éš¾ä»¥æ¥å—<span class="mojikumi">ã€‚</span><span class="mojikumi">ï¼‰</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span><s>å®ƒä»¬æ˜æ˜æ˜¯å¯¹å¶çš„æ€ä¹ˆæå¾—åƒä¸ªç¯ä¸€æ ·<span class="mojikumi-line-end">ã€‚</span></s><span class="mojikumi">ï¼‰</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ä¸»è¦è¿˜æ˜¯ä¸‹é¢è¿™äº›å®šç†ç”¨åŠ å·çœ‹èµ·æ¥çœŸçš„å¥½æ€ª<span class="mojikumi">ã€‚</span><span class="mojikumi">ï¼‰</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>å¼‚æˆ–ä¸æ˜¯è¿˜å·ç§°äºŒè¿›åˆ¶åŠ æ³•å—<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<h3 id="å…¬ç†" class="heading"><a href="#å…¬ç†" class="heading-anchor" aria-label="ç« èŠ‚ï¼š å…¬ç†" tabindex="-1"></a><span>å…¬ç†</span></h3>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A1)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo mathvariant="normal">â‰ </mo><mn>1</mn><mtext>â€…â€Š</mtext><mo>âŸ¹</mo><mtext>â€…â€Š</mtext><mi>X</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A1D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo mathvariant="normal">â‰ </mo><mn>0</mn><mtext>â€…â€Š</mtext><mo>âŸ¹</mo><mtext>â€…â€Š</mtext><mi>X</mi><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A2)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>=</mo><mn>0</mn><mtext>â€…â€Š</mtext><mo>âŸ¹</mo><mtext>â€…â€Š</mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A2D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>=</mo><mn>1</mn><mtext>â€…â€Š</mtext><mo>âŸ¹</mo><mtext>â€…â€Š</mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A3)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mn>0</mn><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A3D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A4)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A4D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A5)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mn>1</mn><mo>=</mo><mn>1</mn><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mn>0</mn><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(A5D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo>+</mo><mn>0</mn><mo>=</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{rl}
\text{(A1)} &#x26; X \ne 1 \implies X = 0 \\
\text{(A1D)} &#x26; X \ne 0 \implies X = 1 \\\\
\text{(A2)} &#x26; X = 0 \implies X' = 1 \\
\text{(A2D)} &#x26; X = 1 \implies X' = 0 \\\\
\text{(A3)} &#x26; 0 \ \cdot\  0 = 0 \\
\text{(A3D)} &#x26; 1 + 1 = 1 \\\\
\text{(A4)} &#x26; 1 \ \cdot\  1 = 1 \\
\text{(A4D)} &#x26; 0 + 0 = 0 \\\\
\text{(A5)} &#x26; 0 \ \cdot\  1 = 1 \ \cdot\  0 = 0 \\
\text{(A5D)} &#x26; 1 + 0 = 0 + 1 = 1
\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:16.8em;vertical-align:-8.15em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:8.65em;"><span style="top:-10.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A1)</span></span></span></span><span style="top:-9.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A1D)</span></span></span></span><span style="top:-8.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A2)</span></span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A2D)</span></span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A3)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A3D)</span></span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A4)</span></span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A4D)</span></span></span></span><span style="top:2.39em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:3.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A5)</span></span></span></span><span style="top:4.79em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(A5D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:8.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:8.65em;"><span style="top:-10.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âŸ¹</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-9.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âŸ¹</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âŸ¹</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âŸ¹</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:3.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:4.79em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:8.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span></div>
<h3 id="å®šç†" class="heading"><a href="#å®šç†" class="heading-anchor" aria-label="ç« èŠ‚ï¼š å®šç†" tabindex="-1"></a><span>å®šç†</span></h3>
<p>ä¸­æ–‡åæ¥è‡ª<span class="mojikumi-line-start">ã€Š</span>æ•°ç†é€»è¾‘ä¸é›†åˆè®º<span class="mojikumi-line-start">ï¼ˆ</span>ç¬¬äºŒç‰ˆ<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‹</span>2.2 èŠ‚<span class="mojikumi-line-start">â€œ</span>ç­‰å€¼å…¬å¼<span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span></p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T1)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mn>0</mn><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T1D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mn>1</mn><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Identitiesï¼ˆåŒä¸€å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T2)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T2D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mn>0</mn><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>NullÂ elementsï¼ˆé›¶å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T3)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mi>X</mi><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T3D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>X</mi><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Idempotencyï¼ˆå¹‚ç­‰å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="1em"></mspace><mtext>Â (T4)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><msup><mo stretchy="false">)</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Involutionï¼ˆåŒé‡å¦å®šå¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T5)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T5D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Complementsï¼ˆè¡¥ä½™å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T6)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mi>Y</mi><mo>=</mo><mi>Y</mi><mo>+</mo><mi>X</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T6D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Y</mi><mo>=</mo><mi>Y</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Commutativityï¼ˆäº¤æ¢å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T7)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>+</mo><mi>Z</mi><mo>=</mo><mi>X</mi><mo>+</mo><mo stretchy="false">(</mo><mi>Y</mi><mo>+</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T7D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Y</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Z</mi><mo>=</mo><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>Y</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Z</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Associativityï¼ˆç»“åˆå¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T8)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>Y</mi><mo>+</mo><mi>Z</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>â€‰</mtext><mtext>â€…</mtext><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Y</mi><mtext>â€‰</mtext><mtext>â€…</mtext><mo>+</mo><mtext>â€‰</mtext><mtext>â€…</mtext><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Z</mi><mtext>â€‰</mtext><mtext>â€…</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T8D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mtext>â€‰</mtext><mtext>â€…</mtext><mi>Y</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Z</mi><mtext>â€‰</mtext><mtext>â€…</mtext><mo>=</mo><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Y</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Distributivityï¼ˆåˆ†é…å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T9)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mtext>â€‰</mtext><mtext>â€…</mtext><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Y</mi><mtext>â€‰</mtext><mtext>â€…</mtext><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>(T9D)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Coveringï¼ˆå¸æ”¶å¾‹ï¼‰</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T10)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>â€‰</mtext><mtext>â€…</mtext><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>Y</mi><mtext>â€‰</mtext><mtext>â€…</mtext><mo>+</mo><mtext>â€‰</mtext><mtext>â€…</mtext><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><msup><mi>Y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mtext>â€‰</mtext><mtext>â€…</mtext><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T10D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Y</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><msup><mi>Y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Combining</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T11)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>X</mi><mo>â‹…</mo><mi>Y</mi><mo>+</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mi>Z</mi><mo>+</mo><mi>Y</mi><mo>â‹…</mo><mi>Z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mtext>Â </mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>X</mi><mo>â‹…</mo><mi>Y</mi><mo>+</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mi>Z</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T11D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mo stretchy="false">(</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><mi>Z</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mo stretchy="false">(</mo><mi>Y</mi><mo>+</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mtext>Â </mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mo stretchy="false">(</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Consensus</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T12)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mo>+</mo><mi>X</mi><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mi>X</mi><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T12D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>X</mi><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo>â‹¯</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>X</mi><mo>=</mo><mi>X</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>GeneralizedÂ idempotency</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T13)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mi>X</mi><mtext>Â Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>X</mi><mtext>Â Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo>â‹¯</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>X</mi><msup><mo stretchy="false">)</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mo lspace="0em" rspace="0em">=</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>â€‰</mtext><mtext>â€…</mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><mo>â‹¯</mo><mo>+</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T13D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mi>X</mi><mo>+</mo><mi>X</mi><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mi>X</mi><msup><mo stretchy="false">)</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mo lspace="0em" rspace="0em">=</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>â€‰</mtext><mtext>â€…</mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mtext>Â </mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mtext>Â </mtext><mo>â‹¯</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>DeMorganâ€™sÂ theorem</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>ï¼ˆæ‘©æ ¹å¾‹ï¼‰</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mspace width="0.5em"></mspace><mtext>Â (T14)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">[</mo><mi>F</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo separator="true">,</mo><mo>+</mo><mo separator="true">,</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo stretchy="false">)</mo><msup><mo stretchy="false">]</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mo lspace="0em" rspace="0em">=</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>Â </mtext><mi>F</mi><mo stretchy="false">(</mo><msubsup><mi>X</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup><mo separator="true">,</mo><msubsup><mi>X</mi><mn>2</mn><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msubsup><mi>X</mi><mi>n</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup><mo separator="true">,</mo><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mo separator="true">,</mo><mo>+</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Generalized</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>DeMorganâ€™sÂ theorem</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{ll}

\begin{array}{rl}
\enspace\text{(T1)} &#x26; X + 0 = X \\
\enspace\text{(T1D)} &#x26; X \ \cdot\  1 = X
\end{array}
&#x26; \text{Identitiesï¼ˆåŒä¸€å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T2)} &#x26; X + 1 = 1 \\
\enspace\text{(T2D)} &#x26; X \ \cdot\  0 = 0
\end{array}
&#x26; \text{Null elementsï¼ˆé›¶å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T3)} &#x26; X + X = X \\
\enspace\text{(T3D)} &#x26; X \ \cdot\  X = X
\end{array}
&#x26; \text{Idempotencyï¼ˆå¹‚ç­‰å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\quad\ \text{(T4)} &#x26; (X')' = X
\end{array}
&#x26; \text{Involutionï¼ˆåŒé‡å¦å®šå¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T5)} &#x26; X + X' = 1 \\
\enspace\text{(T5D)} &#x26; X \ \cdot\  X' = 0
\end{array}
&#x26; \text{Complementsï¼ˆè¡¥ä½™å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T6)} &#x26; X + Y = Y + X \\
\enspace\text{(T6D)} &#x26; X \ \cdot\  Y = Y \ \cdot\  X
\end{array}
&#x26; \text{Commutativityï¼ˆäº¤æ¢å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T7)} &#x26; (X + Y) + Z = X + (Y + Z) \\
\enspace\text{(T7D)} &#x26; (X \ \cdot\  Y) \ \cdot\  Z = X \ \cdot\  (Y \ \cdot\  Z)
\end{array}
&#x26; \text{Associativityï¼ˆç»“åˆå¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T8)} &#x26; X \ \cdot\  (Y + Z) = \,\: X \ \cdot\  Y \,\: + \,\: X \ \cdot\  Z \,\: \\
\enspace\text{(T8D)} &#x26; X + \,\: Y \ \cdot\  Z \,\: = (X + Y) \ \cdot\  (X + Z)
\end{array}
&#x26; \text{Distributivityï¼ˆåˆ†é…å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\enspace\text{(T9)} &#x26; X + \,\: X \ \cdot\  Y \,\: = X \\
\enspace\text{(T9D)} &#x26; X \ \cdot\  (X + Y) = X
\end{array}
&#x26; \text{Coveringï¼ˆå¸æ”¶å¾‹ï¼‰}
\\\\

\begin{array}{rl}
\text{(T10)} &#x26; \,\: X \ \cdot\  Y \,\: + \,\: X \ \cdot\  Y' \,\: = X \\
\text{(T10D)} &#x26; (X + Y) \ \cdot\  (X + Y') = X
\end{array}
&#x26; \text{Combining}
\\\\

\begin{array}{rl}
\text{(T11)} &#x26; \begin{aligned} &#x26; X \cdot Y + X' \cdot Z + Y \cdot Z \\[-0.2em] =\ &#x26; X \cdot Y + X' \cdot Z \end{aligned} \\
\text{(T11D)} &#x26; \begin{aligned} &#x26; (X + Y) \cdot (X' + Z) \cdot (Y + Z) \\[-0.2em] =\ &#x26; (X + Y) \cdot (X' + Z) \end{aligned}
\end{array}
&#x26; \text{Consensus}
\\\\

\begin{array}{rl}
\text{(T12)}  &#x26; X + X + \cdots + X = X \\
\text{(T12D)} &#x26; X \ \cdot\  X \ \cdot\ \cdots\ \cdot\  X = X
\end{array}
&#x26; \text{Generalized idempotency}
\\\\

\begin{array}{rl}
\text{(T13)} &#x26;
\begin{aligned}
&#x26; (X \ \ \cdot\  X \ \ \cdot\ \cdots\ \cdot\  X)' \\[-0.2em]
= &#x26; \,\: X' + X' + \cdots + X'
\end{aligned}
\\
\text{(T13D)} &#x26;
\begin{aligned}
&#x26; (X + X + \cdots + X)' \\[-0.2em]
= &#x26; \,\: X' \cdot\  X' \cdot\  \cdots \ \cdot\  X'
\end{aligned}
\end{array}
&#x26; \begin{array}{c} \text{DeMorganâ€™s theorem} \\ \text{ï¼ˆæ‘©æ ¹å¾‹ï¼‰} \end{array}
\\\\

\begin{array}{rl}
\enspace\ \text{(T14)} &#x26;
\begin{aligned}
 &#x26; [F(X_1, X_2, \ldots, X_n, +, \ \cdot\ )]' \\[-0.2em]
=&#x26;\ F(X_1', X_2', \ldots, X_n', \ \cdot\ , +)
\end{aligned}
\end{array}
&#x26; \begin{array}{c} \text{Generalized} \\ \text{DeMorganâ€™s theorem} \end{array}
\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:54.81em;vertical-align:-27.155em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:27.655em;"><span style="top:-31.255em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T1)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T1D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-29.465em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-27.655em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T2)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T2D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-25.865em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-24.055em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T3)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T3D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-22.265em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-21.055em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:1em;"></span><span class="mspace">Â </span><span class="mord text"><span class="mord">(T4)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-19.855em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-18.045em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T5)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T5D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-16.255em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-14.445em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T6)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T6D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-12.655em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-10.845em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T7)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T7D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-9.055em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-7.245em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T8)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T8D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-5.455em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-3.645em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T9)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mord text"><span class="mord">(T9D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-1.855em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:-0.045em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(T10)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(T10D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:1.745em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:5.155em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span style="top:-5.05em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord text"><span class="mord">(T11)</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord text"><span class="mord">(T11D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span style="top:-5.05em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">=</span><span class="mspace">Â </span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">=</span><span class="mspace">Â </span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:8.545em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:10.355em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(T12)</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(T12D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:12.145em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:15.555em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span style="top:-5.05em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord text"><span class="mord">(T13)</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord text"><span class="mord">(T13D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span style="top:-5.05em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">=</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">=</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:18.945em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"></span></span><span style="top:20.955em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.65em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mspace" style="margin-right:0.5em;"></span><span class="mspace">Â </span><span class="mord text"><span class="mord">(T14)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.65em;"><span class="pstrut" style="height:3.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">=</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.65em;"><span style="top:-3.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">â‹…</span><span class="mspace">Â </span><span class="mclose">)</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.51em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-2.453em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">â‹…</span><span class="mspace">Â </span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:27.155em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:27.655em;"><span style="top:-31.255em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Identities</span><span class="mord cjk_fallback">ï¼ˆåŒä¸€å¾‹ï¼‰</span></span></span></span><span style="top:-27.655em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">NullÂ elements</span><span class="mord cjk_fallback">ï¼ˆé›¶å¾‹ï¼‰</span></span></span></span><span style="top:-24.055em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Idempotency</span><span class="mord cjk_fallback">ï¼ˆå¹‚ç­‰å¾‹ï¼‰</span></span></span></span><span style="top:-21.055em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Involution</span><span class="mord cjk_fallback">ï¼ˆåŒé‡å¦å®šå¾‹ï¼‰</span></span></span></span><span style="top:-18.045em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Complements</span><span class="mord cjk_fallback">ï¼ˆè¡¥ä½™å¾‹ï¼‰</span></span></span></span><span style="top:-14.445em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Commutativity</span><span class="mord cjk_fallback">ï¼ˆäº¤æ¢å¾‹ï¼‰</span></span></span></span><span style="top:-10.845em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Associativity</span><span class="mord cjk_fallback">ï¼ˆç»“åˆå¾‹ï¼‰</span></span></span></span><span style="top:-7.245em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Distributivity</span><span class="mord cjk_fallback">ï¼ˆåˆ†é…å¾‹ï¼‰</span></span></span></span><span style="top:-3.645em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Covering</span><span class="mord cjk_fallback">ï¼ˆå¸æ”¶å¾‹ï¼‰</span></span></span></span><span style="top:-0.045em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Combining</span></span></span></span><span style="top:5.155em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">Consensus</span></span></span></span><span style="top:10.355em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord text"><span class="mord">GeneralizedÂ idempotency</span></span></span></span><span style="top:15.555em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">DeMorganâ€™sÂ theorem</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">ï¼ˆæ‘©æ ¹å¾‹ï¼‰</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:20.955em;"><span class="pstrut" style="height:5.05em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Generalized</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">DeMorganâ€™sÂ theorem</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:27.155em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Shannonâ€™sÂ expansionÂ theorems</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T15)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>F</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>Â </mtext><msub><mi>X</mi><mn>1</mn></msub><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>+</mo><msubsup><mi>X</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup><mtext>Â </mtext><mo>â‹…</mo><mtext>Â </mtext><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>(T15D)</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>F</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">[</mo><msub><mi>X</mi><mn>1</mn></msub><mo>+</mo><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>â‹…</mo><mo stretchy="false">[</mo><msubsup><mi>X</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup><mo>+</mo><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{rl}
&#x26; \text{Shannonâ€™s expansion theorems} \\[0.3em]
\text{(T15)} &#x26; F(X_1, X_2, \ldots, X_n) = \ X_1 \ \cdot\  F(1, X_2, \ldots, X_n) + X_1' \ \cdot\  F(0, X_2, \ldots, X_n) \\
\text{(T15D)} &#x26; F(X_1, X_2, \ldots, X_n) = [X_1 + F(1, X_2, \ldots, X_n)] \cdot [X_1' + F(0, X_2, \ldots, X_n)]
\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.9em;vertical-align:-1.7em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.2em;"><span style="top:-4.36em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.86em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(T15)</span></span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">(T15D)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.7em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.2em;"><span style="top:-4.36em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Shannonâ€™sÂ expansionÂ theorems</span></span></span></span><span style="top:-2.86em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4519em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4519em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)]</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.7em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span></div>
<p><span class="mojikumi-line-start">ï¼ˆ</span><s>è‰<span class="mojikumi-line-end">ï¼Œ</span>å¯¹é½å¥½ç´¯<span class="mojikumi-line-end">ï¼Œ</span>æˆ‘ä¸ºä»€ä¹ˆè¦æµªè´¹è¿™ä¸ªæ—¶é—´<span class="mojikumi-line-end">ã€‚</span></s><span class="mojikumi-line-end">ï¼‰</span></p>
<h3 id="duality" class="heading"><a href="#duality" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Duality" tabindex="-1"></a><span>Duality</span></h3>
<p>å°†ä¸€ä¸ªç­‰å¼ä¸­æ‰€æœ‰çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> æ¢æˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi-line-end">ã€</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> æ¢æˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span class="mojikumi-line-end">ã€</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">+</span></span></span></span></span> æ¢æˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">â‹…</span></span></span></span></span><span class="mojikumi-line-end">ã€</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">â‹…</span></span></span></span></span> æ¢æˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">+</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>ç­‰å¼ä¾ç„¶æˆç«‹<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸Šé¢çš„å®šç†ä¸­å¸¦ <span class="mojikumi">â€œ</span>D<span class="mojikumi">â€</span> çš„éƒ½æ˜¯ä¸Šä¸€æ¡çš„å¯¹å¶<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="standard-representations-of-logic-functions" class="heading"><a href="#standard-representations-of-logic-functions" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Standard Representations of Logic Functions" tabindex="-1"></a><span>Standard Representations of Logic Functions</span></h3>
<p>è¿™é‡Œéœ€è¦ç¿»å‡ºæ¥æˆ‘ç¦»æ•£ (1) å†™çš„ <a href="https://ouuan.github.io/truth-table-generator/">çœŸå€¼è¡¨ç”Ÿæˆå™¨</a><span class="mojikumi-line-start">ï¼ˆ</span>å…¶å®å¯ä»¥å»åŠ ä¸Š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">+</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‹…</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">â‹…</span></span></span></span></span> ä½œä¸º alias<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¦‚æœè¦åŠ  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span> çš„è¯ä¼šå¾ˆéº»çƒ¦æ‰€ä»¥å¹²è„†ä¸åŠ äº†å§<span class="mojikumi-line-start">ï¼ˆ</span></p>
<p>logic function æœ‰è‹¥å¹²ç²¾ç¡®çš„æ ‡å‡†è¡¨ç¤ºæ–¹æ³•<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>çœŸå€¼è¡¨</li>
<li>canonical sum: ä¸»æå–èŒƒå¼<span class="mojikumi-line-end">ï¼Œ</span>æå°é¡¹ (minterm) çš„å’Œ</li>
<li>ä½¿ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ‘</mo></mrow><annotation encoding="application/x-tex">\sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span></span></span></span></span> è¡¨ç¤ºçš„ minterm list</li>
<li>canonical product: ä¸»åˆå–èŒƒå¼<span class="mojikumi-line-end">ï¼Œ</span>æå¤§é¡¹ (maxterm) çš„å’Œ</li>
<li>ä½¿ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ</mo></mrow><annotation encoding="application/x-tex">\prod</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ</span></span></span></span></span> è¡¨ç¤ºçš„ maxterm list</li>
<li>Verilog <code>case</code> è¯­å¥</li>
</ul>
<p>è¿™é‡Œç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ</mo></mrow><annotation encoding="application/x-tex">\prod</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ</span></span></span></span></span> è¡¨ç¤º maxterm list çš„ä¸‹æ ‡æ¯”ç¦»æ•£ (1) è®²çš„èˆ’æœå¤šäº†<span class="mojikumi-line-end">ï¼š</span>minterm çš„ index å°±æ˜¯å“ªç»„å˜é‡å–å€¼ä¸‹è¡¨è¾¾å¼å€¼ä¸º 1<span class="mojikumi-line-end">ï¼Œ</span>maxterm çš„ index å°±æ˜¯å“ªç»„å˜é‡å–å€¼ä¸‹è¡¨è¾¾å¼ä¸º 0<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ä¸¤ç§èŒƒå¼çš„ä¸‹æ ‡åˆšå¥½æ˜¯è¡¥é›†<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X, Y, Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span></span></span> ä¸‰ä¸ªå˜é‡<span class="mojikumi-line-end">ï¼Œ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mi>Y</mi><mo>â‹…</mo><msup><mi>Z</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">X' \cdot Y \cdot Z'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span> çš„ä¸‹æ ‡æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><mi>Y</mi><mo>+</mo><msup><mi>Z</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">X' + Y + Z'</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8352em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span> çš„ä¸‹æ ‡æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span></span><span class="mojikumi-line-end">ï¼›</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>âˆ‘</mo><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi></mrow></msub><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">)</mo><mo>=</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><msup><mi>Y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mi>Z</mi><mo>+</mo><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><mi>Y</mi><mo>â‹…</mo><msup><mi>Z</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><mi>X</mi><mo>â‹…</mo><mi>Y</mi><mo>â‹…</mo><msup><mi>Z</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mo>âˆ</mo><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi></mrow></msub><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{X,Y,Z}(1,2,6) = X' \cdot Y' \cdot Z + X' \cdot Y \cdot Z' + X \cdot Y \cdot Z' = \prod_{X,Y,Z}(0,3,4,5,7)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">Z</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8352em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">Z</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mclose">)</span></span></span></span></span><span class="mojikumi-line-end">ã€‚</span></p>
<p>Verilog çš„ <code>case</code> è¯­å¥å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>è™½ç„¶è¿˜å®Œå…¨æ²¡å­¦ Verilog<span class="mojikumi-line-end">ï¼Œ</span>ä½†æˆ‘æ„Ÿè§‰ Shiki è‡ªå¸¦çš„ system-verilog é«˜äº®çœ‹èµ·æ¥å°±æ¯” verilog æ­£ç¡®è®¸å¤š<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åå¯èƒ½ä¹Ÿç”¨ system-verilog çš„é«˜äº®äº†<span class="mojikumi-line-end">ï¼‰</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="system-verilog ä»£ç å—" data-v-ad49d235>system-verilog</h4><ile-root id="ile-28"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-28--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">case</span><span style="color: #D6DEEB"> (</span><span style="color: #C792EA">{</span><span style="color: #82AAFF">X</span><span style="color: #D6DEEB">,</span><span style="color: #82AAFF">Y</span><span style="color: #D6DEEB">,</span><span style="color: #82AAFF">Z</span><span style="color: #C792EA">}</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">,</span><span style="color: #F78C6C">2</span><span style="color: #D6DEEB">,</span><span style="color: #F78C6C">6</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">F</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">  </span><span style="color: #C792EA">default:</span><span style="color: #D6DEEB">  </span><span style="color: #82AAFF">F</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #C792EA">endcase</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">case</span><span style="color: #403F53"> (</span><span style="color: #994CC3">{</span><span style="color: #4876D6">X</span><span style="color: #403F53">,</span><span style="color: #4876D6">Y</span><span style="color: #403F53">,</span><span style="color: #4876D6">Z</span><span style="color: #994CC3">}</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">  </span><span style="color: #AA0982">1</span><span style="color: #403F53">,</span><span style="color: #AA0982">2</span><span style="color: #403F53">,</span><span style="color: #AA0982">6</span><span style="color: #994CC3">:</span><span style="color: #403F53">    </span><span style="color: #4876D6">F</span><span style="color: #403F53"> </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">1</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">  </span><span style="color: #994CC3">default:</span><span style="color: #403F53">  </span><span style="color: #4876D6">F</span><span style="color: #403F53"> </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">;</span></span>
<span><span style="color: #994CC3">endcase</span></span></code></pre></div></section>
<h2 id="combinational-circuit-analysis" class="heading"><a href="#combinational-circuit-analysis" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Combinational-Circuit Analysis" tabindex="-1"></a><span>Combinational-Circuit Analysis</span></h2>
<p>è¿™ä¸€èŠ‚å°±æ˜¯è¯´ç»™ä½ ä¸€ä¸ªç”µè·¯å›¾æ€ä¹ˆæå‡ºå®ƒçš„ logic function<span class="mojikumi-line-end">ã€‚</span>å…¶å®æ²¡å•¥å¥½è¯´çš„<span class="mojikumi-line-end">ï¼Œ</span>å°±<span class="mojikumi-line-start">ï¼ˆ</span>æŒ‰æ‹“æ‰‘åº<span class="mojikumi-line-end">ï¼‰</span>ä¸€ä¸ªä¸€ä¸ª gate é€’æ¨å°±è¡Œ<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨çœŸå€¼è¡¨ä¹Ÿå¯ä»¥ç”¨é€»è¾‘è¡¨è¾¾å¼<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰ä¸€ä¸ªå° trick<span class="mojikumi-line-end">ï¼š</span>DeMorgan<span class="mojikumi-narrow-left">â€™</span>s theorem åœ¨ç”µè·¯å›¾ä¸­è¡¨ç°ä¸º<span class="mojikumi-line-end">ï¼Œ</span>å°† inversion bubble æ¢åˆ°å¦ä¸€ä¾§<span class="mojikumi-line-start">ï¼ˆ</span>è¾“å…¥ / è¾“å‡º<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ”¹å˜ gate çš„ç±»å‹<span class="mojikumi-line-start">ï¼ˆ</span>AND / OR<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„è¯<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœä¸¤ä¸ª inversion bubble åœ¨ä¸€æ¡ wire ä¸Šå°±å¯ä»¥æ¶ˆæ‰<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="combinational-circuit-synthesis" class="heading"><a href="#combinational-circuit-synthesis" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Combinational-Circuit Synthesis" tabindex="-1"></a><span>Combinational-Circuit Synthesis</span></h2>
<p>åœ¨ digital design ä¸­<span class="mojikumi">ï¼Œ</span><wbr><span class="mojikumi-line-start">â€œ</span>Synthesis<span class="mojikumi">â€</span> æœ‰è‹¥å¹²ç§å«ä¹‰<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ä» HDL åˆ° FPGA<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨è¿™ä¸€èŠ‚åªæ˜¯æŒ‡ä» formal description åˆ° gate-level circuit<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="circuit-descriptions-and-designs" class="heading"><a href="#circuit-descriptions-and-designs" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Circuit Descriptions and Designs" tabindex="-1"></a><span>Circuit Descriptions and Designs</span></h3>
<p>è‡ªç„¶è¯­è¨€æè¿° â†’ é€»è¾‘è¡¨è¾¾å¼ / çœŸå€¼è¡¨<span class="mojikumi-line-start">ï¼ˆ</span>canonical sum / product<span class="mojikumi">ï¼‰</span> â†’ ç”µè·¯</p>
<p>å¾ˆå¤šæ—¶å€™å†™å‡ºé€»è¾‘è¡¨è¾¾å¼ä¼šæ¯”åˆ—å‡ºçœŸå€¼è¡¨ç®€å•ä¸€äº›<span class="mojikumi-line-end">ï¼Œ</span>ä½†åœ¨é¢å¯¹è¾ƒä¸ºå¤æ‚çš„é€»è¾‘å…³ç³»æ—¶<span class="mojikumi-line-end">ï¼Œ</span>åˆ—å‡ºçœŸå€¼è¡¨å¯ä»¥å¼ºåˆ¶è®¾è®¡å¸ˆè€ƒè™‘åˆ°æ¯ç§æƒ…å†µ<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œé¿å…æ¼æ‰ corner case<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ªè¾“å‡ºæ˜¯æŸä¸ªé€»è¾‘è¡¨è¾¾å¼çš„ç”µè·¯è¢«ç§°ä½œ <i>realize</i> äº†è¿™ä¸ªè¡¨è¾¾å¼<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯è¿™ä¸ªè¡¨è¾¾å¼çš„ <i>realization</i> æˆ–è€… <i>implementation</i><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="circuit-manipulations" class="heading"><a href="#circuit-manipulations" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Circuit Manipulations" tabindex="-1"></a><span>Circuit Manipulations</span></h3>
<p>åœ¨å¤šæ•°ç”µè·¯æŠ€æœ¯<span class="mojikumi-line-start">ï¼ˆ</span>åŒ…æ‹¬ CMOS<span class="mojikumi-line-end">ï¼‰</span>ä¸­<span class="mojikumi-line-end">ï¼Œ</span>NAND / NOR æ¯” AND / OR æ•ˆç‡æ›´é«˜<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ä¸€èˆ¬ä¼šä¿®æ”¹ç”µè·¯æ¥å°½é‡ä½¿ç”¨ inverting gate è€Œé noninverting gate<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>åœ¨ wire ä¸Šç§»åŠ¨ inversion bubble<span class="mojikumi-line-start">ï¼ˆ</span>ä»ä¸Šä¸€ä¸ªè¾“å‡ºç§»åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥<span class="mojikumi-line-end">ï¼‰</span></li>
<li>åœ¨ wire çš„ä¸¤ä¾§åŒæ—¶åŠ ä¸Š inversion bubble<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€… NOT gate<span class="mojikumi-line-end">ï¼‰</span></li>
<li>æ¶ˆé™¤åŒä¸€æ ¹ wire ä¸Šçš„ä¸¤ä¸ª inversion bubble</li>
<li>å°† inversion bubble æ¢åˆ°å¦ä¸€ä¾§<span class="mojikumi-line-start">ï¼ˆ</span>è¾“å…¥ / è¾“å‡º<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ”¹å˜ gate çš„ç±»å‹<span class="mojikumi-line-start">ï¼ˆ</span>AND / OR<span class="mojikumi-line-end">ï¼‰</span></li>
</ul>
<h3 id="combinational-circuit-minimization" class="heading"><a href="#combinational-circuit-minimization" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Combinational-Circuit Minimization" tabindex="-1"></a><span>Combinational-Circuit Minimization</span></h3>
<p>ä¸€èˆ¬æƒ…å†µä¸‹<span class="mojikumi-line-end">ï¼Œ</span>é€»è¾‘è¡¨è¾¾å¼çš„åŒ–ç®€ä¸»è¦ç”¨çš„æ˜¯å®šç† T10<span class="mojikumi-line-start">ï¼ˆ</span>Combining<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å°±æ˜¯åœ¨ sum of products ä¸­æ‰¾åˆ°ä»…æœ‰ä¸€é¡¹ç›¸åçš„ä¸¤ä¸ª product å°†å®ƒä»¬åˆå¹¶<span class="mojikumi-line-end">ï¼Œ</span>æœ€ç»ˆå¾—åˆ°çš„ä¹Ÿæ˜¯ä¸€ä¸ª sum of products<span class="mojikumi-line-end">ï¼Œ</span>å®ç°ä¸º 2-level<span class="mojikumi-line-start">ï¼ˆ</span>first-level è®¡ç®— product<span class="mojikumi-line-end">ï¼Œ</span>second-level è®¡ç®— sum<span class="mojikumi-line-end">ï¼‰</span>çš„ç”µè·¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>product of sums ç”µè·¯æ˜¯å¯¹å¶çš„<span class="mojikumi-line-end">ï¼Œ</span>å°±ä¸é‡å¤äº†<span class="mojikumi-line-end">ï¼Œ</span>ä¸‹æ–‡ä¹Ÿæ˜¯ä¸€æ ·<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="karnaugh-maps" class="heading"><a href="#karnaugh-maps" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Karnaugh Maps" tabindex="-1"></a><span>Karnaugh Maps</span></h3>
<p>å¦‚ DDPP5 Figure 3-23 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-3-23.15ec6efa.webp"><img srcset="/assets/ddpp-fig-3-23.43ab9a40.png" loading="lazy" src="/assets/ddpp-fig-3-23.43ab9a40.png" width="1235" height="457" alt="2-variable, 3-variable, and 4-variable Karnaugh maps"></picture></p>
<p>åœ¨ Karnaugh map ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸€ä¸ªè¡¨ç¤ºä¸€ä¸ª minterm<span class="mojikumi-line-end">ï¼Œ</span>ç›¸é‚»<span class="mojikumi-line-start">ï¼ˆ</span>åŒ…æ‹¬è·¨è¿‡è¾¹ç•Œåˆ°å¦ä¸€ä¾§çš„ç›¸é‚»<span class="mojikumi-line-end">ï¼‰</span>çš„æ ¼å­ä»…æœ‰ä¸€ä½ç›¸å<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥è¾¹é•¿ä¸º 1 / 2 / 4 çš„çŸ©å½¢å¯ä»¥åˆå¹¶<span class="mojikumi-line-end">ã€‚</span></p>
<p>é€‰å‡ºè‹¥å¹²çŸ©å½¢<span class="mojikumi-line-end">ï¼Œ</span>æ°å¥½è¦†ç›–æ‰€æœ‰è¾“å‡ºä¸º 1 çš„æ ¼å­<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥åŒ–ç®€é€»è¾‘è¡¨è¾¾å¼<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœä¸€ä¸ªçŸ©å½¢è¦†ç›–çš„å…¨æ˜¯ 1<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ˜¯æå¤§çš„<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨å…¶å¯¹åº”çš„ product ä¸­å‡å°‘ä»»ä½•ä¸€ä¸ªè¾“å…¥éƒ½ä¼šä½¿å…¶è¦†ç›–åˆ° 0<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å°±ç§°ä½œä¸€ä¸ª <i>prime implicant</i><span class="mojikumi-line-end">ã€‚</span>æœ€ç®€çš„é€»è¾‘è¡¨è¾¾å¼æ˜¯è‹¥å¹² prime implicant çš„ sum<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰çš„å‡½æ•°çš„ Karnaugh map éå¸¸åˆ†æ•£<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ parity function<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ²¡æœ‰è¿æˆä¸€å—çš„ 1<span class="mojikumi-line-end">ï¼Œ</span>å°±éœ€è¦å¤šçº§è€Œé 2-level çš„ç”µè·¯æ¥è¿›è¡ŒåŒ–ç®€<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ FPGA ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¾“å…¥æ•°é‡è¾ƒå°‘çš„ç”µè·¯éƒ½æ˜¯é€šè¿‡ lookup table (LUT) è€Œé gate-level circuit æ¥å®ç°<span class="mojikumi-line-end">ï¼Œ</span>åªéœ€çœŸå€¼è¡¨å°±å¯ä»¥<span class="mojikumi-line-end">ã€‚</span>ä½†å¤æ‚çš„ç”µè·¯éœ€è¦ç”±å¤šä¸ª LUT ç»„åˆèµ·æ¥<span class="mojikumi-line-end">ï¼Œ</span>æ­¤æ—¶é€»è¾‘è¡¨è¾¾å¼çš„åŒ–ç®€ä¾ç„¶æœ‰ç”¨<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="timing-hazards" class="heading"><a href="#timing-hazards" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Timing Hazards" tabindex="-1"></a><span>Timing Hazards</span></h2>
<p>çœŸå®çš„ç”µè·¯ä¸­ä¼šæœ‰ delay<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¸Šé¢ç ”ç©¶çš„éƒ½æ˜¯ combinational logic circuit çš„ <i>steady-state behavior</i><span class="mojikumi-line-end">ï¼Œ</span>æ²¡æœ‰è€ƒè™‘åˆ° <i>transient behavior</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸º delay çš„å­˜åœ¨<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šå‘ç”Ÿè¿™æ ·çš„æƒ…å†µ<span class="mojikumi-line-end">ï¼š</span>è¾“å…¥å‘ç”Ÿäº†æ”¹å˜<span class="mojikumi-line-end">ï¼Œ</span>ç¨³æ€ä¸‹çš„è¾“å‡ºä¸å˜<span class="mojikumi-line-end">ï¼Œ</span>ä½†åœ¨ä¸€ç¬é—´å†…è¾“å‡ºå‘ç”Ÿäº†å˜åŒ–<span class="mojikumi-line-start">ï¼ˆ</span>äº§ç”Ÿäº†ä¸€ä¸ª short pulse<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>è¿™æ ·çš„ pulse è¢«ç§°ä½œ <i>glitch</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœä¸€ä¸ªç”µè·¯æœ‰äº§ç”Ÿ glitch çš„å¯èƒ½æ€§<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ç§°è¿™ä¸ªç”µè·¯å­˜åœ¨ <i>hazard</i><span class="mojikumi-line-end">ã€‚</span>å®é™…ç‰©ç†ç”µè·¯çš„ delay å¤§å°ç­‰å› ç´ éš¾ä»¥æ§åˆ¶<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥è¿™é‡Œåªæ˜¯è€ƒè™‘äº§ç”Ÿ glitch çš„å¯èƒ½æ€§<span class="mojikumi-line-end">ï¼Œ</span>è€Œéå®é™…æ˜¯å¦æœ‰ glitch äº§ç”Ÿ<span class="mojikumi-line-start">ï¼ˆ</span>æœ‰ç‚¹ç±»ä¼¼äºå¹¶å‘ç¼–ç¨‹ä¸­è¦ä¿è¯æ‰€æœ‰å¯èƒ½çš„æ‰§è¡Œé¡ºåºä¸‹éƒ½ä¸å‡ºé”™<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="static-hazards" class="heading"><a href="#static-hazards" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Static Hazards" tabindex="-1"></a><span>Static Hazards</span></h3>
<p><i>static-1 hazard</i><span class="mojikumi-line-end">ï¼š</span>ç¨³æ€è¾“å‡ºæ˜¯ 1<span class="mojikumi-line-end">ï¼Œ</span>æ”¹å˜æŸä¸€ä¸ªè¾“å…¥åç¨³æ€è¾“å‡ºè¿˜æ˜¯ 1<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¿™ä¸€ä¸ªè¾“å…¥æ”¹å˜æ—¶å¯èƒ½ä¼šçŸ­æš‚åœ°è¾“å‡º 0<span class="mojikumi-line-end">ã€‚</span>static-0 hazard æ˜¯ç±»ä¼¼çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¹¦ä¸Šç»™äº†ä¸ªä¾‹å­<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¿™ä¸ªå…¶å®å¾ˆå¥½ç†è§£<span class="mojikumi-line-end">ï¼Œ</span>å°±æ˜¯ç”µè·¯çš„ä¸€ä¸ªè¾“å…¥ä½œä¸ºå¤šä¸ª gate çš„è¾“å…¥<span class="mojikumi-line-end">ï¼Œ</span>è€Œè¿™äº› gate çš„è¾“å‡ºå˜åŒ–å¾—æœ‰å¿«æœ‰æ…¢<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="finding-static-hazards-using-maps" class="heading"><a href="#finding-static-hazards-using-maps" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Finding Static Hazards Using Maps" tabindex="-1"></a><span>Finding Static Hazards Using Maps</span></h3>
<p>æ­£å¸¸çš„ sum of products ç”µè·¯ä¸­ä¸ä¼šæœ‰ static-0 hazard<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½æœ‰ static-1 hazard<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯ä»¥ç”¨ Karnaugh map æ¥æ‰¾åˆ° hazard<span class="mojikumi-line-end">ï¼š</span>å¦‚æœä¸¤ä¸ªç›¸é‚»çš„ 1 æ²¡æœ‰è¢«åŒä¸€ä¸ª gate è¦†ç›–<span class="mojikumi-line-end">ï¼Œ</span>ä»å…¶ä¸­ä¸€ä¸ªå˜ä¸ºå¦ä¸€ä¸ªæ—¶å°±å¯èƒ½äº§ç”Ÿ glitch<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>å› ä¸ºæç«¯æƒ…å†µä¸‹å¯èƒ½æ‰€æœ‰è¦†ç›–åŸæ¥é‚£ä¸€æ ¼çš„ gate å…ˆå…¨éƒ¨å˜ä¸º 0<span class="mojikumi-line-end">ï¼Œ</span>è¦†ç›–åæ¥é‚£ä¸€æ ¼çš„ gate æ‰å˜ä¸º 1<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>æ¶ˆé™¤ hazard å°±æ˜¯ç”¨å†—ä½™çš„ gate æ¥è¦†ç›–è¿™æ ·çš„ç›¸é‚»çš„ 1<span class="mojikumi-line-end">ï¼Œ</span>ç±»ä¼¼äºå®šç† T11<span class="mojikumi-line-start">ï¼ˆ</span>Consensus<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="dynamic-hazards" class="heading"><a href="#dynamic-hazards" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Dynamic Hazards" tabindex="-1"></a><span>Dynamic Hazards</span></h3>
<p>å¦‚æœå˜åŒ–ä¸€ä¸ªè¾“å…¥æ—¶å¯èƒ½äº§ç”Ÿä¸æ­¢ä¸€æ¬¡ glitch<span class="mojikumi-line-end">ï¼Œ</span>å°±ç§°ä½œ <i>dynamic hazard</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ªæ­£å¸¸çš„ 2-level sum of products / product of sums ç”µè·¯ä¸­ä¸ä¼šæœ‰ dynamic hazard<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="designing-hazard-free-circuits" class="heading"><a href="#designing-hazard-free-circuits" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Designing Hazard-Free Circuits" tabindex="-1"></a><span>Designing Hazard-Free Circuits</span></h3>
<p>åœ¨å¤šæ•°ç”µè·¯ä¸­<span class="mojikumi-line-start">ï¼ˆ</span>å°¤å…¶æ˜¯ synchronous digital system ä¸­<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>hazard ä¸ä¼šé€ æˆä»€ä¹ˆå½±å“<span class="mojikumi-line-end">ã€‚</span>ä½†åœ¨æŸäº›ç”µè·¯<span class="mojikumi-line-start">ï¼ˆ</span>asynchronous sequential circuits<span class="mojikumi-line-end">ï¼‰</span>ä¸­<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦é¿å… hazard çš„å­˜åœ¨<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸€èˆ¬çš„ç”µè·¯ä¸­æ¶ˆé™¤ hazard æ˜¯å¤æ‚çš„<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨ sum of products ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨ Karnaugh map æˆ–è€…å–éæ‰€æœ‰ prime implicant<span class="mojikumi-line-start">ï¼ˆ</span>ç§°ä½œ <i>complete sum</i><span class="mojikumi-line-end">ï¼‰</span>æ¥æ¶ˆé™¤ hazard<span class="mojikumi-line-end">ã€‚</span></p>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/ddpp">ddpp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[DDPP ç¬¬äºŒç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2023/01/ddpp-2</link>
            <guid>https://ouuan.moe/post/2023/01/ddpp-2</guid>
            <pubDate>Tue, 24 Jan 2023 14:37:12 GMT</pubDate>
            <description><![CDATA[

<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬äºŒç«  <span class="mojikumi">â€œ</span>Number Systems and Codes<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸ºä¸€äº›å¸¸ç”¨çš„ç¼–ç ä»¥åŠçº é”™ç çš„åŸç†<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[

<p><a href="https://wakerly.org/DDPP/">DDPP5</a> ç¬¬äºŒç«  <span class="mojikumi">â€œ</span>Number Systems and Codes<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸ºä¸€äº›å¸¸ç”¨çš„ç¼–ç ä»¥åŠçº é”™ç çš„åŸç†<span class="mojikumi-line-end">ã€‚</span></p>

<p>å¼€å¤´æ•´æ•°ç¼–ç çš„å†…å®¹å¾ˆå¤šæ˜¯ <a href="/post/2022/09/csapp-2">CS:APP ç¬¬äºŒç« </a> è®²è¿‡çš„<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæœ‰ä¸€äº›æ–°å†…å®¹<span class="mojikumi-line-end">ï¼Œ</span>ä½†åŸºæœ¬ä¸Šéƒ½æ˜¯æ ‡æ˜Ÿçš„å¯é€‰å†…å®¹<span class="mojikumi-line-end">ï¼Œ</span>æˆ‘çœ‹æ˜¯çœ‹äº†ä½†æ‡’å¾—å†™ç¬”è®°äº†<span class="mojikumi-line-start">ï¼ˆ</span></p>
<hr>
<p>ä¸€å¥—ç¼–ç è¢«ç§°ä½œä¸€ä¸ª <i>code</i><span class="mojikumi-line-end">ï¼Œ</span>ä¸€ä¸ª code ä¸­çš„å•ä¸ªåˆæ³•ç¼–ç <span class="mojikumi-line-start">ï¼ˆ</span>äºŒè¿›åˆ¶ä¸²<span class="mojikumi-line-end">ï¼‰</span>è¢«ç§°ä½œä¸€ä¸ª <i>code word</i><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="gray-code" class="heading"><a href="#gray-code" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Gray Code" tabindex="-1"></a><span>Gray Code</span></h2>
<p>Gray code çš„æ€§è´¨<span class="mojikumi-line-end">ï¼š</span>ç›¸é‚»ä¸¤ä¸ªæ•°çš„ code word åªæœ‰ä¸€ä½ä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>ä¸” <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> çš„ code word ä¸­åªæœ‰ä¸€ä¸ª 1<span class="mojikumi-line-start">ï¼ˆ</span>ä¹Ÿå°±æ˜¯è¯´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit Gray code çš„é¦–å°¾ä¹Ÿåªæœ‰ä¸€ä½ä¸åŒ<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<a id="4-bit-gray-code" name="4-bit-gray-code" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><details class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><summary class="p-3 flex justify-between items-center cursor-pointer" data-v-a2ab257f><h3 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-pencil text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Note: </span><span data-v-a2ab257f>4-bit Gray code</span></h3><span class="details-icon text-5" data-v-a2ab257f></span></summary><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><section class="code-block relative my-6 shadow" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" aria-label="plain text ä»£ç å—" data-v-ad49d235>plain text</h4><ile-root id="ile-29"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-29--></div><div class="light:hidden" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><samp><span><span style="color: #d6deeb"> 0: 0000</span></span>
<span><span style="color: #d6deeb"> 1: 0001</span></span>
<span><span style="color: #d6deeb"> 2: 0011</span></span>
<span><span style="color: #d6deeb"> 3: 0010</span></span>
<span><span style="color: #d6deeb"> 4: 0110</span></span>
<span><span style="color: #d6deeb"> 5: 0111</span></span>
<span><span style="color: #d6deeb"> 6: 0101</span></span>
<span><span style="color: #d6deeb"> 7: 0100</span></span>
<span><span style="color: #d6deeb"> 8: 1100</span></span>
<span><span style="color: #d6deeb"> 9: 1101</span></span>
<span><span style="color: #d6deeb">10: 1111</span></span>
<span><span style="color: #d6deeb">11: 1110</span></span>
<span><span style="color: #d6deeb">12: 1010</span></span>
<span><span style="color: #d6deeb">13: 1011</span></span>
<span><span style="color: #d6deeb">14: 1001</span></span>
<span><span style="color: #d6deeb">15: 1000</span></span></samp></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><samp><span><span style="color: #403f53"> 0: 0000</span></span>
<span><span style="color: #403f53"> 1: 0001</span></span>
<span><span style="color: #403f53"> 2: 0011</span></span>
<span><span style="color: #403f53"> 3: 0010</span></span>
<span><span style="color: #403f53"> 4: 0110</span></span>
<span><span style="color: #403f53"> 5: 0111</span></span>
<span><span style="color: #403f53"> 6: 0101</span></span>
<span><span style="color: #403f53"> 7: 0100</span></span>
<span><span style="color: #403f53"> 8: 1100</span></span>
<span><span style="color: #403f53"> 9: 1101</span></span>
<span><span style="color: #403f53">10: 1111</span></span>
<span><span style="color: #403f53">11: 1110</span></span>
<span><span style="color: #403f53">12: 1010</span></span>
<span><span style="color: #403f53">13: 1011</span></span>
<span><span style="color: #403f53">14: 1001</span></span>
<span><span style="color: #403f53">15: 1000</span></span></samp></pre></div></section></div></details></aside>
<p>é€’å½’æ„é€ <span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span>-bit Gray code: 0 æ˜¯ 0<span class="mojikumi-line-end">ï¼Œ</span>1 æ˜¯ 1</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>-bit Gray code:
<ul>
<li>å‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ªæ•°å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit Gray code ç›¸åŒ<span class="mojikumi-line-start">ï¼ˆ</span>å¼€å¤´åŠ ä¸Š 0<span class="mojikumi-line-end">ï¼‰</span></li>
<li>å <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ªæ•°æ˜¯æŠŠ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit Gray code é€†åºæ’åˆ—å†åœ¨å¼€å¤´åŠ ä¸Š 1</li>
</ul>
</li>
</ol>
<p>ç›´æ¥è®¡ç®—å•ä¸ªæ•°çš„ Gray code<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>é€’å½’å°±èƒ½ç›´æ¥è®¡ç®—<span class="mojikumi-line-end">ï¼Œ</span><s>ç›¸ä¿¡å¤§å®¶éƒ½ä¼šåš <a href="https://uoj.ac/problem/488">NOIPD1T1</a> å§<span class="mojikumi-line-end">ï¼Œ</span>è®°å¾—å¼€ <code>unsigned long long</code></s><span class="mojikumi-line-start">ï¼ˆ</span></li>
<li>ä¹Ÿå¯ä»¥è¿™ä¹ˆç®—<span class="mojikumi-line-end">ï¼š</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> çš„ Gray code ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> ä½ä¸º 1 å½“ä¸”ä»…å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> çš„äºŒè¿›åˆ¶ä¸­ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> ä½å’Œç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> ä½ä¸åŒ</li>
</ul>
<p>ä¹¦ä¸­æè¿°äº†ä¸€ä¸ªä½¿ç”¨åœºæ™¯<span class="mojikumi-line-end">ï¼š</span>ä¸€ä¸ªç£ç›˜çš„æ¯ä¸ªæ‰‡åŒºéœ€è¦ç¼–ç <span class="mojikumi-line-end">ï¼Œ</span>ä»æ‰‡åŒºä¸Šè¯»å–è‹¥å¹² bits æ¥è¯†åˆ«å½“å‰å¤„äºå“ªä¸ªæ‰‡åŒº<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ä¸¤ä¸ªç›¸é‚»æ‰‡åŒºçš„äº¤ç•Œå¤„å¯èƒ½æœ‰éƒ¨åˆ† bits æ¥è‡ªå…¶ä¸­ä¸€ä¸ªæ‰‡åŒº<span class="mojikumi-line-end">ï¼Œ</span>å¦å¤–çš„ bits æ¥è‡ªå¦ä¸€ä¸ªæ‰‡åŒº<span class="mojikumi-line-end">ï¼Œ</span>Gray code å¯ä»¥ä½¿æœ€ç»ˆè¯»å–åˆ°çš„ç»“æœä¸€å®šæ˜¯è¿™ä¸¤ä¸ªæ‰‡åŒºä¹‹ä¸€<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="codes-for-actions-conditions-and-states" class="heading"><a href="#codes-for-actions-conditions-and-states" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Codes for Actions, Conditions, and States" tabindex="-1"></a><span>Codes for Actions, Conditions, and States</span></h2>
<p>è¯´ç™½äº†å°±æ˜¯å¦‚ä½•ç¼–ç ä¸€ä¸ª enum<span class="mojikumi-line-end">ã€‚</span>ä¸åŒçš„ç¼–ç æ–¹å¼æœ‰å„è‡ªçš„ç‰¹ç‚¹<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä»ç¼–ç é•¿åº¦<span class="mojikumi-line-end">ã€</span>ç”µè·¯å¼€é”€<span class="mojikumi-line-end">ã€</span>è®¾è®¡éš¾åº¦<span class="mojikumi-line-end">ã€</span>å¯çº é”™æ€§ç­‰è§’åº¦è€ƒè™‘<span class="mojikumi-line-end">ï¼Œ</span>é€‰æ‹©æœ€åˆé€‚çš„ç¼–ç æ–¹å¼<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…ç»„åˆä½¿ç”¨å¤šç§ç¼–ç æ–¹å¼<span class="mojikumi-line-end">ã€‚</span></p>
<ul>
<li>é¡ºç€ç¼–ç ä¸ºäºŒè¿›åˆ¶å¯ä»¥ä½¿ç¼–ç é•¿åº¦æœ€çŸ­<span class="mojikumi-line-start">ï¼ˆ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒˆ</mo><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mn>2</mn></msub><mi>n</mi><mo stretchy="false">âŒ‰</mo></mrow><annotation encoding="application/x-tex">\lceil \log_2 n \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒˆ</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">âŒ‰</span></span></span></span></span><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></li>
<li><i>1-out-of-n-code</i><span class="mojikumi-line-end">ï¼š</span>åˆæ³•çš„ code word åªæœ‰ä¸€ä½æ˜¯ 1<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª enum å¯¹åº”æŸä¸€ä½ä¸º 1<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>æ§åˆ¶å“ªä¸ªç¯å¼€æ—¶<span class="mojikumi-line-end">ï¼Œ</span>è¿™ç§ç¼–ç æ–¹å¼æ— éœ€å†æœ‰ç”µè·¯æ¥é€‰æ‹©è¦å¼€çš„ç¯<span class="mojikumi-line-end">ï¼Œ</span>ç›´æ¥å°†ç¼–ç çš„æ¯ä¸€ä½è¿åˆ°ä¸€ç›ç¯å°±å¯ä»¥äº†<span class="mojikumi-line-end">ã€‚</span></li>
<li><i>m-out-of-n-code</i><span class="mojikumi-line-end">ï¼š</span>åˆæ³•çš„ code word æ°æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> ä½æ˜¯ 1<span class="mojikumi-line-end">ã€‚</span>è¦æ£€æµ‹ä¸€ä¸ª code word<span class="mojikumi-line-end">ï¼Œ</span>åªéœ€ä½¿ç”¨ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>-input AND gate<span class="mojikumi-line-end">ï¼Œ</span>ç”µè·¯è¾ƒä¸ºç®€å•<span class="mojikumi-line-end">ã€‚</span>è€Œ code word æ€»æ•°æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mi>n</mi><mi>m</mi></mfrac><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\binom nm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"></span><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7454em;"><span style="top:-2.355em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¾ˆå¤š<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h2 id="n-cubes-and-distance" class="heading"><a href="#n-cubes-and-distance" class="heading-anchor" aria-label="ç« èŠ‚ï¼š n-Cubes and Distance" tabindex="-1"></a><span>n-Cubes and Distance</span></h2>
<p>ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit äºŒè¿›åˆ¶ä¸²ä½œä¸ºé¡¶ç‚¹<span class="mojikumi-line-end">ï¼Œ</span>åœ¨åªæœ‰ä¸€ä¸ª bit ä¸åŒçš„ä¸²ä¹‹é—´è¿è¾¹<span class="mojikumi-line-end">ï¼Œ</span>å¾—åˆ°çš„å›¾è¢«ç§°ä½œ <i><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-cube</i><span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”»æˆä¸€ä¸ª<span class="mojikumi-line-start">ï¼ˆ</span>è¶…<span class="mojikumi-line-end">ï¼‰</span>ç«‹æ–¹ä½“<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>DDPP5 Figure 2-8<span class="mojikumi-line-end">ï¼‰</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-2-8.a7fd31fd.webp"><img srcset="/assets/ddpp-fig-2-8.8dc5d6f5.png" loading="lazy" src="/assets/ddpp-fig-2-8.8dc5d6f5.png" width="1213" height="827" alt="n-cubes for n = 1, 2, 3, and 4."></picture></p>
<p>å›¾ä¸Šä¸¤ä¸ªäºŒè¿›åˆ¶ä¸²ä¹‹é—´çš„è·ç¦»è¢«ç§°ä½œ <i>Hamming distance</i><span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºä¸¤ä¸ªä¸²ä¸­ä¸ç›¸åŒçš„ä½æ•°<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="codes-for-detecting-and-correcting-errors" class="heading"><a href="#codes-for-detecting-and-correcting-errors" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Codes for Detecting and Correcting Errors" tabindex="-1"></a><span>Codes for Detecting and Correcting Errors</span></h2>
<p>å®é™…å­˜å‚¨<span class="mojikumi-line-end">ã€</span>ä¼ è¾“ç¼–ç æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯<span class="mojikumi-line-end">ã€‚</span>é”™è¯¯çš„å…·ä½“è¡Œä¸ºå¯ä»¥ç”± <i>error model</i> åˆ»ç”»<span class="mojikumi-line-end">ã€‚</span>æœ€ç®€å•çš„ error model æ˜¯ <i>independent error model</i><span class="mojikumi-line-end">ï¼Œ</span>å³æ¯ä¸ªé”™è¯¯åªç‹¬ç«‹åœ°æ”¹å˜ç¼–ç ä¸­çš„ä¸€ä½<span class="mojikumi-line-end">ï¼Œ</span>å¤šä½åŒæ—¶å‘ç”Ÿé”™è¯¯çš„æ¦‚ç‡æ¯”ä¸€ä½å‘ç”Ÿé”™è¯¯çš„æ¦‚ç‡å°å¾—å¤š<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="error-detecting-codes" class="heading"><a href="#error-detecting-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Error-Detecting Codes" tabindex="-1"></a><span>Error-Detecting Codes</span></h3>
<p>å¯¹äºä¸€ä¸ª code<span class="mojikumi-line-end">ï¼Œ</span>ä¸æ˜¯ code word çš„äºŒè¿›åˆ¶ä¸²ç§°ä½œ <i>noncode word</i><span class="mojikumi-line-end">ã€‚</span></p>
<p><i>error-detecting code</i> å…·æœ‰è¿™æ ·çš„æ€§è´¨<span class="mojikumi-line-end">ï¼š</span>ä»»ä½•ä¸€ä¸ª code word åœ¨ä»»æ„ä¿®æ”¹ä¸€ä½åéƒ½ä¼šå¾—åˆ°ä¸€ä¸ª noncode word<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä½¿ç”¨ error-detecting code æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥è®¤ä¸ºåªè¦æ˜¯ code word éƒ½æ²¡æœ‰å‘ç”Ÿé”™è¯¯<span class="mojikumi-line-end">ï¼Œ</span>noncode word åˆ™ä¸€å®šå‘ç”Ÿäº†é”™è¯¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit error-detecting code æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-cube çš„ä¸€ä¸ªç‚¹ç‹¬ç«‹é›†<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå°±æ˜¯è¯´ä»»æ„ä¸¤ä¸ª code word çš„ Hamming distance éƒ½è‡³å°‘ä¸º 2<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¥‡å¶æ€§å¯ä»¥ç”¨æ¥è®¾è®¡ error-detecting code<span class="mojikumi-line-end">ï¼š</span>ä»»ç»™ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit code<span class="mojikumi-line-end">ï¼Œ</span>å°†ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> ä½è®¾ä¸ºå‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> ä½ä¸­ 1 çš„ä¸ªæ•°çš„å¥‡å¶æ€§<span class="mojikumi-line-start">ï¼ˆ</span>ç§°ä½œ <i>parity bit</i><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åˆ™å¯ä»¥å¾—åˆ°ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>-bit error-detecting code<span class="mojikumi-line-end">ã€‚</span>è¿™æ ·çš„ç¼–ç ç§°ä½œ <i>1-bit parity code</i><span class="mojikumi-line-end">ï¼Œ</span>è‹¥ code word éƒ½æœ‰å¶æ•°ä¸ª 1 åˆ™ç§°ä½œ <i>even-parity code</i><span class="mojikumi-line-end">ï¼Œ</span>æœ‰å¥‡æ•°ä¸ª 1 åˆ™ç§°ä½œ <i>odd-parity code</i><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="error-correcting-and-multiple-error-detecting-codes" class="heading"><a href="#error-correcting-and-multiple-error-detecting-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Error-Correcting and Multiple-Error-Detecting Codes" tabindex="-1"></a><span>Error-Correcting and Multiple-Error-Detecting Codes</span></h3>
<p>å¦‚æœä¸€ä¸ª code ä¸­ä¸¤ä¸ª code word çš„æœ€å° Hamming distance æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>c</mi><mo>+</mo><mi>d</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2c+d+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>åˆ™å¯ä»¥å¯¹æœ€å¤š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></span> ä½çš„é”™è¯¯è¿›è¡Œçº æ­£<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ£€æµ‹åˆ°æœ€å¤š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>+</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">c+d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span> ä½çš„é”™è¯¯<span class="mojikumi-line-start">ï¼ˆ</span>ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>+</mo><mi>d</mi><mo>+</mo><mn>1</mn><mo>âˆ¼</mo><mn>2</mn><mi>c</mi><mo>+</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">c+d+1 \sim 2c+d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span> ä½çš„é”™è¯¯ä¼šè¢«è®¤ä¸ºæ˜¯æ¥è‡ªå¦ä¸€ä¸ªæ–¹å‘çš„é”™è¯¯è€Œè¢«é”™è¯¯åœ°çº æ­£<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œä¸èƒ½è¢«æ£€æµ‹åˆ°<span class="mojikumi-line-end">ï¼›</span>å¯ä»¥é€‰æ‹©å°‘çº é”™å‡ ä½æ¥æ£€æµ‹åˆ°æ›´å¤šä½çš„é”™è¯¯<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>çº é”™å°±æ˜¯æ‰¾åˆ°å’Œä¸€ä¸ª noncode word çš„ Hamming distance æœ€å°çš„å”¯ä¸€ä¸€ä¸ª code word<span class="mojikumi-line-end">ï¼Œ</span>è¿›è¡Œçº é”™çš„ç¡¬ä»¶è¢«ç§°ä½œ error-correcting decoder<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="hamming-codes" class="heading"><a href="#hamming-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Hamming Codes" tabindex="-1"></a><span>Hamming Codes</span></h3>
<p><i>Hamming code</i> æ˜¯ä¸€ç§é€šç”¨çš„æœ€å°è·ç¦»ä¸º 3 çš„ç¼–ç <span class="mojikumi-line-end">ã€‚</span>ä¸€ä¸ªæœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> ä¸ª check bit çš„ Hamming code æœ€å¤šå¯ä»¥å­˜å‚¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^n-n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> ä¸ª information bit<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œæ€»å…±æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> ä¸ª bit<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(2^n-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>-bit Hamming code çš„ bit ä¾æ¬¡ç¼–å·ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>âˆ¼</mo><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 \sim 2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>ç¼–å·ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1, 2, 4, \ldots, 2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span> çš„ bit æ˜¯ check bit<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª check bit ä»£è¡¨ä¸€ä¸ª group<span class="mojikumi-line-end">ï¼Œ</span>ç¼–å·ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">2^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span></span> çš„ check bit æ‰€ä»£è¡¨çš„ group åŒ…å«çš„æ˜¯ç¼–å·çš„äºŒè¿›åˆ¶ä¸­åŒ…å« <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">2^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span></span> çš„æ‰€æœ‰ bit<span class="mojikumi-line-end">ã€‚</span>check bit çš„å–å€¼ä½¿å¾—æ¯ä¸ª group éƒ½å«å¶æ•°ä¸ª 1<span class="mojikumi-line-end">ã€‚</span></p>
<p>å®é™…ä½¿ç”¨çš„ Hamming code å¾€å¾€ä¼šå°† check bit ç§»åˆ°æœ«å°¾<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15</mn></mrow><annotation encoding="application/x-tex">15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">15</span></span></span></span></span>-bit Hamming code ä¸­ bit çš„ç¼–å·ä¾æ¬¡ä¸º 15, 14, 13, 12, 11, 10, 9, 7, 6, 5, 3, 8, 4, 2, 1<span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸ºæ¯ä¸ª bit éƒ½è‡³å°‘å±äºä¸€ä¸ª group<span class="mojikumi-line-end">ï¼Œ</span>æ”¹å˜ä¸€ä¸ª bit ä¼šå¾—åˆ° noncode word<span class="mojikumi-line-end">ã€‚</span>æ”¹å˜ç¼–å·ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> çš„ä¸¤ä¸ª bit æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šæ”¹å˜ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> å¼‚æˆ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> å¯¹åº”çš„ group<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥æ”¹å˜ä¸¤ä¸ª bit ä¼šå¾—åˆ° noncode word<span class="mojikumi-line-end">ã€‚</span>æ‰€ä»¥ Hamming code ä¸­ä¸¤ä¸ª code word çš„ Hamming distance è‡³å°‘ä¸º 3<span class="mojikumi-line-end">ã€‚</span></p>
<p>çº é”™æ—¶<span class="mojikumi-line-end">ï¼Œ</span>åªè¦å°†é”™è¯¯çš„ check bit çš„ç¼–å·æˆ–èµ·æ¥å°±å¯ä»¥å¾—åˆ°é”™è¯¯çš„ bit çš„ç¼–å·<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ª parity bit æ¥å¾—åˆ°ä¸€ä¸ªæœ€å°è·ç¦»ä¸º 4 çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>-bit extended Hamming code<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="crc-codes" class="heading"><a href="#crc-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š CRC Codes" tabindex="-1"></a><span>CRC Codes</span></h3>
<p><i>cyclic-redundancy-check (CRC) codes</i> æ˜¯ä¸€ç§å¾—åˆ°å¹¿æ³›åº”ç”¨çš„ error-correcting code<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚è¢«ç”¨åœ¨æ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œé€šä¿¡ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å®ƒå¯ä»¥æ£€æµ‹åˆ°æˆå›¢å‡ºç°çš„å¤šä½é”™è¯¯<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ä¸€äº›åœºæ™¯ä¸­è¿™ç§é”™è¯¯æ¯”éšæœºå‡ºç°çš„é”™è¯¯æ¦‚ç‡æ›´é«˜<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="two-dimensional-codes" class="heading"><a href="#two-dimensional-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Two-Dimensional Codes" tabindex="-1"></a><span>Two-Dimensional Codes</span></h3>
<p>å¦‚ DDPP5 Figure 2-14 (a) æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/ddpp-fig-2-14-a.6b397e71.webp"><img srcset="/assets/ddpp-fig-2-14-a.ecefd691.png" loading="lazy" src="/assets/ddpp-fig-2-14-a.ecefd691.png" width="776" height="529" alt="æ‰€æœ‰ bits æ’åˆ—æˆä¸€ä¸ªçŸ©é˜µï¼ŒçŸ©é˜µè¢«åˆ’åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†: information bits, checks on rows, checks on columns, checks on checks."></picture></p>
<p>é€‰æ‹© <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">w</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{row}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.01389em;">row</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{col}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">col</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> ä¸¤ç§ç¼–ç æ–¹å¼<span class="mojikumi-line-end">ï¼Œ</span>è®¾ç½® checks on rows ä½¿å¾— information bits æ‰€åœ¨çš„æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">w</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{row}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.01389em;">row</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> çš„ code word<span class="mojikumi-line-end">ï¼Œ</span>è®¾ç½® checks on columns ä½¿å¾— information bits æ‰€åœ¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{col}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">col</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> çš„ code word<span class="mojikumi-line-end">ï¼Œ</span>è€Œ checks on checks åˆ™å¯ä»¥é€‰æ‹©<span class="mojikumi-line-end">ï¼Œ</span>è¦ä¹ˆæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">w</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{row}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.01389em;">row</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> çš„ code word<span class="mojikumi-line-end">ï¼Œ</span>è¦ä¹ˆæ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{col}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">col</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> çš„ code word<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™æ ·å¾—åˆ°çš„ <i>two-dimensional code</i> çš„æœ€å°è·ç¦»æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">w</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{row}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight" style="margin-right:0.01389em;">row</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{\mathrm{col}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">col</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> çš„ä¹˜ç§¯<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ two-dimensional code ä¹Ÿè¢«å«åš <i>product code</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>RAID å°±å¯ä»¥çœ‹ä½œä½¿ç”¨äº† two-dimensional code<span class="mojikumi-line-end">ï¼š</span>æ¯å—æ•°æ®ç›˜å†…çš„æ¯ä¸ª block éƒ½æœ‰ CRC code<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æœ‰ä¸€å—ç¡¬ç›˜ç”¨æ¥å­˜æ‰€æœ‰æ•°æ®ç›˜çš„ parity bits<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="checksum-codes" class="heading"><a href="#checksum-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Checksum Codes" tabindex="-1"></a><span>Checksum Codes</span></h3>
<p>parity bit å¯ä»¥çœ‹ä½œæ˜¯ bits åœ¨æ¨¡ 2 æ„ä¹‰ä¸‹çš„å’Œ<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æ¨å¹¿ä¸º <i>checksum</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>æ¨¡ 256 æ„ä¹‰ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥è®¡ç®— bytes çš„å’Œ<span class="mojikumi-line-end">ï¼Œ</span>æ¥æ£€æµ‹ bytes çš„é”™è¯¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>é™¤äº†æ”¹å˜æ¨¡æ•°<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯ä»¥æ”¹å˜è®¡ç®—æ–¹å¼<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ä½¿ç”¨ ones<span class="mojikumi-narrow-left">â€™</span> complement åŠ æ³•æ¥è®¡ç®—æ¨¡ 255 æˆ– 65535 æ„ä¹‰ä¸‹çš„ checksum<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="m-out-of-n-codes" class="heading"><a href="#m-out-of-n-codes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š m-out-of-n Codes" tabindex="-1"></a><span>m-out-of-n Codes</span></h3>
<p><a href="#codes-for-actions-conditions-and-states">m-out-of-n code</a> çš„æœ€å°è·ç¦»ä¸º 2<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”èƒ½å¤Ÿæ£€æµ‹åˆ° <i>unidirectional multiple errors</i><span class="mojikumi-line-end">ï¼Œ</span>å³æ‰€æœ‰é”™è¯¯éƒ½æ˜¯ 0 å˜ 1 æˆ– 1 å˜ 0 çš„æ”¹å˜å¤šä½çš„é”™è¯¯<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="codes-for-transmitting-and-storing-serial-data" class="heading"><a href="#codes-for-transmitting-and-storing-serial-data" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Codes for Transmitting and Storing Serial Data" tabindex="-1"></a><span>Codes for Transmitting and Storing Serial Data</span></h2>
<ul>
<li>parallel data transmission: ä¸€ä¸ª data word çš„æ‰€æœ‰ bit åŒæ—¶ä¼ è¾“</li>
<li>serial data transmission: ä¸€ä¸ª bit ä¸€ä¸ª bit ä¼ è¾“</li>
</ul>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>serial data transmission å¯ä»¥å‡å°‘çº¿è·¯å¼€é”€<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…å‡å°‘ä¸€äº›è®¾è®¡ä¸Šçš„å›°éš¾<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ€åŸºæœ¬çš„ serial data transmission éœ€è¦ä¸‰ä¸ªä¿¡å·<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>CLOCK: å°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ª <i>bit cell</i><span class="mojikumi-line-end">ï¼Œ</span>æ ‡è¯†å‡ºæ¯ä¸ª bit æ‰€å¤„çš„æ—¶é—´èŒƒå›´</li>
<li>SERDATA: å®é™…ä¼ è¾“çš„æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>å…·ä½“å†…å®¹ä¾ <i>line code</i> è€Œå®š</li>
<li>SYNC: ç”¨æ¥æ ‡è¯† bit çš„ significance<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ä¼ è¾“ bytes æ—¶ç”¨æ¥æ ‡è®°æ¯ä¸ª byte çš„å¼€å¤´</li>
</ul>
<p>å®é™…ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥é€‰æ‹©åˆé€‚çš„ line code ä»è€Œåªéœ€ä¼ è¾“ä¸€ä¸ªä¿¡å·<span class="mojikumi-line-end">ï¼Œ</span>ä»æ•°æ®ä¿¡å·ä¸­è¯»å–å‡º CLOCK å’Œ SYNC çš„ä¿¡æ¯<span class="mojikumi-line-end">ã€‚</span></p>
<a id="serial-line-codes" name="serial-line-codes" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-gray-2 dark:bg-gray-11 b-gray-6" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h3 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-timer-sand text-gray" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>WIP: </span><span data-v-a2ab257f>Serial Line Codes</span></h3><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>Serial Line Codes è¿™ä¸€èŠ‚æˆ‘æ„Ÿè§‰æœ‰äº›åœ°æ–¹æ²¡å®Œå…¨ç†è§£<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæœ‰å’Œ Wikipedia æœ‰å‡ºå…¥çš„åœ°æ–¹<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæ ‡æ˜Ÿäº†<span class="mojikumi-line-end">ï¼Œ</span>æ„Ÿè§‰åé¢ä¸ä¸€å®šç”¨å¾—ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>å°±å…ˆå’•äº†<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/ddpp">ddpp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[DDPP å­¦ä¹ ç¬”è®°ç³»åˆ— åº]]></title>
            <link>https://ouuan.moe/post/2023/01/ddpp</link>
            <guid>https://ouuan.moe/post/2023/01/ddpp</guid>
            <pubDate>Sun, 15 Jan 2023 11:49:22 GMT</pubDate>
            <description><![CDATA[<p><a href="https://wakerly.org/DDPP/">Digital Design Principles and Practices</a> 5th edition çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[<p><a href="https://wakerly.org/DDPP/">Digital Design Principles and Practices</a> 5th edition çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>

<hr>
<p>ä¸‹å­¦æœŸè¦é€‰æ•°ç”µæˆ–æ•°è®¾<span class="mojikumi-line-end">ï¼Œ</span>å¬è¯´æ•°ç”µæ˜¯çº¯è€ƒè¯•<span class="mojikumi-line-end">ï¼Œ</span>æ•°è®¾æ˜¯è€ƒè¯• + å¤§ä½œä¸š<span class="mojikumi-line-end">ï¼Œ</span>åˆå¬è¯´æ•°è®¾åŠ©æ•™å…¨æ˜¯ tuna ç¾¤å‹<span class="mojikumi-line-end">ï¼Œ</span>å°±é€‰äº†æ•°è®¾<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¥½æ²¡æ‰è¯¾<span class="mojikumi-line-start">ï¼ˆ</span></p>
<p>è™½ç„¶ä¸çŸ¥é“è®²è¯¾å†…å®¹å’Œ DDPP æœ‰å¤šå°‘æ˜¯æ­£äº¤çš„<span class="mojikumi-line-end">ï¼Œ</span>ä½†çœ‹ä¸€çœ‹ <s>é™¤äº†æ²¡æ—¶é—´å­¦ç¼“è€ƒçš„è¯¾æœ‰æŒ‚ç§‘é£é™©</s> ä¹Ÿæ²¡å•¥åå¤„<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸Šå­¦æœŸ <a href="/post/2022/09/csapp">åœ¨ä¸Šè¯¾æœŸé—´å­¦ CS:APP</a> è¿˜æ˜¯æŒºç—›è‹¦çš„<span class="mojikumi-line-end">ï¼Œ</span>å¸Œæœ›è¿™æ¬¡å¯’å‡èƒ½å¤šå­¦ä¸€ç‚¹<span class="mojikumi-line-end">ã€‚</span>æœ¬æ¥æƒ³å¯’å‡è¡¥å®Œä¸€ä¸‹ CS:APP<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¤§æ¦‚æ˜¯æ²¡æ—¶é—´äº†<span class="mojikumi-line-end">ã€‚</span>å…ˆå­¦ DDPP å¯èƒ½å¯¹ CS:APP çš„ç¬¬å››ç« ä¹Ÿä¼šæœ‰äº›å¸®åŠ© (?)<span class="mojikumi-line-end">ã€‚</span></p>
<p>çœ‹äº†ä¸‹ preface å’Œ chapter 1 å¼€å¤´<span class="mojikumi-line-end">ï¼Œ</span>æ„Ÿè§‰è¿™ä¸ªä½œè€…è¯´è¯æŒºæœ‰æ„æ€çš„<span class="mojikumi-line-end">ï¼Œ</span>joke å«é‡å¾ˆé«˜<span class="mojikumi-line-end">ã€‚</span>ä¸‹é¢è¿™å¥æ‘˜è‡ª chapter 1 å¼€å¤´<span class="mojikumi-line-end">ï¼Œ</span>ä¸¤è¯ä¸‰ä¹‰<span class="mojikumi-line-end">ï¼Œ</span><s><a href="https://zh.moegirl.org.cn/%E5%AE%AB%E4%B8%8B%E7%88%B1"><span class="text-aisan">çˆ±å§</span></a><a href="https://zh.moegirl.org.cn/%E5%86%85%E7%94%B0%E7%A7%80"><span class="text-mia">ç§€é…±</span></a>ç‹‚å–œ</s><span class="mojikumi-line-end">ï¼Œ</span><s>åˆå¤šäº†ä¸€ä¸ªä¸è¯»ä¸­æ–‡ç¿»è¯‘çš„ç†ç”±</s><span class="mojikumi-line-end">ï¼Œ</span><s>è®©æŠ€æœ¯ä¹¦ç±çš„ç¿»è¯‘ä¹Ÿæ¥ä½“éªŒä¸€ä¸‹<span class="text-nijigasaki">è™¹å’²</span>çƒ¤è‚‰ man çš„ç—›è‹¦å§</s><span class="mojikumi-line-end">ã€‚</span></p>
<blockquote>
<p>Or perhaps you<span class="mojikumi-narrow-left">â€™</span>re an electrical engineering student who already knows something about analog electronics and circuit design, but you wouldn<span class="mojikumi-narrow-left">â€™</span>t know a bit if it bit you.</p>
</blockquote>
<p>P.S. ä¸ºä»€ä¹ˆä¸æ˜¯ <span class="mojikumi">â€œ</span>DD:PP<span class="mojikumi">â€</span> å‘¢ ğŸ¤” <s>æ˜¯ä¸æ˜¯ä½œè€…å­¦ CS:APP çš„æ—¶å€™è§‰å¾—å†’å·æ‰“èµ·æ¥å¤ªéº»çƒ¦äº†<span class="mojikumi-line-end">ï¼Œ</span>å°±æƒ³ç€ä¸€å®šè¦ä¸ºè‡ªå·±çš„è¯»è€…çœå»è¿™ä¸ªéº»çƒ¦</s><span class="mojikumi-line-end">ã€‚</span></p>
<p>UPD: ç»ˆäºè¯»å®Œç¬¬ä¸€ç« äº†<span class="mojikumi-line-end">ã€‚</span>drill problem ç¬¬ä¸€é¢˜æ˜¯<span class="mojikumi">ï¼Œ</span><wbr><span class="mojikumi-line-start">â€œ</span>Give three different definitions for the word <span class="mojikumi-narrow-right">â€˜</span>bit<span class="mojikumi-narrow-left">â€™</span> as used in this chapter<span class="mojikumi">â€</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span></p>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/ddpp">ddpp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[CS:APP ç¬¬ä¹ç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2022/11/csapp-9</link>
            <guid>https://ouuan.moe/post/2022/11/csapp-9</guid>
            <pubDate>Mon, 26 Dec 2022 06:44:19 GMT</pubDate>
            <description><![CDATA[

<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬ä¹ç«  <span class="mojikumi">â€œ</span>Virtual Memory<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸º page table<span class="mojikumi-line-end">ã€</span>address translation<span class="mojikumi-line-end">ã€</span>memory mapping<span class="mojikumi-line-end">ã€</span>dynamic allocation<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[

<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬ä¹ç«  <span class="mojikumi">â€œ</span>Virtual Memory<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸º page table<span class="mojikumi-line-end">ã€</span>address translation<span class="mojikumi-line-end">ã€</span>memory mapping<span class="mojikumi-line-end">ã€</span>dynamic allocation<span class="mojikumi-line-end">ã€‚</span></p>

<p>è™šå­˜æ˜¯å¯¹ main memory çš„æŠ½è±¡<span class="mojikumi-line-end">ï¼Œ</span>å®ƒçš„ä¸»è¦ä½œç”¨æœ‰<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>å°† main memory ç”¨ä½œ disk çš„ cache<span class="mojikumi-line-end">ï¼Œ</span>åªå°† active çš„éƒ¨åˆ†æ”¾åœ¨ main memory<span class="mojikumi-line-end">ï¼Œ</span>åœ¨éœ€è¦æ—¶åœ¨ disk å’Œ memory ä¹‹é—´ä¼ é€’æ•°æ®</li>
<li>é€šè¿‡ç»™åº”ç”¨ç¨‹åºæä¾›ç»Ÿä¸€çš„åœ°å€ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>ç®€åŒ–å†…å­˜ç®¡ç†</li>
<li>é€šè¿‡ç»™ä¸åŒè¿›ç¨‹æä¾›ç‹¬ç«‹çš„åœ°å€ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>é˜²æ­¢ä¸€ä¸ªè¿›ç¨‹çš„æ•°æ®è¢«å…¶ä»–è¿›ç¨‹ç ´å</li>
</ul>
<p>è™šå­˜åœ¨ç³»ç»Ÿä¸­èµ·ç€éå¸¸é‡è¦çš„ä½œç”¨<span class="mojikumi-line-end">ï¼Œ</span>å­¦ä¹ è™šå­˜ä¸€æ–¹é¢å¯ä»¥å­¦ä¼šä½¿ç”¨å®ƒçš„ä¸€äº›å¼ºå¤§åŠŸèƒ½<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¦ä¸€æ–¹é¢å¯ä»¥é¿å…ä¸€äº›å†…å­˜ç®¡ç†ç›¸å…³çš„é”™è¯¯<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="physical-and-virtual-addressing" class="heading"><a href="#physical-and-virtual-addressing" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Physical and Virtual Addressing" tabindex="-1"></a><span>Physical and Virtual Addressing</span></h2>
<p>å†…å­˜æœ‰ä¸¤ç§å¯»å€æ–¹å¼<span class="mojikumi-line-end">ï¼š</span>ç‰©ç†å¯»å€å’Œè™šæ‹Ÿå¯»å€<span class="mojikumi-line-end">ã€‚</span></p>
<p>main memory å¯ä»¥çœ‹ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span> ä¸ª byte æ’åˆ—åœ¨ä¸€èµ·<span class="mojikumi-line-end">ï¼Œ</span>åœ°å€åˆ†åˆ«ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>âˆ¼</mo><mi>M</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \sim M-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>ç‰©ç†å¯»å€å°±æ˜¯ CPU ç›´æ¥å°†éœ€è¦çš„åœ°å€ä¼ ç»™ main memory<span class="mojikumi-line-end">ï¼Œ</span>è·å–åˆ°æ•°æ®åä¼ å› CPU<span class="mojikumi-line-end">ã€‚</span></p>
<p>è™šæ‹Ÿå¯»å€éœ€è¦ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿé…åˆ<span class="mojikumi-line-end">ï¼Œ</span>CPU å°†è™šæ‹Ÿåœ°å€ä¼ ç»™ <i>memory management unit</i> (MMU)<span class="mojikumi-line-end">ï¼Œ</span>MMU å°†è™šæ‹Ÿåœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ä¼ ç»™ main memory<span class="mojikumi-line-end">ï¼Œ</span>è€Œè¿™ä¸ªè¿‡ç¨‹åˆå’Œæ“ä½œç³»ç»Ÿç›¸å…³<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="address-spaces" class="heading"><a href="#address-spaces" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Address Spaces" tabindex="-1"></a><span>Address Spaces</span></h2>
<p><span class="mojikumi-line-start">ï¼ˆ</span>çº¿æ€§<span class="mojikumi-line-end">ï¼‰</span>åœ°å€ç©ºé—´æ˜¯è¿ç»­çš„éè´Ÿæ•´æ•°æ„æˆçš„é›†åˆ<span class="mojikumi-line-end">ï¼Œ</span>ä¸€ä¸ªç³»ç»Ÿæœ‰ä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>M</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, M-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>è¿˜æœ‰è‹¥å¹²ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>N</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, N-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">N = 2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>ç§°ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>-bit åœ°å€ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯ 32-bit æˆ–è€… 64-bit<span class="mojikumi-line-end">ã€‚</span></p>
<p>åŒä¸€ä»½æ•°æ®å¯ä»¥åœ¨ä¸åŒçš„åœ°å€ç©ºé—´æœ‰ä¸åŒçš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯è™šå­˜çš„ä¸€ä¸ªåŸºæœ¬æ€æƒ³<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="vm-as-a-tool-for-caching" class="heading"><a href="#vm-as-a-tool-for-caching" class="heading-anchor" aria-label="ç« èŠ‚ï¼š VM as a Tool for Caching" tabindex="-1"></a><span>VM as a Tool for Caching</span></h2>
<p>å¯ä»¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>è™šå­˜æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„<span class="mojikumi-line-end">ï¼Œ</span>è€Œç‰©ç†å†…å­˜æ˜¯è™šå­˜çš„ cache<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ä½†å®é™…ä¸Šè™šå­˜åœ¨å¾ˆå¤šæ—¶å€™ä¼šåªå‡ºç°åœ¨è¿™ä¸ª cache é‡Œè€Œåªåœ¨å¿…è¦æ—¶è¢«å†™å…¥åˆ°ç£ç›˜ä¸Š<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<h3 id="page" class="heading"><a href="#page" class="heading-anchor" aria-label="ç« èŠ‚ï¼š page" tabindex="-1"></a><span>page</span></h3>
<p>è™šå­˜è¢«åˆ†æˆäº†å¾ˆå¤šå›ºå®šå¤§å°çš„å—<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸€å—ç§°ä½œä¸€ä¸ª <i>virtual page</i><span class="mojikumi-line-end">ï¼Œ</span>è€Œç‰©ç†å†…å­˜è¢«åˆ†ä¸ºåŒæ ·å¤§å°çš„å—<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸€å—è¢«ç§°ä½œä¸€ä¸ª <i>physical page</i><span class="mojikumi-line-end">ã€‚</span>åœ¨ cache ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„ä¸€å—ä¸€èˆ¬è¢«ç§°ä½œä¸€ä¸ª block<span class="mojikumi-line-end">ï¼Œ</span>ä½†åœ¨è™šå­˜ä¸­è¢«ç§°ä½œä¸€ä¸ª page<span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸º DRAM æ¯”ç£ç›˜å¿«å¾ˆå¤š<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”ç£ç›˜çš„è¿ç»­è®¿é—®æ¯”éšæœºè®¿é—®å¿«å¾ˆå¤š<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>è™šå­˜çš„ä¸€ä¸ª page ä¼šæ¯”è¾ƒå¤§<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æœ‰ 4KB ~ 2MB</li>
<li>è™šå­˜æ˜¯ <a href="/post/2022/12/csapp-6#cache-%E7%9A%84%E5%88%86%E7%B1%BB">fully associative cache</a></li>
<li>æ“ä½œç³»ç»Ÿä¼šä½¿ç”¨ä¸€äº›æ¯” SRAM cache æ›´åŠ å¤æ‚çš„ç®—æ³•ä½œä¸º replacement policy æ¥ç®¡ç†è™šå­˜</li>
</ul>
<p>ä¸€ä¸ª virtual page å¯èƒ½å¤„äºä¸‰ç§çŠ¶æ€ä¹‹ä¸€: unallocated<span class="mojikumi-line-end">ã€</span>cached<span class="mojikumi-line-end">ã€</span>uncached<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="page-table" class="heading"><a href="#page-table" class="heading-anchor" aria-label="ç« èŠ‚ï¼š page table" tabindex="-1"></a><span>page table</span></h3>
<p>åœ¨ç‰©ç†å†…å­˜ä¸­å­˜æ”¾ç€ä¸€å¼  <i>page table</i><span class="mojikumi-line-end">ï¼Œ</span>è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„æ¯ä¸ª page éƒ½å¯¹åº” page table ä¸­çš„ä¸€é¡¹ (<i>page table entry</i>, PTE)<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸€é¡¹åŒ…å«ä¸€ä¸ª valid bit å’Œä¸€ä¸ªåœ°å€<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>cached: valid bit set<span class="mojikumi-line-end">ï¼Œ</span>åœ°å€ä¸ºè¯¥ page çš„ç¼“å­˜çš„ç‰©ç†åœ°å€</li>
<li>uncached: valid bit not set<span class="mojikumi-line-end">ï¼Œ</span>åœ°å€æŒ‡å‘ç£ç›˜ä¸Šçš„ virtual page</li>
<li>unallocated: valid bit not set<span class="mojikumi-line-end">ï¼Œ</span>åœ°å€ä¸º null</li>
</ul>
<h3 id="page-fault" class="heading"><a href="#page-fault" class="heading-anchor" aria-label="ç« èŠ‚ï¼š page fault" tabindex="-1"></a><span>page fault</span></h3>
<p>åœ¨åœ°å€ç¿»è¯‘æ—¶<span class="mojikumi-line-end">ï¼Œ</span>MMU ä¼šæŸ¥çœ‹ä¼ å…¥çš„è™šæ‹Ÿåœ°å€å¯¹åº”çš„ PTE<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ cached<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ç§°ä½œ <i>page hit</i><span class="mojikumi-line-end">ï¼Œ</span>å°±ä¼šå°† PTE å­˜å‚¨çš„ç‰©ç†åœ°å€ä¼ ç»™ main memory<span class="mojikumi-line-end">ï¼›</span>å¦åˆ™<span class="mojikumi-line-end">ï¼Œ</span>å°±æ˜¯ cache miss<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è™šå­˜ä¸­è¢«ç§°ä½œ <i>page fault</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>page fault æ˜¯ä¸€ä¸ª exception<span class="mojikumi-line-end">ï¼Œ</span>ä¼šè§¦å‘ kernel ä¸­çš„ page fault handler<span class="mojikumi-line-end">ã€‚</span>page fault handler ä¼šåœ¨ physical memory ä¸­é€‰æ‹©ä¸€ä¸ª physical page<span class="mojikumi-line-start">ï¼ˆ</span>victim page<span class="mojikumi-line-end">ï¼‰</span>ç”¨æ¥å­˜è¿™ä¸ªè§¦å‘ page fault çš„ page<span class="mojikumi-line-end">ï¼Œ</span>å…ˆå°† victim page åŸæœ‰çš„æ•°æ®åœ¨å¿…è¦æ—¶æ”¾å›ç£ç›˜<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åå°†æ–°çš„æ•°æ®å­˜å…¥ victim page<span class="mojikumi-line-end">ï¼Œ</span>å†ç›¸åº”åœ°ä¿®æ”¹ page table ä¸­çš„è¿™ä¸¤ä¸ª PTE<span class="mojikumi-line-end">ï¼Œ</span>ä½¿å¾— victim page åŸæ¥å­˜çš„é‚£ä¸ª virtual page å˜ä¸º uncached<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ–°å­˜å…¥çš„ virtual page å˜ä¸º cached å¹¶ä¸”åœ°å€æŒ‡å‘ victim page<span class="mojikumi-line-end">ã€‚</span>page fault handler çš„æœ€ç»ˆæ•ˆæœå°±æ˜¯<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å¼€å§‹æƒ³è¦çš„ virtual page å·²ç» cached<span class="mojikumi-line-end">ï¼Œ</span>äºæ˜¯åœ¨è¿”å›åˆ° exception è§¦å‘çš„ä½ç½®æ—¶å°±å¯ä»¥ page hit è€Œæ­£å¸¸è¯»å–æ•°æ®äº†<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ç£ç›˜å’Œå†…å­˜é—´ä¼ é€’æ•°æ®åœ¨è™šå­˜ä¸­è¢«ç§°ä½œ <i>swapping</i> æˆ– <i>paging</i><span class="mojikumi-line-end">ï¼š</span></p>
<blockquote>
<p>Pages are <i>swapped in</i> (<i>paged in</i>) from disk to DRAM, and <i>swapped out</i> (<i>paged out</i>) from DRAM to disk.</p>
</blockquote>
<p>è™šå­˜çš„ cache miss æ˜¯éå¸¸æ˜‚è´µçš„<span class="mojikumi-line-end">ï¼Œ</span>ä½†ç”±äºç¨‹åºè®¿é—®å†…å­˜çš„ locality<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ¥è¯´ page fault å¾ˆå°‘è§¦å‘<span class="mojikumi-line-end">ï¼Œ</span>æ•ˆç‡å°±ä¸ä¼šå¤ªå·®<span class="mojikumi-line-end">ã€‚</span>ä¸æ–­è§¦å‘ page fault çš„æƒ…å†µç§°ä½œ <i>thrashing</i><span class="mojikumi-line-end">ï¼Œ</span>ä¼šå¤§å¤§å½±å“ç¨‹åºçš„æ•ˆç‡<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="vm-as-a-tool-for-memory-management" class="heading"><a href="#vm-as-a-tool-for-memory-management" class="heading-anchor" aria-label="ç« èŠ‚ï¼š VM as a Tool for Memory Management" tabindex="-1"></a><span>VM as a Tool for Memory Management</span></h2>
<p>å®é™…ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>page table åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­å¹¶éåªæœ‰ä¸€ä»½<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä»½<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”å¯ä»¥æŠŠåŒä¸€ä¸ª physical page æ˜ å°„åˆ°ä¸åŒè¿›ç¨‹ä¸­çš„å¤šä¸ª virtual page<span class="mojikumi-line-end">ã€‚</span></p>
<p>è™šå­˜ä¸ºå†…å­˜ç®¡ç†æä¾›äº†å¦‚ä¸‹çš„ä¾¿åˆ©<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>ç®€åŒ–äº† linking<span class="mojikumi-line-end">ï¼Œ</span>ä½¿å¾—é“¾æ¥æ—¶æ— éœ€è€ƒè™‘å…·ä½“çš„ç‰©ç†åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒç¨‹åºå¯ä»¥ä½¿ç”¨åŒæ ·çš„è™šæ‹Ÿåœ°å€åˆ†é…æ–¹æ¡ˆ<span class="mojikumi-line-end">ã€‚</span></li>
<li>ç®€åŒ–äº† loading<span class="mojikumi-line-end">ï¼Œ</span>ä½¿å¾—åŠ è½½ç¨‹åºæ—¶åªéœ€å°†å¯æ‰§è¡Œæ–‡ä»¶çš„æ®µè½æ˜ å°„åˆ°è™šå­˜ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸ç”¨æ‹·è´æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>ç­‰è®¿é—®åˆ°æŸä¸ª page æ—¶æ‰ä¼š page in<span class="mojikumi-line-end">ã€‚</span>è¿™æ ·çš„å°†æ–‡ä»¶å†…å®¹æ˜ å°„åˆ°è™šå­˜ä¸­çš„æ“ä½œç§°ä½œ <a href="#memory-mapping">memory mapping</a><span class="mojikumi-line-end">ï¼Œ</span>Linux æä¾›äº† <code>mmap</code> system call æ¥è¿›è¡Œ memory mapping<span class="mojikumi-line-end">ã€‚</span></li>
<li>ç®€åŒ–äº†å†…å­˜å…±äº«<span class="mojikumi-line-end">ï¼Œ</span>æ“ä½œç³»ç»Ÿå¯ä»¥å°†è¿›ç¨‹ç§æœ‰çš„æ•°æ®æ˜ å°„åˆ°ä¸åŒçš„ physical page<span class="mojikumi-line-end">ï¼Œ</span>è€Œå°†å…±äº«çš„æ•°æ®æ˜ å°„åˆ°ç›¸åŒçš„ physical page<span class="mojikumi-line-end">ã€‚</span></li>
<li>ç®€åŒ–äº†å†…å­˜åˆ†é…<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸ºåº”ç”¨è¯·æ±‚ä¸€æ®µè¿ç»­çš„ virtual pages æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æ“ä½œç³»ç»Ÿå¯ä»¥å°†å…¶æ˜ å°„åˆ°ä¸è¿ç»­çš„ physical pages<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h2 id="vm-as-a-tool-for-memory-protection" class="heading"><a href="#vm-as-a-tool-for-memory-protection" class="heading-anchor" aria-label="ç« èŠ‚ï¼š VM as a Tool for Memory Protection" tabindex="-1"></a><span>VM as a Tool for Memory Protection</span></h2>
<ul>
<li>è™šå­˜å¯ä»¥è½»æ¾åœ°ç»™ä¸åŒçš„è¿›ç¨‹æä¾›ä¸åŒçš„ç§æœ‰å†…å­˜ç©ºé—´<span class="mojikumi-line-end">ã€‚</span></li>
<li>é€šè¿‡ç»™ PTE æ·»åŠ  permission bit <code>SUP</code><span class="mojikumi-line-end">ã€</span><code>READ</code><span class="mojikumi-line-end">ã€</span><code>WRITE</code><span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥ä½¿æŸä¸ª page åªè¯»æˆ–è€…åªèƒ½åœ¨ kernel mode ä¸‹è¢«è®¿é—®<span class="mojikumi-line-end">ã€‚</span>å¦‚æœè¯•å›¾è®¿é—®ä¸€ä¸ª page æ—¶æƒé™å‡ºé”™<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šè§¦å‘ CPU çš„ general protection exception<span class="mojikumi-line-end">ï¼Œ</span>è¿›è€Œç”± exception handler å‘è¿›ç¨‹å‘é€ SIGSEGV<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h2 id="address-translation" class="heading"><a href="#address-translation" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Address Translation" tabindex="-1"></a><span>Address Translation</span></h2>
<p>ä¸€ä¸ªå†…å­˜åœ°å€å¯ä»¥è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†<span class="mojikumi-line-end">ï¼Œ</span>è™šæ‹Ÿåœ°å€è¢«åˆ†ä¸ºé«˜ä½çš„ <i>virtual page number</i> (VPN) å’Œä½ä½çš„ <i>virtual page offset</i> (VPO)<span class="mojikumi-line-end">ï¼Œ</span>ç‰©ç†åœ°å€è¢«åˆ†ä¸º PPN å’Œ PPO<span class="mojikumi-line-end">ã€‚</span></p>
<p>CPU ä¸­æœ‰ä¸€ä¸ª <i>page table base register</i> (PTBR)<span class="mojikumi-line-end">ï¼Œ</span>æŒ‡å‘ page table çš„èµ·å§‹åœ°å€<span class="mojikumi-line-end">ã€‚</span>åœ°å€ç¿»è¯‘æ—¶<span class="mojikumi-line-end">ï¼Œ</span>MMU é€šè¿‡ PTBR å’Œ VPN å¾—åˆ° PTE çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>ä» main memory è·å– PTE<span class="mojikumi-line-end">ï¼Œ</span>æ ¹æ® valid bit<span class="mojikumi-line-end">ï¼Œ</span>è¦ä¹ˆè§¦å‘ page fault<span class="mojikumi-line-end">ï¼Œ</span>è¦ä¹ˆè·å–åˆ° PPN<span class="mojikumi-line-end">ï¼Œ</span>è€Œ PPO = VPO<span class="mojikumi-line-end">ï¼Œ</span>å°±å¾—åˆ°äº†ç‰©ç†åœ°å€<span class="mojikumi-line-end">ã€‚</span></p>
<p>SRAM cache ä¸€èˆ¬ä¼šä»¥ç‰©ç†åœ°å€æ¥ cache main memory<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå°±æ˜¯è¯´<span class="mojikumi-line-end">ï¼Œ</span>é€šè¿‡ PTE çš„åœ°å€è®¿é—® PTE<span class="mojikumi-line-end">ã€</span>é€šè¿‡ç‰©ç†åœ°å€è®¿é—® main memory æ—¶ä¼šé¦–å…ˆå°è¯•é€šè¿‡ SRAM cache æ¥è®¿é—®<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœæ¯æ¬¡éƒ½ä» main memory è·å– PTE<span class="mojikumi-line-end">ï¼Œ</span>å³ä½¿åœ¨ L1 cache hit äº†æ•ˆç‡ä¹Ÿä¸å¤Ÿé«˜<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ MMU ä¸­è¿˜æœ‰ä¸€ä¸ªå°çš„ page table cache<span class="mojikumi-line-end">ï¼Œ</span>å«åš <i>translation lookaside buffer</i> (TLB)<span class="mojikumi-line-end">ã€‚</span>VPN è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†<span class="mojikumi-line-end">ï¼š</span>ä½ä½çš„ TLBI (index) å’Œé«˜ä½çš„ TLBT (tag)<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ TLBI ç”¨æ¥é€‰æ‹© cache set<span class="mojikumi-line-end">ï¼Œ</span>TLBT ç”¨æ¥è¿›è¡Œ cache line matching<span class="mojikumi-line-end">ã€‚</span>åœ¨åœ°å€ç¿»è¯‘æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šä¼˜å…ˆæŸ¥è¯¢ TLB<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ miss å†æŸ¥è¯¢ page table<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ°å€ç©ºé—´å¾€å¾€å¾ˆå¤§<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœåªç”¨ä¸€å¼  page table<span class="mojikumi-line-end">ï¼Œ</span>é‚£ä¹ˆ page table æœ¬èº«å°±ä¼šå ç”¨å¤§é‡çš„ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥å¯ä»¥å°† page table åˆ†å±‚<span class="mojikumi-line-end">ï¼Œ</span>æ¯å±‚ page table æŒ‡å‘ä¸‹ä¸€å±‚ page table<span class="mojikumi-line-end">ï¼Œ</span>ç›´åˆ°æœ€åä¸€å±‚æŒ‡å‘ VP / PP<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="case-study-core-i7-address-translation" class="heading"><a href="#case-study-core-i7-address-translation" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Case Study: Core i7 Address Translation" tabindex="-1"></a><span>Case Study: Core i7 Address Translation</span></h2>
<p>Core i7 memory system å¦‚ CS:APP Figure 9.21 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig9.21.282f25d8.webp"><img srcset="/assets/csapp-fig9.21.032f64c1.png" loading="lazy" src="/assets/csapp-fig9.21.032f64c1.png" width="1207" height="934" alt="The Core i7 memory system"></picture></p>
<p>Core i7 ä½¿ç”¨ 48-bit çš„è™šæ‹Ÿåœ°å€ç©ºé—´å’Œ 52-bit çš„ç‰©ç†åœ°å€ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>page size å¯ä»¥è®¾ç½®ä¸º 4KB æˆ– 4MB<span class="mojikumi-line-end">ï¼Œ</span>æœ‰å››çº§ page table<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ª PTE æœ‰ä»¥ä¸‹å†…å®¹<span class="mojikumi">ï¼š</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>è¿˜æœ‰ä¸€äº›å…¶ä»–å†…å®¹<span class="mojikumi-line-end">ï¼‰</span></p>
<ul>
<li>P: valid bit</li>
<li>R/W: æ˜¯å¦åªè¯»</li>
<li>U/S: æ˜¯å¦éœ€è¦åœ¨ kernel mode ä¸‹è®¿é—®</li>
<li>XD: æ˜¯å¦å¯ä»¥è¢«è¯»å–æŒ‡ä»¤<span class="mojikumi-line-start">ï¼ˆ</span>æ˜¯å¦å¯æ‰§è¡Œ<span class="mojikumi-line-end">ï¼‰</span></li>
<li>A: reference bit<span class="mojikumi-line-end">ï¼Œ</span>è®¿é—®åˆ°æ—¶ç”± MMU è®¾ç½®<span class="mojikumi-line-end">ï¼Œ</span>è€Œç”±è½¯ä»¶æ¸…é™¤<span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥ç”¨äº replacement algorithm<span class="mojikumi-line-end">ï¼‰</span></li>
<li>Base addr: child page table / physical page çš„åœ°å€çš„é«˜ä½ 40 bits<span class="mojikumi-line-start">ï¼ˆ</span>å‰©ä¸‹ 12 bits å³ 4KB<span class="mojikumi-line-end">ï¼Œ</span>è¿™è¦æ±‚åœ°å€ä»¥ 4KB å¯¹é½<span class="mojikumi-line-end">ï¼Œ</span>è€Œ page size ä¸€èˆ¬å°±æ˜¯ 4KB<span class="mojikumi-line-end">ï¼‰</span></li>
</ul>
<p>L1 page table è¿˜æœ‰ä¸€é¡¹ PS ç”¨æ¥æŒ‡å®š page size<span class="mojikumi-line-end">ã€‚</span></p>
<p>L4 page table è¿˜æœ‰ dirty bit D ç”¨æ¥è¡¨ç¤º page è¢«å†™å…¥è¿‡éœ€è¦è¢« swap out (write back)<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠ G è¡¨ç¤º global page å³åˆ‡æ¢è¿›ç¨‹æ—¶ä¸ä» TLB ä¸­ evict æ‰<span class="mojikumi-line-end">ã€‚</span></p>
<p>VPN æœ‰ 36 bits<span class="mojikumi-line-end">ï¼Œ</span>æ¯ 9 bits ç”¨æ¥è®¿é—®ä¸€çº§ page table<span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸º L1 cache æ˜¯ 8-way 32KB çš„<span class="mojikumi-line-end">ï¼Œ</span>æ­£å¥½æœ‰ 12 bits ç”¨æ¥é€‰æ‹© cache set<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥åœ¨è·å– PPN çš„åŒæ—¶å°±å¯ä»¥æŠŠ VPO å‘é€ç»™ L1 cache æ¥æå‰é€‰æ‹©å¥½ cache set<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="linux-virtual-memory-system" class="heading"><a href="#linux-virtual-memory-system" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Linux Virtual Memory System" tabindex="-1"></a><span>Linux Virtual Memory System</span></h2>
<p>kernel çš„è™šå­˜ä¸­åŒ…å«<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>
<p>kernel çš„ä»£ç ä»¥åŠå…¨å±€çš„æ•°æ®ç»“æ„</p>
</li>
<li>
<p>å°†æ•´ä¸ªç‰©ç†å†…å­˜è¿ç»­åœ°æ˜ å°„åˆ°è™šå­˜ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·å°±å¯ä»¥æ–¹ä¾¿åœ°è®¿é—®ç‰¹å®šçš„ç‰©ç†åœ°å€</p>
</li>
<li>
<p>å’Œæ¯ä¸ªè¿›ç¨‹ç›¸å…³çš„æ•°æ®ç»“æ„<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ page table<span class="mojikumi-line-end">ã€</span>kernel stack<span class="mojikumi-line-end">ã€</span><code>task_struct</code> ç­‰</p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>P.S. è¿™éƒ¨åˆ†è™½ç„¶æ˜¯å’Œæ¯ä¸ªè¿›ç¨‹ç›¸å…³<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¹¶ä¸ä¼šåœ¨æ¯ä¸ªè¿›ç¨‹ä¸­æœ‰æ‰€ä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>CS:APP ä¸­è¿™é‡Œå†™é”™äº†<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ errata ä¸­æŒ‡å‡ºäº†<span class="mojikumi-line-end">ï¼‰</span></p>
</li>
</ul>
<p>Linux å°†è™šå­˜åˆ’åˆ†ä¸ºè‹¥å¹² <i>area</i><span class="mojikumi-line-start">ï¼ˆ</span>ä¹Ÿç§° <i>segment</i><span class="mojikumi-line-end">ï¼‰</span>æ¥ç®¡ç†<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ code segment<span class="mojikumi-line-end">ã€</span>data segment<span class="mojikumi-line-end">ã€</span>heap<span class="mojikumi-line-end">ã€</span>shared library segment<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª area æ˜¯è™šå­˜ä¸­è¿ç»­çš„ä¸€æ®µ<span class="mojikumi-line-end">ã€‚</span></p>
<p>kernel ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤äº†ä¸€ä¸ª <code>task_struct</code><span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­çš„ <code>mm</code> ä¸€é¡¹æ˜¯ä¸€ä¸ª <code>mm_struct</code><span class="mojikumi-line-end">ã€‚</span><code>mm_struct</code> çš„ <code>pgd</code> ä¸€é¡¹æ˜¯ L1 page table çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>mmap</code> æŒ‡å‘ä¸€ä¸ª <code>vm_<wbr>area_<wbr>struct</code><span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª <code>vm_<wbr>area_<wbr>struct</code> è¡¨ç¤ºä¸€ä¸ª area<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ä»¥ä¸‹å‡ é¡¹<span class="mojikumi-line-start">ï¼ˆ</span>è¿˜æœ‰ä¸€äº›å…¶ä»–é¡¹<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>vm_start</code> / <code>vm_end</code>: æŒ‡å‘ area çš„å¼€å¤´ / ç»“å°¾</li>
<li><code>vm_page_prot</code>: area ä¸­æ‰€æœ‰ page çš„ access permission</li>
<li><code>vm_flags</code>: ä¸€äº› flag<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚è¿™ä¸ª area ä¸­çš„ page æ˜¯å¦è¢«æ‰€æœ‰è¿›ç¨‹å…±äº«</li>
<li><code>vm_prev</code> / <code>vm_next</code>: æŒ‡å‘ç›¸é‚»çš„ <code>vm_<wbr>area_<wbr>struct</code><span class="mojikumi-line-end">ï¼Œ</span>æ„æˆä¸€ä¸ªé“¾è¡¨</li>
</ul>
<p>åœ¨å¤„ç† page fault æ—¶<span class="mojikumi-line-end">ï¼Œ</span>page fault handler é¦–å…ˆä¼šæ£€æŸ¥åœ°å€æ˜¯å¦åœ¨æŸä¸ª area å†…<span class="mojikumi-line-start">ï¼ˆ</span>ä¸åœ¨åˆ™è§¦å‘ segmentation fault<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ç„¶åä¼šæ£€æŸ¥æ˜¯å¦æœ‰è®¿é—®æƒé™<span class="mojikumi-line-start">ï¼ˆ</span>æ²¡æœ‰åˆ™è§¦å‘ protection exception<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœä¸€åˆ‡ ok å°±ä¼šæ ¹æ® replacement algorithm é€‰æ‹© victim page<span class="mojikumi-line-end">ï¼Œ</span>è‹¥å…¶ dirty åˆ™å°†å…¶ swap out<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åå°†æ–°çš„ page swap in<span class="mojikumi-line-end">ï¼Œ</span>æœ€åæ›´æ–° page table å¹¶è¿”å›<span class="mojikumi-line-end">ã€‚</span></p>
<a id="segmentation-fault-vs-protection-exception" name="segmentation-fault-vs-protection-exception" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-purple-2 dark:bg-purple-9 b-purple-5" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h3 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-help-circle-outline text-purple" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Question: </span><span data-v-a2ab257f>segmentation fault vs protection exception</span></h3><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>segmentation fault å’Œ protection exception æœ‰åŒºåˆ«å—ï¼Ÿgeneral protection exception ä¸åº”è¯¥æ˜¯ CPU è§¦å‘çš„å—<span class="mojikumi-line-end">ï¼Œ</span>æ€ä¹ˆæ˜¯ page fault handler è§¦å‘ï¼Ÿsegmentation fault å’Œ SIGSEGV æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</p><p>æˆ‘çš„ç†è§£æ˜¯ kernel æ”¶åˆ° CPU çš„ general protection exception ä¼šå‘è¿›ç¨‹å‘é€ SIGSEGV<span class="mojikumi-line-end">ï¼Œ</span>ä½† CS:APP è¿™é‡Œåœ¨ç›¸é‚»çš„ä¸¤æ®µåˆ†åˆ«ç”¨äº† <span class="mojikumi">â€œ</span>segmentation fault<span class="mojikumi">â€</span> å’Œ <span class="mojikumi">â€œ</span>protection exception<span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<h2 id="memory-mapping" class="heading"><a href="#memory-mapping" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Memory Mapping" tabindex="-1"></a><span>Memory Mapping</span></h2>
<p>å°†ä¸€ä¸ª <i>object</i> çš„å†…å®¹è®¾ä¸ºä¸€æ®µè™šå­˜çš„åˆå§‹å€¼ç§°ä½œ <i>memory mapping</i><span class="mojikumi-line-end">ã€‚</span>è¿™ä¸ª object å¯ä»¥æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­ä¸€ä¸ªæ–‡ä»¶çš„ä¸€æ®µ (<i>file-backed</i>)<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆå§‹ä¸ºç©ºçš„ <i>anonymous file</i> (<i>demand-zero</i>)<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ map æ—¶å¹¶ä¸ä¼šç«‹å³å°†æ•°æ®æ”¾åˆ°ç‰©ç†å†…å­˜ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ç­‰åˆ°è®¿é—®åˆ°æŸä¸ª page æ—¶å† swap in<span class="mojikumi-line-end">ï¼Œ</span>è¿™ç§°ä½œ <i>demand paging</i><span class="mojikumi-line-end">ã€‚</span>æ“ä½œç³»ç»Ÿä¼šä½¿ç”¨ <i>swap file</i> æ¥è¿›è¡Œ swapping<span class="mojikumi-line-end">ï¼Œ</span>ä½†åªæœ‰è¿›è¡Œäº†ä¿®æ”¹æ‰ä¼šéœ€è¦ swap out<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™å¯ä»¥ç›´æ¥ä» map åˆ°çš„æ–‡ä»¶ swap in<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœä¸åŒçš„è¿›ç¨‹æ˜ å°„åˆ°äº†åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ç‰©ç†å†…å­˜ä¸­ä¼šåªæœ‰ä¸€ä»½æ•°æ®<span class="mojikumi-line-end">ã€‚</span></p>
<p>memory mapping æœ‰ shared å’Œ private ä¸¤ç§<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>map as shared objects: ä¿®æ”¹å¯¹å…¶ä»–è¿›ç¨‹å¯è§<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæ˜¯ file-backed è¿˜ä¼šå°†å†…å­˜ä¿®æ”¹åŒæ­¥åˆ°ç£ç›˜ä¸Šçš„æ–‡ä»¶<span class="mojikumi-line-end">ã€‚</span></li>
<li>map as private objects: ä¿®æ”¹å¯¹å…¶ä»–è¿›ç¨‹ä¸å¯è§<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿä¸ä¼šåŒæ­¥åˆ°ç£ç›˜ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ˜¯ copy-on-write çš„<span class="mojikumi-line-end">ï¼š</span>ä¸€å¼€å§‹å°† PTE è®¾ä¸ºåªè¯»<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è§¦å‘ protection exception å<span class="mojikumi-line-end">ï¼Œ</span>exception handler å‘ç°è¿™ä¸ª area æ˜¯å¯ä»¥å†™å…¥ä½† private çš„<span class="mojikumi-line-end">ï¼Œ</span>å°±åˆ›å»ºä¸€ä¸ªæ–°çš„ page<span class="mojikumi-line-end">ï¼Œ</span>å°†åŸæ¥çš„ page å¤åˆ¶è¿‡å»<span class="mojikumi-line-end">ï¼Œ</span>å°† PTE è®¾ä¸ºå¯ä»¥å†™å…¥<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="fork-çš„åŸç†" class="heading"><a href="#fork-çš„åŸç†" class="heading-anchor" aria-label="ç« èŠ‚ï¼š fork çš„åŸç†" tabindex="-1"></a><span>fork çš„åŸç†</span></h3>
<p>fork æ—¶ä¼šå°†åŸæ¥çš„ <code>mm_struct</code> ä»¥åŠ page table å¤åˆ¶ä¸€ä»½<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ˜¯å°†åŸæ¥çš„ private area ä¸­çš„ PTE å¯ä»¥å†™å…¥çš„é‡æ–°å˜ä¸ºåªè¯»<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œåœ¨ä¹‹åå†å†™å…¥æ—¶é‡æ–°è§¦å‘ copy-on-write<span class="mojikumi-line-end">ï¼Œ</span>å°±åšåˆ°äº† parent å’Œ child ä¸€å¼€å§‹æœ‰ä¸€æ ·çš„æ•°æ®ä½†åç»­å†™å…¥ç‹¬ç«‹<span class="mojikumi-line-end">ã€‚</span>åœ¨ fork å‰å°±åˆ›å»ºäº†çš„ shared area ä¼šç”±ä¸¤ä¸ªè¿›ç¨‹å…±äº«<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹åœ¨ parent å’Œ child ä¹‹é—´é€šä¿¡<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="execve-çš„åŸç†" class="heading"><a href="#execve-çš„åŸç†" class="heading-anchor" aria-label="ç« èŠ‚ï¼š execve çš„åŸç†" tabindex="-1"></a><span>execve çš„åŸç†</span></h3>
<ol>
<li>åˆ é™¤å½“å‰è¿›ç¨‹çš„æ‰€æœ‰ area (<code>vm_<wbr>area_<wbr>struct</code>)</li>
<li>æ ¹æ® program header table è¿›è¡Œ memory mapping<span class="mojikumi-line-end">ï¼š</span>
<ul>
<li><code>.init</code><span class="mojikumi-line-end">ã€</span><code>.text</code><span class="mojikumi-line-end">ã€</span><code>.rodata</code>: private, file-backed, read-only</li>
<li><code>.data</code>: private, file-backed, read/write</li>
<li><code>.bss</code><span class="mojikumi-line-end">ã€</span>heap<span class="mojikumi-line-end">ã€</span>stack: private, demand-zero, read/write</li>
</ul>
</li>
<li>å¦‚æœæœ‰ link åˆ°å…±äº«åº“<span class="mojikumi-line-end">ï¼Œ</span>ä¼šè¿›è¡ŒåŠ¨æ€é“¾æ¥<span class="mojikumi-line-end">ï¼Œ</span>å°†å…±äº«åº“ private, file-backed map</li>
<li>ä¿®æ”¹ program counter</li>
</ol>
<a id="å…³äºå…±äº«åº“çš„-map-æ–¹å¼" name="å…³äºå…±äº«åº“çš„-map-æ–¹å¼" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><details class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><summary class="p-3 flex justify-between items-center cursor-pointer" data-v-a2ab257f><h4 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-info-circle-outline text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Info: </span><span data-v-a2ab257f>å…³äºå…±äº«åº“çš„ map æ–¹å¼</span></h4><span class="details-icon text-5" data-v-a2ab257f></span></summary><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>ä¸‹é¢æ˜¯ä¸€å°å‘é€äº 2022.12.18<span class="mojikumi-line-end">ï¼Œ</span>å°šæœªæ”¶åˆ°å›å¤çš„é‚®ä»¶<span class="mojikumi-line-end">ï¼š</span></p><blockquote>
<p>Dear Drs. Randy Bryant and Dave O'Hallaron,</p>
<p>I am a student at Tsinghua University and I am writing to ask a question about the book CS:APP3e.</p>
<p>In <span class="mojikumi">â€œ</span>9.8.3 The execve Function Revisited<span class="mojikumi">â€</span> on page 837, it is stated that shared libraries are <span class="mojikumi">â€œ</span>mapped into the shared region of the user<span class="mojikumi-narrow-left">â€™</span>s virtual address space<span class="mojikumi">â€</span>. In Figure 9.31, it is stated that <span class="mojikumi">â€œ</span>Memory-mapped region for shared libraries<span class="mojikumi">â€</span> are <span class="mojikumi">â€œ</span>Shared, file-backed<span class="mojikumi">â€</span>.</p>
<p>However, I believe that shared libraries are actually mapped as private objects rather than shared objects. I have come to this conclusion for the following reasons:</p>
<ol>
<li>If there is data in the shared library, it should be copy-on-write, and should not be shared among different processes.</li>
<li>/proc/self/maps shows that all mappings to shared libraries of my shell are private.</li>
<li>The source code and comments of dl-load indicate that the mapping should be private. (See <a href="https://github.com/bminor/glibc/blob/71e408e45dcacf429a94b2807f75aaadd8d37cb9/elf/dl-load.h#L32-L49" class="break-all">https://github.com/bminor/glibc/blob/71e408e45dcacf429a94b2807f75aaadd8d37cb9/elf/dl-load.h#L32-L49</a> and <a href="https://github.com/bminor/glibc/commit/9b8a44cd18fbf1aedeb03e19f4bcdb06b0ee409b" class="break-all">https://github.com/bminor/glibc/commit/9b8a44cd18fbf1aedeb03e19f4bcdb06b0ee409b</a>.)</li>
</ol>
<p>I have checked the errata but did not find this issue addressed. I am writing to you in the hope that you can provide an explanation of this statement or add it to the errata. Thank you for your attention to this matter.</p>
<p>Sincerely,<br>
Yufan You</p>
</blockquote></div></details></aside>
<h3 id="mmap" class="heading"><a href="#mmap" class="heading-anchor" aria-label="ç« èŠ‚ï¼š mmap" tabindex="-1"></a><span>mmap</span></h3>
<p><code>void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset)</code></p>
<ul>
<li><code>addr</code>: area çš„èµ·å§‹åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>ä»…ä½œæç¤ºä½œç”¨<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ <code>NULL</code> å°±è¡Œ</li>
<li><code>length</code>: area çš„é•¿åº¦</li>
<li><code>prot</code>: <code>PROT_EXEC</code><span class="mojikumi-line-end">ã€</span><code>PROT_READ</code><span class="mojikumi-line-end">ã€</span><code>PROT_WRITE</code><span class="mojikumi-line-end">ã€</span><code>PROT_NONE</code></li>
<li><code>flags</code>: æœ‰å¾ˆå¤š<span class="mojikumi-line-end">ï¼Œ</span>å¸¸ç”¨çš„æœ‰ <code>MAP_SHARED</code><span class="mojikumi-line-end">ã€</span><code>MAP_PRIVATE</code><span class="mojikumi-line-end">ã€</span><code>MAP_<wbr>ANONYMOUS</code></li>
<li><code>fd</code>: map åˆ°çš„ file descriptor</li>
<li><code>offset</code>: map åˆ°çš„æ–‡ä»¶å†…å®¹çš„ offset<span class="mojikumi-line-end">ï¼Œ</span>å¿…é¡»æ˜¯ page size çš„å€æ•°</li>
</ul>
<p>åœ¨ <code>MAP_<wbr>ANONYMOUS</code> æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æœ€å¥½å°† <code>fd</code> è®¾ä¸º -1<span class="mojikumi-line-end">ã€</span><code>offset</code> è®¾ä¸º 0<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨æœ‰çš„å®ç°ä¸­è¿™æ˜¯å¿…é¡»çš„<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¤±è´¥æ—¶ <code>mmap</code> ä¼šè¿”å› <code>MAP_FAILED</code><span class="mojikumi-line-end">ã€‚</span></p>
<p><code>int<wbr> <wbr>munmap<wbr>(<wbr>void<wbr> *<wbr>addr<wbr>, <wbr>size_t<wbr> <wbr>length<wbr>)</code>: å°†è‡ª <code>addr</code> èµ· <code>length</code> é•¿çš„èŒƒå›´å†…çš„ mapping åˆ é™¤<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åå†è®¿é—®å°±ä¼š segmentation fault<span class="mojikumi-line-end">ã€‚</span><code>addr</code> å¿…é¡»æ˜¯ page size çš„å€æ•°<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="dynamic-memory-allocation" class="heading"><a href="#dynamic-memory-allocation" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Dynamic Memory Allocation" tabindex="-1"></a><span>Dynamic Memory Allocation</span></h2>
<h3 id="åŠ¨æ€åˆ†é…çš„ç›¸å…³å‡½æ•°" class="heading"><a href="#åŠ¨æ€åˆ†é…çš„ç›¸å…³å‡½æ•°" class="heading-anchor" aria-label="ç« èŠ‚ï¼š åŠ¨æ€åˆ†é…çš„ç›¸å…³å‡½æ•°" tabindex="-1"></a><span>åŠ¨æ€åˆ†é…çš„ç›¸å…³å‡½æ•°</span></h3>
<p>åœ¨ C è¯­è¨€ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨ <code>malloc</code> å’Œ <code>free</code> æ¥è·å– / é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜<span class="mojikumi-line-end">ã€‚</span>å¯ä»¥ä½¿ç”¨ <code>calloc</code> æ¥åˆå§‹åŒ–åˆ†é…åˆ°çš„å†…å­˜å¹¶åœ¨ä½¿ç”¨ä¹˜æ³•è®¡ç®—å†…å­˜å¤§å°æ—¶æ£€æµ‹æ˜¯å¦å‘ç”Ÿæº¢å‡º<span class="mojikumi-line-end">ã€‚</span>å¯ä»¥ä½¿ç”¨ <code>realloc</code> æ¥ç»™ä¸€å—åŠ¨æ€åˆ†é…çš„å†…å­˜è°ƒæ•´å¤§å°<span class="mojikumi-line-end">ã€‚</span>è¯¦è§ <code>man malloc</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸ºäº†è®©åŠ¨æ€åˆ†é…å¾—åˆ°çš„å†…å­˜å¯ä»¥ç”¨äºä»»ä½•æ•°æ®ç±»å‹<span class="mojikumi-line-end">ï¼Œ</span>åœ°å€ä¼šä»¥ double word å¯¹é½<span class="mojikumi-line-end">ï¼Œ</span>å³ 32 ä½ç³»ç»Ÿå¯¹é½åˆ° 8 çš„å€æ•°<span class="mojikumi-line-end">ï¼Œ</span>64 ä½ç³»ç»Ÿå¯¹é½åˆ° 16 çš„å€æ•°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ“ä½œç³»ç»Ÿä½¿ç”¨ <code>brk</code> æŒ‡é’ˆæ¥æŒ‡å‘ heap çš„ç»“å°¾<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥é€šè¿‡ <code>sbrk</code> å‡½æ•°æ¥å¢å¤§ heap<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="allocator-çš„è¦æ±‚å’Œç›®æ ‡" class="heading"><a href="#allocator-çš„è¦æ±‚å’Œç›®æ ‡" class="heading-anchor" aria-label="ç« èŠ‚ï¼š allocator çš„è¦æ±‚å’Œç›®æ ‡" tabindex="-1"></a><span>allocator çš„è¦æ±‚å’Œç›®æ ‡</span></h3>
<p>Dynamic memory allocator ä¼šå°† heap åˆ’åˆ†ä¸ºè‹¥å¹²å¤§å°ä¸ç­‰çš„ block<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª block è¦ä¹ˆ allocated è¦ä¹ˆ free<span class="mojikumi-line-end">ã€‚</span></p>
<p>allocator éœ€è¦åšåˆ°<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>èƒ½å¤Ÿå¤„ç†ä»¥ä»»æ„é¡ºåºå‘é€çš„ allocate å’Œ free è¯·æ±‚<span class="mojikumi-line-start">ï¼ˆ</span>ä¸èƒ½å¯¹é¡ºåºåšä»»ä½•å‡å®š<span class="mojikumi-line-end">ï¼‰</span></li>
<li>ç«‹å³å¯¹è¯·æ±‚åšå‡ºå“åº”<span class="mojikumi-line-start">ï¼ˆ</span>ä¸èƒ½ç¦»çº¿<span class="mojikumi-line-end">ï¼‰</span></li>
<li>åªä½¿ç”¨ heap å­˜å‚¨æ•°æ®<span class="mojikumi-line-start">ï¼ˆ</span>ä¸èƒ½å°†æ•°æ®å­˜å‚¨åœ¨è™šå­˜çš„å…¶ä»–ä½ç½®<span class="mojikumi-line-end">ï¼‰</span></li>
<li>æ»¡è¶³å¯¹é½è¦æ±‚<span class="mojikumi-line-start">ï¼ˆ</span>èƒ½å¤Ÿå­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®<span class="mojikumi-line-end">ï¼‰</span></li>
<li>ä¸èƒ½ä¿®æ”¹æˆ–ç§»åŠ¨ allocated block<span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥ä¿®æ”¹ free block æˆ–è€… heap ä¸­ä¸æ˜¯ block çš„åŒºåŸŸ<span class="mojikumi-line-end">ï¼‰</span></li>
</ul>
<p>è€Œ allocator æœ‰ä¸¤ä¸ªæ€§èƒ½æ–¹é¢çš„ç›®æ ‡<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>æ›´å¿«åœ°å“åº”è¯·æ±‚<span class="mojikumi-line-start">ï¼ˆ</span>æ›´å¤§çš„ååé‡<span class="mojikumi-line-end">ï¼‰</span></li>
<li>æ›´é«˜æ•ˆåœ°åˆ©ç”¨å†…å­˜</li>
</ol>
<p>å…¶ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´å†…å­˜åˆ©ç”¨ç‡ä½çš„ä¸»è¦åŸå› æ˜¯ <i>fragmentation</i><span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>internal fragmentation: å®é™…åˆ†é…çš„ allocated block æ¯” alloc è¯·æ±‚ä¸­ç”³è¯·çš„å¤§</li>
<li>external fragmentation: æ‰€æœ‰ free block åŠ èµ·æ¥å¤§å°è¶³å¤Ÿ<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ¯å•ä¸ª free block éƒ½ä¸å¤Ÿå¤§<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´éœ€è¦ä½¿ç”¨æ›´å¤š heap ç©ºé—´</li>
</ul>
<h3 id="ä¸€ç§ç®€å•çš„-allocator-å®ç°æ–¹å¼" class="heading"><a href="#ä¸€ç§ç®€å•çš„-allocator-å®ç°æ–¹å¼" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ä¸€ç§ç®€å•çš„ allocator å®ç°æ–¹å¼" tabindex="-1"></a><span>ä¸€ç§ç®€å•çš„ allocator å®ç°æ–¹å¼</span></h3>
<h4 id="block-header" class="heading"><a href="#block-header" class="heading-anchor" aria-label="ç« èŠ‚ï¼š block header" tabindex="-1"></a><span>block header</span></h4>
<p>allocator éœ€è¦è®°å½• block çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>è€Œåªèƒ½ä½¿ç”¨ heap ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ç›´æ¥åœ¨ block çš„å¼€å¤´è®°å½• block header<span class="mojikumi-line-end">ï¼Œ</span>å³ block size ä»¥åŠæ˜¯å¦ allocated<span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸ºåœ°å€æœ‰å¯¹é½è¦æ±‚<span class="mojikumi-line-end">ï¼Œ</span>block size çš„æœ€ä½å‡ ä½ä¸€å®šæ˜¯ 0<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥ç”¨æœ€ä½ä½æ¥å­˜ allocated bit<span class="mojikumi-line-end">ã€‚</span></p>
<p>block size å……å½“äº†å•å‘é“¾è¡¨çš„ä½œç”¨<span class="mojikumi-line-end">ã€‚</span>å¦‚æœæƒ³è®¿é—® free block<span class="mojikumi-line-end">ï¼Œ</span>å°±å¾—è®¿é—®æ¯ä¸ª block å†çœ‹æ˜¯å¦ free<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥è¿™æ ·çš„ç»“æ„è¢«ç§°ä½œ <i>implicit free list</i><span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="placement-policy" class="heading"><a href="#placement-policy" class="heading-anchor" aria-label="ç« èŠ‚ï¼š placement policy" tabindex="-1"></a><span>placement policy</span></h4>
<p>allocate æ—¶éœ€è¦æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ free block<span class="mojikumi-line-end">ï¼Œ</span>allocator è¿›è¡Œè¿™æ ·çš„æœç´¢çš„æ–¹å¼ç§°ä½œ <i>placement policy</i><span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>first fit<span class="mojikumi-line-end">ï¼š</span>ä»å¤´å¼€å§‹æ‰¾<span class="mojikumi-line-end">ï¼Œ</span>ç›´åˆ°æ‰¾åˆ°è¶³å¤Ÿå¤§çš„ free block</li>
<li>next fit<span class="mojikumi-line-end">ï¼š</span>ä»ä¸Šæ¬¡æœç´¢ç»“æŸçš„åœ°æ–¹å¼€å§‹æ‰¾<span class="mojikumi-line-end">ï¼Œ</span>ç›´åˆ°æ‰¾åˆ°è¶³å¤Ÿå¤§çš„ free block</li>
<li>best fit<span class="mojikumi-line-end">ï¼š</span>éå†æ‰€æœ‰ free block<span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”¨è¶³å¤Ÿå¤§çš„ free block ä¸­æœ€å°çš„</li>
</ul>
<p>ä½¿ç”¨ implicit free list æ—¶<span class="mojikumi-line-end">ï¼Œ</span>next fit æ¯” first fit ååé‡æ›´å¤§ä½†å†…å­˜åˆ©ç”¨ç‡æ›´ä½<span class="mojikumi-line-end">ï¼Œ</span>best fit å†…å­˜åˆ©ç”¨ç‡æœ€å¥½ä½†ååé‡æœ€å·®<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="åˆ†å‰²-free-block" class="heading"><a href="#åˆ†å‰²-free-block" class="heading-anchor" aria-label="ç« èŠ‚ï¼š åˆ†å‰² free block" tabindex="-1"></a><span>åˆ†å‰² free block</span></h4>
<p>å¦‚æœ allocate æ—¶ free block çš„å‰©ä½™ç©ºé—´æ¯”éœ€è¦çš„ç©ºé—´å¤§<span class="mojikumi-line-end">ï¼Œ</span>ä¸”å¤§çš„è¶…è¿‡ä¸€ä¸ª block çš„ minimum size (double word)<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥å°†è¿™ä¸ª block åˆ†ä¸ºä¸¤åŠ<span class="mojikumi-line-end">ï¼Œ</span>ä¸€åŠç”¨ä½œ allocated block<span class="mojikumi-line-end">ï¼Œ</span>å¦ä¸€åŠä¸º free block<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="è·å–æ›´å¤šçš„-heap-ç©ºé—´" class="heading"><a href="#è·å–æ›´å¤šçš„-heap-ç©ºé—´" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è·å–æ›´å¤šçš„ heap ç©ºé—´" tabindex="-1"></a><span>è·å–æ›´å¤šçš„ heap ç©ºé—´</span></h4>
<p>å¦‚æœå·²æœ‰çš„ heap ç©ºé—´æ— æ³•æ»¡è¶³ allocate è¯·æ±‚<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ <code>sbrk</code> æ¥è·å–æ›´å¤šçš„ heap ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>å¹¶å°†æ–°å¾—åˆ°çš„ç©ºé—´è®¾ä¸º free block<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="åˆå¹¶-free-block" class="heading"><a href="#åˆå¹¶-free-block" class="heading-anchor" aria-label="ç« èŠ‚ï¼š åˆå¹¶ free block" tabindex="-1"></a><span>åˆå¹¶ free block</span></h4>
<p>å¦‚æœå¾ˆå¤š free block ç›¸é‚»åœ°æ”¾åœ¨ä¸€èµ·<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šé€ æˆ <i>false fragmentation</i><span class="mojikumi-line-end">ï¼Œ</span>å³åˆå¹¶åèƒ½æ”¾ä¸‹ä½†æ¯ä¸ªå•ç‹¬æ— æ³•æ”¾ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥éœ€è¦å¯¹ç›¸é‚»çš„ free block è¿›è¡Œåˆå¹¶ (coalesce)<span class="mojikumi-line-end">ã€‚</span></p>
<p>åˆå¹¶æœ‰ä¸¤ç§ç­–ç•¥<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>immediate coalescing<span class="mojikumi-line-end">ï¼š</span>æ¯æ¬¡ free æ—¶éƒ½å°†æ–°å¾—åˆ°çš„ free block ä¸ç›¸é‚»çš„ free block åˆå¹¶<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„è¯æ¯æ—¶æ¯åˆ»éƒ½ä¸ä¼šæœ‰ç›¸é‚»çš„ free block</li>
<li>deferred coalescing<span class="mojikumi-line-end">ï¼š</span>ç­‰åˆ°æŸä¸ªæ—¶å€™å†åˆå¹¶<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚åœ¨æœªèƒ½æ‰¾åˆ°è¶³å¤Ÿå¤§çš„ free block æ—¶</li>
</ul>
<p>immediate coalescing çš„å®ç°è¾ƒä¸ºç®€å•<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆ<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¯èƒ½ä¼šå¯¼è‡´åå¤çš„åˆå¹¶å’Œåˆ†å‰²<span class="mojikumi-line-end">ï¼Œ</span>å¸¦æ¥ä¸å¿…è¦çš„æ€§èƒ½æŸå¤±<span class="mojikumi-line-end">ã€‚</span></p>
<p>åˆå¹¶æ—¶éœ€è¦çŸ¥é“ä¸Šä¸€ä¸ª block çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>è¿™å¯ä»¥é€šè¿‡åœ¨ block å°¾éƒ¨æ·»åŠ ä¸€ä¸ªä¸ header å†…å®¹ç›¸åŒçš„ footer æ¥å®ç°<span class="mojikumi-line-end">ï¼Œ</span>è¿™è¢«ç§°ä½œä½¿ç”¨ <i>boundary tags</i><span class="mojikumi-line-end">ã€‚</span>ç”±äºåªæœ‰ free block éœ€è¦ footer<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥çœå» allocated block çš„ footer<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨ header ä¸­å­˜å‚¨ä¸Šä¸€å—çš„ allocated bit<span class="mojikumi-line-end">ï¼Œ</span>æ¥èŠ‚çœç©ºé—´<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="explicit-free-list" class="heading"><a href="#explicit-free-list" class="heading-anchor" aria-label="ç« èŠ‚ï¼š explicit free list" tabindex="-1"></a><span>explicit free list</span></h3>
<p>å¯ä»¥åœ¨ free block ä¸­å­˜å‚¨æŒ‡å‘å‰é©±åç»§çš„æŒ‡é’ˆæ¥ç»´æŠ¤ä¸€ä¸ª free block çš„é“¾è¡¨<span class="mojikumi-line-end">ï¼Œ</span>ç§°ä½œ <i>explicit free list</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™ä¸ª list å¯ä»¥æ˜¯ LIFO çš„æˆ–è€…æŒ‰åœ°å€é¡ºåºçš„<span class="mojikumi-line-end">ã€‚</span>LIFO çš„ list å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆ free æ“ä½œ<span class="mojikumi-line-end">ï¼Œ</span>è€ŒæŒ‰åœ°å€é¡ºåºçš„ list éœ€è¦ä½¿ç”¨çº¿æ€§æ—¶é—´æ¥æ‰¾åˆ°ä¸€ä¸ª block åœ¨ list ä¸­çš„ä½ç½®<span class="mojikumi-line-end">ï¼Œ</span>ä½†å†…å­˜åˆ©ç”¨ç‡æ›´é«˜<span class="mojikumi-line-end">ã€‚</span></p>
<p>ç”±äºéœ€è¦è¶³å¤Ÿå¤§çš„ç©ºé—´æ¥å­˜å‚¨å‰é©±åç»§çš„æŒ‡é’ˆ<span class="mojikumi-line-end">ï¼Œ</span>explicit free list çš„ minimum block size æ›´å¤§<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šå‡ºç°æ›´ä¸¥é‡çš„ internal fragmentation å¯¼è‡´å†…å­˜åˆ©ç”¨ç‡ä¸‹é™<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="segregated-free-lists" class="heading"><a href="#segregated-free-lists" class="heading-anchor" aria-label="ç« èŠ‚ï¼š segregated free lists" tabindex="-1"></a><span>segregated free lists</span></h3>
<p>å¯ä»¥å°† block æŒ‰ size åˆ†ç±»<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚æŒ‰ 2 çš„æ¬¡å¹‚åˆ†ç±»<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸€ç±»ç»´æŠ¤ä¸€ä¸ª list<span class="mojikumi-line-end">ã€‚</span>å…·ä½“å®ç°æ–¹å¼æœ‰å¾ˆå¤š<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ simple segregated storage å’Œ segregated fits<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="simple-segregated-storage" class="heading"><a href="#simple-segregated-storage" class="heading-anchor" aria-label="ç« èŠ‚ï¼š simple segregated storage" tabindex="-1"></a><span>simple segregated storage</span></h4>
<p>æ¯ä¸€ç±»çš„æ‰€æœ‰ block éƒ½æ˜¯è¿™ä¸€ç±»çš„æœ€å¤§ size<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœä¸€ç±» block ç”¨å…‰äº†å°±ç”³è¯·æ–°çš„ heap ç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>free æ—¶ç›´æ¥æ”¾å›ç›¸åº”çš„ list<span class="mojikumi-line-end">ï¼Œ</span>ä¸åˆå¹¶ä¹Ÿä¸åˆ†å‰²<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™æ ·çš„è¯<span class="mojikumi-line-end">ï¼Œ</span>header å’Œ footer éƒ½ä¸éœ€è¦äº†<span class="mojikumi-line-end">ï¼Œ</span>åªéœ€åœ¨ free block é‡Œå­˜æ”¾ä¸€ä¸ªåç»§æŒ‡é’ˆå³å¯<span class="mojikumi-line-end">ï¼Œ</span>ä½† internal fragmentation å’Œ external fragmentation éƒ½å¾ˆä¸¥é‡<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="segregated-fit" class="heading"><a href="#segregated-fit" class="heading-anchor" aria-label="ç« èŠ‚ï¼š segregated fit" tabindex="-1"></a><span>segregated fit</span></h4>
<p>æ¯ä¸€ç±»ä¸­æœ‰ä¸åŒå¤§å°çš„ block<span class="mojikumi-line-end">ï¼Œ</span>æœ‰åˆ†å‰²å’Œåˆå¹¶<span class="mojikumi-line-end">ã€‚</span>allocate æ—¶ä»ç›¸åº”çš„ç±»åˆ«å¼€å§‹æ‰¾<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ä¸€ç±»ä¸­æ‰¾ä¸åˆ°å°±ç»§ç»­æ‰¾ä¸‹ä¸€ç±»<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·è¿‘ä¼¼äº best-fit search<span class="mojikumi-line-end">ï¼Œ</span>ä½†é€Ÿåº¦å¾ˆå¿«<span class="mojikumi-line-end">ã€‚</span></p>
<p>segregated fit çš„ç»¼åˆæ€§èƒ½è¾ƒå¥½<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥åŒ…æ‹¬ libc ä¸­çš„ <code>malloc</code> å‡½æ•°åœ¨å†…çš„ allocator å¾€å¾€é€‰æ‹©ä½¿ç”¨ segregated fit<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="buddy-system" class="heading"><a href="#buddy-system" class="heading-anchor" aria-label="ç« èŠ‚ï¼š buddy system" tabindex="-1"></a><span>buddy system</span></h4>
<p>æ‰€æœ‰ block size éƒ½æ˜¯ 2 çš„æ¬¡å¹‚<span class="mojikumi-line-end">ï¼Œ</span>åˆ†å‰²æ—¶æ¯æ¬¡åˆ†æˆä¸¤åŠç›´åˆ°å¤§å°åˆé€‚<span class="mojikumi-line-end">ï¼Œ</span>åˆå¹¶æ—¶åªå’Œ <span class="mojikumi">â€œ</span>buddy<span class="mojikumi">â€</span> åˆå¹¶<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™é‡Œæè¿°æ¸…æ¥šå¯èƒ½æ¯”è¾ƒå¤æ‚<span class="mojikumi-line-end">ï¼Œ</span>å°±æ„Ÿæ€§ç†è§£ä¸€ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>æ‰€æœ‰çš„ block ä¼šå½¢æˆä¸€ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºæ ‘çŠ¶çš„æ ·å­<span class="mojikumi-line-start">ï¼ˆ</span>æœ‰ç‚¹æ ‘çŠ¶æ•°ç»„çš„æ„Ÿè§‰<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>parent ç›¸åŒçš„ block å°±æ˜¯ buddy<span class="mojikumi-line-end">ã€‚</span></p>
<p><picture><source type="image/webp" srcset="/assets/buddy-system.955de85d.webp"><img srcset="/assets/buddy-system.2fd53174.png" loading="lazy" src="/assets/buddy-system.2fd53174.png" width="321" height="158" alt="buddy system"></picture></p>
<p>è¿™æ ·çš„è¯<span class="mojikumi-line-end">ï¼Œ</span>æœç´¢å’Œåˆå¹¶ä¼šæ¯”è¾ƒå¿«é€Ÿ<span class="mojikumi-line-end">ï¼Œ</span>ä½†ç”±äº block size éƒ½æ˜¯ 2 çš„æ¬¡å¹‚<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½å‡ºç°ä¸¥é‡çš„ internal fragmentation<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="å¹³è¡¡æ ‘ç»´æŠ¤-free-block" class="heading"><a href="#å¹³è¡¡æ ‘ç»´æŠ¤-free-block" class="heading-anchor" aria-label="ç« èŠ‚ï¼š å¹³è¡¡æ ‘ç»´æŠ¤ free block" tabindex="-1"></a><span>å¹³è¡¡æ ‘ç»´æŠ¤ free block</span></h3>
<p>CS:APP ä¸­æ²¡æœ‰æåˆ°è¿™ç§æ–¹å¼<span class="mojikumi-line-end">ï¼Œ</span>ä½†åªè¦ç†è§£äº†ä¸Šé¢è¿™å‡ ç§ free list<span class="mojikumi-line-end">ï¼Œ</span>å°±å¾ˆå¥½ç†è§£<span class="mojikumi-line-end">ï¼Œ</span>free block ä¸ä¸€å®šè¦ç”¨é“¾è¡¨ç»´æŠ¤<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥ç”¨å¹³è¡¡æ ‘ç»´æŠ¤<span class="mojikumi-line-end">ï¼š</span>åœ¨ free block ä¸­å­˜æ”¾æ ‘çš„èŠ‚ç‚¹æ‰€éœ€çš„ children<span class="mojikumi-line-end">ã€</span>parent ç­‰ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥é«˜æ•ˆå®ç°ä¸¥æ ¼çš„ best fit<span class="mojikumi-line-end">ï¼Œ</span>å¤æ‚åº¦ä¹Ÿä¸ä¼šåƒ segregated fit ä¸€æ ·åœ¨æç«¯æƒ…å†µä¸‹å‘ç”Ÿé€€åŒ–<span class="mojikumi-line-end">ã€‚</span>ä½†æ˜¯æ ‘çš„èŠ‚ç‚¹éœ€è¦çš„ä¿¡æ¯å¾€å¾€æ¯”é“¾è¡¨å¤š<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šè®© minimum block size å¢å¤§åˆ° 6 ä¸ª word<span class="mojikumi-line-end">ã€‚</span></p>
<p>æˆ‘è‡ªå·±å†™ malloc lab çš„æ—¶å€™è¯•ç€å†™äº†ä¸ª Splay<span class="mojikumi-line-end">ï¼Œ</span>å‘ç°ä¸€èˆ¬æƒ…å†µä¸‹è¿˜æ˜¯æ¯” segregated fit æ…¢ä¸å°‘<span class="mojikumi-line-end">ï¼Œ</span>å†…å­˜åˆ©ç”¨ç‡ä¹Ÿä¸ä¸€å®šæœ‰æ˜æ˜¾æå‡<span class="mojikumi-line-end">ï¼Œ</span>ä¸çŸ¥é“å…¶ä»–å¹³è¡¡æ ‘ / ç‰¹æ®Šåœºæ™¯ä¸‹æ€§èƒ½å¦‚ä½•<span class="mojikumi-line-end">ã€‚</span>å€’æ˜¯åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰è¯´çº¢é»‘æ ‘å¯ä»¥åœ¨ malloc lab æ‹¿é«˜åˆ†<span class="mojikumi-line-start">ï¼ˆ</span><s>è°ç”¨å¥½çš„ç®—æ³•æ‹¿é«˜åˆ†å•Š<span class="mojikumi-line-end">ï¼Œ</span>ä¸æ˜¯è€ƒéªŒå¯¹ç€æ•°æ®è°ƒå‚çš„èƒ½åŠ›å—<span class="mojikumi-line-end">ï¼Œ</span>æˆ‘è§‰å¾—æˆ‘å¯¹æ•°æ®è¿‡æ‹Ÿåˆçš„ segregated fit åˆ†å·²ç»å¤Ÿé«˜äº†</s><span class="mojikumi">ï¼‰</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span><s>è™šå‡çš„ segregated fit<span class="mojikumi-line-end">ï¼š</span>æŒ‰ block size segregate æ¥å¯»æ‰¾ fit<span class="mojikumi-line-end">ï¼›</span>çœŸæ­£çš„ segregated fit<span class="mojikumi-line-end">ï¼š</span>æŒ‰æµ‹è¯•æ•°æ® segregate åˆ†åˆ«è¿›è¡Œ fit</s><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="garbage-collection" class="heading"><a href="#garbage-collection" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Garbage Collection" tabindex="-1"></a><span>Garbage Collection</span></h2>
<p>å¯ä»¥é€šè¿‡ block ä¹‹é—´ä»¥åŠ stack<span class="mojikumi-line-end">ã€</span>register<span class="mojikumi-line-end">ã€</span>global å˜é‡å¯¹ block çš„å¼•ç”¨å…³ç³»æ‰¾åˆ°ä¸å¯è¾¾çš„ block è€Œè¿›è¡Œ garbage collection<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ C ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ç”±äºæ²¡æœ‰ç±»å‹ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šå°†éæŒ‡é’ˆç±»å‹çš„æ•°æ®è§†ä½œå¯¹ block çš„å¼•ç”¨<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´ä¸å¯è¾¾çš„ block è¢«è§†ä½œå¯è¾¾<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ C è¯­è¨€çš„ garbage collection åªèƒ½æ˜¯ conservative çš„<span class="mojikumi-line-end">ã€‚</span></p>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/csapp">csapp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[CS:APP ç¬¬å…«ç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2022/11/csapp-8</link>
            <guid>https://ouuan.moe/post/2022/11/csapp-8</guid>
            <pubDate>Sat, 17 Dec 2022 06:27:26 GMT</pubDate>
            <description><![CDATA[
<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬å…«ç«  <span class="mojikumi">â€œ</span>Exceptional Control Flow<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸º exception<span class="mojikumi-line-end">ã€</span>system call<span class="mojikumi-line-end">ã€</span>process<span class="mojikumi-line-end">ã€</span>signal<span class="mojikumi-line-end">ã€</span>longjmp<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[
<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬å…«ç«  <span class="mojikumi">â€œ</span>Exceptional Control Flow<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ¬ç« çš„ä¸»è¦å†…å®¹ä¸º exception<span class="mojikumi-line-end">ã€</span>system call<span class="mojikumi-line-end">ã€</span>process<span class="mojikumi-line-end">ã€</span>signal<span class="mojikumi-line-end">ã€</span>longjmp<span class="mojikumi-line-end">ã€‚</span></p>

<p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹<span class="mojikumi-line-end">ï¼Œ</span>PC ä¼šæŒ‰ç…§æŒ‡ä»¤çš„é¡ºåºä»¥åŠè·³è½¬æŒ‡ä»¤æ¥å˜åŒ–<span class="mojikumi-line-end">ã€‚</span>ä½†åœ¨å¾ˆå¤šæ—¶å€™<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„æ§åˆ¶æµæ˜¯ä¸èƒ½æ»¡è¶³éœ€è¦çš„<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ <i>exceptional control flow</i> (ECF) ä½œä¸ºè·³è½¬æŒ‡ä»¤çš„è¡¥å……<span class="mojikumi-line-end">ï¼Œ</span>ä»¥å¤„ç†ä¸€äº›<span class="mojikumi-line-start">â€œ</span>å¼‚å¸¸<span class="mojikumi-line-end">â€</span>çš„æˆ–è€…æ¥è‡ª<span class="mojikumi-line-start">â€œ</span>å¤–éƒ¨<span class="mojikumi-line-end">â€</span>çš„å˜åŒ–<span class="mojikumi-line-end">ã€‚</span></p>
<p>ECF å­˜åœ¨äºå„ä¸ªå±‚æ¬¡<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>ç¡¬ä»¶ç›‘æµ‹åˆ°äº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨ exception handler</li>
<li>æ“ä½œç³»ç»Ÿåœ¨ä¸åŒè¿›ç¨‹ä¹‹é—´è¿›è¡Œ <a href="#context-switch">context switch</a></li>
<li>ä¸åŒè¿›ç¨‹é—´é€šè¿‡å‘é€ <a href="#signals">signal</a> æ¥è°ƒç”¨æ¥æ”¶è€…çš„ signal handler</li>
<li>ç¨‹åºå†…éƒ¨é€šè¿‡ <a href="#nonlocal-jumps">nonlocal jump</a> æ¥å®ç°é”™è¯¯å¤„ç†</li>
</ul>
<h2 id="exceptions" class="heading"><a href="#exceptions" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Exceptions" tabindex="-1"></a><span>Exceptions</span></h2>
<p><i>exception</i> æ˜¯ç”±æŸç§<span class="mojikumi-line-start">â€œ</span>çŠ¶æ€æ”¹å˜<span class="mojikumi">â€</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>å¯èƒ½æ˜¯æŸæ¡æŒ‡ä»¤æ‰§è¡Œçš„ç»“æœ<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…æ¥è‡ªå¤–éƒ¨ I/O çš„å˜åŒ–ç­‰ç­‰<span class="mojikumi-line-end">ï¼‰</span>å¯¼è‡´çš„æ§åˆ¶æµçš„çªå˜<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¤„ç†å™¨æ£€æµ‹åˆ°è¿™ç§çŠ¶æ€æ”¹å˜å<span class="mojikumi-line-end">ï¼Œ</span>ä¼šè°ƒç”¨ <i>exception handler</i><span class="mojikumi-line-end">ï¼Œ</span>ç„¶åè·³è½¬åˆ°è§¦å‘å‰çš„æŒ‡ä»¤æˆ–ä¸‹ä¸€æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…ç»ˆæ­¢æ•´ä¸ªç¨‹åº<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="exception-handling" class="heading"><a href="#exception-handling" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Exception Handling" tabindex="-1"></a><span>Exception Handling</span></h3>
<p>æ¯ç§ exception éƒ½ä¼šæœ‰ä¸€ä¸ª <i>exception number</i><span class="mojikumi-line-end">ï¼Œ</span>æŸäº› exception çš„ number ç”±ç¡¬ä»¶å†³å®š<span class="mojikumi-line-end">ï¼Œ</span>å¦ä¸€äº›ç”±æ“ä½œç³»ç»Ÿå†³å®š<span class="mojikumi-line-end">ã€‚</span></p>
<p>å†…å­˜ä¸­ä¼šæœ‰ä¸€ä¸ª <i>exception table</i><span class="mojikumi-line-end">ï¼Œ</span>ä»¥ exception number ä¸ºç´¢å¼•<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸€é¡¹æ˜¯å¯¹åº”çš„ exception handler<span class="mojikumi-line-end">ã€‚</span>å¤„ç†å™¨ä¸­æœ‰ä¸€ä¸ª <i>exception table base register</i><span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥å­˜ exception table çš„èµ·å§‹åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>ç»“åˆ exception number å°±å¯ä»¥å¯¹æ¯ä¸€é¡¹å¯»å€<span class="mojikumi-line-end">ã€‚</span></p>
<p>exception ä¸ procedure call çš„ä¸»è¦åŒºåˆ«æœ‰<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>procedure call è¿”å›åˆ°æ ˆé¡¶å­˜å‚¨çš„è¿”å›åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>è€Œ exception è¿”å›åˆ°è§¦å‘æ—¶çš„æŒ‡ä»¤æˆ–ä¸‹ä¸€æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ï¼Œ</span>æˆ–ç»ˆæ­¢ç¨‹åº<span class="mojikumi-line-end">ã€‚</span></li>
<li>è°ƒç”¨ exception handler æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šä¿å­˜åŒ…æ‹¬ condition codes åœ¨å†…çš„ä¸€äº›å¤„ç†å™¨çŠ¶æ€<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è¿”å›æ—¶æ¢å¤<span class="mojikumi-line-end">ã€‚</span></li>
<li>exception handler åœ¨ <a href="#user-kernel-mode">kernel mode</a> ä¸‹è¿è¡Œ<span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”¨çš„è¿è¡Œæ ˆä¹Ÿæ˜¯ kernel çš„<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="classes-of-exceptions" class="heading"><a href="#classes-of-exceptions" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Classes of Exceptions" tabindex="-1"></a><span>Classes of Exceptions</span></h3>
<p>exception ä¸€èˆ¬æœ‰å››ç§<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>interrupt: å¼‚æ­¥è§¦å‘<span class="mojikumi-line-start">ï¼ˆ</span>ä¸æ˜¯æŸæ¡æŒ‡ä»¤çš„æ‰§è¡Œå¯¼è‡´äº† exception<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è¿”å›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬æ˜¯ç”±å¤–éƒ¨ I/O è®¾å¤‡è§¦å‘<span class="mojikumi-line-start">ï¼ˆ</span>è®¾å¤‡é€šè¿‡ interrupt pin å‘Šè¯‰å¤„ç†å™¨æœ‰ interrupt<span class="mojikumi-line-end">ï¼Œ</span>é€šè¿‡ system bus å‘é€ exception number<span class="mojikumi-line-end">ï¼Œ</span>å¤„ç†å™¨åœ¨æ¯æ‰§è¡Œå®Œä¸€æ¡æŒ‡ä»¤åæ£€æŸ¥ interrupt pin<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è§¦å‘åè°ƒç”¨ interrupt handler<span class="mojikumi-line-end">ï¼Œ</span>å†å›åˆ°åŸæ¥çš„ä½ç½®ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ã€‚</span></li>
<li>trap: åŒæ­¥è§¦å‘<span class="mojikumi-line-end">ï¼Œ</span>è¿”å›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ã€‚</span>æ¯”å¦‚ <a href="#linux-%E4%B8%AD%E7%9A%84-system-call">system call</a> æ˜¯ä¸€ç§å¸¸è§çš„ trap<span class="mojikumi-line-end">ï¼Œ</span>é€šè¿‡ <code>syscall</code> æŒ‡ä»¤ä¸»åŠ¨è§¦å‘ exception<span class="mojikumi-line-end">ï¼Œ</span>çœ‹ä¸Šå»å’Œå‡½æ•°è°ƒç”¨ç±»ä¼¼<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¯ä»¥åœ¨ kernel mode ä¸‹è¿è¡Œ<span class="mojikumi-line-end">ã€‚</span></li>
<li>fault: åŒæ­¥è§¦å‘<span class="mojikumi-line-end">ï¼Œ</span>è¿”å›åˆ°è§¦å‘ exception çš„æŒ‡ä»¤æˆ–é€€å‡º<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>fault handler ä¼šå°è¯•è§£å†³å¯¼è‡´ fault å‘ç”Ÿçš„é—®é¢˜<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæˆåŠŸè§£å†³åˆ™è¿”å›åˆ°è§¦å‘ exception çš„æŒ‡ä»¤<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”èƒ½å¤Ÿä¸å†æ¬¡è§¦å‘ exception è€Œç»§ç»­æ‰§è¡Œä¸‹å»<span class="mojikumi-line-end">ï¼›</span>å¦‚æœæ²¡èƒ½æˆåŠŸè§£å†³<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ abort<span class="mojikumi-line-end">ã€‚</span></li>
<li>abort: åŒæ­¥è§¦å‘<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å®šé€€å‡º<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬ä»£è¡¨ä¸¥é‡çš„ä¸å¯æ¢å¤çš„é”™è¯¯<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="exceptions-in-linuxx86-64-systems" class="heading"><a href="#exceptions-in-linuxx86-64-systems" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Exceptions in Linux/x86-64 Systems" tabindex="-1"></a><span>Exceptions in Linux/x86-64 Systems</span></h3>
<h4 id="x86-64-ä¸­çš„-fault-abort" class="heading"><a href="#x86-64-ä¸­çš„-fault-abort" class="heading-anchor" aria-label="ç« èŠ‚ï¼š x86-64 ä¸­çš„ fault / abort" tabindex="-1"></a><span>x86-64 ä¸­çš„ fault / abort</span></h4>
<ul>
<li>Divide Error Exception (Interrupt 0): é™¤ä»¥é›¶<span class="mojikumi-line-end">ã€‚</span>å®ƒæ˜¯ fault<span class="mojikumi-line-end">ï¼Œ</span>ä½†å®é™…ä¸Š Linux ä¸ä¼šå°è¯•ä» divide error ä¸­æ¢å¤<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä¼šç›´æ¥ abort<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¼šæ˜¾ç¤ºä¸º <span class="mojikumi">â€œ</span>floating point exception<span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span></li>
<li>General Protection Exception (Interrupt 13): æœ‰å¤šç§è§¦å‘åŸå› <span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚è®¿é—®æœªå®šä¹‰çš„å†…å­˜<span class="mojikumi-line-end">ï¼Œ</span>å°è¯•å†™å…¥åªè¯»çš„å†…å­˜æ®µ<span class="mojikumi-line-end">ã€‚</span>Linux ä¹Ÿä¸ä¼šå°è¯•ä»ä¸­æ¢å¤<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä¼šç›´æ¥ abort<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¼šæ˜¾ç¤ºä¸º <span class="mojikumi">â€œ</span>segmentation fault<span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span></li>
<li>Page-Fault Exception (Interrupt 14): page fault æ˜¯ä¸€ä¸ªåå‰¯å…¶å®çš„ fault<span class="mojikumi-line-end">ï¼Œ</span>ä¼šå°è¯•æ¢å¤<span class="mojikumi-line-end">ï¼Œ</span>è¯¦è§<a href="/post/2022/11/csapp-9">ç¬¬ä¹ç« </a><span class="mojikumi-line-end">ã€‚</span></li>
<li>Machine-Check Exception (Interrupt 18): ä¸¥é‡çš„ç¡¬ä»¶é”™è¯¯<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯ abort<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p><span class="mojikumi-line-start">ï¼ˆ</span>å®Œæ•´åˆ—è¡¨å‚è§ <a href="https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html">IntelÂ® 64 and IA-32 Architectures Software Developer Manuals</a> Volume 3A çš„ <span class="mojikumi">â€œ</span>6.15 EXCEPTION AND INTERRUPT REFERENCE<span class="mojikumi">â€</span> ä¸€èŠ‚<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<h4 id="linux-ä¸­çš„-system-call" class="heading"><a href="#linux-ä¸­çš„-system-call" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Linux ä¸­çš„ system call" tabindex="-1"></a><span>Linux ä¸­çš„ system call</span></h4>
<p>Linux ä¸­å¸¸ç”¨çš„ä¸€äº› system call å¦‚ CS:APP Figure 8.10 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig8.10.f8581cd0.webp"><img srcset="/assets/csapp-fig8.10.9e132224.png" loading="lazy" src="/assets/csapp-fig8.10.9e132224.png" width="1094" height="320" alt="Linux ä¸­å¸¸ç”¨çš„ä¸€äº› system call"></picture></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>æ›´å¤š system call å‚è§ <code>man syscalls</code><span class="mojikumi-line-end">ï¼‰</span></p>
<p>åœ¨ C è¯­è¨€ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ <code>syscall</code> å‡½æ•°æ¥è°ƒç”¨ system call<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¸€èˆ¬ä¸è¿™æ ·åš<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ä½¿ç”¨æ¯ä¸ª system call å¯¹åº”çš„ wrapper function<span class="mojikumi-line-end">ã€‚</span><code>syscall</code> å’Œ wrapper function ç»Ÿç§°ä¸º <i>system-level function</i><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="processes" class="heading"><a href="#processes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Processes" tabindex="-1"></a><span>Processes</span></h2>
<p>ä¸€ä¸ªç³»ç»Ÿä¸­ä¼šæœ‰å¾ˆå¤šè¿›ç¨‹åŒæ—¶è¿è¡Œ<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¥é€ å‡ºäº†æ¯ä¸ªè¿›ç¨‹éƒ½ç‹¬å äº†å¤„ç†å™¨å’Œå†…å­˜çš„å‡è±¡<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿›ç¨‹ç‹¬å å†…å­˜çš„å‡è±¡æ˜¯é€šè¿‡æ¯ä¸ªè¿›ç¨‹çš„ private address space å®ç°çš„<span class="mojikumi-line-end">ï¼Œ</span>è¯¦è§<a href="/post/2022/11/csapp-9">ç¬¬ä¹ç« </a><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="logical-concurrent-flow" class="heading"><a href="#logical-concurrent-flow" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Logical / Concurrent Flow" tabindex="-1"></a><span>Logical / Concurrent Flow</span></h3>
<p>æ ¹æ®ä¸€ä¸ªç¨‹åºçš„æŒ‡ä»¤å¾—åˆ°çš„ control flow ç§°ä½œ <i>logical (control) flow</i><span class="mojikumi-line-end">ã€‚</span>ç³»ç»Ÿä¼šåœ¨ä¸åŒçš„è¿›ç¨‹é—´æ¥å›åˆ‡æ¢<span class="mojikumi-line-end">ï¼Œ</span>ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢å‡ºå»ç§°ä½œå°†è¿™ä¸ªè¿›ç¨‹ <i>preempt</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœä¸¤ä¸ª control flow çš„å­˜æ´»æ—¶é—´æœ‰é‡å <span class="mojikumi-line-end">ï¼Œ</span>åˆ™ç§°å®ƒä»¬æ˜¯ <i>concurrent flow</i> æˆ–å®ƒä»¬ <i>run concurrently</i><span class="mojikumi-line-end">ã€‚</span>è¿™ç§ç°è±¡è¢«ç§°ä½œ <i>concurrency</i><span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿè¢«ç§°ä½œ <i>multitasking</i><span class="mojikumi-line-end">ã€‚</span>æ¯æ¬¡è¿ç»­æ‰§è¡Œçš„åŒä¸€ä¸ª logical flow ä¸­çš„ä¸€æ®µç§°ä½œä¸€ä¸ª <i>time slice</i><span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ multitasking ä¹Ÿè¢«ç§°ä½œ <i>time slicing</i><span class="mojikumi-line-end">ã€‚</span>å¦‚æœä¸¤ä¸ª logical flow åœ¨ä¸åŒçš„ processor core ä¸Šè¿è¡Œ<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ç§°å®ƒä»¬æ˜¯ <i>parallel flow</i><span class="mojikumi-line-end">ï¼Œ</span><i>run in parallel</i><span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="user-kernel-mode" class="heading"><a href="#user-kernel-mode" class="heading-anchor" aria-label="ç« èŠ‚ï¼š User / Kernel Mode" tabindex="-1"></a><span>User / Kernel Mode</span></h3>
<p>åœ¨å¤„ç†å™¨ä¸­å­˜æœ‰ä¸€ä¸ª <i>mode bit</i><span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºå½“å‰æ˜¯ user mode è¿˜æ˜¯ kernel mode<span class="mojikumi-line-end">ã€‚</span>åªæœ‰åœ¨ kernel mode ä¸‹æ‰èƒ½æ‰§è¡ŒæŸäº› <i>privileged instruction</i><span class="mojikumi-line-end">ã€</span>ä¿®æ”¹ mode bit<span class="mojikumi-line-end">ã€</span>è®¿é—®åœ°å€ç©ºé—´ä¸­å±äº kernel çš„åŒºåŸŸ<span class="mojikumi-line-end">ã€‚</span></p>
<p>user mode çš„ç¨‹åºåªèƒ½é€šè¿‡ exception æ¥è¿›å…¥ kernel mode<span class="mojikumi-line-end">ï¼Œ</span>ä»¥æ‰§è¡Œ privileged instruction æˆ–è€…è®¿é—® kernel çš„æ•°æ®<span class="mojikumi-line-end">ã€‚</span>åœ¨ Linux ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥åœ¨ user mode ä¸‹è®¿é—® <code>/proc</code><span class="mojikumi-line-end">ã€</span><code>/sys</code> æ¥è·å¾—ä¸€äº› kernel çš„æ•°æ®<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="context-switch" class="heading"><a href="#context-switch" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Context Switch" tabindex="-1"></a><span>Context Switch</span></h3>
<p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª <i>context</i><span class="mojikumi-line-end">ï¼Œ</span>åŒ…æ‹¬å¯„å­˜å™¨å†…å®¹<span class="mojikumi-line-end">ã€</span>PC<span class="mojikumi-line-end">ã€</span>user stack<span class="mojikumi-line-end">ã€</span>kernel stack<span class="mojikumi-line-end">ã€</span>condition codes<span class="mojikumi-line-end">ã€</span>page table<span class="mojikumi-line-end">ã€</span>process table<span class="mojikumi-line-end">ã€</span>file table ç­‰ç­‰<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ“ä½œç³»ç»Ÿé€šè¿‡ <i>context switch</i> æ¥åœ¨ä¸åŒè¿›ç¨‹é—´åˆ‡æ¢<span class="mojikumi-line-end">ï¼Œ</span>å³ä¿å­˜å½“å‰è¿›ç¨‹çš„ context<span class="mojikumi-line-end">ï¼Œ</span>æ¢å¤è¦åˆ‡æ¢åˆ°çš„è¿›ç¨‹çš„ context<span class="mojikumi-line-end">ï¼Œ</span>æœ€ååˆ‡æ¢è¿‡å»<span class="mojikumi-line-end">ã€‚</span>context switch åœ¨ exception ä¸­å‘ç”Ÿ<span class="mojikumi-line-end">ï¼Œ</span>å¤„ç† exception æ—¶æ“ä½œç³»ç»Ÿä¸­çš„ <i>scheduler</i> ä¼šå†³å®šæ˜¯å¦è¿›è¡Œ context switch<span class="mojikumi-line-end">ï¼Œ</span>schedule åˆ°å“ªä¸ªè¿›ç¨‹<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>åœ¨é€šè¿‡ system call è¯»å–æ–‡ä»¶æ—¶è¿›è¡Œ context switch<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åœ¨ç­‰å¾…è¯»å–æ–‡ä»¶æ—¶å…ˆæ‰§è¡Œå…¶ä»–è¿›ç¨‹<span class="mojikumi-line-end">ï¼›</span>è¯»å–åˆ°æ–‡ä»¶ååœ¨ interrupt ä¸­å† context switch å›æ¥<span class="mojikumi-line-end">ã€‚</span></li>
<li>ç³»ç»Ÿä¼šå‘¨æœŸæ€§åœ°<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚æ¯ 1ms<span class="mojikumi-line-end">ï¼‰</span>è§¦å‘ interrupt<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œå¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œäº†ä¸€æ®µæ—¶é—´åè¿›è¡Œ context switch<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>å› ä¸ºç¨‹åºä¸çŸ¥é“æ“ä½œç³»ç»Ÿä¼šå¦‚ä½• schedule<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒè¿›ç¨‹çš„æ‰§è¡Œé¡ºåºæ˜¯æ²¡æœ‰ä¿è¯çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="system-call-error-handling" class="heading"><a href="#system-call-error-handling" class="heading-anchor" aria-label="ç« èŠ‚ï¼š System Call Error Handling" tabindex="-1"></a><span>System Call Error Handling</span></h2>
<p>system-level function ä¸€èˆ¬ä»¥è¿”å› -1 ä»£è¡¨å‡ºé”™<span class="mojikumi-line-end">ï¼Œ</span>è€Œå°†å…·ä½“çš„é”™è¯¯è®°å½•åœ¨å…¨å±€æ•´å‹å˜é‡ <code>errno</code> (<code>#include &#x3C;errno.h></code>)<span class="mojikumi-line-end">ï¼Œ</span>å‡½æ•° <code>strerror</code> å¯ä»¥ç”¨æ¥æ ¹æ® <code>errno</code> å¾—åˆ°æ–‡å­—é”™è¯¯ä¿¡æ¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>è°ƒç”¨ system-level function æ—¶åº”å½“æ£€æŸ¥é”™è¯¯<span class="mojikumi-line-end">ã€‚</span>ä¸ºäº†ä½¿é”™è¯¯å¤„ç†æ›´åŠ ç®€ä¾¿<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ç±»ä¼¼ä¸‹é¢çš„ wrapper function<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="c ä»£ç å—" data-v-ad49d235>c</h3><ile-root id="ile-1"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-1--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">#include</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&lt;</span><span style="color: #ECC48D">errno.h</span><span style="color: #D9F5DD">&gt;</span></span>
<span><span style="color: #C792EA">#include</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&lt;</span><span style="color: #ECC48D">stdio.h</span><span style="color: #D9F5DD">&gt;</span></span>
<span><span style="color: #C792EA">#include</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&lt;</span><span style="color: #ECC48D">stdlib.h</span><span style="color: #D9F5DD">&gt;</span></span>
<span><span style="color: #C792EA">#include</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&lt;</span><span style="color: #ECC48D">string.h</span><span style="color: #D9F5DD">&gt;</span></span>
<span><span style="color: #C792EA">#include</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&lt;</span><span style="color: #ECC48D">unistd.h</span><span style="color: #D9F5DD">&gt;</span></span>
<span></span>
<span><span style="color: #C792EA">void</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">unix_error</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">char</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">*</span><span style="color: #D7DBE0">msg</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">{</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">fprintf(stderr, </span><span style="color: #D9F5DD">&quot;</span><span style="color: #82AAFF">%s</span><span style="color: #ECC48D">: </span><span style="color: #82AAFF">%s</span><span style="color: #F78C6C">\n</span><span style="color: #D9F5DD">&quot;</span><span style="color: #82AAFF">, msg, strerror(errno))</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #82AAFF">exit(errno)</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">}</span></span>
<span></span>
<span><span style="color: #C792EA">pid_t</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">Fork</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">void</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">{</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">pid_t</span><span style="color: #D6DEEB"> pid </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">fork()</span><span style="color: #D6DEEB">;</span></span>
<span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">if</span><span style="color: #D6DEEB"> (pid </span><span style="color: #C792EA">&lt;</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">0</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">        </span><span style="color: #82AAFF">unix_error(</span><span style="color: #D9F5DD">&quot;</span><span style="color: #ECC48D">Fork error</span><span style="color: #D9F5DD">&quot;</span><span style="color: #82AAFF">)</span><span style="color: #D6DEEB">;</span></span>
<span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">return</span><span style="color: #D6DEEB"> pid;</span></span>
<span><span style="color: #D6DEEB">}</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">#include</span><span style="color: #403F53"> </span><span style="color: #111111">&lt;</span><span style="color: #C96765">errno.h</span><span style="color: #111111">&gt;</span></span>
<span><span style="color: #994CC3">#include</span><span style="color: #403F53"> </span><span style="color: #111111">&lt;</span><span style="color: #C96765">stdio.h</span><span style="color: #111111">&gt;</span></span>
<span><span style="color: #994CC3">#include</span><span style="color: #403F53"> </span><span style="color: #111111">&lt;</span><span style="color: #C96765">stdlib.h</span><span style="color: #111111">&gt;</span></span>
<span><span style="color: #994CC3">#include</span><span style="color: #403F53"> </span><span style="color: #111111">&lt;</span><span style="color: #C96765">string.h</span><span style="color: #111111">&gt;</span></span>
<span><span style="color: #994CC3">#include</span><span style="color: #403F53"> </span><span style="color: #111111">&lt;</span><span style="color: #C96765">unistd.h</span><span style="color: #111111">&gt;</span></span>
<span></span>
<span><span style="color: #994CC3">void</span><span style="color: #403F53"> </span><span style="color: #4876D6">unix_error</span><span style="color: #403F53">(</span><span style="color: #994CC3">char</span><span style="color: #403F53"> </span><span style="color: #0C969B">*</span><span style="color: #403F53">msg)</span></span>
<span><span style="color: #403F53">{</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">fprintf(stderr, </span><span style="color: #111111">&quot;</span><span style="color: #4876D6">%s</span><span style="color: #C96765">: </span><span style="color: #4876D6">%s</span><span style="color: #AA0982">\n</span><span style="color: #111111">&quot;</span><span style="color: #4876D6">, msg, strerror(errno))</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">    </span><span style="color: #4876D6">exit(errno)</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">}</span></span>
<span></span>
<span><span style="color: #994CC3">pid_t</span><span style="color: #403F53"> </span><span style="color: #4876D6">Fork</span><span style="color: #403F53">(</span><span style="color: #994CC3">void</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">{</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">pid_t</span><span style="color: #403F53"> pid </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">fork()</span><span style="color: #403F53">;</span></span>
<span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">if</span><span style="color: #403F53"> (pid </span><span style="color: #994CC3">&lt;</span><span style="color: #403F53"> </span><span style="color: #AA0982">0</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">        </span><span style="color: #4876D6">unix_error(</span><span style="color: #111111">&quot;</span><span style="color: #C96765">Fork error</span><span style="color: #111111">&quot;</span><span style="color: #4876D6">)</span><span style="color: #403F53">;</span></span>
<span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">return</span><span style="color: #403F53"> pid;</span></span>
<span><span style="color: #403F53">}</span></span></code></pre></div></section>
<h2 id="process-control" class="heading"><a href="#process-control" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Process Control" tabindex="-1"></a><span>Process Control</span></h2>
<p>C è¯­è¨€ä¸­æœ‰å¾ˆå¤šç”¨æ¥æ§åˆ¶ Unix è¿›ç¨‹çš„å‡½æ•°<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="è·å–-pid" class="heading"><a href="#è·å–-pid" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è·å– PID" tabindex="-1"></a><span>è·å– PID</span></h3>
<p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª PID<span class="mojikumi-line-end">ã€‚</span></p>
<ul>
<li><code>pid_t<wbr> <wbr>getpid<wbr>(<wbr>void<wbr>)</code>: è¿”å›å½“å‰è¿›ç¨‹çš„ PID</li>
<li><code>pid_t<wbr> <wbr>getppid<wbr>(<wbr>void<wbr>)</code>: è¿”å›å½“å‰è¿›ç¨‹çš„ parent çš„ PID</li>
</ul>
<h3 id="è¿›ç¨‹çš„çŠ¶æ€" class="heading"><a href="#è¿›ç¨‹çš„çŠ¶æ€" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è¿›ç¨‹çš„çŠ¶æ€" tabindex="-1"></a><span>è¿›ç¨‹çš„çŠ¶æ€</span></h3>
<p>æ¯ä¸ªè¿›ç¨‹å¯èƒ½å¤„äºä¸‰ç§çŠ¶æ€ä¹‹ä¸€<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>Running: æ­£åœ¨è¿è¡Œä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¼šè¢« schedule<span class="mojikumi-line-end">ã€‚</span></li>
<li>Stopped: è¢« suspend äº†<span class="mojikumi-line-end">ï¼Œ</span>ä¸ä¼šè¢« schedule<span class="mojikumi-line-end">ã€‚</span>Stopped å¯èƒ½æ˜¯ SIGSTOP<span class="mojikumi-line-end">ã€</span>SIGTSTP<span class="mojikumi-line-end">ã€</span>SIGTTIN<span class="mojikumi-line-end">ã€</span>SIGTTOU å¯¼è‡´çš„<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”± SIGCONT æ¢å¤è¿è¡Œ<span class="mojikumi-line-end">ã€‚</span></li>
<li>Terminated: è¿›ç¨‹æ°¸ä¹…åœ°ç»“æŸäº†<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½æ˜¯ä» <code>main</code> å‡½æ•°è¿”å›<span class="mojikumi-line-end">ã€</span>è°ƒç”¨äº† <code>exit</code> å‡½æ•°æˆ–è€…æ”¶åˆ°äº†æŸäº› signal<span class="mojikumi-line-end">ã€‚</span></li>
</ol>
<ul>
<li><code>void exit(int status)</code>: ä»¥æŸä¸ª exit status å°†å½“å‰è¿›ç¨‹ terminate</li>
</ul>
<h3 id="fork" class="heading"><a href="#fork" class="heading-anchor" aria-label="ç« èŠ‚ï¼š fork" tabindex="-1"></a><span>fork</span></h3>
<ul>
<li><code>pid_t fork(void)</code>: åˆ›å»ºå­è¿›ç¨‹</li>
</ul>
<p>fork ä¼šå°†å½“å‰è¿›ç¨‹çš„æ‰€æœ‰çŠ¶æ€å¤åˆ¶ä¸€ä»½åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹<span class="mojikumi-line-end">ï¼Œ</span>æ–°çš„è¿›ç¨‹æœ‰ç€å’ŒåŸæ¥ç›¸åŒçš„ä»£ç <span class="mojikumi-line-end">ã€</span>æ•°æ®<span class="mojikumi-line-end">ã€</span>æ–‡ä»¶<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ <code>stdout</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½† PID ä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”åç»­å¯¹æ•°æ®çš„ä¿®æ”¹æ˜¯å’ŒåŸè¿›ç¨‹ç‹¬ç«‹çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>fork ä¼šè°ƒç”¨ä¸€æ¬¡<span class="mojikumi-line-end">ï¼Œ</span>è¿”å›ä¸¤æ¬¡<span class="mojikumi-line-end">ï¼Œ</span>åˆ†åˆ«åœ¨ä¸¤ä¸ªè¿›ç¨‹ä¸­è¿”å›<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ parent ä¸­è¿”å› child çš„ PID<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ child ä¸­è¿”å› 0<span class="mojikumi-line-end">ï¼Œ</span>å‡ºé”™åˆ™è¿”å› -1<span class="mojikumi-line-end">ã€‚</span></p>
<p>fork å‡ºçš„è¿›ç¨‹å’ŒåŸè¿›ç¨‹åœ¨æ¥ä¸‹æ¥ä¼šæ‰§è¡ŒåŒä¸€ä»½ä»£ç <span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ä¸€èˆ¬ä¼šåˆ¤æ–­ <code>fork</code> çš„è¿”å›å€¼æ˜¯å¦ä¸º 0 æ¥è®©ä¸¤ä¸ªè¿›ç¨‹æ‰§è¡Œä¸åŒçš„åˆ†æ”¯<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="process-group" class="heading"><a href="#process-group" class="heading-anchor" aria-label="ç« èŠ‚ï¼š process group" tabindex="-1"></a><span>process group</span></h3>
<p>æ¯ä¸ªè¿›ç¨‹ä¼šå±äºä¸€ä¸ª process group<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª process group æœ‰ä¸€ä¸ª ID<span class="mojikumi-line-end">ã€‚</span></p>
<p>åˆ›å»ºå­è¿›ç¨‹æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å­è¿›ç¨‹ä¼šé»˜è®¤å¤„äº parent çš„ process group<span class="mojikumi-line-end">ã€‚</span></p>
<ul>
<li><code>pid_t<wbr> <wbr>getpgrp<wbr>(<wbr>void<wbr>)</code>: è¿”å›å½“å‰è¿›ç¨‹çš„ process group ID</li>
<li><code>int<wbr> <wbr>setpgid<wbr>(<wbr>pid_t<wbr> <wbr>pid<wbr>, <wbr>pid_t<wbr> <wbr>pgid<wbr>)</code>: å°† <code>pid</code> å¯¹åº”çš„è¿›ç¨‹çš„ progress group ID ä¿®æ”¹ä¸º <code>pgid</code><span class="mojikumi-line-end">ï¼Œ</span><code>pid</code> ä¸º 0 è¡¨ç¤ºå½“å‰è¿›ç¨‹<span class="mojikumi-line-end">ï¼Œ</span><code>pgid</code> ä¸º 0 è¡¨ç¤ºä¿®æ”¹ä¸º <code>pid</code> å¯¹åº”çš„è¿›ç¨‹çš„ PID</li>
</ul>
<h3 id="wait" class="heading"><a href="#wait" class="heading-anchor" aria-label="ç« èŠ‚ï¼š wait" tabindex="-1"></a><span>wait</span></h3>
<ul>
<li><code>pid_t<wbr> <wbr>waitpid<wbr>(<wbr>pid_t<wbr> <wbr>pid<wbr>, <wbr>int<wbr> *<wbr>statusp<wbr>, <wbr>int<wbr> <wbr>options<wbr>)</code>: ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</li>
<li><code>pid_t wait(int *statusp)</code>: <code>waitpid<wbr>(-<wbr>1<wbr>, <wbr>statusp<wbr>, <wbr>0<wbr>)</code></li>
</ul>
<h4 id="waitpid-çš„-pid-å‚æ•°" class="heading"><a href="#waitpid-çš„-pid-å‚æ•°" class="heading-anchor" aria-label="ç« èŠ‚ï¼š waitpid çš„ pid å‚æ•°" tabindex="-1"></a><span>waitpid çš„ pid å‚æ•°</span></h4>
<p>å‚æ•° <code>pid</code> å†³å®šäº†è¦ç­‰å¾…çš„æ˜¯å“ªäº›å­è¿›ç¨‹<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>-1: æ‰€æœ‰å­è¿›ç¨‹</li>
<li>> 0: PID ä¸º <code>pid</code> çš„å­è¿›ç¨‹</li>
<li>0: process group ä¸å½“å‰è¿›ç¨‹ç›¸åŒçš„å­è¿›ç¨‹</li>
<li>&#x3C; -1: process group ID ä¸º <code>-pid</code> çš„å­è¿›ç¨‹</li>
</ul>
<h4 id="waitpid-çš„è¡Œä¸º-options" class="heading"><a href="#waitpid-çš„è¡Œä¸º-options" class="heading-anchor" aria-label="ç« èŠ‚ï¼š waitpid çš„è¡Œä¸º (options)" tabindex="-1"></a><span>waitpid çš„è¡Œä¸º (options)</span></h4>
<p>é»˜è®¤æƒ…å†µä¸‹<span class="mojikumi-line-end">ï¼Œ</span><code>waitpid</code> ä¼šç­‰å¾…åˆ°æœ‰æŸä¸ªè¢«ç­‰å¾…çš„å­è¿›ç¨‹ terminate å†è¿”å›<span class="mojikumi-line-end">ï¼Œ</span><code>options</code> å¯ä»¥æ”¹å˜è¿™ä¸€è¡Œä¸º<span class="mojikumi-line-end">ï¼Œ</span>å…¶å€¼å¯ä»¥åŒ…å«ä¸‹åˆ— flag<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>WNOHANG</code>: ç«‹å³è¿”å›<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­è¿›ç¨‹åˆ™è¿”å› 0</li>
<li><code>WUNTRACED</code>: é™¤äº† terminate<span class="mojikumi-line-end">ï¼Œ</span>å­è¿›ç¨‹ stop ä¹Ÿå¯ä»¥ç»“æŸç­‰å¾…</li>
<li><code>WCONTINUED</code>: é™¤äº† terminate<span class="mojikumi-line-end">ï¼Œ</span>å­è¿›ç¨‹ä» stopped ä¸­ continue ä¹Ÿå¯ä»¥ç»“æŸç­‰å¾…</li>
</ul>
<h4 id="reap" class="heading"><a href="#reap" class="heading-anchor" aria-label="ç« èŠ‚ï¼š reap" tabindex="-1"></a><span>reap</span></h4>
<p>é™¤äº†ç­‰å¾…<span class="mojikumi-line-end">ï¼Œ</span>wait è¿˜ä¼šå°† terminated çš„å­è¿›ç¨‹ <i>reap</i><span class="mojikumi-line-end">ï¼Œ</span>å³å½»åº•æ¸…é™¤æ‰<span class="mojikumi-line-end">ã€‚</span>æ²¡æœ‰è¢« reap ä½† terminated çš„è¿›ç¨‹è¢«ç§°ä½œ <i>zombie</i><span class="mojikumi-line-end">ï¼Œ</span>ä¼šå ç”¨ä¸€å®šçš„ç³»ç»Ÿèµ„æº<span class="mojikumi-line-end">ã€‚</span>åœ¨ <code>ps</code> ä¸­<span class="mojikumi-line-end">ï¼Œ</span>zombie æ˜¾ç¤ºä¸º <code>[defunct]</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœ parent terminate äº†<span class="mojikumi-line-end">ï¼Œ</span>æ²¡æœ‰ terminate çš„å­è¿›ç¨‹ä¼šè¢«è®¾ç½®ä¸º PID ä¸º 1 çš„ <code>init</code> è¿›ç¨‹çš„å­è¿›ç¨‹<span class="mojikumi-line-end">ï¼Œ</span>è€Œ zombie å­è¿›ç¨‹åˆ™ä¼šè¢« <code>init</code> reap<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="wait-è·å–å­è¿›ç¨‹çš„-status" class="heading"><a href="#wait-è·å–å­è¿›ç¨‹çš„-status" class="heading-anchor" aria-label="ç« èŠ‚ï¼š wait è·å–å­è¿›ç¨‹çš„ status" tabindex="-1"></a><span>wait è·å–å­è¿›ç¨‹çš„ status</span></h4>
<p>å¦‚æœ <code>statusp</code> å‚æ•°ä¸æ˜¯ <code>NULL</code><span class="mojikumi-line-end">ï¼Œ</span>åœ¨ <code>waitpid</code> è¿”å›æ—¶ <code>*statusp</code> å†…å°±ä¼šå­˜æœ‰å¼•èµ·ç­‰å¾…ç»“æŸçš„é‚£ä¸ªå­è¿›ç¨‹çš„ä¿¡æ¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰ä¸€ç³»åˆ— macro å¯ä»¥ç”¨æ¥æå– status ä¸­çš„ä¿¡æ¯<span class="mojikumi-line-start">ï¼ˆ</span>å‚æ•°æ˜¯ <code>*statusp</code><span class="mojikumi-line-end">ï¼Œ</span>ä¸æ˜¯æŒ‡é’ˆ<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>WIFEXITED<wbr>(<wbr>status<wbr>)</code>: æ˜¯å¦æ­£å¸¸é€€å‡º (ä» <code>main</code> å‡½æ•°è¿”å›æˆ–è°ƒç”¨äº† <code>exit</code> å‡½æ•°)</li>
<li><code>WEXITSTATUS<wbr>(<wbr>status<wbr>)</code>: å¦‚æœæ­£å¸¸é€€å‡º<span class="mojikumi-line-end">ï¼Œ</span>åˆ™è¿”å› exit status (<code>main</code> å‡½æ•°è¿”å›å€¼ / <code>exit</code> å‡½æ•°å‚æ•°)</li>
<li><code>WIFSIGNALED<wbr>(<wbr>status<wbr>)</code>: æ˜¯å¦ç”±æŸä¸ª signal terminate</li>
<li><code>WTERMSIG<wbr>(<wbr>status<wbr>)</code>: å¦‚æœæ˜¯ç”±æŸä¸ª signal terminate<span class="mojikumi-line-end">ï¼Œ</span>è¿”å›è¿™ä¸ª signal</li>
<li><code>WIFSTOPPED<wbr>(<wbr>status<wbr>)</code>: æ˜¯å¦è¢« stop</li>
<li><code>WSTOPSIG<wbr>(<wbr>status<wbr>)</code>: å¦‚æœè¢« stop<span class="mojikumi-line-end">ï¼Œ</span>è¿”å›ä½¿å…¶ stop çš„ signal</li>
<li><code>WIFCONTINUED<wbr>(<wbr>status<wbr>)</code>: æ˜¯å¦è¢« continue</li>
</ul>
<h4 id="wait-çš„æŠ¥é”™" class="heading"><a href="#wait-çš„æŠ¥é”™" class="heading-anchor" aria-label="ç« èŠ‚ï¼š wait çš„æŠ¥é”™" tabindex="-1"></a><span>wait çš„æŠ¥é”™</span></h4>
<p>å‡ºé”™æ—¶ wait ä¼šè¿”å› -1<span class="mojikumi-line-end">ï¼Œ</span><code>errno</code> å¯èƒ½æ˜¯ <code>ECHILD</code> è¡¨ç¤ºè¢«ç­‰å¾…çš„å­è¿›ç¨‹é›†åˆä¸ºç©º<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½æ˜¯ <code>EINTR</code> è¡¨ç¤º wait å‡½æ•°è¢«æŸä¸ª signal ä¸­æ–­äº†<span class="mojikumi-line-end">ã€‚</span></p>
<p>wait ä¼šåœ¨æ¯æœ‰ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸæ—¶è¿”å›<span class="mojikumi-line-end">ï¼Œ</span>ä½†å­è¿›ç¨‹å…¨éƒ¨ç»“æŸæ—¶ä¼šæŠ¥é”™ <code>ECHILD</code><span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹é€šè¿‡ <code>while</code> å¾ªç¯æ¥ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹å…¨éƒ¨ç»“æŸ<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="sleep" class="heading"><a href="#sleep" class="heading-anchor" aria-label="ç« èŠ‚ï¼š sleep" tabindex="-1"></a><span>sleep</span></h3>
<ul>
<li><code>unsigned<wbr> <wbr>int<wbr> <wbr>sleep<wbr>(<wbr>unsigned<wbr> <wbr>int<wbr> <wbr>secs<wbr>)</code>: sleep è‹¥å¹²ç§’<span class="mojikumi-line-end">ï¼Œ</span>è¿”å›å‰©ä½™åº”å½“ sleep çš„ç§’æ•°<span class="mojikumi-line-start">ï¼ˆ</span>æ­£å¸¸æƒ…å†µä¸‹æ²¡è¢« interrupt å°±æ˜¯ 0<span class="mojikumi-line-end">ï¼‰</span></li>
<li><code>int<wbr> <wbr>pause<wbr>(<wbr>void<wbr>)</code>: ä¸€ç›´ sleep<span class="mojikumi-line-end">ï¼Œ</span>ç›´åˆ°è¢« signal interrupt<span class="mojikumi-line-end">ï¼Œ</span>æ€»æ˜¯è¿”å› -1</li>
</ul>
<h3 id="execve" class="heading"><a href="#execve" class="heading-anchor" aria-label="ç« èŠ‚ï¼š execve" tabindex="-1"></a><span>execve</span></h3>
<ul>
<li><code>int<wbr> <wbr>execve<wbr>(<wbr>const<wbr> <wbr>char<wbr> *<wbr>filename<wbr>, <wbr>char<wbr> *<wbr>const<wbr> <wbr>argv<wbr>[], <wbr>char<wbr> *<wbr>const<wbr> <wbr>envp<wbr>[])</code></li>
</ul>
<p><code>execve</code> ä¼šä»¥ <code>argv</code> ä½œä¸ºå‚æ•°<span class="mojikumi-line-end">ã€</span><code>envp</code> ä½œä¸ºç¯å¢ƒå˜é‡<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å½“å‰è¿›ç¨‹å†…æ‰§è¡Œ executable object file <code>filename</code><span class="mojikumi-line-end">ã€‚</span>å¯ä»¥å’Œ <code>fork</code> é…åˆæ¥åœ¨å­è¿›ç¨‹å†…æ‰§è¡Œå…¶ä»–ç¨‹åº<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>argv</code> æ˜¯ä¸€ä¸ªä»¥ <code>NULL</code> ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²æ•°ç»„<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºå„ä¸ªå‚æ•°<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ç¬¬ä¸€ä¸ªä¸€èˆ¬æ˜¯ç¨‹åºçš„åç§°<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>envp</code> ä¹Ÿæ˜¯ä»¥ <code>NULL</code> ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²æ•°ç»„<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ªå­—ç¬¦ä¸²å½¢å¦‚ <code>name=value</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰ä¸€äº›å‡½æ•°å¯ä»¥ç”¨æ¥è·å–<span class="mojikumi-line-end">ã€</span>è®¾ç½®ç¯å¢ƒå˜é‡<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>char<wbr> *<wbr>getenv<wbr>(<wbr>const<wbr> <wbr>char<wbr> *<wbr>name<wbr>)</code>: è¿”å› <code>NULL</code> æˆ–ç¯å¢ƒå˜é‡çš„å€¼</li>
<li><code>int<wbr> <wbr>setenv<wbr>(<wbr>const<wbr> <wbr>char<wbr> *<wbr>name<wbr>, <wbr>const<wbr> <wbr>char<wbr> *<wbr>newvalue<wbr>, <wbr>int<wbr> <wbr>overwrite<wbr>)</code>: æˆåŠŸåˆ™è¿”å› 0<span class="mojikumi-line-end">ï¼Œ</span>å¤±è´¥<span class="mojikumi-line-start">ï¼ˆ</span><code>overwrite</code> ä¸º 0 è€Œ <code>name</code> å·²å­˜åœ¨<span class="mojikumi-line-end">ï¼‰</span>åˆ™è¿”å› -1</li>
<li><code>void<wbr> <wbr>unsetenv<wbr>(<wbr>const<wbr> <wbr>char<wbr> *<wbr>name<wbr>)</code></li>
</ul>
<h2 id="signals" class="heading"><a href="#signals" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Signals" tabindex="-1"></a><span>Signals</span></h2>
<h3 id="signal-çš„ç§ç±»" class="heading"><a href="#signal-çš„ç§ç±»" class="heading-anchor" aria-label="ç« èŠ‚ï¼š signal çš„ç§ç±»" tabindex="-1"></a><span>signal çš„ç§ç±»</span></h3>
<p>å¯ä»¥ç”¨ <code>man signal.7</code> æŸ¥çœ‹ signal çš„åˆ—è¡¨<span class="mojikumi-line-start">ï¼ˆ</span>åç§°<span class="mojikumi-line-end">ã€</span>è¯­ä¹‰<span class="mojikumi-line-end">ã€</span>ç¼–å·<span class="mojikumi-line-end">ã€</span>é»˜è®¤è¡Œä¸º<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>ç‰¹åˆ«åœ°<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>é™¤ä»¥é›¶æ—¶ä¼šè¢«å‘é€ SIGFPE</li>
<li>æ‰§è¡Œéæ³•æŒ‡ä»¤æ—¶ä¼šè¢«å‘é€ SIGILL</li>
<li>éæ³•è®¿é—®å†…å­˜æ—¶ä¼šè¢«å‘é€ SIGSEGV</li>
<li>æŒ‰ Ctrl+C æ—¶ foreground process group ä¼šè¢«å‘é€ SIGINT</li>
<li>å­è¿›ç¨‹ terminate æ—¶ä¼šå‘ parent å‘é€ SIGCHLD</li>
<li>å¯ä»¥é€šè¿‡ SIGKILL æ¥å¼ºè¡Œ terminate ä¸€ä¸ªè¿›ç¨‹</li>
</ul>
<h3 id="signal-çš„å·¥ä½œæµç¨‹" class="heading"><a href="#signal-çš„å·¥ä½œæµç¨‹" class="heading-anchor" aria-label="ç« èŠ‚ï¼š signal çš„å·¥ä½œæµç¨‹" tabindex="-1"></a><span>signal çš„å·¥ä½œæµç¨‹</span></h3>
<ul>
<li>æ¯ä¸ªè¿›ç¨‹ä¼šè®°å½•æ¯ä¸ª signal æ˜¯å¦ <i>pending</i><span class="mojikumi-line-end">ã€</span>æ˜¯å¦ <i>blocked</i></li>
<li>å‘é€ signal ä¼šä½¿æ¥æ”¶è€…çš„è¿™ä¸ª signal å˜ä¸º pending</li>
<li>è¿›ç¨‹å¯ä»¥æ”¹å˜æ¯ä¸ª signal çš„ blocked çŠ¶æ€</li>
<li>åœ¨åˆ‡æ¢åˆ° user mode æ‰§è¡Œè¿›ç¨‹æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœä¸€ä¸ª signal å¤„äº pending çŠ¶æ€ä¸”æ²¡æœ‰è¢« blocked<span class="mojikumi-line-end">ï¼Œ</span>å°±ä¼šæ¥æ”¶è¿™ä¸ª signal<span class="mojikumi-line-end">ï¼Œ</span>å¹¶è®¾ä¸ºæ²¡æœ‰åœ¨ pending</li>
</ul>
<p>è¿™æ„å‘³ç€<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>signal åªè®°å½•æ˜¯å¦ pending<span class="mojikumi-line-end">ï¼Œ</span>ä¸ä¼šè®°å½•å‘é€äº†å‡ æ¬¡<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è¢«æ¥æ”¶å‰å¤šæ¬¡å‘é€åªä¼šè¢«æ¥æ”¶ä¸€æ¬¡</li>
<li>åœ¨ blocked çŠ¶æ€ä¸‹è¢«å‘é€ signal<span class="mojikumi-line-end">ï¼Œ</span>ä¼šåœ¨ unblock æ—¶æ”¶åˆ°</li>
</ul>
<h3 id="å‘é€-signal" class="heading"><a href="#å‘é€-signal" class="heading-anchor" aria-label="ç« èŠ‚ï¼š å‘é€ signal" tabindex="-1"></a><span>å‘é€ signal</span></h3>
<h4 id="kill-å‘½ä»¤" class="heading"><a href="#kill-å‘½ä»¤" class="heading-anchor" aria-label="ç« èŠ‚ï¼š kill å‘½ä»¤" tabindex="-1"></a><span>kill å‘½ä»¤</span></h4>
<p>å¯ä»¥ç”¨ <code>kill</code> å‘½ä»¤åœ¨ shell ä¸­å‘æŒ‡å®šçš„è¿›ç¨‹å‘é€ä¿¡å·<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬ shell ä¼šæœ‰ builtin çš„ <code>kill</code><span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæœ‰ä½äº <code>/<wbr>usr<wbr>/<wbr>bin<wbr>/<wbr>kill</code> çš„ <code>kill</code><span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½æœ‰ä¸€å®šçš„åŒºåˆ«<span class="mojikumi-line-end">ã€‚</span></p>
<p>åŸºç¡€çš„ <code>kill</code> å‘½ä»¤å½¢å¦‚ <code>kill -sig pid</code><span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ <code>-sig</code> å¯ä»¥å½¢å¦‚ <code>-INT</code>/<code>-SIGINT</code>/<code>-2</code><span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>pid</code> è¡¨ç¤ºè¦æŠŠä¿¡å·å‘é€ç»™<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>> 0: PID ä¸º <code>pid</code> çš„è¿›ç¨‹</li>
<li>0: process group å’Œå½“å‰è¿›ç¨‹ç›¸åŒçš„è¿›ç¨‹</li>
<li>-1: é™¤ PID ä¸º 1 çš„ <code>init</code> å¤–çš„æ‰€æœ‰è¿›ç¨‹</li>
<li>&#x3C; 0: process group ID ä¸º <code>-pid</code> çš„è¿›ç¨‹</li>
</ul>
<p>è¿™ä¸ <a href="#waitpid-%E7%9A%84-pid-%E5%8F%82%E6%95%B0">waitpid çš„ pid å‚æ•°</a> æ˜¯ç±»ä¼¼çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="åœ¨-shell-ä¸­ä½¿ç”¨é”®ç›˜å‘é€-sigint-sigtstp" class="heading"><a href="#åœ¨-shell-ä¸­ä½¿ç”¨é”®ç›˜å‘é€-sigint-sigtstp" class="heading-anchor" aria-label="ç« èŠ‚ï¼š åœ¨ shell ä¸­ä½¿ç”¨é”®ç›˜å‘é€ SIGINT / SIGTSTP" tabindex="-1"></a><span>åœ¨ shell ä¸­ä½¿ç”¨é”®ç›˜å‘é€ SIGINT / SIGTSTP</span></h4>
<p>shell ä¸­ä¼šæœ‰è‡³å¤šä¸€ä¸ª foreground job å’Œé›¶ä¸ªæˆ–è‹¥å¹²ä¸ª background job<span class="mojikumi-line-end">ã€‚</span>shell ä¼šç»™æ¯ä¸ª job ä¸­çš„æ‰€æœ‰è¿›ç¨‹æŒ‡å®šåŒæ ·çš„ process group<span class="mojikumi-line-end">ã€‚</span></p>
<p>Ctrl+C ä¼šå‘ foreground group å‘é€ SIGINT<span class="mojikumi-line-end">ï¼Œ</span>Ctrl+Z ä¼šå‘ foreground group å‘é€ SIGTSTP<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="ä½¿ç”¨å‡½æ•°å‘é€-signal" class="heading"><a href="#ä½¿ç”¨å‡½æ•°å‘é€-signal" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ä½¿ç”¨å‡½æ•°å‘é€ signal" tabindex="-1"></a><span>ä½¿ç”¨å‡½æ•°å‘é€ signal</span></h4>
<ul>
<li><code>int kill(pid_t pid, int sig)</code>: ä¸ <a href="#kill-%E5%91%BD%E4%BB%A4">kill å‘½ä»¤</a>ç±»ä¼¼</li>
<li><code>unsigned<wbr> <wbr>int<wbr> <wbr>alarm<wbr>(<wbr>unsigned<wbr> <wbr>int<wbr> <wbr>secs<wbr>)</code>: è®© kernel åœ¨ <code>secs</code> ç§’åå‘å½“å‰è¿›ç¨‹å‘é€ SIGALRM<span class="mojikumi-line-end">ï¼›</span>å¦‚æœæœ‰å°šæœªå‘é€çš„ alarm åˆ™å–æ¶ˆæ‰<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœ <code>secs</code> ä¸º 0 åˆ™å–æ¶ˆåä¸ä¼šå‘é€æ–°çš„ SIGALRM<span class="mojikumi-line-end">ï¼›</span>æ²¡æœ‰å°šæœªå‘é€çš„ alarm åˆ™è¿”å›å€¼æ˜¯ 0<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™æ˜¯è¢«å–æ¶ˆçš„ alarm è¿˜å‰©çš„ç§’æ•°</li>
</ul>
<h3 id="è®¾ç½®-signal-handler" class="heading"><a href="#è®¾ç½®-signal-handler" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è®¾ç½® signal handler" tabindex="-1"></a><span>è®¾ç½® signal handler</span></h3>
<p>é™¤äº† SIGKILL å’Œ SIGSTOP<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä»– signal çš„è¡Œä¸ºå¯ä»¥è¢«æ”¹å˜<span class="mojikumi-line-end">ã€‚</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="c ä»£ç å—" data-v-ad49d235>c</h4><ile-root id="ile-2"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-2--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">#include</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&lt;</span><span style="color: #ECC48D">signal.h</span><span style="color: #D9F5DD">&gt;</span></span>
<span><span style="color: #C792EA">typedef</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">void</span><span style="color: #D6DEEB"> (</span><span style="color: #7FDBCA">*</span><span style="color: #C5E478">sighandler_t</span><span style="color: #D6DEEB">)(</span><span style="color: #C792EA">int</span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #C5E478">sighandler_t</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">signal</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">int</span><span style="color: #D6DEEB"> </span><span style="color: #D7DBE0">signum</span><span style="color: #D6DEEB">, </span><span style="color: #C5E478">sighandler_t</span><span style="color: #D6DEEB"> </span><span style="color: #D7DBE0">handler</span><span style="color: #D6DEEB">);</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">#include</span><span style="color: #403F53"> </span><span style="color: #111111">&lt;</span><span style="color: #C96765">signal.h</span><span style="color: #111111">&gt;</span></span>
<span><span style="color: #994CC3">typedef</span><span style="color: #403F53"> </span><span style="color: #994CC3">void</span><span style="color: #403F53"> (</span><span style="color: #0C969B">*</span><span style="color: #4876D6">sighandler_t</span><span style="color: #403F53">)(</span><span style="color: #994CC3">int</span><span style="color: #403F53">);</span></span>
<span><span style="color: #4876D6">sighandler_t</span><span style="color: #403F53"> </span><span style="color: #4876D6">signal</span><span style="color: #403F53">(</span><span style="color: #994CC3">int</span><span style="color: #403F53"> signum, </span><span style="color: #4876D6">sighandler_t</span><span style="color: #403F53"> handler);</span></span></code></pre></div></section>
<p>å‡½æ•° <code>signal</code> ç”¨æ¥æ”¹å˜å¤„ç† signal <code>signum</code> çš„æ–¹å¼<span class="mojikumi-line-end">ã€‚</span><code>handler</code> å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥æ˜¯ <code>SIG_IGN</code> è¡¨ç¤ºæ— è§†è¿™ä¸ª signal<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€… <code>SIG_DFL</code> è¡¨ç¤ºä½¿ç”¨è¿™ä¸ª signal çš„é»˜è®¤è¡Œä¸º<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ‰ handler æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æ¥æ”¶åˆ°ä¸€ä¸ª signal å°±ä¼šè§¦å‘ exception æ¥æ‰§è¡Œ handler<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ handler ç»“æŸæ—¶ä¸€èˆ¬ä¼šè¿”å›åˆ°åŸæ¥çš„æŒ‡ä»¤<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨æ‰§è¡Œ handler çš„è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ç›¸åº”çš„ signal ä¼šè¢« block<span class="mojikumi-line-end">ï¼Œ</span>ä½† handler å¯ä»¥è¢«å…¶ä»–ç±»å‹çš„ signal interrupt<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å¤„ç†å®Œè¿™å¦ä¸€ä¸ª signal åè¿”å›åˆ°ä¸€å¼€å§‹çš„ handler<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="block-unblock-signal" class="heading"><a href="#block-unblock-signal" class="heading-anchor" aria-label="ç« èŠ‚ï¼š block / unblock signal" tabindex="-1"></a><span>block / unblock signal</span></h3>
<p>è¿›ç¨‹å¯ä»¥ä¸»åŠ¨ block / unblock æŒ‡å®šçš„ signal<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>int<wbr> <wbr>sigprocmask<wbr>(<wbr>int<wbr> <wbr>how<wbr>, <wbr>const<wbr> <wbr>sigset_t<wbr> *<wbr>set<wbr>, <wbr>sigset_t<wbr> *<wbr>oldset<wbr>)</code></li>
</ul>
<p>å…¶ä¸­ <code>how</code> æ˜¯ <code>SIG_BLOCK</code> / <code>SIG_UNBLOCK</code> / <code>SIG_SETMASK</code><span class="mojikumi-line-end">ï¼Œ</span>åˆ†åˆ«è¡¨ç¤º block <code>set</code> é‡Œçš„ signal / unblock <code>set</code> é‡Œçš„ signal / å°† blocked set è®¾ä¸º <code>set</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>è‹¥ <code>oldset</code> ä¸æ˜¯ <code>NULL</code><span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šå°†ä¿®æ”¹å‰çš„ blocked set å­˜ä¸‹æ¥<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿˜æœ‰ä¸€äº›ç”¨æ¥è®¾ç½® <code>sigset_t</code> çš„å‡½æ•°<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>int<wbr> <wbr>sigemptyset<wbr>(<wbr>sigset_t<wbr> *<wbr>set<wbr>)</code>: å°† <code>set</code> è®¾ä¸ºç©º</li>
<li><code>int<wbr> <wbr>sigfillset<wbr>(<wbr>sigset_t<wbr> *<wbr>set<wbr>)</code>: å°† <code>set</code> è®¾ä¸ºæ‰€æœ‰ signal</li>
<li><code>int<wbr> <wbr>sigaddset<wbr>(<wbr>sigset_t<wbr> *<wbr>set<wbr>, <wbr>int<wbr> <wbr>signum<wbr>)</code>: å°† <code>signum</code> åŠ å…¥ <code>set</code></li>
<li><code>int<wbr> <wbr>sigdelset<wbr>(<wbr>sigset_t<wbr> *<wbr>set<wbr>, <wbr>int<wbr> <wbr>signum<wbr>)</code>: å°† <code>signum</code> ä» <code>set</code> ä¸­åˆ å»</li>
<li><code>int<wbr> <wbr>sigismember<wbr>(<wbr>const<wbr> <wbr>sigset_t<wbr> *<wbr>set<wbr>, <wbr>int<wbr> <wbr>signum<wbr>)</code>: æ£€æŸ¥ <code>signum</code> æ˜¯å¦åœ¨ <code>set</code> ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¿”å› 0/1 æˆ–å‡ºé”™è¿”å› -1</li>
</ul>
<h3 id="ç¼–å†™ã€ä½¿ç”¨-signal-handler" class="heading"><a href="#ç¼–å†™ã€ä½¿ç”¨-signal-handler" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ç¼–å†™ã€ä½¿ç”¨ signal handler" tabindex="-1"></a><span>ç¼–å†™<span class="mojikumi-line-end">ã€</span>ä½¿ç”¨ signal handler</span></h3>
<h4 id="ç¼–å†™å®‰å…¨çš„-signal-handler" class="heading"><a href="#ç¼–å†™å®‰å…¨çš„-signal-handler" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ç¼–å†™å®‰å…¨çš„ signal handler" tabindex="-1"></a><span>ç¼–å†™å®‰å…¨çš„ signal handler</span></h4>
<p>ç”±äº signal handler å’Œä¸»ç¨‹åºå¹¶è¡Œè¿è¡Œ<span class="mojikumi-line-end">ã€</span>å…±äº«æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”ä¸»ç¨‹åºå¯èƒ½åœ¨æ„æƒ³ä¸åˆ°çš„åœ°æ–¹æ¥æ”¶åˆ° signal è€Œè¢« interrupt<span class="mojikumi-line-end">ï¼Œ</span>ç¼–å†™å®‰å…¨çš„ signal handler æ˜¯å›°éš¾çš„<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬è¦éµå¾ªä¸‹é¢çš„å®ˆåˆ™<span class="mojikumi-line-end">ï¼š</span></p>
<ol start="0">
<li>handler åº”å½“å°½é‡ç®€å•<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚å¯ä»¥è®¾ç½®ä¸€ä¸ª flag è€Œåœ¨ä¸»ç¨‹åºä¸­æ£€æŸ¥ flag å¹¶è¿›è¡Œå¤„ç†<span class="mojikumi-line-end">ï¼Œ</span>è€Œéç›´æ¥åœ¨ handler ä¸­å¤„ç†</li>
<li>åœ¨ handler ä¸­åªè°ƒç”¨ async-signal-safe çš„å‡½æ•°<span class="mojikumi-line-start">ï¼ˆ</span>å‡½æ•°åˆ—è¡¨å‚è§ <code>man<wbr> <wbr>signal<wbr>-<wbr>safety</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¸¸ç”¨çš„ <code>printf</code><span class="mojikumi-line-end">ã€</span><code>sprintf</code><span class="mojikumi-line-end">ã€</span><code>malloc</code><span class="mojikumi-line-end">ã€</span><code>exit</code> éƒ½ä¸æ˜¯ async-signal-safe çš„</li>
<li>å­˜å‚¨å¹¶æ¢å¤ <code>errno</code><span class="mojikumi-line-end">ï¼Œ</span>ä¿è¯è°ƒç”¨ handler å‰å <code>errno</code> ä¸å˜</li>
<li>è®¿é—® handler ä¸ä¸»ç¨‹åºå…±äº«çš„æ•°æ®æ—¶<span class="mojikumi-line-end">ï¼Œ</span>block signal ä»¥é˜²æ­¢åœ¨è®¿é—®çš„ä¸­é€”è¢« interrupt</li>
<li>æŠŠåœ¨ handler ä¸­ä¿®æ”¹è€Œåœ¨ä¸»ç¨‹åºä¸­è®¿é—®çš„çš„å…¨å±€å˜é‡å£°æ˜ä¸º <code>volatile</code> çš„<span class="mojikumi-line-end">ï¼Œ</span>é˜²æ­¢ç¼–è¯‘å™¨è¯¯è®¤ä¸ºå˜é‡æ²¡æœ‰è¢«ä¿®æ”¹è€Œé”™è¯¯åœ°è¿›è¡Œä¼˜åŒ–</li>
<li>å°† flag å£°æ˜ä¸º <code>sig_atomic_t</code> ç±»å‹<span class="mojikumi-line-end">ï¼Œ</span>å®ƒçš„å•æ¬¡è®¿é—®æ˜¯ atomic çš„<span class="mojikumi-line-end">ï¼Œ</span>ä¸ä¼šè¢« interrupt<span class="mojikumi-line-start">ï¼ˆ</span>ä½†å…ˆè¯»åå†™æ˜¯ä¸¤æ¬¡è®¿é—®<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½è¢« interrupt<span class="mojikumi-line-end">ï¼‰</span></li>
</ol>
<a id="ä¸ºä»€ä¹ˆå‡½æ•°ä¼šä¸-async-signal-safe" name="ä¸ºä»€ä¹ˆå‡½æ•°ä¼šä¸-async-signal-safe" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h5 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-pencil text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Note: </span><span data-v-a2ab257f>ä¸ºä»€ä¹ˆå‡½æ•°ä¼šä¸ async-signal-safe</span></h5><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>ä»¥ <code>printf</code> ä¸ºä¾‹<span class="mojikumi-line-end">ï¼Œ</span><code>printf</code> ä¼šä½¿ç”¨ä¸€ä¸ª statically allocated buffer<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœåœ¨ä¸­é€”è¢« interrupt<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨è¿”å›åˆ°è¢« interrupt çš„ä½ç½®å‰çš„è¿™æ®µæ—¶é—´é‡Œ<span class="mojikumi-line-end">ï¼Œ</span><code>printf</code> å†æ¬¡è¢«è°ƒç”¨<span class="mojikumi-line-end">ï¼Œ</span>é‚£ä¹ˆè¿™ä¸ª buffer å°±ä¼šå¤„äºä¸€ä¸ª inconsistent çš„ä¸­é—´æ€<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´ UB<span class="mojikumi-line-end">ã€‚</span></p><p>ä¹Ÿå°±æ˜¯è¯´<span class="mojikumi-line-end">ï¼Œ</span>ä¸€ä¸ªå‡½æ•°ä¸ async-signal-safe ä¸€èˆ¬æ˜¯å› ä¸ºä½¿ç”¨äº†ä¸€äº›å…¨å±€å˜é‡å¹¶ä¸”å¯èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢« interrupt<span class="mojikumi-line-end">ã€‚</span>è¦å®‰å…¨åœ°è°ƒç”¨è¿™æ ·çš„å‡½æ•°<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å…¶è¢« interrupt å<span class="mojikumi-line-end">ï¼Œ</span>ä¸‹æ¬¡æ‰§è¡Œå¿…é¡»è¦æ˜¯ä»è¢« interrupt çš„åœ°æ–¹ç»§ç»­<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¸èƒ½ä»å¤´å¼€å§‹<span class="mojikumi-line-end">ã€‚</span></p><p>é™¤äº†åœ¨ handler ä¸­åªè°ƒç”¨ async-signal-safe çš„å‡½æ•°<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨ä¸»ç¨‹åºä¸­è°ƒç”¨é async-signal-safe å‡½æ•°æ—¶ block æ‰ handler ä½¿ç”¨äº†è¿™ä¸€å‡½æ•°çš„ signal<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¿™å¾ˆéš¾åšåˆ°<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<h4 id="æ­£ç¡®å¤„ç†å¤šæ¬¡å‘é€çš„-signal" class="heading"><a href="#æ­£ç¡®å¤„ç†å¤šæ¬¡å‘é€çš„-signal" class="heading-anchor" aria-label="ç« èŠ‚ï¼š æ­£ç¡®å¤„ç†å¤šæ¬¡å‘é€çš„ signal" tabindex="-1"></a><span>æ­£ç¡®å¤„ç†å¤šæ¬¡å‘é€çš„ signal</span></h4>
<p>å¤šæ¬¡å‘é€ signal å¯èƒ½åªä¼šæ”¶åˆ°ä¸€æ¬¡<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥å¤„ç† signal æ—¶ä¸èƒ½è¯¯ä»¥ä¸ºæ”¶åˆ°çš„æ¬¡æ•°ä¸å‘é€çš„æ¬¡æ•°ç›¸åŒ<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>æ¥æ”¶ SIGCHLD æ¥ reap child æ—¶<span class="mojikumi-line-end">ï¼Œ</span>åº”å½“åœ¨ handler ä¸­ reap æ‰æ‰€æœ‰å·² terminate çš„å­è¿›ç¨‹<span class="mojikumi-line-end">ï¼Œ</span>è€Œéåª reap ä¸€ä¸ªå­è¿›ç¨‹<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="ä¸åŒç³»ç»Ÿä¸Š-signal-handling-çš„å·®å¼‚" class="heading"><a href="#ä¸åŒç³»ç»Ÿä¸Š-signal-handling-çš„å·®å¼‚" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ä¸åŒç³»ç»Ÿä¸Š signal handling çš„å·®å¼‚" tabindex="-1"></a><span>ä¸åŒç³»ç»Ÿä¸Š signal handling çš„å·®å¼‚</span></h4>
<p>åœ¨ä¸€äº›ç³»ç»Ÿä¸Š<span class="mojikumi-line-end">ï¼Œ</span>signal handling çš„è¯­ä¹‰ä¼šæœ‰åŒºåˆ«<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>
<p>åœ¨ä¸€äº›ç³»ç»Ÿä¸Š<span class="mojikumi-line-end">ï¼Œ</span>è°ƒç”¨äº† handler åè¿™ä¸ª signal å°±ä¼šæ¢å¤é»˜è®¤è¡Œä¸º<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦åœ¨ handler ä¸­é‡æ–°è°ƒç”¨ <code>signal</code> æ‰èƒ½ä¸€ç›´ä½¿ç”¨è¿™ä¸ª handler<span class="mojikumi-line-end">ã€‚</span></p>
</li>
<li>
<p>åœ¨ä¸€äº›ç³»ç»Ÿä¸Š<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦æ‰§è¡Œè¾ƒé•¿æ—¶é—´çš„ system call ä¼šåœ¨è¢« interrupt åæŠ¥é”™ EINTR<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨ç°ä»£ç³»ç»Ÿä¸Šä¼šå°½å¯èƒ½åœ°è‡ªåŠ¨é‡æ–°æ‰§è¡Œè¿™ä¸ª system call<span class="mojikumi-line-end">ï¼Œ</span>è¯¦è§ <code>man signal.7</code> çš„ <span class="mojikumi">â€œ</span>Interruption of system calls and library functions by signal handlers<span class="mojikumi">â€</span> ä¸€èŠ‚<span class="mojikumi-line-end">ã€‚</span></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>P.S. è¿™å°±æ˜¯ <a href="https://www.dreamsongs.com/RiseOfWorseIsBetter.html">Rise of Worse Is Better</a> ä¸­ç”¨æ¥ä¸¾ä¾‹çš„ <span class="mojikumi">â€œ</span>PC loser-ing problem<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>åŸæœ¬é‡‡ç”¨ worse-is-better çš„ Unix ç°åœ¨ä¹Ÿè¿›åŒ–æˆäº† the right thing<span class="mojikumi-line-end">ï¼‰</span>
<span class="mojikumi-line-start">ï¼ˆ</span>P.P.S. å½“æ—¶è¯»è¿™ç¯‡çš„æ—¶å€™æˆ‘å®Œå…¨æ²¡çœ‹æ‡‚è¿™ä¸€æ®µ<span class="mojikumi-line-end">ï¼Œ</span>æ²¡æƒ³åˆ°ç°åœ¨ç«Ÿç„¶è¿˜èƒ½è®°èµ·æ¥<span class="mojikumi-line-end">ï¼‰</span></p>
</li>
</ul>
<p>å¯ä»¥é€šè¿‡ <code>sigaction</code> å‡½æ•°æ¥è®¾ç½®æƒ³è¦çš„ signal handling è¯­ä¹‰<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="æ³¨æ„-handler-è¢«è°ƒç”¨çš„æ—¶æœº" class="heading"><a href="#æ³¨æ„-handler-è¢«è°ƒç”¨çš„æ—¶æœº" class="heading-anchor" aria-label="ç« èŠ‚ï¼š æ³¨æ„ handler è¢«è°ƒç”¨çš„æ—¶æœº" tabindex="-1"></a><span>æ³¨æ„ handler è¢«è°ƒç”¨çš„æ—¶æœº</span></h4>
<p>handler å¯èƒ½ä¼šåœ¨æ„æƒ³ä¸åˆ°çš„æ—¶æœºè¢«è°ƒç”¨<span class="mojikumi-line-end">ï¼Œ</span>ä¸ºäº†é¿å…å‡ºé”™<span class="mojikumi-line-start">ï¼ˆ</span>race<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šéœ€è¦æš‚æ—¶ block signal æ¥ç¡®ä¿ handler åœ¨æ­£ç¡®çš„æ—¶æœºè¢«è°ƒç”¨<span class="mojikumi-line-end">ã€‚</span>è¯¦è§ CS:APP ä¸Šçš„ä¾‹å­<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="ç­‰å¾…-signal" class="heading"><a href="#ç­‰å¾…-signal" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ç­‰å¾… signal" tabindex="-1"></a><span>ç­‰å¾… signal</span></h3>
<ul>
<li><code>int<wbr> <wbr>sigsuspend<wbr>(<wbr>const<wbr> <wbr>sigset_t<wbr> *<wbr>mask<wbr>)</code>: å°† blocked set è®¾ä¸º <code>mask</code><span class="mojikumi-line-end">ï¼Œ</span>åœ¨æ¥æ”¶åˆ°ä»»ä½• signal åè¿”å›</li>
</ul>
<p>å¯ä»¥åœ¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ† block æ‰æŸä¸ª signal<span class="mojikumi-line-end">ï¼Œ</span>ç„¶ååœ¨ <code>sigsuspend</code> çš„å‚æ•°ä¸­å°†å…¶ unblock<span class="mojikumi-line-end">ï¼Œ</span>ä»¥è¾¾åˆ°ç­‰å¾…è¯¥ signal çš„ç›®çš„<span class="mojikumi-line-end">ã€‚</span>å› ä¸º <code>sigsuspend</code> ç­‰å¾…çš„ä¸æ˜¯æŸä¸ªç‰¹å®šçš„ signal<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥é…åˆ <code>while</code> å¾ªç¯æ¥æ£€æŸ¥ç”± handler è®¾ç½®çš„æŸä¸ª flag<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>sigsuspend</code> çš„æ•ˆæœç±»ä¼¼äºä¸‹é¢çš„è¿™æ®µä»£ç <span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="c ä»£ç å—" data-v-ad49d235>c</h4><ile-root id="ile-3"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-3--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #82AAFF">sigprocmask</span><span style="color: #D6DEEB">(SIG_SETMASK, </span><span style="color: #7FDBCA">&amp;</span><span style="color: #D7DBE0">mask</span><span style="color: #D6DEEB">, </span><span style="color: #7FDBCA">&amp;</span><span style="color: #D7DBE0">prev</span><span style="color: #D6DEEB">);</span></span>
<span><span style="color: #82AAFF">pause</span><span style="color: #D6DEEB">();</span></span>
<span><span style="color: #82AAFF">sigprocmask</span><span style="color: #D6DEEB">(SIG_SETMASK, </span><span style="color: #7FDBCA">&amp;</span><span style="color: #D7DBE0">prev</span><span style="color: #D6DEEB">, </span><span style="color: #82AAFF">NULL</span><span style="color: #D6DEEB">);</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #4876D6">sigprocmask</span><span style="color: #403F53">(SIG_SETMASK, </span><span style="color: #0C969B">&amp;</span><span style="color: #403F53">mask, </span><span style="color: #0C969B">&amp;</span><span style="color: #403F53">prev);</span></span>
<span><span style="color: #4876D6">pause</span><span style="color: #403F53">();</span></span>
<span><span style="color: #4876D6">sigprocmask</span><span style="color: #403F53">(SIG_SETMASK, </span><span style="color: #0C969B">&amp;</span><span style="color: #403F53">prev, </span><span style="color: #4876D6">NULL</span><span style="color: #403F53">);</span></span></code></pre></div></section>
<p>ä¸åŒçš„æ˜¯<span class="mojikumi-line-end">ï¼Œ</span>ä¸Šé¢è¿™æ®µä»£ç æœ‰å¯èƒ½ä¼šæ°å¥½åœ¨ <code>sigprocmask</code> ä¹‹å<span class="mojikumi-line-end">ã€</span><code>pause</code> ä¹‹å‰æ¥æ”¶åˆ° signal<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´è¿™ä¸ª signal æ²¡æœ‰å°† <code>pause</code> interrupt è€Œä¸€ç›´ sleep ä¸‹å»<span class="mojikumi-line-end">ã€‚</span><code>sigsuspend</code> æ˜¯ atomic çš„<span class="mojikumi-line-end">ï¼Œ</span>å°±ä¸å­˜åœ¨è¿™æ ·çš„é—®é¢˜<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="nonlocal-jumps" class="heading"><a href="#nonlocal-jumps" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Nonlocal Jumps" tabindex="-1"></a><span>Nonlocal Jumps</span></h2>
<ul>
<li><code>int<wbr> <wbr>setjmp<wbr>(<wbr>jmp_buf<wbr> <wbr>env<wbr>)</code></li>
<li><code>void<wbr> <wbr>longjmp<wbr>(<wbr>jmp_buf<wbr> <wbr>env<wbr>, <wbr>int<wbr> <wbr>val<wbr>)</code></li>
</ul>
<p><code>setjmp</code> ä¼šå°†å½“å‰çš„ PC å’Œå¯„å­˜å™¨ç­‰ä¿¡æ¯å­˜åœ¨ <code>env</code> ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>longjmp</code> ä¼šæ¢å¤ <code>env</code> ä¸­ä¿å­˜çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>è·³è½¬åˆ° <code>setjmp</code> çš„ä½ç½®<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™æ„å‘³ç€ <code>setjmp</code> å¯èƒ½è¿”å›å¤šæ¬¡<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>longjmp</code> ä¸ä¼šè¿”å›<span class="mojikumi-line-end">ã€‚</span>ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>setjmp</code> ä¼šè¿”å› 0<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¹‹åè°ƒç”¨ <code>longjmp</code> æ—¶ä¼šåœ¨ <code>setjmp</code> çš„ä½ç½®è¿”å›å‚æ•° <code>val</code> çš„å€¼<span class="mojikumi-line-start">ï¼ˆ</span>ç‰¹åˆ«åœ°<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœ <code>val</code> çš„å€¼æ˜¯ 0<span class="mojikumi-line-end">ï¼Œ</span>ä¼šè¿”å› 1<span class="mojikumi-line-end">ï¼Œ</span>å¼ºåˆ¶å’Œé¦–æ¬¡è¿”å›åŒºåˆ†å¼€<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸º <code>setjmp</code> / <code>longjmp</code> åªæ˜¯æ¢å¤ PC å’Œå¯„å­˜å™¨<span class="mojikumi-line-start">ï¼ˆ</span>åŒ…æ‹¬ <code>%rsp</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>è°ƒç”¨ <code>longjmp</code> æ—¶ <code>setjmp</code> æ‰€åœ¨çš„å‡½æ•°å¿…é¡»è¿˜æ²¡æœ‰è¿”å›<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™ <code>setjmp</code> æ‰€åœ¨çš„ stack frame å°±å¤±æ•ˆäº†<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>setjmp</code> çš„è¿”å›å€¼åªåº”å‡ºç°åœ¨<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/setjmp.html">ä¸€äº›ç®€å•çš„è¡¨è¾¾å¼ä¸­</a><span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™æ˜¯ UB<span class="mojikumi-line-end">ã€‚</span>ç‰¹åˆ«åœ°<span class="mojikumi-line-end">ï¼Œ</span>ä¸åº”å°† <code>setjmp</code> çš„è¿”å›å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¯ä»¥æ”¾åœ¨ <code>if</code> æˆ– <code>switch</code> é‡Œ<span class="mojikumi-line-end">ã€‚</span>è¿™æ˜¯è€ƒè™‘åˆ°<span class="mojikumi-line-end">ï¼Œ</span>è®¡ç®—ä¸€ä¸ªå¤æ‚çš„è¡¨è¾¾å¼å¯èƒ½ä¼šæœ‰ä¸€äº›ä¸­é—´é‡ä»¥åŠ dynamic stack allocation<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>longjmp</code> å›æ¥æ—¶è¿™äº›ä¸­é—´é‡<span class="mojikumi-line-end">ã€</span>dynamic stack allocation ä¸ä¸€å®šèƒ½è¢«æ­£ç¡®æ¢å¤<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´è¡¨è¾¾å¼ä¸ä¸€å®šèƒ½è¢«æ­£ç¡®è®¡ç®—<span class="mojikumi-line-end">ã€‚</span></li>
<li>å¦‚æœä¿®æ”¹äº†å­˜æ”¾åœ¨å†…å­˜ä¸­çš„å±€éƒ¨å˜é‡<span class="mojikumi-line-end">ï¼Œ</span>è·³è½¬åä¼šæ˜¯è¢«ä¿®æ”¹è¿‡çš„å€¼è€Œä¸æ˜¯åŸæ¥çš„å€¼<span class="mojikumi-line-end">ï¼Œ</span>è€Œå­˜æ”¾åœ¨å¯„å­˜å™¨ä¸­çš„å€¼åˆ™ä¼šè¢«æ¢å¤<span class="mojikumi-line-end">ã€‚</span>è¦ç¡®ä¿å˜é‡ä¸è¢«å­˜åœ¨å¯„å­˜å™¨ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¿…é¡»ä½¿ç”¨ <code>volatile</code> å£°æ˜å˜é‡<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™<span class="mojikumi-line-start">ï¼ˆ</span>å³ä¾¿ä½¿ç”¨äº† <code>register</code> æˆ– <code>auto</code> æ¥å£°æ˜å˜é‡<span class="mojikumi-line-end">ï¼‰</span>ç¼–è¯‘å™¨å¯èƒ½ä»»æ„åœ°æŠŠå˜é‡æ”¾åœ¨å†…å­˜æˆ–å¯„å­˜å™¨ä¸­<span class="mojikumi-line-end">ï¼Œ</span>é€ æˆè·³è½¬åå˜é‡çš„å€¼ä¸ç¡®å®š<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<a id="volatile-vs-å–åœ°å€" name="volatile-vs-å–åœ°å€" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-purple-2 dark:bg-purple-9 b-purple-5" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h3 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-help-circle-outline text-purple" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Question: </span><span data-v-a2ab257f>volatile vs å–åœ°å€</span></h3><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>C99 rationale å’Œ <code>man setjmp</code> éƒ½è¯´è¦ç”¨ <code>volatile</code> æ‰èƒ½ç¡®ä¿å±€éƒ¨å˜é‡å­˜åœ¨æ ˆä¸Š<span class="mojikumi-line-end">ï¼Œ</span>é‚£å¦‚æœä¸€ä¸ªå±€éƒ¨å˜é‡è¢«å–äº†åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æœ‰å¯èƒ½å­˜åœ¨å¯„å­˜å™¨ä¸­å—ï¼Ÿå¦‚æœæœ‰å¯èƒ½çš„è¯<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯æ ‡å‡†å…è®¸è¿™æ ·ä½†äº‹å®ä¸Šä¸ä¼š<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æ˜¯çœŸçš„å¯ä»¥åœ¨ gcc ä¸­åšåˆ°ï¼Ÿ</p></div></div></aside>
<ul>
<li><code>int<wbr> <wbr>sigsetjmp<wbr>(<wbr>sigjmp_buf<wbr> <wbr>env<wbr>, <wbr>int<wbr> <wbr>savesigs<wbr>)</code></li>
<li><code>void<wbr> <wbr>siglongjmp<wbr>(<wbr>sigjmp_buf<wbr> <wbr>env<wbr>, <wbr>int<wbr> <wbr>val<wbr>)</code></li>
</ul>
<p><code>sigsetjmp</code> / <code>siglongjmp</code> ä¼šé¢å¤–å­˜å‚¨<span class="mojikumi-line-end">ã€</span>æ¢å¤ pending / blocked signal çš„ä¿¡æ¯<span class="mojikumi-line-start">ï¼ˆ</span>éœ€è¦ä»¥é 0 <code>savesigs</code> è°ƒç”¨ <code>sigsetjmp</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨äº signal handler<span class="mojikumi-line-end">ã€‚</span></p>
<p>nonlocal jump ä¸»è¦æœ‰ä¸¤ç§ç”¨é€”<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>å‡ºé”™æ—¶ç›´æ¥è·³è½¬åˆ°ä¸€ä¸ªé›†ä¸­çš„ä½ç½®æ¥å¤„ç†é”™è¯¯<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¸ç”¨ä¸€å±‚å±‚å¾€ä¸Šè¿”å›</li>
<li>å¤„ç† signal æ—¶ä¸è¿”å›åˆ°è¢« interrupt çš„ä½ç½®<span class="mojikumi-line-end">ï¼Œ</span>è€Œè·³è½¬åˆ°æŒ‡å®šçš„ä½ç½®</li>
</ul>
<p>åœ¨ signal handler ä¸­ä½¿ç”¨ nonlocal jump æ—¶éœ€è¦æ³¨æ„<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>å…ˆ <code>sigsetjmp</code> å† install signal handler<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™å¯èƒ½ race</li>
<li><code>siglongjmp</code> è·³è½¬åˆ°çš„åç»­ä»£ç ä¸­åªèƒ½è°ƒç”¨ async-signal-safe çš„å‡½æ•°</li>
</ul>
<p>nonlocal jump å¯èƒ½é€ æˆå¯è¯»æ€§çš„é—®é¢˜<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯èƒ½å› ä¸ºè·³è¿‡äº†ä¸­é—´å¾ˆå¤šå‡½æ•°çš„è¿”å›<span class="mojikumi-line-end">ï¼Œ</span>é€ æˆå†…å­˜æ³„éœ²ç­‰åæœ<span class="mojikumi-line-end">ï¼Œ</span>è¦è°¨æ…ä½¿ç”¨<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="tools-for-manipulating-processes" class="heading"><a href="#tools-for-manipulating-processes" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Tools for Manipulating Processes" tabindex="-1"></a><span>Tools for Manipulating Processes</span></h2>
<ul>
<li><code>strace</code>: æ˜¾ç¤ºç¨‹åºè°ƒç”¨çš„æ‰€æœ‰ system call<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥é™æ€é“¾æ¥æ¥é¿å…çœ‹åˆ°å¤§é‡å…±äº«åº“ç›¸å…³çš„è¾“å‡º</li>
<li><code>ps</code>: åˆ—å‡ºè¿›ç¨‹ä¿¡æ¯</li>
<li><code>top</code>: åˆ—å‡ºè¿›ç¨‹çš„èµ„æºä½¿ç”¨<span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥ç”¨ <code>htop</code><span class="mojikumi-line-end">ï¼‰</span></li>
<li><code>pmap</code>: æŸ¥çœ‹è¿›ç¨‹çš„ memory map</li>
<li><code>/proc</code>: æŸ¥çœ‹å„ç§è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ (<code>man proc.5</code>)</li>
</ul>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/csapp">csapp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[CS:APP ç¬¬å…­ç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2022/12/csapp-6</link>
            <guid>https://ouuan.moe/post/2022/12/csapp-6</guid>
            <pubDate>Mon, 05 Dec 2022 07:47:43 GMT</pubDate>
            <description><![CDATA[





<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬å…­ç«  <span class="mojikumi">â€œ</span>The Memory Hierarchy<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™ç« çš„ä¸»è¦å†…å®¹æœ‰<span class="mojikumi-line-end">ï¼š</span>å„ç§å­˜å‚¨è®¾å¤‡<span class="mojikumi-line-start">ï¼ˆ</span>RAM<span class="mojikumi-line-end">ã€</span>ROM<span class="mojikumi-line-end">ã€</span>HDD<span class="mojikumi-line-end">ã€</span>SSD<span class="mojikumi-line-end">ï¼‰</span>çš„ç‰¹ç‚¹<span class="mojikumi-line-end">ã€</span>ç¨‹åºçš„å±€éƒ¨æ€§<span class="mojikumi-line-end">ã€</span>ç¼“å­˜çš„ç»“æ„ä»¥åŠåŸç†<span class="mojikumi-line-end">ã€</span>ç¼“å­˜å¯¹ç¨‹åºæ€§èƒ½çš„å½±å“<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[





<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬å…­ç«  <span class="mojikumi">â€œ</span>The Memory Hierarchy<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™ç« çš„ä¸»è¦å†…å®¹æœ‰<span class="mojikumi-line-end">ï¼š</span>å„ç§å­˜å‚¨è®¾å¤‡<span class="mojikumi-line-start">ï¼ˆ</span>RAM<span class="mojikumi-line-end">ã€</span>ROM<span class="mojikumi-line-end">ã€</span>HDD<span class="mojikumi-line-end">ã€</span>SSD<span class="mojikumi-line-end">ï¼‰</span>çš„ç‰¹ç‚¹<span class="mojikumi-line-end">ã€</span>ç¨‹åºçš„å±€éƒ¨æ€§<span class="mojikumi-line-end">ã€</span>ç¼“å­˜çš„ç»“æ„ä»¥åŠåŸç†<span class="mojikumi-line-end">ã€</span>ç¼“å­˜å¯¹ç¨‹åºæ€§èƒ½çš„å½±å“<span class="mojikumi-line-end">ã€‚</span></p>

<p>å› ä¸ºæ—¶é—´ä¸å¤ªå¤Ÿ<span class="mojikumi-line-end">ï¼Œ</span>æœ¬æ¥æˆ‘æƒ³å…ˆè·³è¿‡è¿™ç« ä»¥åå†è¡¥çš„<span class="mojikumi-line-end">ï¼Œ</span>ä½†å­¦ç¬¬ä¹ç« çš„æ—¶å€™æ„Ÿè§‰è¿˜æ˜¯è·³ä¸å¾—<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™ç¬¬ä¹ç« æœ‰äº›ä¸œè¥¿æ„Ÿè§‰å­¦äº†ä¸ªåŠæ‡‚<span class="mojikumi-line-end">ã€‚</span><s>è™½ç„¶åªç”¨å­¦ä¸€å°éƒ¨åˆ†å°±è¶³ä»¥æ»¡è¶³ç¬¬ä¹ç« çš„éœ€æ±‚<span class="mojikumi-line-end">ï¼Œ</span>ä½†æˆ‘æ‰“ç®—æ‘†çƒ‚äº†<span class="mojikumi-line-end">ï¼Œ</span>è¯¥å­¦çš„ä¸œè¥¿å­¦ä¸å®Œå°±å­¦ä¸å®Œ<span class="mojikumi-line-end">ï¼Œ</span>æˆ‘æƒ³å­¦å•¥å°±å­¦å•¥<span class="mojikumi-line-end">ã€‚</span></s></p>
<h2 id="storage-technologies" class="heading"><a href="#storage-technologies" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Storage Technologies" tabindex="-1"></a><span>Storage Technologies</span></h2>
<h3 id="ram" class="heading"><a href="#ram" class="heading-anchor" aria-label="ç« èŠ‚ï¼š RAM" tabindex="-1"></a><span>RAM</span></h3>
<p><i>Random access memory</i> åˆ†ä¸º SRAM å’Œ DRAM ä¸¤ç§<span class="mojikumi-line-end">ï¼Œ</span>SRAM æœ‰æ›´å¿«çš„è®¿é—®é€Ÿåº¦ä½†æ›´åŠ æ˜‚è´µ<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="sram" class="heading"><a href="#sram" class="heading-anchor" aria-label="ç« èŠ‚ï¼š SRAM" tabindex="-1"></a><span>SRAM</span></h4>
<p>SRAM (Static RAM) å°†æ¯ä¸ª bit å­˜å‚¨åœ¨ä¸€ä¸ª <i>bistable</i> çš„ memory cell ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cell ç”± 6 ä¸ªæ™¶ä½“ç®¡ç»„æˆ<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ä¸¤ç§å¯èƒ½çš„ç¨³å®šæ€<span class="mojikumi-line-end">ï¼Œ</span>é‡åˆ°å¾®å°çš„æ‰°åŠ¨ä¹Ÿä¼šè¿…é€Ÿæ¢å¤åˆ°è¿™ä¸¤ç§çŠ¶æ€ä¹‹ä¸€<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="dram" class="heading"><a href="#dram" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DRAM" tabindex="-1"></a><span>DRAM</span></h4>
<p>DRAM (Dynamic RAM) å°†æ¯ä¸ª bit å­˜å‚¨åœ¨ä¸€ä¸ªå¾ˆå°çš„ç”µå®¹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å®¹æ˜“å—åˆ°å¤–ç•Œå¹²æ‰°<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥éœ€è¦å‘¨æœŸæ€§åœ°å°†æ•°æ®å¤åˆ¶å‡ºå»å†å¤åˆ¶å›æ¥ä»¥è¿›è¡Œåˆ·æ–°<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½è¿˜ä¼šé…åˆçº é”™ç æ¥ä¿è¯æ•°æ®æ­£ç¡®<span class="mojikumi-line-end">ã€‚</span></p>
<p>DRAM çš„è®¾è®¡ä½¿å…¶å­˜å‚¨å¯†åº¦æ›´é«˜<span class="mojikumi-line-end">ï¼Œ</span>ä½†è®¿é—®é€Ÿåº¦æ›´æ…¢<span class="mojikumi-line-end">ï¼›</span>SRAM åˆ™æ›´å¿«<span class="mojikumi-line-end">ï¼Œ</span>ä½†å¯†åº¦æ›´ä½<span class="mojikumi-line-end">ï¼Œ</span>æ›´è´µ<span class="mojikumi-line-end">ï¼Œ</span>æ›´è´¹ç”µ<span class="mojikumi-line-end">ã€‚</span>è®¿é—® DRAM çš„ç”¨æ—¶å¤§çº¦æ˜¯ SRAM çš„ 10 å€<span class="mojikumi-line-end">ï¼Œ</span>è€Œ SRAM çš„é€ ä»·å¤§çº¦æ˜¯ DRAM çš„ 1000 å€<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="conventional-dram" class="heading"><a href="#conventional-dram" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Conventional DRAM" tabindex="-1"></a><span>Conventional DRAM</span></h4>
<p>DRAM èŠ¯ç‰‡è¢«åˆ†ä¸ºè‹¥å¹² <i>supercell</i><span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª supercell å­˜å‚¨ä¸€ä¸ª word<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯ 1 byte<span class="mojikumi-line-end">ã€‚</span>supercell æ’åˆ—ä¸ºäºŒç»´é˜µåˆ—<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨äºŒç»´åæ ‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i, j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span> å®šä½<span class="mojikumi-line-end">ã€‚</span></p>
<p>DRAM é€šè¿‡ <i>pin</i> è¿æ¥åˆ° <i>memory controller</i> æ¥å’Œå¤–ç•Œé€šä¿¡<span class="mojikumi-line-end">ã€‚</span>è¯»å–ä½äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i, j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span> çš„ supercell æ—¶<span class="mojikumi-line-end">ï¼Œ</span>memory controller ä¼šä¾æ¬¡å‘é€ <i>row access strobe</i> (RAS) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> å’Œ <i>column access strobe</i> (CAS) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>åœ¨æ”¶åˆ° RAS å DRAM ä¼šå°†ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> è¡Œå¤åˆ¶åˆ°ä¸€ä¸ªå†…éƒ¨çš„ row buffer<span class="mojikumi-line-end">ï¼Œ</span>æ”¶åˆ° CAS åå†ä» row buffer é‡Œå°†ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> åˆ—å‘é€ç»™ memory controller<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="memory-module" class="heading"><a href="#memory-module" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Memory Module" tabindex="-1"></a><span>Memory Module</span></h4>
<p>DRAM èŠ¯ç‰‡ä¼šè¢«ç»„è£…ä¸º <i>memory module</i> æ¥æ’åˆ°ä¸»æ¿ä¸Š<span class="mojikumi-line-end">ã€‚</span></p>
<p>DIMM æ˜¯ä¸€ç§ memory module<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>ä¸€ä¸ª DIMM å¯ä»¥åŒ…å« 8 ä¸ª DRAM èŠ¯ç‰‡<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª 64-bit çš„ word åœ¨æ¯ä¸ª DRAM èŠ¯ç‰‡çš„åŒä¸€ä¸ªåœ°å€ä¸Šåˆ†åˆ«å­˜ä¸€ä¸ª byte<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œæ•´ä¸ª DIMM å¯ä»¥ä»¥ 64-bit ä¸ºå•ä½ä¸å¤–ç•Œé€šä¿¡<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="enhanced-dram" class="heading"><a href="#enhanced-dram" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Enhanced DRAM" tabindex="-1"></a><span>Enhanced DRAM</span></h4>
<p>æœ´ç´ çš„ DRAM æ˜¯æ¯”è¾ƒæ…¢çš„<span class="mojikumi-line-end">ï¼Œ</span>å†å²ä¸Šæ›¾ç»æœ‰è¿‡è‹¥å¹²å¯¹ conventional DRAM çš„ä¼˜åŒ–<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>FPM (fast page mode) DRAM: å¦‚æœè¿ç»­ä¸¤æ¬¡ RAS æ˜¯ä¸€æ ·çš„<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥çœç•¥æ‰åç»­ç›¸åŒçš„ RAS<span class="mojikumi-line-end">ï¼Œ</span>ç›´æ¥å‘é€ CAS</li>
<li>EDO (extended data out) DRAM: å»¶é•¿äº†æ•°æ®è¾“å‡ºçš„æ—¶é—´<span class="mojikumi-line-end">ï¼Œ</span>å¯¹ pipelining æœ‰å¸®åŠ©</li>
<li>SDRAM (synchronous): é€šè¿‡æ—¶é’Ÿä¿¡å·çš„ rising edge åŒæ­¥åœ°é€šä¿¡<span class="mojikumi-line-end">ï¼Œ</span>è€Œéé€šè¿‡å‘é€ RAS/CAS å¼‚æ­¥é€šä¿¡</li>
<li>DDR (double data-rate) SDRAM: é€šè¿‡åŒæ—¶ä½¿ç”¨æ—¶é’Ÿä¿¡å·çš„ rising edge å’Œ falling edge è¾¾åˆ° double data-rate<span class="mojikumi-line-end">ï¼Œ</span>åˆ†ä¸º DDR<span class="mojikumi-line-end">ã€</span>DDR2<span class="mojikumi-line-end">ã€</span>DDR3<span class="mojikumi-line-end">ã€</span>DDR4<span class="mojikumi-line-end">ã€</span>DDR5 ç­‰</li>
<li>VRAM (video): ä¸€èˆ¬ç”¨äºæ˜¾å¡<span class="mojikumi-line-end">ã€</span>frame buffer ç­‰<span class="mojikumi-line-end">ï¼Œ</span>å®ƒçš„è¾“å‡ºæ˜¯ç›´æ¥è¾“å‡ºæ•´ä¸ª buffer<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”å¯ä»¥å¹¶è¡Œåœ°åŒæ—¶è¯»å’Œå†™</li>
</ol>
<h3 id="rom" class="heading"><a href="#rom" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ROM" tabindex="-1"></a><span>ROM</span></h3>
<p>RAM ä¼šåœ¨æ–­ç”µåä¸¢å¤±æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥æ˜¯ <i>volatile</i> çš„<span class="mojikumi-line-end">ã€‚</span>ä¸ä¹‹ç›¸å¯¹<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æœ‰ nonvolatile çš„å­˜å‚¨å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç»Ÿç§°ä¸º <i>read-only memory</i> (ROM)<span class="mojikumi-line-end">ï¼Œ</span>å°½ç®¡æœ‰çš„ ROM æ˜¯å¯ä»¥å†™å…¥çš„<span class="mojikumi-line-end">ã€‚</span>ROM çš„å†™å…¥ç§°ä½œ <i>reprogram</i><span class="mojikumi-line-end">ã€‚</span></p>
<ul>
<li>PROM (programmable ROM) åªèƒ½è¢«å†™å…¥ä¸€æ¬¡<span class="mojikumi-line-end">ã€‚</span></li>
<li>EPROM (erasable PROM) éœ€è¦ç”¨ç‰¹æ®Šè®¾å¤‡å†™å…¥<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥å†™å…¥å¤§çº¦ 1000 æ¬¡<span class="mojikumi-line-end">ã€‚</span></li>
<li>EEPROM (electrically EPROM) ä¸éœ€è¦ç”¨ç‰¹æ®Šè®¾å¤‡å°±å¯ä»¥å†™å…¥<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥å†™å…¥å¤§çº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span> æ¬¡<span class="mojikumi-line-end">ã€‚</span></li>
<li>flash memory æ˜¯ä¸€ç§åŸºäº EEPROM çš„ nonvolatile å­˜å‚¨å™¨<span class="mojikumi-line-end">ï¼Œ</span>è¢«å¹¿æ³›ä½¿ç”¨<span class="mojikumi-line-end">ï¼Œ</span>åŒ…æ‹¬ç”¨äº <a href="#ssd">SSD</a><span class="mojikumi-line-end">ã€‚</span></li>
<li>å›ºä»¶ (firmware) å¾€å¾€å­˜å‚¨äº ROM ä¸­<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="è®¿é—®-main-memory" class="heading"><a href="#è®¿é—®-main-memory" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è®¿é—® main memory" tabindex="-1"></a><span>è®¿é—® main memory</span></h3>
<p>ä¸€ä¸ª <i>bus</i> æ˜¯ä¸€ç»„ç”¨æ¥é€šä¿¡çš„å¯¼çº¿<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä¼ è¾“åœ°å€<span class="mojikumi-line-end">ã€</span>æ•°æ®<span class="mojikumi-line-end">ã€</span>æ§åˆ¶ä¿¡å·ç­‰<span class="mojikumi-line-end">ã€‚</span>CPU å’Œ main memory ä¹‹é—´çš„é€šä¿¡é€šè¿‡ <i>bus transaction</i> è¿›è¡Œ<span class="mojikumi-line-end">ã€‚</span></p>
<p>CPU é€šè¿‡ system bus è¿æ¥ I/O bridge<span class="mojikumi-line-end">ï¼Œ</span>I/O bridge é€šè¿‡ memory bus è¿æ¥ main memory<span class="mojikumi-line-end">ã€‚</span>I/O bridge è´Ÿè´£ system bus signal å’Œ memory bus signal ä¹‹é—´çš„è½¬æ¢<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="hdd" class="heading"><a href="#hdd" class="heading-anchor" aria-label="ç« èŠ‚ï¼š HDD" tabindex="-1"></a><span>HDD</span></h3>
<h4 id="ç£ç›˜çš„ç»“æ„" class="heading"><a href="#ç£ç›˜çš„ç»“æ„" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ç£ç›˜çš„ç»“æ„" tabindex="-1"></a><span>ç£ç›˜çš„ç»“æ„</span></h4>
<p>ç£ç›˜ç”±è‹¥å¹² <i>platter</i><span class="mojikumi-line-start">ï¼ˆ</span>ç›˜ç‰‡<span class="mojikumi-line-end">ï¼‰</span>ç»„æˆ<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª platter æœ‰ä¸¤ä¸ª <i>surface</i><span class="mojikumi-line-start">ï¼ˆ</span>è¡¨é¢<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª surface ä¸Šè¦†ç›–ç€ç£æ€§è®°å½•ææ–™<span class="mojikumi-line-end">ã€‚</span>platter ç”±ä½äºä¸­å¿ƒçš„ <i>spindle</i><span class="mojikumi-line-start">ï¼ˆ</span>ä¸»è½´<span class="mojikumi-line-end">ï¼‰</span>å¸¦åŠ¨<span class="mojikumi-line-end">ï¼Œ</span>ä»¥æŸä¸ªä¸€èˆ¬æ˜¯ 5400~15000 RPM çš„é€Ÿåº¦è½¬åŠ¨<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ª surface è¢«åˆ†æˆè‹¥å¹²ä¸ªç§°ä½œ <i>track</i><span class="mojikumi-line-start">ï¼ˆ</span>ç£é“<span class="mojikumi-line-end">ï¼‰</span>çš„åŒå¿ƒåœ†ç¯<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª track è¢«åˆ†ä¸ºè‹¥å¹² <i>sector</i><span class="mojikumi-line-start">ï¼ˆ</span>æ‰‡åŒº<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª sector å­˜æœ‰ç›¸åŒå¤§å°çš„æ•°æ®<span class="mojikumi-line-start">ï¼ˆ</span>ä¸€èˆ¬æ˜¯ 512 bytes<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ç›¸é‚»çš„ sector ä¹‹é—´ç”± <i>gap</i><span class="mojikumi-line-start">ï¼ˆ</span>é—´éš™<span class="mojikumi-line-end">ï¼‰</span>éš”å¼€<span class="mojikumi-line-end">ï¼Œ</span>gap ä¸å­˜å‚¨æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯ç”¨æ¥è¯†åˆ« sector<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ªç£ç›˜é€šå¸¸ç”±å¤šä¸ªå †å åœ¨ä¸€èµ·çš„ platter æ„æˆ<span class="mojikumi-line-end">ï¼Œ</span>è¿™äº› platter å…±äº«ä¸€ä¸ª spindle<span class="mojikumi-line-end">ã€‚</span>å¯¹äºæŸä¸ªè·ç¦» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="mojikumi-line-end">ï¼Œ</span>ä¸€ä¸ªç£ç›˜å†…æ‰€æœ‰ surface ä¸Šç¦»è½¬è½´è·ç¦»ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> çš„ track çš„é›†åˆç§°ä½œä¸€ä¸ª <i>cylinder</i><span class="mojikumi-line-start">ï¼ˆ</span>æŸ±é¢<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>æ•´ä½“ç»“æ„å¦‚ CS:APP Figure 6.9 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig6.9.930d8843.webp"><img srcset="/assets/csapp-fig6.9.5ba83537.png" loading="lazy" src="/assets/csapp-fig6.9.5ba83537.png" width="1517" height="537" alt="ç£ç›˜ç»“æ„ç¤ºæ„å›¾"></picture></p>
<h4 id="ç£ç›˜çš„å®¹é‡" class="heading"><a href="#ç£ç›˜çš„å®¹é‡" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ç£ç›˜çš„å®¹é‡" tabindex="-1"></a><span>ç£ç›˜çš„å®¹é‡</span></h4>
<p>ç£ç›˜çš„å®¹é‡æœ‰ä¸‰ä¸ªè¡¡é‡æŒ‡æ ‡<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>recording density: å•ä½é•¿åº¦çš„ track å­˜å‚¨çš„ bit æ•°é‡</li>
<li>track density: å•ä½é•¿åº¦çš„åŠå¾„ä¸Šçš„ track ä¸ªæ•°</li>
<li>areal density: å•ä½é¢ç§¯ä¸Šå­˜å‚¨çš„ bit æ•°é‡</li>
</ul>
<p>æ—©æœŸçš„ç£ç›˜çš„æ‰€æœ‰ track éƒ½æœ‰ç›¸åŒæ•°é‡çš„ sector<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„è¯ä½äºå¤–éƒ¨çš„ track çš„ sector å°±ä¼šæ›´åŠ ç¨€ç–<span class="mojikumi-line-end">ã€‚</span>åæ¥ä¸ºäº†æé«˜å®¹é‡<span class="mojikumi-line-end">ï¼Œ</span>å°† cylinder åˆ’åˆ†æˆäº†è‹¥å¹²ä¸ª <i>recording zone</i><span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª recording zone ç”±è‹¥å¹²ç›¸é‚»çš„ cylinder ç»„æˆ<span class="mojikumi-line-end">ï¼Œ</span>åŒä¸€ä¸ª recording zone å†…çš„æ‰€æœ‰ track æœ‰ç›¸åŒæ•°é‡çš„ sector<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="ç£ç›˜çš„è¯»å†™" class="heading"><a href="#ç£ç›˜çš„è¯»å†™" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ç£ç›˜çš„è¯»å†™" tabindex="-1"></a><span>ç£ç›˜çš„è¯»å†™</span></h4>
<p>ç£ç›˜é€šè¿‡è¿åœ¨ä¼ åŠ¨è‡‚ä¸Šçš„è¯»å†™å¤´è¿›è¡Œè¯»å†™<span class="mojikumi-line-end">ï¼Œ</span>æ¯æ¬¡è¯»å†™å‰éœ€è¦å…ˆå°†è¯»å†™å¤´ç§»åŠ¨åˆ°ç›¸åº”çš„ä½ç½®<span class="mojikumi-line-start">ï¼ˆ</span>å¯»é“<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¹¶ç­‰å¾…ç›®æ ‡ sector è½¬åŠ¨åˆ°è¯»å†™å¤´ä¸‹<span class="mojikumi-line-end">ï¼Œ</span>å†å¼€å§‹è¯»å†™<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯»é“ç”¨æ—¶ä¸è¯»å†™å¤´åŸæœ¬çš„ä½ç½®åˆ°ç›®æ ‡ä½ç½®çš„è·ç¦»æœ‰å…³<span class="mojikumi-line-end">ï¼Œ</span>ç­‰å¾…è½¬åŠ¨çš„ç”¨æ—¶åˆ™çœ‹è¿æ°”<span class="mojikumi-line-end">ã€‚</span>åœ¨ CS:APP ä¸¾çš„ä¾‹å­ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯»é“å¹³å‡ç”¨æ—¶ä¸º 9 ms<span class="mojikumi-line-end">ï¼Œ</span>ç­‰å¾…æ—‹è½¬å¹³å‡ç”¨æ—¶ä¸º 4 ms<span class="mojikumi-line-end">ï¼Œ</span>è¯»å†™ä¸€ä¸ª sector ç”¨æ—¶ 20 Î¼s<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¹Ÿå°±æ˜¯è¯´<span class="mojikumi-line-end">ï¼Œ</span>ç£ç›˜è¯»å†™çš„ä¸»è¦ç”¨æ—¶æ˜¯å¯»é“ä»¥åŠç­‰å¾…æ—‹è½¬ç”¨æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå°±æ˜¯åˆæ¬¡è®¿é—®ä¸€æ®µè¿ç»­çš„ sector çš„ç”¨æ—¶<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¸è®¿é—®å¤šå°‘ä¸ªè¿ç»­çš„ sector å…³ç³»ä¸å¤§<span class="mojikumi-line-end">ã€‚</span>å¯¹äºå•ä¸ª sector<span class="mojikumi-line-end">ï¼Œ</span>ç£ç›˜è®¿é—®çš„ç”¨æ—¶å¯ä»¥è¾¾åˆ° SRAM çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span> å€<span class="mojikumi-line-end">ï¼Œ</span>DRAM çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> å€<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¿ç»­ sector çš„è¯»å†™ç”¨æ—¶ä»…ä¸º DRAM çš„ä¸åˆ°åå€<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="logical-disk-blocks" class="heading"><a href="#logical-disk-blocks" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Logical Disk Blocks" tabindex="-1"></a><span>Logical Disk Blocks</span></h4>
<p>ç£ç›˜å¯¹å¤–æä¾›äº† <i>logical block</i> ä½œä¸º sector çš„æŠ½è±¡<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª logical block çš„å¤§å°å’Œä¸€ä¸ª sector ç›¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>ç”±è¿ç»­çš„éè´Ÿæ•´æ•°ç´¢å¼•<span class="mojikumi-line-end">ï¼Œ</span>é€šè¿‡ <i>disk controller</i> ç¿»è¯‘æˆå½¢å¦‚ <i>(surface, track, sector)</i> çš„åæ ‡<span class="mojikumi-line-end">ã€‚</span></p>
<a id="ç£ç›˜æ ¼å¼åŒ–" name="ç£ç›˜æ ¼å¼åŒ–" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h5 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-pencil text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Note: </span><span data-v-a2ab257f>ç£ç›˜æ ¼å¼åŒ–</span></h5><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>ç£ç›˜åœ¨ä½¿ç”¨å‰éœ€è¦è¿›è¡Œæ ¼å¼åŒ–<span class="mojikumi-line-end">ï¼š</span>åœ¨ gap ä¸­å†™å…¥ sector çš„æ ‡è¯†ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>è¯†åˆ«å‡ºæœ‰æ•…éšœçš„ cylinder<span class="mojikumi-line-end">ï¼Œ</span>å°†ä¸€äº› cylinder è®¾ä¸ºå¤‡ç”¨ä»¥é˜²å…¶ä»– cylinder æŸå<span class="mojikumi-line-end">ã€‚</span>ç”±äºå¤‡ç”¨ cylinder çš„å­˜åœ¨<span class="mojikumi-line-end">ï¼Œ</span>formatted capacity ä¼šå°äº maximum capacity<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<h3 id="io-bus" class="heading"><a href="#io-bus" class="heading-anchor" aria-label="ç« èŠ‚ï¼š I/O bus" tabindex="-1"></a><span>I/O bus</span></h3>
<p>ä¸åŒçš„ I/O è®¾å¤‡é€šè¿‡ I/O bus ä¸ I/O bridge è¿æ¥<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚æ˜¾å¡<span class="mojikumi-line-end">ã€</span>è¿æ¥å„ç§è®¾å¤‡çš„ USB controller<span class="mojikumi-line-end">ã€</span>é€šè¿‡ SCSI/SATA ç­‰æ¥å£è¿æ¥ç£ç›˜çš„ host bus adapter ç­‰éƒ½ä¼šè¿æ¥åˆ° I/O bus<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="è®¿é—®ç£ç›˜" class="heading"><a href="#è®¿é—®ç£ç›˜" class="heading-anchor" aria-label="ç« èŠ‚ï¼š è®¿é—®ç£ç›˜" tabindex="-1"></a><span>è®¿é—®ç£ç›˜</span></h3>
<p>è®¿é—®ç£ç›˜éœ€è¦å‘ç£ç›˜å‘é€ä¸‰æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>å‘ç£ç›˜å‘é€ä¸€ä¸ªä¿¡å·<span class="mojikumi-line-end">ï¼Œ</span>å‘Šè¯‰ç£ç›˜è¦è¯»å–æ•°æ®</li>
<li>å°†è¦è¯»å–çš„ logical block number å‘é€ç»™ç£ç›˜</li>
<li>å‘Šè¯‰ç£ç›˜è¯»å–åˆ°çš„æ•°æ®è¦æ”¾åœ¨ main memory çš„å“ªä¸ªåœ°å€</li>
</ol>
<p>å‘é€å®Œè¿™äº›æŒ‡ä»¤å<span class="mojikumi-line-end">ï¼Œ</span>CPU ä¼šç»§ç»­å¹²å…¶ä»–äº‹æƒ…<span class="mojikumi-line-end">ã€‚</span>ç£ç›˜è¯»å–åˆ°æ•°æ®å<span class="mojikumi-line-end">ï¼Œ</span>ä¼šé€šè¿‡ I/O bus ç›´æ¥å°†æ•°æ®å­˜æ”¾åˆ° main memory ä¸­è€Œä¸ç»è¿‡ CPU<span class="mojikumi-line-end">ï¼Œ</span>è¿™è¢«ç§°ä½œ <i>direct memory access</i> (DMA)<span class="mojikumi-line-end">ã€‚</span>å­˜æ”¾å¥½æ•°æ®å<span class="mojikumi-line-end">ï¼Œ</span>ç£ç›˜å‘ CPU å‘é€ interrupt signal æ¥è·³è½¬åˆ°å¤„ç†ç£ç›˜è¯»å–å®Œæˆçš„ signal handler<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="ssd" class="heading"><a href="#ssd" class="heading-anchor" aria-label="ç« èŠ‚ï¼š SSD" tabindex="-1"></a><span>SSD</span></h3>
<p>SSD å°†ä¸€ä¸ªæˆ–å¤šä¸ª flash memory åŒ…è£…èµ·æ¥<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æœ‰ä¸€ä¸ª <i>flash translation layer</i> æ¥å°†è¾“å…¥çš„ logical block number è½¬æ¢ä¸ºå¯¹ flash memory çš„è®¿é—®<span class="mojikumi-line-end">ï¼Œ</span>å¯¹å¤–è¡¨ç°å‡ºä¸ HDD ç±»ä¼¼çš„æ¥å£<span class="mojikumi-line-end">ã€‚</span></p>
<p>flash memory ç”±è‹¥å¹² block ç»„æˆ<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª block åˆç”±è‹¥å¹²<span class="mojikumi-line-start">ï¼ˆ</span>32-128 ä¸ª<span class="mojikumi-line-end">ï¼‰</span>page ç»„æˆ<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª page ä¸€èˆ¬æ˜¯ 512B-4KB å¤§<span class="mojikumi-line-end">ï¼Œ</span>æ•°æ®ä¼ è¾“çš„æœ€å°å•ä½æ˜¯ page<span class="mojikumi-line-end">ã€‚</span></p>
<p>SSD çš„å†™å…¥æ¯”è¾ƒç‰¹æ®Š<span class="mojikumi-line-end">ï¼š</span>ä¸€ä¸ª page éœ€è¦åœ¨æ‰€å±çš„æ•´ä¸ª block éƒ½è¢«æ“¦é™¤<span class="mojikumi-line-start">ï¼ˆ</span>æ”¹ä¸ºå…¨ 1<span class="mojikumi-line-end">ï¼‰</span>åæ‰èƒ½å†™å…¥ä¸€æ¬¡<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœè¦å†™å…¥ç¬¬äºŒæ¬¡å°±å¾—å†æŠŠæ•´ä¸ª block æ“¦é™¤ä¸€é<span class="mojikumi-line-end">ã€‚</span>åœ¨å†™å…¥æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¸ºäº†æ“¦é™¤æŸä¸ª block<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½ä¼šéœ€è¦æŠŠè¿™ä¸ª block å­˜å‚¨çš„æ•°æ®å¤åˆ¶åˆ°å…¶ä»– block<span class="mojikumi-line-end">ã€‚</span>æ“¦é™¤æ˜¯ä¸€ä¸ªè€—æ—¶ç›¸å¯¹è¾ƒé•¿çš„æ“ä½œ<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦çº¦ 1 ms<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ¯ä¸ª block åœ¨æ“¦é™¤çº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span> æ¬¡åå°±ä¼šæŸå<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™ä½¿å¾— SSD çš„å†™å…¥æ¯”è¯»å–ç•¥æ…¢<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”å†™å…¥å¾ˆå¤šæ¬¡åå¯èƒ½æŸå<span class="mojikumi-line-end">ã€‚</span>flash translation layer ä¼šé€šè¿‡ <i>wear-leveling logic</i> æ¥å°½å¯èƒ½ä½¿å¾—æ¯ä¸ª block çš„æ“¦é™¤æ¬¡æ•°ç›¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>ä»¥å»¶é•¿ SSD çš„ä½¿ç”¨å¯¿å‘½<span class="mojikumi-line-end">ã€‚</span></p>
<p>disk<span class="mojikumi-line-end">ã€</span>RAM<span class="mojikumi-line-end">ã€</span>CPU é€Ÿåº¦å·®å¼‚çš„å†å²å˜åŒ–å¦‚ CS:APP Figure 6.16 æ‰€ç¤º<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ CPU cycle time æ˜¯å•æ ¸çš„<span class="mojikumi-line-end">ï¼Œ</span>effective CPU cycle time æ˜¯å¤šæ ¸çš„<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig6.16.737e4bc7.webp"><img srcset="/assets/csapp-fig6.16.14164224.png" loading="lazy" src="/assets/csapp-fig6.16.14164224.png" width="1017" height="464" alt="diskã€RAMã€CPU é€Ÿåº¦å·®å¼‚çš„å†å²å˜åŒ–"></picture></p>
<h2 id="locality" class="heading"><a href="#locality" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Locality" tabindex="-1"></a><span>Locality</span></h2>
<p>å¥½çš„ç¨‹åºå…·æœ‰è‰¯å¥½çš„ <i>locality</i><span class="mojikumi-line-end">ã€‚</span>locality æœ‰ä¸¤ç§è¡¨ç°å½¢å¼<span class="mojikumi-line-end">ï¼Œ</span><i>temporal locality</i> æŒ‡çš„æ˜¯æœ€è¿‘è®¿é—®è¿‡çš„æ•°æ®æ›´æœ‰å¯èƒ½åœ¨ä¸ä¹…çš„å°†æ¥å†æ¬¡è¢«è®¿é—®<span class="mojikumi-line-end">ï¼Œ</span><i>spatial locality</i> æŒ‡çš„æ˜¯è®¿é—®è¿‡ä¸€å¤„çš„æ•°æ®åæ›´æœ‰å¯èƒ½åœ¨ä¸ä¹…çš„å°†æ¥è®¿é—®é‚»è¿‘çš„å…¶ä»–æ•°æ®<span class="mojikumi-line-end">ã€‚</span></p>
<p>å…·æœ‰è‰¯å¥½ locality çš„ç¨‹åºè·‘å¾—æ›´å¿«<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸ºè®¡ç®—æœºç³»ç»Ÿè®¾è®¡çš„å„ä¸ªå±‚é¢éƒ½åˆ©ç”¨ locality åšäº†ä¼˜åŒ–<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€äº› locality çš„ä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>é‡å¤å¼•ç”¨åŒä¸€ä¸ªå˜é‡çš„ç¨‹åºæœ‰è‰¯å¥½çš„ locality<span class="mojikumi-line-end">ã€‚</span></li>
<li>åœ¨ä¸€æ®µè¿ç»­å†…å­˜<span class="mojikumi-line-start">ï¼ˆ</span>æ•°ç»„<span class="mojikumi-line-end">ï¼‰</span>ä¸­ä¾æ¬¡è®¿é—®æ¯ä¸ªå…ƒç´ ç§°ä½œ <i>stride-1 reference pattern</i><span class="mojikumi-line-end">ï¼Œ</span>æ¯æ¬¡é—´éš” <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> ä¸ªå…ƒç´ è¿›è¡Œè®¿é—®ç§°ä½œ <i>stride-k reference pattern</i><span class="mojikumi-line-end">ï¼Œ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> è¶Šå° locality è¶Šå¥½<span class="mojikumi-line-end">ã€‚</span>éå†é«˜ç»´æ•°ç»„æ—¶å°¤å…¶è¦æ³¨æ„è®¿é—®çš„é¡ºåº<span class="mojikumi-line-end">ã€‚</span></li>
<li>ç”±äºå¾ªç¯ä¼šé‡å¤è®¿é—®åŒä¸€æ®µæŒ‡ä»¤<span class="mojikumi-line-end">ï¼Œ</span>å¾ªç¯çš„æŒ‡ä»¤è¯»å–å±€éƒ¨æ€§è‰¯å¥½</li>
</ul>
<h2 id="the-memory-hierarchy" class="heading"><a href="#the-memory-hierarchy" class="heading-anchor" aria-label="ç« èŠ‚ï¼š The Memory Hierarchy" tabindex="-1"></a><span>The Memory Hierarchy</span></h2>
<p>åœ¨ç¡¬ä»¶ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒå­˜å‚¨æŠ€æœ¯ä¹‹é—´å­˜åœ¨æ€§èƒ½<span class="mojikumi-line-end">ã€</span>ä»·æ ¼<span class="mojikumi-line-end">ã€</span>å®¹é‡çš„ trade-off<span class="mojikumi-line-end">ï¼›</span>åœ¨è½¯ä»¶ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>ç¨‹åºå…·æœ‰ locality<span class="mojikumi-line-end">ã€‚</span>ç¡¬ä»¶å’Œè½¯ä»¶çš„è¿™ä¸¤æ¡æ€§è´¨æ­£å¥½å¯ä»¥æ­é…åœ¨ä¸€èµ·<span class="mojikumi-line-end">ï¼Œ</span>ä¿ƒä½¿ memory system é‡‡ç”¨äº†å¦‚ CS:APP Figure 6.21 æ‰€ç¤ºçš„ç§°ä½œ <i>memory hierarchy</i> çš„ç»„ç»‡æ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig6.21.26bcdff1.webp"><img srcset="/assets/csapp-fig6.21.0c63259f.png" loading="lazy" src="/assets/csapp-fig6.21.0c63259f.png" width="1047" height="624" alt="The memory hierarchy"></picture></p>
<p>memory hierarchy çš„æ„æˆå¹¶ä¸ä¸€å®šå’Œä¸Šå›¾å®Œå…¨ä¸€è‡´<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ SRAM çš„çº§æ•°å¯èƒ½ä¸æ˜¯ä¸‰çº§<span class="mojikumi-line-end">ã€</span>DRAM å’Œ HDD é—´å¯èƒ½è¿˜æœ‰ SSD<span class="mojikumi-line-end">ã€</span>ç£å¸¦ä¹Ÿå¯ä»¥ä½œä¸º memory hierarchy ä¸­æ¯” HDD æ›´ä½çš„ä¸€çº§<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="cache" class="heading"><a href="#cache" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache" tabindex="-1"></a><span>Cache</span></h3>
<p>caching æŒ‡çš„æ˜¯ç”¨ä¸€ä¸ªç›¸å¯¹å°è€Œå¿«çš„å­˜å‚¨è®¾å¤‡æ¥å­˜å‚¨ä¸€ä¸ªç›¸å¯¹å¤§è€Œæ…¢çš„å­˜å‚¨è®¾å¤‡ä¸­æœ€ä¸ºæ´»è·ƒçš„éƒ¨åˆ†<span class="mojikumi-line-end">ï¼Œ</span>è¿™ä¸ªå°çš„å­˜å‚¨è®¾å¤‡ç§°ä½œå¤§çš„å­˜å‚¨è®¾å¤‡çš„ cache<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ memory hierarchy ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸€çº§éƒ½æ˜¯ä¸‹ä¸€çº§çš„ cache<span class="mojikumi-line-end">ã€‚</span>æ•°æ®ä¼šåœ¨å„ä¸ªç›¸é‚»å±‚çº§é—´ä¸æ–­åœ°ä¼ è¾“<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒå±‚çº§ä¹‹é—´ä¼šä»¥ä¸åŒçš„ block size ä½œä¸ºæ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="ä»-cache-è·å–æ•°æ®" class="heading"><a href="#ä»-cache-è·å–æ•°æ®" class="heading-anchor" aria-label="ç« èŠ‚ï¼š ä» cache è·å–æ•°æ®" tabindex="-1"></a><span>ä» cache è·å–æ•°æ®</span></h3>
<p>æƒ³è¦ä» memory hierarchy çš„æŸä¸€çº§è·å–æ•°æ®æ—¶<span class="mojikumi-line-end">ï¼Œ</span>é¦–å…ˆä¼šå°è¯•ä»å®ƒçš„ cache è·å–æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæˆåŠŸè·å–åˆ™ç§°ä½œ <i>cache hit</i><span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™ç§°ä½œ <i>cache miss</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>å‘ç”Ÿ cache miss æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¼šå…ˆå°†æ•°æ®ä»ä¸‹ä¸€çº§å¤åˆ¶åˆ°ä¸Šä¸€çº§<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œæœ€ç»ˆè¿˜æ˜¯è¡¨ç°ä¸ºä» cache ä¸­è·å–æ•°æ®<span class="mojikumi-line-end">ã€‚</span>å¦‚æœ cache æ»¡äº†<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ä»ä¸‹ä¸€çº§è·å–æ•°æ®æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å°±éœ€è¦åˆ é™¤ cache ä¸­çš„ä¸€äº›æ•°æ®æ¥è…¾å‡ºç©ºé—´<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ—¶éœ€è¦åœ¨ cache ä¸­é€‰æ‹©è¢«åˆ é™¤çš„æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>è¢«åˆ é™¤çš„ block ç§°ä½œ <i>victim block</i><span class="mojikumi-line-end">ï¼Œ</span>è¿™ä¸ªè¡Œä¸ºç§°ä½œå°† victim block <i>evict</i><span class="mojikumi-line-end">ï¼Œ</span>è€Œé€‰æ‹© victim block æ˜¯æ ¹æ® <i>replacement policy</i> è¿›è¡Œçš„<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ random replacement policy<span class="mojikumi-line-end">ã€</span>least recently used (LRU) replacement policy ç­‰<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="cache-çš„ç®¡ç†" class="heading"><a href="#cache-çš„ç®¡ç†" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache çš„ç®¡ç†" tabindex="-1"></a><span>Cache çš„ç®¡ç†</span></h3>
<p>cache å¯èƒ½ç”±ç¡¬ä»¶<span class="mojikumi-line-end">ã€</span>OS<span class="mojikumi-line-end">ã€</span>è½¯ä»¶ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ç›¸äº’é…åˆæ¥è¿›è¡Œç®¡ç†<span class="mojikumi-line-end">ï¼Œ</span>è€Œè¿™åœ¨å¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„<span class="mojikumi-line-end">ï¼Œ</span>æ— éœ€åº”ç”¨ç¨‹åºçš„ç¨‹åºå‘˜æ“å¿ƒ<span class="mojikumi-line-end">ã€‚</span></p>
<p>å„çº§ cache å¦‚ CS:APP Figure 6.23 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig6.23.2f4f3b1d.webp"><img srcset="/assets/csapp-fig6.23.5c7d2566.png" loading="lazy" src="/assets/csapp-fig6.23.5c7d2566.png" width="1593" height="609" alt="æ— å¤„ä¸åœ¨çš„å„å¼å„æ ·çš„ cache"></picture></p>
<h3 id="cache-å¯¹-locality-çš„åˆ©ç”¨" class="heading"><a href="#cache-å¯¹-locality-çš„åˆ©ç”¨" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache å¯¹ locality çš„åˆ©ç”¨" tabindex="-1"></a><span>Cache å¯¹ locality çš„åˆ©ç”¨</span></h3>
<p>temporal locality ä½¿å¾—é‡å¤ä½¿ç”¨çš„æ•°æ®ç•™å­˜åœ¨ cache ä¸­ä»è€Œæ›´å®¹æ˜“ cache hit<span class="mojikumi-line-end">ï¼›</span>cache ä¸­çš„æ•°æ®æŒ‰ block å­˜å‚¨åˆ™åˆ©ç”¨äº† spatial locality<span class="mojikumi-line-end">ï¼Œ</span>ä½¿å¾—ä¸€ä¸ªæ•°æ®è¢« cache æ—¶ä¸å…¶é‚»è¿‘çš„å¤„äºåŒä¸€ä¸ª block çš„æ•°æ®ä¹Ÿè¢« cache<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="cache-memories" class="heading"><a href="#cache-memories" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache Memories" tabindex="-1"></a><span>Cache Memories</span></h2>
<p>éšç€ CPU å’Œ DRAM çš„é€Ÿåº¦å·®å¼‚è¶Šæ¥è¶Šå¤§<span class="mojikumi-line-end">ï¼Œ</span>SRAM è¢«ç”¨æ¥å¡«å……å®ƒä»¬ä¹‹é—´çš„ gap<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸‹é¢çš„è®¨è®ºä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¸ºäº†ç®€ä¾¿<span class="mojikumi-line-end">ï¼Œ</span>å‡è®¾åªæœ‰ L1 cache<span class="mojikumi-line-end">ï¼Œ</span>æ²¡æœ‰ L2<span class="mojikumi-line-end">ã€</span>L3 cache<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€…ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯åœ¨ä»‹ç» L3 cache æ˜¯å¦‚ä½•å·¥ä½œçš„<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<h3 id="cache-çš„ç»“æ„ä¸è¯»å–" class="heading"><a href="#cache-çš„ç»“æ„ä¸è¯»å–" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache çš„ç»“æ„ä¸è¯»å–" tabindex="-1"></a><span>Cache çš„ç»“æ„ä¸è¯»å–</span></h3>
<p>è®¾ main memory æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>m</mi></msup></mrow><annotation encoding="application/x-tex">2^m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ªåœ°å€<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ªåœ°å€å­˜æ”¾ä¸€ä¸ª byte<span class="mojikumi-line-end">ã€‚</span>å®ƒçš„ cache ä¼šåˆ†æˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>s</mi></msup></mrow><annotation encoding="application/x-tex">2^s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ª <i>cache set</i><span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cache set åŒ…å« <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> ä¸ª <i>cache line</i><span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cache line å­˜æ”¾ä¸€ä¸ªå¤§å°ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">2^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span></span> byte çš„ data block<span class="mojikumi-line-end">ã€</span>ä¸€ä¸ª <i>valid bit</i><span class="mojikumi-line-end">ã€</span>ä»¥åŠé•¿åº¦ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>m</mi><mo>âˆ’</mo><mi>b</mi><mo>âˆ’</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">t = m-b-s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span> çš„ <i>tag bits</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ªåœ°å€ä¼šè¢«åˆ†æˆä¸‰éƒ¨åˆ†<span class="mojikumi-line-end">ï¼Œ</span>é«˜ä½çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span> ä½æ˜¯ tag<span class="mojikumi-line-end">ï¼Œ</span>ä¸­é—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span> ä½æ˜¯ set index<span class="mojikumi-line-end">ï¼Œ</span>ä½ä½ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> ä½æ˜¯ block offset<span class="mojikumi-line-end">ã€‚</span>è·å–å­˜æ”¾åœ¨æŸä¸ªåœ°å€çš„æ•°æ®æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å…ˆæ ¹æ®å…¶ set index æ‰¾åˆ°å¯¹åº”çš„ cache set<span class="mojikumi-line-end">ï¼Œ</span>å†åœ¨ cache set ä¸­æ‰¾åˆ° valid bit ä¸º 1 ä¸” tag ç›¸ç¬¦çš„ cache line<span class="mojikumi-line-end">ï¼Œ</span>æœ€åé€šè¿‡ block offset æ¥ä» block ä¸­æå–å‡ºå•ä¸ª byte<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ cache miss æ—¶<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ä»ä¸‹ä¸€çº§è·å–æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>å­˜æ”¾åˆ° cache ä¸­<span class="mojikumi-line-end">ã€‚</span>å¦‚æœå¯¹åº”çš„ cache set æ‰€æœ‰ cache line éƒ½æ»¡äº†<span class="mojikumi-line-end">ï¼Œ</span>å°±éœ€è¦ evict æŸä¸ªå·²æœ‰çš„ cache line<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="conflict-miss" class="heading"><a href="#conflict-miss" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Conflict Miss" tabindex="-1"></a><span>Conflict Miss</span></h3>
<p>cache set çš„è®¾è®¡åŸºäºä¸€ä¸ªå‡è®¾<span class="mojikumi-line-end">ï¼Œ</span>å³åœ¨å±€éƒ¨å†…è®¿é—®çš„æ•°æ®åœ°å€çš„ä½ä½å¾€å¾€æ˜¯ä¸åŒçš„<span class="mojikumi-line-end">ï¼Œ</span>ä½†å®é™…ä¸Šå¯èƒ½å¹¶éå¦‚æ­¤<span class="mojikumi-line-end">ã€‚</span>å¦‚æœä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>s</mi><mo>+</mo><mi>b</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{s+b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span></span></span> çš„å€æ•°ä¸ºåœ°å€é—´éš”è®¿é—®æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯èƒ½è¿ç»­è®¿é—®åŒä¸€ä¸ª cache set å†…çš„æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´ cache miss<span class="mojikumi-line-start">ï¼ˆ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> è¾ƒå°<span class="mojikumi-line-end">ï¼Œ</span>å°¤å…¶æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">E=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> æ—¶<span class="mojikumi-line-end">ï¼Œ</span>è¿™ç§æƒ…å†µæ›´å¯èƒ½è§¦å‘<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>æ•°ç»„çš„å¤§å°æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span> çš„æ¬¡å¹‚è€Œäº¤æ›¿è®¿é—®ç›¸é‚»æ•°ç»„çš„åŒä¸€ä¸ªä¸‹æ ‡æ—¶å°±å¯èƒ½è¿™æ ·<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>è¿™å¤§æ¦‚åœ¨ APIO2019 è®²è¿‡<span class="mojikumi-line-end">ï¼Œ</span>å½“æ—¶æˆ‘è‡ªç„¶æ˜¯å•¥éƒ½æ²¡å¬æ‡‚<span class="mojikumi-line-end">ï¼Œ</span>å°±åªè®°å¾—æ•°ç»„ä¸è¦å¼€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span> çš„æ¬¡å¹‚<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<h3 id="cache-çš„åˆ†ç±»" class="heading"><a href="#cache-çš„åˆ†ç±»" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache çš„åˆ†ç±»" tabindex="-1"></a><span>Cache çš„åˆ†ç±»</span></h3>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">E=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> çš„ cache ç§°ä½œ <i>direct-mapped cache</i><span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span><s>ä¹¦ä¸Šåœ¨è¿™ä»”ç»†è§£é‡Šäº†åŠå¤©<span class="mojikumi-line-end">ï¼Œ</span>æ„Ÿè§‰åºŸè¯å¥½å¤šå•Š<span class="mojikumi-line-end">ã€‚</span></s><span class="mojikumi-line-end">ï¼‰</span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>></mo><mn>1</mn></mrow><annotation encoding="application/x-tex">E > 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> çš„ cache ç§°ä½œ <i>set associative cache</i><span class="mojikumi-line-end">ã€‚</span>å…¶ä¸­<span class="mojikumi-line-end">ï¼Œ</span><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>></mo><mn>0</mn></mrow><annotation encoding="application/x-tex">s > 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> çš„ç§°ä½œ E-way set associative cache<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">s = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> çš„ç§°ä½œ fully associative cache<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="cache-çš„å†™å…¥" class="heading"><a href="#cache-çš„å†™å…¥" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache çš„å†™å…¥" tabindex="-1"></a><span>Cache çš„å†™å…¥</span></h3>
<p>åœ¨ cache hit æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ä¸¤ç§å¤„ç†æ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><i>write-through</i>: æ—¢ä¿®æ”¹ cache<span class="mojikumi-line-end">ï¼Œ</span>åˆä¿®æ”¹ä¸‹ä¸€çº§</li>
<li><i>write-back</i>: åªä¿®æ”¹ cache<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”åœ¨æ¯ä¸ª cache line ä¸­æ·»åŠ ä¸€ä¸ª <i>dirty bit</i><span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥è®°å½•æ˜¯å¦è¢«ä¿®æ”¹è¿‡<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è¢« evict æ—¶è‹¥ dirty åˆ™å†™å…¥ä¸‹ä¸€çº§</li>
</ul>
<p>åœ¨ cache miss æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæœ‰ä¸¤ç§å¤„ç†æ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><i>write-allocate</i>: å…ˆä»ä¸‹ä¸€çº§è·å–æ•°æ®<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åç”¨ä¸ cache hit ç›¸åŒçš„å¤„ç†æ–¹å¼</li>
<li><i>no-write-allocate</i>: ç›´æ¥å†™å…¥ä¸‹ä¸€çº§<span class="mojikumi-line-end">ï¼Œ</span>ä¸è·å–åˆ° cache ä¸­</li>
</ul>
<p>ä¸€èˆ¬ write-through å’Œ no-write-allocate æ­é…<span class="mojikumi-line-end">ï¼Œ</span>write-back å’Œ write-allocate æ­é…<span class="mojikumi-line-end">ã€‚</span></p>
<p>å®é™…ä¸Š<span class="mojikumi-line-end">ï¼Œ</span>cache å†™å…¥çš„ä¼˜åŒ–æ˜¯éå¸¸å¤æ‚çš„é—®é¢˜<span class="mojikumi-line-end">ï¼Œ</span>è¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»äº†ä¸€ä¸‹<span class="mojikumi-line-end">ã€‚</span>ä½œä¸ºç¨‹åºå‘˜<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æŠŠ cache å†™å…¥å½“æˆæ˜¯ write-back<span class="mojikumi-line-end">ã€</span>write-allocate çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="i-cache-å’Œ-d-cache" class="heading"><a href="#i-cache-å’Œ-d-cache" class="heading-anchor" aria-label="ç« èŠ‚ï¼š i-cache å’Œ d-cache" tabindex="-1"></a><span>i-cache å’Œ d-cache</span></h3>
<p>åªå­˜æ”¾æŒ‡ä»¤çš„ cache ç§°ä½œ <i>i-cache</i><span class="mojikumi-line-end">ï¼Œ</span>åªå­˜æ”¾æ•°æ®çš„ cache ç§°ä½œ <i>d-cache</i><span class="mojikumi-line-end">ï¼Œ</span>éƒ½å­˜æ”¾çš„ cache ç§°ä½œ <i>unified cache</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>å°† i-cache å’Œ d-cache åˆ†å¼€<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥å¯¹å®ƒä»¬åˆ†åˆ«è¿›è¡Œä¼˜åŒ–<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ i-cache æ˜¯åªè¯»çš„<span class="mojikumi-line-end">ï¼Œ</span>äºŒè€…å¯ä»¥æœ‰ä¸ä¸€æ ·çš„å¤§å°<span class="mojikumi-line-end">ã€</span>ä¸ä¸€æ ·çš„ cache set è®¾ç½®<span class="mojikumi-line-end">ã€‚</span>å°†ä¸¤è€…åˆ†å¼€è¿˜å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé¿å… conflict miss<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ Core i7 å¤„ç†å™¨ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ªæ ¸æœ‰è‡ªå·±çš„ L1 i-cache<span class="mojikumi-line-end">ã€</span>L1 d-cache<span class="mojikumi-line-end">ã€</span>L2 unified cache<span class="mojikumi-line-end">ï¼Œ</span>æ‰€æœ‰æ ¸å…±äº«ä¸€ä¸ª L3 unified cache<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="cache-çš„æ€§èƒ½" class="heading"><a href="#cache-çš„æ€§èƒ½" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Cache çš„æ€§èƒ½" tabindex="-1"></a><span>Cache çš„æ€§èƒ½</span></h3>
<p>cache æ€§èƒ½çš„è¡¡é‡æŒ‡æ ‡æœ‰<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>miss rate</li>
<li>hit rate</li>
<li>hit time: cache hit æ—¶çš„è®¿é—®ç”¨æ—¶</li>
<li>miss penalty: cache miss æ—¶çš„è®¿é—®ç”¨æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¸æœ€ç»ˆä»å“ªä¸€çº§è·å–åˆ°æ•°æ®æœ‰å…³</li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>cache çš„å‚æ•°å¯¹æ€§èƒ½çš„å½±å“æ˜¯<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>cache size è¶Šå¤§<span class="mojikumi-line-end">ï¼Œ</span>hit rate å°±è¶Šé«˜<span class="mojikumi-line-end">ï¼Œ</span>ä½†é€Ÿåº¦ä¼šæ…¢<span class="mojikumi-line-end">ã€‚</span></li>
<li>å¢å¤§ block size å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ spatial locality<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¹Ÿæœ‰å¯èƒ½å›  cache line æ•°é‡å‡å°‘è€Œé™ä½ hit rate<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”ä¼šå› ä¸ºæ¯æ¬¡éœ€è¦ä¼ é€’çš„æ•°æ®å˜å¤šè€Œå¢å¤§ miss penalty<span class="mojikumi-line-end">ã€‚</span></li>
<li>æ›´å¤§çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span> å¯ä»¥é™ä½ conflict miss çš„å¯èƒ½æ€§<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¹Ÿä¼šä½¿å¾— tag åŒ¹é…ä»¥åŠ victim line çš„é€‰æ‹©æ›´åŠ å¤æ‚<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œå¢å¤§ hit time å’Œ miss penalty<span class="mojikumi-line-end">ã€‚</span>åœ¨ Core i7 å¤„ç†å™¨ä¸­<span class="mojikumi-line-end">ï¼Œ</span>L1<span class="mojikumi-line-end">ã€</span>L2 cache æ˜¯ 8-way çš„<span class="mojikumi-line-end">ï¼Œ</span>L3 cache æ˜¯ 16-way çš„<span class="mojikumi-line-end">ã€‚</span></li>
<li>write-through å®ç°èµ·æ¥æ›´åŠ å®¹æ˜“<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”åœ¨ read miss æ—¶ä¸ä¼šè§¦å‘å†™å…¥<span class="mojikumi-line-end">ã€‚</span>è€Œ write-back å¯ä»¥å‡å°‘æ•°æ®ä¼ é€’çš„æ€»é‡<span class="mojikumi-line-end">ï¼Œ</span>é™ä½ I/O bus å¸¦å®½çš„å ç”¨<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯èƒ½é™ä½æ•°æ®ä¼ é€’çš„ç”¨æ—¶<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>memory hierarchy ä¸­è¾ƒä½çš„å±‚çº§æ›´å€¾å‘äºä½¿ç”¨ write-back<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h2 id="the-impact-of-caches-on-program-performance" class="heading"><a href="#the-impact-of-caches-on-program-performance" class="heading-anchor" aria-label="ç« èŠ‚ï¼š The Impact of Caches on Program Performance" tabindex="-1"></a><span>The Impact of Caches on Program Performance</span></h2>
<h3 id="the-memory-mountain" class="heading"><a href="#the-memory-mountain" class="heading-anchor" aria-label="ç« èŠ‚ï¼š The Memory Mountain" tabindex="-1"></a><span>The Memory Mountain</span></h3>
<p>å¯¹ä¸€å®š size çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„ stride è¿›è¡Œè®¿é—®<span class="mojikumi-line-end">ï¼Œ</span>å°† size<span class="mojikumi-line-end">ã€</span>stride ä¸æ•°æ®ååé‡çš„å…³ç³»ç”»æˆä¸‰ç»´å›¾åƒ<span class="mojikumi-line-end">ï¼Œ</span>å°±å¾—åˆ°äº† <i>memory mountain</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>CS:APP Figure 6.41 å±•ç¤ºäº†ä¸€åº§ Core i7 çš„ memory mountain:<span class="mojikumi-line-start">ï¼ˆ</span>è¿™ä¹Ÿæ˜¯ CS:APP çš„å°é¢<span class="mojikumi-line-end">ï¼‰</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig6.41.869a6222.webp"><img srcset="/assets/csapp-fig6.41.8d7d506e.png" loading="lazy" src="/assets/csapp-fig6.41.8d7d506e.png" width="1285" height="847" alt="Core i7 çš„ memory mountain"></picture></p>
<p>Memory mountain è¾ƒä¸ºå®Œæ•´åœ°å‘ˆç°äº†ä¸€ä¸ª memory system çš„æ€§èƒ½<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠ temporal locality å’Œ spatial locality å¯¹æ€§èƒ½çš„å½±å“<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨æ¯çº§ cache çš„å®¹é‡å¤„<span class="mojikumi-line-end">ï¼Œ</span>ååé‡ä¼šå‘ç”Ÿæ˜æ˜¾çš„çªå˜<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ size ç›¸åŒæ—¶<span class="mojikumi-line-end">ï¼Œ</span>stride è¶Šå°ååé‡è¶Šé«˜<span class="mojikumi-line-end">ã€‚</span>åœ¨ stride æ¥è¿‘ 1 æ—¶å˜åŒ–å°¤å…¶æ˜æ˜¾<span class="mojikumi-line-end">ï¼Œ</span>è¿™å’Œ Core i7 ç³»ç»Ÿçš„ prefetching æŠ€æœ¯æ¯æ¯ç›¸å…³<span class="mojikumi-line-end">ï¼Œ</span>å¤„ç†å™¨èƒ½å¤Ÿè¯†åˆ«å‡º stride-1 reference pattern å¹¶åœ¨å®é™…è®¿é—®åˆ°æ•°æ®ä¹‹å‰å°±è¿›è¡Œ prefetch<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="çŸ©é˜µä¹˜æ³•çš„å¾ªç¯é¡ºåº" class="heading"><a href="#çŸ©é˜µä¹˜æ³•çš„å¾ªç¯é¡ºåº" class="heading-anchor" aria-label="ç« èŠ‚ï¼š çŸ©é˜µä¹˜æ³•çš„å¾ªç¯é¡ºåº" tabindex="-1"></a><span>çŸ©é˜µä¹˜æ³•çš„å¾ªç¯é¡ºåº</span></h3>
<p><span class="mojikumi-line-start">ï¼ˆ</span>ä¹¦ä¸Šåœ¨è¿™è®²äº†åŠå¤©<span class="mojikumi-line-end">ï¼Œ</span><s>æ„Ÿè§‰åºŸè¯å¥½å¤š</s><span class="mojikumi-line-end">ï¼Œ</span>æˆ‘å°±æ”¾ä¸ªæµ‹è¯•ç»“æœä¸Šæ¥å§<span class="mojikumi">ã€‚</span><span class="mojikumi">ï¼‰</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>CS:APP Figure 6.46<span class="mojikumi-line-end">ï¼‰</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig6.46.827ccc19.webp"><img srcset="/assets/csapp-fig6.46.c7b7637e.png" loading="lazy" src="/assets/csapp-fig6.46.c7b7637e.png" width="1233" height="767" alt="Core i7 çŸ©é˜µä¹˜æ³•æ€§èƒ½"></picture></p>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/csapp">csapp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
        <item>
            <title><![CDATA[CS:APP ç¬¬ä¸ƒç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2022/10/csapp-7</link>
            <guid>https://ouuan.moe/post/2022/10/csapp-7</guid>
            <pubDate>Mon, 31 Oct 2022 10:39:06 GMT</pubDate>
            <description><![CDATA[

<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬ä¸ƒç«  <span class="mojikumi">â€œ</span>Linking<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™ç« çš„ä¸»è¦å†…å®¹ä¸ºç¨‹åºçš„é“¾æ¥<span class="mojikumi-line-end">ã€‚</span>å­¦ä¹ é“¾æ¥æœ‰åŠ©äº<span class="mojikumi-line-end">ï¼š</span>ç†è§£é“¾æ¥æŠ¥é”™<span class="mojikumi-line-end">ï¼Œ</span>é¿å…é“¾æ¥ç›¸å…³çš„ bug<span class="mojikumi-line-end">ï¼Œ</span>ç†è§£å˜é‡<span class="mojikumi-line-start">ï¼ˆ</span>å‡½æ•°<span class="mojikumi-line-end">ï¼‰</span>çš„ä½œç”¨åŸŸ<span class="mojikumi-line-end">ï¼Œ</span>ç†è§£ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¸é“¾æ¥ç›¸å…³çš„æ­¥éª¤<span class="mojikumi-line-end">ï¼Œ</span>äº†è§£å¦‚ä½•ä½¿ç”¨å…±äº«åº“<span class="mojikumi-line-start">ï¼ˆ</span>åŠ¨æ€é“¾æ¥åº“<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[

<p><a href="https://csapp.cs.cmu.edu/">CS:APP</a> ç¬¬ä¸ƒç«  <span class="mojikumi">â€œ</span>Linking<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™ç« çš„ä¸»è¦å†…å®¹ä¸ºç¨‹åºçš„é“¾æ¥<span class="mojikumi-line-end">ã€‚</span>å­¦ä¹ é“¾æ¥æœ‰åŠ©äº<span class="mojikumi-line-end">ï¼š</span>ç†è§£é“¾æ¥æŠ¥é”™<span class="mojikumi-line-end">ï¼Œ</span>é¿å…é“¾æ¥ç›¸å…³çš„ bug<span class="mojikumi-line-end">ï¼Œ</span>ç†è§£å˜é‡<span class="mojikumi-line-start">ï¼ˆ</span>å‡½æ•°<span class="mojikumi-line-end">ï¼‰</span>çš„ä½œç”¨åŸŸ<span class="mojikumi-line-end">ï¼Œ</span>ç†è§£ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¸é“¾æ¥ç›¸å…³çš„æ­¥éª¤<span class="mojikumi-line-end">ï¼Œ</span>äº†è§£å¦‚ä½•ä½¿ç”¨å…±äº«åº“<span class="mojikumi-line-start">ï¼ˆ</span>åŠ¨æ€é“¾æ¥åº“<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>

<h2 id="compiler-drivers" class="heading"><a href="#compiler-drivers" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Compiler Drivers" tabindex="-1"></a><span>Compiler Drivers</span></h2>
<p>ç¼–è¯‘æºæ–‡ä»¶å…¶å®åˆ†æˆè‹¥å¹²æ­¥éª¤<span class="mojikumi-line-end">ï¼Œ</span>compiler driver<span class="mojikumi-line-start">ï¼ˆ</span>å¦‚ gcc<span class="mojikumi-line-end">ï¼‰</span>ä¼šä¾æ¬¡è°ƒç”¨è¿™äº›æ­¥éª¤<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨ <code>gcc -v</code> æ¥æŸ¥çœ‹è¿™äº›æ­¥éª¤çš„è¯¦ç»†ä¿¡æ¯<span class="mojikumi-line-end">ã€‚</span></p>
<ol>
<li><code>cpp</code>: é¢„å¤„ç†<span class="mojikumi-line-end">ï¼Œ</span>æºä»£ç  <code>.c</code> ->  intermediate file <code>.i</code></li>
<li><code>cc1</code>: <code>.i</code> -> æ±‡ç¼–ä»£ç  <code>.s</code></li>
<li><code>as</code>: <code>.s</code> -> relocatable object file <code>.o</code></li>
<li><code>ld</code>: é“¾æ¥<span class="mojikumi-line-end">ï¼Œ</span>å¤šä¸ª <code>.o</code> (æˆ– library) -> executable object file</li>
</ol>
<p>P.S. ä¸­é—´æ­¥éª¤çš„æ–‡ä»¶ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>gcc</code><span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ <code>gcc a.s -o a</code><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="static-linking" class="heading"><a href="#static-linking" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Static Linking" tabindex="-1"></a><span>Static Linking</span></h2>
<p>é™æ€é“¾æ¥ä¸»è¦æœ‰ä¸¤ä¸ªä»»åŠ¡<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li><i>Symbol resolution</i>: relocatable object file ä¸­æœ‰å¾ˆå¤š symbol<span class="mojikumi-line-end">ï¼Œ</span>åŒ…æ‹¬å‡½æ•°<span class="mojikumi-line-end">ã€</span>å…¨å±€å˜é‡<span class="mojikumi-line-end">ã€</span>é™æ€å˜é‡ç­‰<span class="mojikumi-line-end">ï¼Œ</span>linker éœ€è¦å°†æ¯ä¸ª symbol reference å¯¹åº”åˆ°ä¸€ä¸ª symbol definition<span class="mojikumi-line-end">ã€‚</span></li>
<li><i>Relocation</i>: relocatable object file ä¸­åœ°å€ä» 0 å¼€å§‹<span class="mojikumi-line-end">ï¼Œ</span>linker éœ€è¦å°†æ¯ä¸ª symbol definition é‡æ–°åˆ†é…åˆ°æ­£ç¡®çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ç›¸åº”åœ°ä¿®æ”¹æ¯ä¸ª symbol reference<span class="mojikumi-line-end">ã€‚</span></li>
</ol>
<h2 id="object-files" class="heading"><a href="#object-files" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Object Files" tabindex="-1"></a><span>Object Files</span></h2>
<p>object file åˆ†ä¸ºä¸‰ç§<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>Relocatable object file</li>
<li>Executable object file</li>
<li>Shared object file: ä¸€ç§ç‰¹æ®Šçš„ relocatable object file<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åœ¨ load time æˆ– run time è¿›è¡ŒåŠ¨æ€é“¾æ¥</li>
</ol>
<p>object file æœ‰ä¸åŒçš„æ ¼å¼<span class="mojikumi-line-end">ï¼Œ</span>Windows ä½¿ç”¨ Portable Executable (PE) æ ¼å¼<span class="mojikumi-line-end">ï¼Œ</span>macOS ä½¿ç”¨ Mach-O æ ¼å¼<span class="mojikumi-line-end">ï¼Œ</span>ç°ä»£çš„ x86-64 Linux/Unix ç³»ç»Ÿä½¿ç”¨ Executable and Linkable Format (ELF) æ ¼å¼<span class="mojikumi-line-end">ã€‚</span>æœ¬ç« ä¼šåŸºäº ELF-64<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="relocatable-object-files" class="heading"><a href="#relocatable-object-files" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Relocatable Object Files" tabindex="-1"></a><span>Relocatable Object Files</span></h2>
<p>ELF relocatable object file é€šå¸¸åŒ…å«ä»¥ä¸‹ section<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li><code>.text</code>: ç¨‹åºçš„æœºå™¨ç </li>
<li><code>.rodata</code>: åªè¯»çš„æ•°æ®</li>
<li><code>.data</code>: éœ€è¦åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡</li>
<li><code>.bss</code>: æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸ºé›¶çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡<span class="mojikumi-line-end">ï¼Œ</span>å®ƒä»¬åœ¨è¿è¡Œæ—¶ä¼šä»¥é›¶ä¸ºåˆå€¼<span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œåœ¨ object file ä¸­ä¸å æ®æ–‡ä»¶å¤§å°</li>
<li><code>.symtab</code>: symbol table<span class="mojikumi-line-end">ï¼Œ</span>å­˜å‚¨ symbol<span class="mojikumi-line-start">ï¼ˆ</span>å‡½æ•°<span class="mojikumi-line-end">ã€</span>å…¨å±€å˜é‡<span class="mojikumi-line-end">ï¼‰</span>çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>ä¸éœ€è¦ <code>-g</code> ç¼–è¯‘é€‰é¡¹<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¸å«å±€éƒ¨å˜é‡çš„ä¿¡æ¯</li>
<li><code>.rel.text</code>: åˆ—å‡ºäº† <code>.text</code> ä¸­åœ¨é“¾æ¥æ—¶éœ€è¦ä¿®æ”¹çš„åœ°æ–¹<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯è°ƒç”¨å¤–éƒ¨å‡½æ•°æˆ–å¼•ç”¨å…¨å±€å˜é‡æ—¶éœ€è¦ä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>è€Œ <a href="/post/2022/09/csapp-3#jump-%E6%8C%87%E4%BB%A4%E7%BC%96%E7%A0%81">è°ƒç”¨æœ¬åœ°å‡½æ•°ä¸éœ€è¦ä¿®æ”¹</a></li>
<li><code>.rel.data</code>: åˆ—å‡ºäº† <code>.data</code> ä¸­åœ¨é“¾æ¥æ—¶éœ€è¦ä¿®æ”¹çš„åœ°æ–¹<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯å…¨å±€å˜é‡çš„å€¼ä¸ºå…¶ä»–å…¨å±€å˜é‡æˆ–å¤–éƒ¨å‡½æ•°çš„åœ°å€æ—¶éœ€è¦ä¿®æ”¹</li>
<li><code>.debug</code>: è°ƒè¯•ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>åŒ…å«å±€éƒ¨å˜é‡çš„ä¿¡æ¯<span class="mojikumi-line-end">ã€</span>typedef ä¿¡æ¯<span class="mojikumi-line-end">ã€</span>æºä»£ç ç­‰<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ <code>-g</code> ç¼–è¯‘é€‰é¡¹æ‰æœ‰</li>
<li><code>.line</code>: æºä»£ç ä¸æœºå™¨ç è¡Œå·é—´çš„å¯¹åº”å…³ç³»<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ <code>-g</code> ç¼–è¯‘é€‰é¡¹æ‰æœ‰</li>
<li><code>.strtab</code>: ä¸€å †å­—ç¬¦<span class="mojikumi-line-end">ï¼Œ</span>ç”¨äºå…¶å®ƒ section<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æŒ‡å‘å…¶ä¸­ä¸€ä¸ªä½ç½®æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²<span class="mojikumi-line-start">ï¼ˆ</span>ä»è¿™ä¸ªä½ç½®èµ·åˆ° <code>\0</code> ä¸ºæ­¢<span class="mojikumi-line-end">ï¼‰</span></li>
</ol>
<h2 id="symbols-and-symbol-tables" class="heading"><a href="#symbols-and-symbol-tables" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Symbols and Symbol Tables" tabindex="-1"></a><span>Symbols and Symbol Tables</span></h2>
<p>å¯¹ linker æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>symbol æœ‰ä¸‰ç§<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>æœ¬åœ°å®šä¹‰<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥è¢«å¤–éƒ¨è®¿é—®çš„: C ä¸­é <code>static</code> çš„å‡½æ•°å’Œå…¨å±€å˜é‡</li>
<li>å¤–éƒ¨å®šä¹‰çš„<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ C ä¸­ <code>extern</code> çš„å…¨å±€å˜é‡</li>
<li>æœ¬åœ°å®šä¹‰<span class="mojikumi-line-end">ï¼Œ</span>å¤–éƒ¨ä¸å¯è®¿é—®çš„: C ä¸­ <code>static</code> çš„å‡½æ•°å’Œå˜é‡</li>
</ol>
<p>ä¸€ä¸ª ELF64 symbol åŒ…å«å¦‚ä¸‹ä¿¡æ¯<span class="mojikumi-line-start">ï¼ˆ</span>CS:APP Figure 7.4<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="c ä»£ç å—" data-v-ad49d235>c</h3><ile-root id="ile-4"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-4--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">typedef</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">struct</span></span>
<span><span style="color: #D6DEEB">{</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">int</span><span style="color: #D6DEEB">   name;</span><span style="color: #637777">      /* String table offset */</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">char</span><span style="color: #D6DEEB">  type:</span><span style="color: #F78C6C">4</span><span style="color: #D6DEEB">,</span><span style="color: #637777">    /* Function or data (4 bits) */</span></span>
<span><span style="color: #D6DEEB">          binding:</span><span style="color: #F78C6C">4</span><span style="color: #D6DEEB">;</span><span style="color: #637777"> /* Local or global (4 bits) */</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">char</span><span style="color: #D6DEEB">  reserved;</span><span style="color: #637777">  /* Unused */</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">short</span><span style="color: #D6DEEB"> section;</span><span style="color: #637777">   /* Section header index */</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">long</span><span style="color: #D6DEEB">  value;</span><span style="color: #637777">     /* Section offset or absolute address */</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">long</span><span style="color: #D6DEEB">  size;</span><span style="color: #637777">      /* Object size in bytes */</span></span>
<span><span style="color: #D6DEEB">} Elf64_Symbol;</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">typedef</span><span style="color: #403F53"> </span><span style="color: #994CC3">struct</span></span>
<span><span style="color: #403F53">{</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">int</span><span style="color: #403F53">   name;</span><span style="color: #989FB1">      /* String table offset */</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">char</span><span style="color: #403F53">  type:</span><span style="color: #AA0982">4</span><span style="color: #403F53">,</span><span style="color: #989FB1">    /* Function or data (4 bits) */</span></span>
<span><span style="color: #403F53">          binding:</span><span style="color: #AA0982">4</span><span style="color: #403F53">;</span><span style="color: #989FB1"> /* Local or global (4 bits) */</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">char</span><span style="color: #403F53">  reserved;</span><span style="color: #989FB1">  /* Unused */</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">short</span><span style="color: #403F53"> section;</span><span style="color: #989FB1">   /* Section header index */</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">long</span><span style="color: #403F53">  value;</span><span style="color: #989FB1">     /* Section offset or absolute address */</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">long</span><span style="color: #403F53">  size;</span><span style="color: #989FB1">      /* Object size in bytes */</span></span>
<span><span style="color: #403F53">} Elf64_Symbol;</span></span></code></pre></div></section>
<p><code>value</code> åœ¨ relocatable object file ä¸­æ˜¯ symbol çš„åœ°å€ç›¸å¯¹äº section å¼€å¤´çš„ offset<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ executable object file ä¸­æ˜¯ symbol çš„ç»å¯¹åœ°å€<span class="mojikumi-line-end">ã€‚</span></p>
<p><code>section</code> æ˜¯ object file çš„ section ä¹‹ä¸€<span class="mojikumi-line-start">ï¼ˆ</span>çš„ index<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åœ¨ relocatable object file ä¸­è¿˜å¯ä»¥æ˜¯ä¸€ä¸ª pseudosection:</p>
<ul>
<li>ABS: ä¸åº”è¢« relocate çš„ symbol</li>
<li>UNDEF: æœªå®šä¹‰<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨å…¶ä»– module ä¸­å®šä¹‰<span class="mojikumi-line-end">ï¼‰</span>çš„ symbol</li>
<li>COMMON: å¤šä¸ª module å…±ç”¨çš„ symbol<span class="mojikumi-line-start">ï¼ˆ</span>è§ <a href="#symbol-resolution">Symbol Resolution</a><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ­¤æ—¶ <code>value</code> çš„å€¼ç»™å‡º data alignment çš„è¦æ±‚<span class="mojikumi-line-end">ï¼Œ</span><code>size</code> ç»™å‡ºçš„æ˜¯ minimum size</li>
</ul>
<p>æœªåˆå§‹åŒ–çš„é™æ€å˜é‡ä»¥åŠåˆå§‹åŒ–ä¸ºé›¶çš„å…¨å±€æˆ–é™æ€å˜é‡ä¼šæ”¾åœ¨ <code>.bss</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœå¯ç”¨äº† <code>-fcommon</code> ç¼–è¯‘é€‰é¡¹åˆ™ä¼šæ”¾åœ¨ COMMON<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™æ”¾åœ¨ <code>.bss</code><span class="mojikumi-line-end">ã€‚</span>åœ¨ gcc 9 åŠä¹‹å‰é»˜è®¤é€‰é¡¹æ˜¯ <code>-fcommon</code><span class="mojikumi-line-end">ï¼Œ</span>è€Œè‡ª gcc 10 èµ·é»˜è®¤é€‰é¡¹æ˜¯ <code>-<wbr>fno<wbr>-<wbr>common</code><span class="mojikumi-line-end">ã€‚</span>åœ¨ C++ ä¸­ <code>-fcommon</code> æ˜¯æ— æ•ˆçš„<span class="mojikumi-line-end">ï¼Œ</span>æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡æ€»æ˜¯æ”¾åœ¨ <code>.bss</code><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯ä»¥ä½¿ç”¨ <code>readelf -s a.o</code> æ¥æŸ¥çœ‹ <code>a.o</code> çš„ <code>.symtab</code><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="symbol-resolution" class="heading"><a href="#symbol-resolution" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Symbol Resolution" tabindex="-1"></a><span>Symbol Resolution</span></h2>
<p>Symbol resolution å³æŠŠæ¯ä¸ª symbol reference å¯¹åº”åˆ°ä¸€ä¸ª symbol definition<span class="mojikumi-line-end">ã€‚</span></p>
<p>local symbol çš„ resolution æ˜¯å®¹æ˜“çš„<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸ºç¼–è¯‘å•ä¸ª module æ—¶å°±ä¿è¯äº† local symbol æ˜¯å”¯ä¸€çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>global symbol å¯èƒ½é‡åˆ°å‡ ç§æƒ…å†µ<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>åªæœ‰ä¸€ä¸ª module é‡Œå®šä¹‰äº†è¿™ä¸ª global symbol<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä½¿ç”¨è¿™ä¸ª symbol</li>
<li>æ²¡æœ‰ä»»ä½• module é‡Œå®šä¹‰äº†è¿™ä¸ª global symbol<span class="mojikumi-line-end">ï¼Œ</span>åˆ™æŠ¥é”™ undefined reference</li>
<li>åœ¨å¤šä¸ª module é‡Œå®šä¹‰äº†è¿™ä¸ª global symbol<span class="mojikumi-line-end">ï¼Œ</span>åˆ™<span class="mojikumi-line-end">ï¼š</span>
<ul>
<li>å¦‚æœå…¶ä¸­æœ‰å¤šä¸ª symbol ä¸åœ¨ COMMON æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åˆ™æŠ¥é”™ multiple definition</li>
<li>å¦‚æœå…¶ä¸­åªæœ‰ä¸€ä¸ªä¸åœ¨ COMMON æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä½¿ç”¨è¿™ä¸ª symbol</li>
<li>å¦‚æœè¿™äº› symbol éƒ½åœ¨ COMMON æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä½¿ç”¨å…¶ä¸­ <code>size</code> æœ€å¤§çš„ä¸€ä¸ª<span class="mojikumi-line-start">ï¼ˆ</span>å¦‚æœ <code>size</code> ç›¸åŒåˆ™ä½¿ç”¨å“ªä¸ªæ˜¯æ²¡æœ‰åŒºåˆ«çš„<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼›</span>å¦‚æœè¿™äº› symbol æœ‰ä¸ä¸€æ ·çš„ <code>size</code><span class="mojikumi-line-end">ï¼Œ</span>linker è¿˜ä¼šç»™å‡ºè­¦å‘Š</li>
</ul>
</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ç¼–è¯‘é€‰é¡¹ä¸º <code>-fcommon</code><span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœåœ¨å¤šä¸ª module ä¸­å®šä¹‰äº†åŒä¸€ä¸ªå…¨å±€å˜é‡ä¸”å…¶ä¸­æœ€å¤šæœ‰ä¸€ä¸ªåˆå§‹åŒ–äº†<span class="mojikumi-line-end">ï¼Œ</span>åˆ™å¯èƒ½å¯¼è‡´æ„å¤–çš„ç»“æœ<span class="mojikumi-line-end">ã€‚</span>å¯ä»¥ç†è§£ä¸º<span class="mojikumi-line-end">ï¼Œ</span>multiple definition åœ¨æœ¬è´¨ä¸Šæ˜¯ multiple initialization<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ C++ ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å‡½æ•°é‡è½½<span class="mojikumi-line-end">ã€</span>ç±»æ–¹æ³•ä¼šé€šè¿‡ <i>mangling</i> æ¥ä½¿å¾—å‡½æ•°çš„æ¯ç§é‡è½½æœ‰ç‹¬ç‰¹çš„ symbol name<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="static-libraries" class="heading"><a href="#static-libraries" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Static Libraries" tabindex="-1"></a><span>Static Libraries</span></h2>
<p>Static library å…¶å®å°±æ˜¯ä¸€å † object file åŒ…è£…åœ¨ä¸€èµ·<span class="mojikumi-line-end">ï¼Œ</span>å®ƒçš„å¥½å¤„æ˜¯<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>ä¸ç”¨æ¯æ¬¡é‡æ–°ç¼–è¯‘<span class="mojikumi-line-start">ï¼ˆ</span>æ¯”èµ·æä¾›æºç <span class="mojikumi-line-end">ï¼‰</span></li>
<li>ä½¿å¾—åº“å’Œç¼–è¯‘å™¨è§£è€¦<span class="mojikumi-line-start">ï¼ˆ</span>æ¯”èµ·å°†åº“å‡½æ•°å†…ç½®åˆ°ç¼–è¯‘å™¨ä¸­<span class="mojikumi-line-end">ï¼‰</span></li>
<li>åªéœ€å°†ç”¨åˆ°çš„ object file å¤åˆ¶åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­<span class="mojikumi-line-end">ï¼Œ</span>é¿å…ç©ºé—´æµªè´¹<span class="mojikumi-line-start">ï¼ˆ</span>æ¯”èµ·æä¾›å•ä¸ª object file<span class="mojikumi-line-end">ï¼‰</span></li>
<li>å¯ä»¥è‡ªåŠ¨é€‰æ‹©ç”¨åˆ°çš„ object file<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ç¼–è¯‘å‘½ä»¤ä¸­åªéœ€æŒ‡å®šå°‘é‡åº“çš„åç§°<span class="mojikumi-line-start">ï¼ˆ</span>æ¯”èµ·æä¾›ä¸€å † object file<span class="mojikumi-line-end">ï¼‰</span></li>
</ol>
<p>å¯ä»¥ä½¿ç”¨ç±»ä¼¼ <code>ar rcs libabc.a a.o b.o c.o</code> çš„å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª static library<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ç¼–è¯‘æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ä¸¤ç§ä½¿ç”¨ static library çš„æ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>ç›´æ¥å°† static library çš„è·¯å¾„ä½œä¸ºå‚æ•°: <code>libabc.a</code></li>
<li>ä½¿ç”¨ <code>-lname</code> æ¥ä½¿ç”¨ <code>libname.a</code><span class="mojikumi-line-end">ï¼Œ</span>ä½†éœ€è¦ä½¿ç”¨ <code>-Ldir</code> æ¥å°† <code>dir</code> åŠ å…¥åˆ° <code>-l</code> çš„æœç´¢è·¯å¾„ä¹‹ä¸­: <code>-L. -labc</code></li>
</ul>
<p>ç‰¹åˆ«åœ°<span class="mojikumi-line-end">ï¼Œ</span>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°† <code>libc.a</code> æä¾›ç»™ linker<span class="mojikumi-line-end">ï¼Œ</span>ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®š<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨é“¾æ¥æ—¶<span class="mojikumi-line-end">ï¼Œ</span>linker ä¼šä¾æ¬¡å¤„ç†æ¯ä¸ªå‚æ•°<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>å¦‚æœä¸€ä¸ªå‚æ•°æ˜¯ object file å°±ä¸€å®šä¼šä½¿ç”¨</li>
<li>å¦‚æœæ˜¯ static library<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šä¾æ¬¡æŸ¥çœ‹å…¶ä¸­åŒ…å«çš„æ¯ä¸€ä¸ª object file<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœä¸€ä¸ª object file ä¸­å®šä¹‰äº†æŸä¸ªå½“å‰å¼•ç”¨äº†ä½†ä»æœªå®šä¹‰çš„ symbol<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šä½¿ç”¨è¿™ä¸ª object file<span class="mojikumi-line-end">ï¼Œ</span>è€Œè¿™æ ·çš„è¿‡ç¨‹ä¼šåå¤è¿­ä»£è¿›è¡Œç›´åˆ°æ²¡æœ‰æ–°çš„ object file è¢«ä½¿ç”¨ä¸ºæ­¢<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ <code>main.c</code> å¼•ç”¨äº† <code>b.o</code> è€Œæ²¡æœ‰å¼•ç”¨ <code>a.o</code><span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>b.o</code> ä¸­å¼•ç”¨äº† <code>a.o</code><span class="mojikumi-line-end">ï¼Œ</span>ä¸”åœ¨ <code>libabc.a</code> ä¸­ <code>a.o</code> ä½äº <code>b.o</code> ä¹‹å‰<span class="mojikumi-line-end">ï¼Œ</span>é‚£ä¹ˆç¬¬ä¸€æ¬¡è¿­ä»£ä¸­åªä¼šä½¿ç”¨ <code>b.o</code><span class="mojikumi-line-end">ï¼Œ</span>ç¬¬äºŒæ¬¡è¿­ä»£æ‰ä¼šä½¿ç”¨ <code>a.o</code><span class="mojikumi-line-end">ï¼Œ</span>è€Œ <code>c.o</code> ä¸ä¼šè¢«ä½¿ç”¨<span class="mojikumi-line-end">ï¼‰</span></li>
</ul>
<p>è¿™æ ·çš„è¿‡ç¨‹ä½¿å¾—ç¼–è¯‘å‘½ä»¤ä¸­å‚æ•°çš„é¡ºåºä»¥åŠ static library ä¸­ object file çš„é¡ºåºå¯èƒ½å½±å“ç¼–è¯‘ç»“æœ<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>ä¸€èˆ¬æ¥è¯´éœ€è¦å°† library æ”¾åœ¨ç¼–è¯‘å‘½ä»¤çš„æœ«å°¾<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™å¤„ç†ä¸€ä¸ª library æ—¶è¿˜æ²¡æœ‰å¼•ç”¨å…¶ä¸­çš„ symbol<span class="mojikumi-line-end">ï¼Œ</span>å°±ä¸ä¼šä½¿ç”¨ç›¸åº”çš„ object file<span class="mojikumi-line-end">ï¼Œ</span>æœ€åå°±ä¼šæŠ¥é”™ undefined reference</li>
<li>å¦‚æœå¤šä¸ª library ä¹‹é—´æœ‰ä¾èµ–å…³ç³»<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦å°†è¢«å…¶ä»– library ä¾èµ–çš„ library æ”¾åœ¨é åçš„ä½ç½®</li>
<li>å¦‚æœå¤šä¸ª library ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–<span class="mojikumi-line-end">ï¼Œ</span>å¯èƒ½éœ€è¦åœ¨ç¼–è¯‘å‘½ä»¤ä¸­å¤šæ¬¡æŒ‡å®šåŒä¸€ä¸ª library<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€…ä¹Ÿå¯ä»¥å°†è¿™ä¸¤ä¸ª library åˆå¹¶æˆä¸€ä¸ª<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„è¯é€šè¿‡å¤šæ¬¡è¿­ä»£å°±å¯ä»¥è§£å†³å¾ªç¯ä¾èµ–<span class="mojikumi-line-end">ï¼‰</span></li>
<li>library çš„è®¾è®¡åº”å½“é¿å… multiple definition<span class="mojikumi-line-end">ï¼Œ</span>ä½†ç†è®ºä¸Šå­˜åœ¨ä¸åŒçš„å‚æ•°é¡ºåºæˆ– static library ä¸­ object file çš„é¡ºåºå¯¼è‡´ multiple definition çš„å¯èƒ½</li>
</ul>
<h2 id="relocation" class="heading"><a href="#relocation" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Relocation" tabindex="-1"></a><span>Relocation</span></h2>
<p>relocation åˆ†ä¸ºä¸¤æ­¥<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>ç»™ symbol definition é‡æ–°åˆ†é…å†…å­˜åœ°å€</li>
<li>ç›¸åº”åœ°ä¿®æ”¹ symbol reference</li>
</ol>
<p>ç¬¬ä¸€æ­¥æ˜¯ç®€å•çš„<span class="mojikumi-line-end">ï¼Œ</span>æŠŠå„ä¸ª object file ä¸­çš„å„ä¸ª section åˆ†åˆ«æ‹¼åœ¨ä¸€èµ·å³å¯<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸ºäº†è®© linker çŸ¥é“å¦‚ä½•ä¿®æ”¹ symbol reference<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦è®© linker çŸ¥é“<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>éœ€è¦è¢«ä¿®æ”¹çš„ symbol reference åœ¨å“ª</li>
<li>éœ€è¦ä¿®æ”¹æˆä»€ä¹ˆ</li>
</ol>
<p>åœ¨ relocatable object file çš„ <code>.rel.text</code> å’Œ <code>.rel.data</code> ä¸­å­˜æ”¾äº†ç›¸å…³çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>ä¸€æ¡è¿™æ ·çš„ä¿¡æ¯ç§°ä½œä¸€ä¸ª relocation entry<span class="mojikumi-line-end">ï¼Œ</span>åŒ…å«çš„å†…å®¹ä¸º<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li><code>offset</code>: è¿™ä¸ª symbol reference ç›¸å¯¹äºå…¶æ‰€åœ¨çš„ section çš„åç§»é‡<span class="mojikumi-line-end">ã€‚</span>ä¹Ÿå°±æ˜¯è¯´<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è¿™ä¸ª reference æ‰€åœ¨çš„ section çš„åœ°å€çš„åŸºç¡€ä¸ŠåŠ ä¸Š <code>offset</code> å°±å¾—åˆ°äº†è¿™ä¸ª reference çš„åœ°å€<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>type</code>: æœ‰å¾ˆå¤šç§ relocation<span class="mojikumi-line-end">ï¼Œ</span>CS:APP ä¸­åªä»‹ç»å…¶ä¸­çš„ <code>R_<wbr>X86_<wbr>64_<wbr>PC32</code> å’Œ <code>R_X86_64_32</code> ä¸¤ç§<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>symbol</code>: è¢« reference çš„ symbol åœ¨ symbol table ä¸­çš„ index<span class="mojikumi-line-end">ã€‚</span></li>
<li><code>addend</code>: è®¡ç®— symbol åœ°å€æ—¶åŠ åœ¨æœ€åçš„å¸¸æ•°<span class="mojikumi-line-start">ï¼ˆ</span>è§åæ–‡<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>ç®€å•æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span><code>R_X86_64_32</code> ä½¿ç”¨ç»å¯¹åœ°å€è¿›è¡Œå®šä½<span class="mojikumi-line-end">ï¼Œ</span><code>R_<wbr>X86_<wbr>64_<wbr>PC32</code> ä½¿ç”¨ç›¸å¯¹äº PC çš„åœ°å€è¿›è¡Œå®šä½<span class="mojikumi-line-end">ï¼Œ</span>ä¸”è¿™ä¸¤ç§ç±»å‹çš„ relocation éƒ½åªæ”¯æŒ 32 ä½çš„åœ°å€<span class="mojikumi-line-start">ï¼ˆ</span>å¦‚æœä¸€ä¸ªç¨‹åºçš„å¤§å°è¶…è¿‡ 2GB<span class="mojikumi-line-end">ï¼Œ</span>å°±éœ€è¦æŒ‡å®šç¼–è¯‘é€‰é¡¹ <code>-<wbr>mcmodel<wbr>=<wbr>medium<wbr>/<wbr>large</code><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<ul>
<li><code>R_X86_64_32</code>: ä¿®æ”¹åçš„ reference ä¸º symbol çš„åœ°å€åŠ ä¸Š <code>addend</code></li>
<li><code>R_<wbr>X86_<wbr>64_<wbr>PC32</code>: ä¿®æ”¹åçš„ reference ä¸º symbol çš„åœ°å€ä¸ reference çš„åœ°å€ä¹‹å·®åŠ ä¸Š <code>addend</code><span class="mojikumi-line-end">ï¼›</span>éœ€è¦æ³¨æ„çš„æ˜¯<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯ä¸ reference çš„åœ°å€ä¹‹å·®<span class="mojikumi-line-end">ï¼Œ</span>è€Œä¸æ˜¯ä¸æ‰§è¡Œåˆ° reference æ‰€åœ¨è¯­å¥æ—¶çš„ PC ä¹‹å·®<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥é€šå¸¸ä¼šéœ€è¦é€šè¿‡ <code>addend</code> æ¥ä¿®æ­£</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ <code>objdump -dx</code> ä»¥åœ¨åæ±‡ç¼–ç»“æœä¸­æ˜¾ç¤º relocation entry<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…ä½¿ç”¨ <code>readelf -r</code> æ˜¾ç¤ºæ‰€æœ‰ relocation entry<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”¨ GCC 8.5 ç¼–è¯‘</p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="c ä»£ç å—" data-v-ad49d235>c</h3><ile-root id="ile-5"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-5--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">int</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">foo</span><span style="color: #D6DEEB">(</span><span style="color: #C792EA">int</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">*</span><span style="color: #D7DBE0">arr</span><span style="color: #D6DEEB">);</span></span>
<span></span>
<span><span style="color: #C792EA">int</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">a</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">3</span><span style="color: #D6DEEB">] </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> {</span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">2</span><span style="color: #D6DEEB">, </span><span style="color: #F78C6C">3</span><span style="color: #D6DEEB">};</span></span>
<span><span style="color: #C792EA">int</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">*</span><span style="color: #D6DEEB">b </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #7FDBCA">&amp;</span><span style="color: #C5E478">a</span><span style="color: #D6DEEB">[</span><span style="color: #F78C6C">2</span><span style="color: #D6DEEB">];</span></span>
<span></span>
<span><span style="color: #C792EA">int</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">bar</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">{</span></span>
<span><span style="color: #D6DEEB">    </span><span style="color: #C792EA">return</span><span style="color: #D6DEEB"> </span><span style="color: #82AAFF">foo(</span><span style="color: #7FDBCA">&amp;</span><span style="color: #C5E478">a</span><span style="color: #82AAFF">[</span><span style="color: #F78C6C">1</span><span style="color: #82AAFF">])</span><span style="color: #D6DEEB">;</span></span>
<span><span style="color: #D6DEEB">}</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">int</span><span style="color: #403F53"> </span><span style="color: #4876D6">foo</span><span style="color: #403F53">(</span><span style="color: #994CC3">int</span><span style="color: #403F53"> </span><span style="color: #0C969B">*</span><span style="color: #403F53">arr);</span></span>
<span></span>
<span><span style="color: #994CC3">int</span><span style="color: #403F53"> </span><span style="color: #4876D6">a</span><span style="color: #403F53">[</span><span style="color: #AA0982">3</span><span style="color: #403F53">] </span><span style="color: #994CC3">=</span><span style="color: #403F53"> {</span><span style="color: #AA0982">1</span><span style="color: #403F53">, </span><span style="color: #AA0982">2</span><span style="color: #403F53">, </span><span style="color: #AA0982">3</span><span style="color: #403F53">};</span></span>
<span><span style="color: #994CC3">int</span><span style="color: #403F53"> </span><span style="color: #0C969B">*</span><span style="color: #403F53">b </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">&amp;</span><span style="color: #4876D6">a</span><span style="color: #403F53">[</span><span style="color: #AA0982">2</span><span style="color: #403F53">];</span></span>
<span></span>
<span><span style="color: #994CC3">int</span><span style="color: #403F53"> </span><span style="color: #4876D6">bar</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">{</span></span>
<span><span style="color: #403F53">    </span><span style="color: #994CC3">return</span><span style="color: #403F53"> </span><span style="color: #4876D6">foo(</span><span style="color: #0C969B">&amp;</span><span style="color: #4876D6">a[</span><span style="color: #AA0982">1</span><span style="color: #4876D6">])</span><span style="color: #403F53">;</span></span>
<span><span style="color: #403F53">}</span></span></code></pre></div></section>
<p><code>readelf -r</code>:</p>
<section class="code-block relative my-6 shadow" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" aria-label="plain text ä»£ç å—" data-v-ad49d235>plain text</h3><ile-root id="ile-6"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-6--></div><div class="light:hidden" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><samp><span><span style="color: #d6deeb">Relocation section &#39;.rela.text&#39; at offset 0x250 contains 2 entries:</span></span>
<span><span style="color: #d6deeb">  Offset          Info           Type           Sym. Value    Sym. Name + Addend</span></span>
<span><span style="color: #d6deeb">000000000001  000a0000000a R_X86_64_32       0000000000000008 a + 4</span></span>
<span><span style="color: #d6deeb">000000000006  000b00000002 R_X86_64_PC32     0000000000000000 foo - 4</span></span>
<span><span style="color: #d6deeb"></span></span>
<span><span style="color: #d6deeb">Relocation section &#39;.rela.data&#39; at offset 0x280 contains 1 entry:</span></span>
<span><span style="color: #d6deeb">  Offset          Info           Type           Sym. Value    Sym. Name + Addend</span></span>
<span><span style="color: #d6deeb">000000000000  000a00000001 R_X86_64_64       0000000000000008 a + 8</span></span></samp></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><samp><span><span style="color: #403f53">Relocation section &#39;.rela.text&#39; at offset 0x250 contains 2 entries:</span></span>
<span><span style="color: #403f53">  Offset          Info           Type           Sym. Value    Sym. Name + Addend</span></span>
<span><span style="color: #403f53">000000000001  000a0000000a R_X86_64_32       0000000000000008 a + 4</span></span>
<span><span style="color: #403f53">000000000006  000b00000002 R_X86_64_PC32     0000000000000000 foo - 4</span></span>
<span><span style="color: #403f53"></span></span>
<span><span style="color: #403f53">Relocation section &#39;.rela.data&#39; at offset 0x280 contains 1 entry:</span></span>
<span><span style="color: #403f53">  Offset          Info           Type           Sym. Value    Sym. Name + Addend</span></span>
<span><span style="color: #403f53">000000000000  000a00000001 R_X86_64_64       0000000000000008 a + 8</span></span></samp></pre></div></section>
<p>åœ¨ <code>.rela.text</code> ä¸­<span class="mojikumi-line-end">ï¼Œ</span><code>a</code> çš„ <code>addend</code> æ˜¯ <code>4</code><span class="mojikumi-line-end">ï¼Œ</span>æ˜¯ç›´æ¥å¾—åˆ° <code>a[1]</code> è€Œé <code>a[0]</code> çš„åœ°å€<span class="mojikumi-line-end">ï¼›</span><code>foo</code> çš„ <code>addend</code> æ˜¯ <code>-4</code><span class="mojikumi-line-end">ï¼Œ</span>æ˜¯å› ä¸º reference çš„åœ°å€æ˜¯ reference æ‰€åœ¨çš„ <code>jmp</code> æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å‡ 4<span class="mojikumi-line-end">ï¼Œ</span>å¯¼è‡´ PC çš„åœ°å€åŠ ä¸Š <code>foo</code> çš„åœ°å€å‡å» reference çš„åœ°å€å¾—åˆ°çš„æ˜¯ <code>foo</code> çš„åœ°å€åŠ  4<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ <code>addend</code> æ¥ä¿®æ­£<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="executable-object-files" class="heading"><a href="#executable-object-files" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Executable Object Files" tabindex="-1"></a><span>Executable Object Files</span></h2>
<p>å¯æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹å¤§ä½“ä¸Šå’Œ relocatable object file ç±»ä¼¼<span class="mojikumi-line-end">ï¼Œ</span>ä¸»è¦çš„åŒºåˆ«æ˜¯<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>åœ¨ ELF header ä¸­æŒ‡å®šäº†ç¨‹åºçš„ entry point</li>
<li>æœ‰ä¸€ä¸ª <code>.init</code> section<span class="mojikumi-line-end">ï¼Œ</span>å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å‡½æ•°<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥åˆå§‹åŒ–ç¨‹åº</li>
<li>æœ‰ä¸€ä¸ª program header table<span class="mojikumi-line-end">ï¼Œ</span>æè¿°äº†ç¨‹åºæ–‡ä»¶ä¸å†…å­˜çš„å¯¹åº”å…³ç³»<span class="mojikumi-line-end">ï¼Œ</span>å³è¦æŠŠæ–‡ä»¶çš„å“ªä¸€æ®µæ˜ å°„åˆ°å†…å­˜çš„å“ªä¸€æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åœ°å€å¦‚ä½•å¯¹é½<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠæ¯ä¸€æ®µçš„æƒé™<span class="mojikumi-line-start">ï¼ˆ</span><code>.init</code><span class="mojikumi-line-end">ã€</span><code>.text</code><span class="mojikumi-line-end">ã€</span><code>.rodata</code> çš„æƒé™ä¸º <code>r-x</code><span class="mojikumi-line-end">ï¼Œ</span><code>.data</code> å’Œ <code>.bss</code> çš„æƒé™ä¸º <code>rw-</code><span class="mojikumi-line-end">ï¼‰</span></li>
<li><code>.symtab</code><span class="mojikumi-line-end">ã€</span><code>.debug</code><span class="mojikumi-line-end">ã€</span><code>.line</code><span class="mojikumi-line-end">ã€</span><code>.strtab</code> åœ¨æ‰§è¡Œæ—¶ä¸ä¼šåŠ è½½åˆ°å†…å­˜ä¸­</li>
<li>å¦‚æœ fully linked<span class="mojikumi-line-end">ï¼Œ</span>åˆ™æ²¡æœ‰ <code>.rel</code> section</li>
</ul>
<h2 id="loading-executable-object-files" class="heading"><a href="#loading-executable-object-files" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Loading Executable Object Files" tabindex="-1"></a><span>Loading Executable Object Files</span></h2>
<p>åœ¨ç¨‹åºè¿è¡Œæ—¶<span class="mojikumi-line-end">ï¼Œ</span>run-time memory image å¤§è‡´å¦‚ä¸‹å›¾<span class="mojikumi-line-start">ï¼ˆ</span>CS:APP Figure 7.15<span class="mojikumi-line-end">ï¼‰</span>æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig7.15.ce83adc4.webp"><img srcset="/assets/csapp-fig7.15.b489ac10.png" loading="lazy" src="/assets/csapp-fig7.15.b489ac10.png" width="648" height="619" alt="Linux x86-64 run-time memory image"></picture></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span><a href="https://csapp.cs.cmu.edu/3e/errata.html">errata</a> ä¸­æŒ‡å‡º<span class="mojikumi-line-end">ï¼Œ</span>æ ˆçš„èµ·å§‹åœ°å€å¹¶ä¸æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>48</mn></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{48}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">48</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>å› ä¸ºåœ°å€å¯¹é½<span class="mojikumi-line-end">ã€</span>address-space layout randomization ç­‰åŸå› <span class="mojikumi-line-end">ï¼Œ</span>å®é™…ä¸Šçš„å†…å­˜ç»“æ„ä¼šä¸ä¸Šå›¾æœ‰ä¸€å®šçš„å·®å¼‚<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ¯ä¸€æ®µçš„ç›¸å¯¹ä½ç½®æ˜¯å’Œå›¾ä¸­ä¸€è‡´çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>loader åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶æ—¶<span class="mojikumi-line-end">ï¼Œ</span>é¦–å…ˆåˆ›å»º memory image<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åæ ¹æ® program header table å°†å¯æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹æ˜ å°„åˆ°å†…å­˜ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æœ€åè·³è½¬åˆ°ç¨‹åºçš„ entry point<span class="mojikumi-line-end">ã€‚</span>C è¯­è¨€ç¨‹åºçš„ entry point æ˜¯ <code>_start</code> å‡½æ•°<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ <code>crt1.o</code> ä¸­å®šä¹‰<span class="mojikumi-line-end">ï¼‰</span>çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span><code>_start</code> åˆä¼šè°ƒç”¨ <code>_<wbr>_<wbr>libc_<wbr>start_<wbr>main</code> å‡½æ•°<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ <code>libc.so</code> ä¸­å®šä¹‰<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è¿›è¡Œè¿è¡Œç¯å¢ƒçš„åˆå§‹åŒ–<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åè°ƒç”¨ <code>main</code> å‡½æ•°<span class="mojikumi-line-end">ï¼Œ</span>æœ€åå¯¹è¿”å›å€¼è¿›è¡Œå¤„ç†<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="dynamic-linking-with-shared-libraries" class="heading"><a href="#dynamic-linking-with-shared-libraries" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Dynamic Linking with Shared Libraries" tabindex="-1"></a><span>Dynamic Linking with Shared Libraries</span></h2>
<p>é™æ€åº“æœ‰ä¸€äº›é—®é¢˜<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>æ›´æ–°é™æ€åº“éœ€è¦é‡æ–°é“¾æ¥</li>
<li>æ¯ä¸ªç¨‹åºéƒ½æœ‰ä¸€ä»½åº“çš„æ‹·è´<span class="mojikumi-line-end">ï¼Œ</span>ä¼šé€ æˆç©ºé—´çš„æµªè´¹</li>
</ol>
<p>å…±äº«åº“ (shared library) å¯ä»¥è§£å†³è¿™äº›é—®é¢˜<span class="mojikumi-line-end">ã€‚</span>å…±äº«åº“å¯ä»¥åœ¨ run time æˆ–è€… load time è¢«åŠ¨æ€é“¾æ¥<span class="mojikumi-line-end">ã€‚</span>åŠ¨æ€é“¾æ¥ç”± dynamic linker å®Œæˆ<span class="mojikumi-line-end">ã€‚</span>å…±äº«åº“ä¹Ÿè¢«ç§°ä½œ shared object<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ Linux ä¸­åç¼€åä¸º <code>.so</code><span class="mojikumi-line-end">ï¼Œ</span>åœ¨ Windows ä¸­è¢«å«åš DLL<span class="mojikumi-line-end">ã€‚</span></p>
<p>å…±äº«åº“åœ¨ä¸¤ä¸ªå±‚é¢ä¸Šè¢«å…±äº«<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šåªæœ‰ä¸€ä»½ <code>.so</code> æ–‡ä»¶<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­æ²¡æœ‰åº“çš„æ‹·è´</li>
<li>åœ¨å†…å­˜ä¸­å…±äº«åº“çš„ <code>.text</code> section çš„å•ä»½æ‹·è´å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨</li>
</ol>
<p>å¯ä»¥ç”¨ç±»ä¼¼äº <code>gcc -shared -fpic a.c b.c c.c -o libabc.so</code> çš„å‘½ä»¤æ„å»ºå…±äº«åº“<span class="mojikumi-line-end">ã€‚</span>ç¼–è¯‘é€‰é¡¹ä¸­ <code>-shared</code> å‘Šè¯‰ç¼–è¯‘å™¨è¦ç”Ÿæˆ shared object<span class="mojikumi-line-end">ï¼Œ</span><code>-fpic</code> ç”¨æ¥ç”Ÿæˆ <a href="#position-independent-code-pic">position-independent code</a><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯ä»¥ç”¨ç±»ä¼¼ <code>gcc<wbr> <wbr>main<wbr>.<wbr>c<wbr> ./<wbr>libabc<wbr>.<wbr>so<wbr> -<wbr>o<wbr> <wbr>main</code> çš„å‘½ä»¤æ¥ä½¿ç”¨å…±äº«åº“<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿è¡Œ <code>main</code> æ—¶<span class="mojikumi-line-end">ï¼Œ</span>loader ä¼šåœ¨è¿›å…¥ entry point å‰åœ¨ <code>.interp</code> section ä¸­å‘ç° dynamic linker <code>ld<wbr>-<wbr>linux<wbr>.<wbr>so</code><span class="mojikumi-line-end">ï¼Œ</span>äºæ˜¯è®© dynamic linker å®Œæˆå…±äº«åº“çš„ relocation å¹¶ä¿®æ”¹ç¨‹åºä¸­çš„ symbol reference<span class="mojikumi-line-end">ï¼Œ</span>æœ€åå°†æ§åˆ¶æƒäº¤è¿˜ç»™ç¨‹åº<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="loading-and-linking-shared-libraries-from-applications" class="heading"><a href="#loading-and-linking-shared-libraries-from-applications" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Loading and Linking Shared Libraries from Applications" tabindex="-1"></a><span>Loading and Linking Shared Libraries from Applications</span></h2>
<p>é™¤äº†åœ¨ç¼–è¯‘æ—¶æŒ‡å®šè¦é“¾æ¥åˆ°çš„å…±äº«åº“å¹¶åœ¨ load time é“¾æ¥<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥åœ¨ run time åŠ è½½å¹¶ä½¿ç”¨å…±äº«åº“<span class="mojikumi-line-end">ã€‚</span></p>
<p>C è¯­è¨€ä¸­çš„ç›¸å…³å‡½æ•°æ”¾åœ¨ <code>dlfcn.h</code> å¤´æ–‡ä»¶ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ç¼–è¯‘æ—¶éœ€è¦ <code>-ldl</code> æ¥ä½¿ç”¨è¿™äº›å‡½æ•°<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>
<p><code>void<wbr> *<wbr>dlopen<wbr>(<wbr>const<wbr> <wbr>char<wbr> *<wbr>filename<wbr>, <wbr>int<wbr> <wbr>flag<wbr>)</code>: åŠ è½½å…±äº«åº“</p>
<ul>
<li>
<p>è¿”å›å€¼: æˆåŠŸåŠ è½½åˆ™è¿”å› handle<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™è¿”å› <code>NULL</code></p>
</li>
<li>
<p><code>filename</code>: å…±äº«åº“æ–‡ä»¶å</p>
</li>
<li>
<p><code>flag</code>: å½±å“å¦‚ä½•å¤„ç†å…±äº«åº“ä¸­å¼•ç”¨çš„ external symbol<span class="mojikumi-line-end">ï¼Œ</span>å¿…é¡»åŒ…å« <code>RTLD_NOW</code> å’Œ <code>RTLD_LAZY</code> ä¸¤è€…ä¹‹ä¸€</p>
<ul>
<li><code>RTLD_NOW</code>: ç«‹å³ resolve æ‰€æœ‰ external symbol</li>
<li><code>RTLD_LAZY</code>: ç­‰åˆ°è¿è¡Œå…±äº«åº“ä¸­çš„ä»£ç æ—¶å† resolve external symbol</li>
<li><code>RTLD_GLOBAL</code>: ä¹‹åç»™å…¶ä»–å…±äº«åº“ resolve external symbol æ—¶å¯ä»¥ä½¿ç”¨å½“å‰è¿™ä¸ªå…±äº«åº“</li>
</ul>
<p>å¦‚æœç¼–è¯‘ç¨‹åºæ—¶å¯ç”¨äº† <code>-rdynamic</code> é€‰é¡¹<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ resolve external symbol æ—¶<span class="mojikumi-line-end">ï¼Œ</span>é™¤äº†ä½¿ç”¨å…¶ä»–åŠ è½½æ—¶å¯ç”¨äº† <code>RTLD_GLOBAL</code> é€‰é¡¹çš„å…±äº«åº“<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥ä½¿ç”¨ç¨‹åºè‡ªèº«çš„ global symbol<span class="mojikumi-line-end">ã€‚</span></p>
</li>
</ul>
</li>
<li>
<p><code>void<wbr> *<wbr>dlsym<wbr>(<wbr>void<wbr> *<wbr>handle<wbr>, <wbr>char<wbr> *<wbr>symbol<wbr>)</code>: è·å¾—å…±äº«åº“ä¸­æŸä¸ª symbol çš„åœ°å€</p>
<ul>
<li>
<p><code>symbol</code>: symbol åç§°</p>
</li>
<li>
<p>è¿”å›å€¼: æˆåŠŸè·å–åˆ™è¿”å› symbol åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>å¦åˆ™è¿”å› <code>NULL</code></p>
</li>
</ul>
</li>
<li>
<p><code>int<wbr> <wbr>dlclose<wbr>(<wbr>void<wbr> *<wbr>handle<wbr>)</code>: å…³é—­å…±äº«åº“</p>
<ul>
<li>è¿”å›å€¼: æˆåŠŸå…³é—­åˆ™è¿”å› <code>0</code><span class="mojikumi-line-end">ï¼Œ</span>å‡ºé”™åˆ™è¿”å› <code>-1</code></li>
</ul>
</li>
<li>
<p><code>const<wbr> <wbr>char<wbr> *<wbr>dlerror<wbr>(<wbr>void<wbr>)</code>: è·å–æœ€åä¸€æ¬¡è°ƒç”¨ <code>dlopen</code> / <code>dlsym</code> / <code>dlclose</code> çš„æŠ¥é”™ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæœ€åä¸€æ¬¡è°ƒç”¨æ²¡æœ‰å‡ºé”™åˆ™è¿”å› <code>NULL</code></p>
</li>
</ul>
<p>CS:APP ç»™å‡ºäº†ä¸€ä»½å‚è€ƒä»£ç  <a href="https://csapp.cs.cmu.edu/3e/ics3/code/link/dll.c">code/link/dll.c</a><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="position-independent-code-pic" class="heading"><a href="#position-independent-code-pic" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Position-Independent Code (PIC)" tabindex="-1"></a><span>Position-Independent Code (PIC)</span></h2>
<p>å…±äº«åº“çš„ä¸€æ¡é‡è¦æ€§è´¨æ˜¯å®ƒçš„ä»£ç æ®µåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½<span class="mojikumi-line-end">ï¼Œ</span>è€Œå¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹å…±äº«<span class="mojikumi-line-end">ï¼Œ</span>è¿™å°±ä½¿å¾—å®ƒçš„ä»£ç ä¸­çš„ symbol reference ä¸èƒ½åœ¨åŠ¨æ€é“¾æ¥æ—¶è¢«ä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>é€‚ç”¨äºé™æ€é“¾æ¥çš„ relocation æ— æ³•å®Œæˆ<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥å…±äº«åº“çš„ä»£ç éœ€è¦æ˜¯ position-independent çš„<span class="mojikumi-line-end">ã€‚</span></p>
<p>PIC çš„ä¸»è¦æ€è·¯åŸºäºä»¥ä¸‹ä¸¤ç‚¹<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>è™½ç„¶å…±äº«åº“çš„ä»£ç æ®µæ˜¯å…±äº«çš„<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ•°æ®æ®µæ˜¯æ¯ä¸ªè¿›ç¨‹å„æœ‰ä¸€ä»½çš„</li>
<li>æ— è®ºæ•´ä¸ªå…±äº«åº“è¢«æ”¾åˆ°å†…å­˜çš„å“ªä¸ªä½ç½®<span class="mojikumi-line-end">ï¼Œ</span>ä»£ç æ®µå’Œæ•°æ®æ®µåœ°å€çš„è·ç¦»æ˜¯å›ºå®šçš„<span class="mojikumi-line-start">ï¼ˆ</span>è¿™ä¸ä¸Šä¸€æ¡ä¸çŸ›ç›¾<span class="mojikumi-line-end">ï¼Œ</span>åº”è¯¥æ˜¯å› ä¸ºè™šå­˜<span class="mojikumi-line-end">ï¼‰</span></li>
</ol>
<p>å› æ­¤<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åœ¨æ•°æ®æ®µä¸­å­˜æ”¾æ•ˆæœç›¸å½“äº relocation çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>æ¥é—´æ¥è¾¾åˆ° relocation çš„æ•ˆæœ<span class="mojikumi-line-end">ã€‚</span>è¯´ç™½äº†å°±æ˜¯<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸ºæ²¡æ³•ä¿®æ”¹ä»£ç æ®µ<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥æŠŠ symbol çš„åœ°å€æ”¾åˆ°æ•°æ®æ®µé‡Œ<span class="mojikumi-line-end">ã€‚</span>å…·ä½“å®ç°ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ•°æ®æ®µçš„å¼€å¤´æœ‰ä¸€ä¸ª <i>global offset table</i> (GOT)<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ä¸­æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªåœ°å€<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”± dynamic linker è¿›è¡Œä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>è€Œç”±äºä»£ç æ®µå’Œæ•°æ®æ®µçš„åœ°å€è·ç¦»å›ºå®š<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯ä»¥ç”¨ PC-relative çš„æ–¹å¼å¯»å€åˆ°è¡¨ä¸­çš„é¡¹<span class="mojikumi-line-end">ã€‚</span></p>
<p>PIC data reference æ˜¯ç®€å•çš„<span class="mojikumi-line-end">ï¼Œ</span>åªè¦åœ¨ GOT ä¸­ä¸ºæ¯ä¸ª data symbol (å…¨å±€æˆ– static å˜é‡) åˆ›å»ºä¸€ä¸ªè¡¨é¡¹<span class="mojikumi-line-end">ï¼Œ</span>åœ¨åŠ¨æ€é“¾æ¥æ—¶ç”± dynamic linker ä¿®æ”¹è¿™äº›é¡¹<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨ä»£ç ä¸­é€šè¿‡è¿™ä¸ªè¡¨é¡¹æ¥é—´æ¥åœ°è¿›è¡Œ data reference<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ (CS:APP Figure 7.18<span class="mojikumi-line-end">ï¼Œ</span><code>GOT[3]</code> ä¸­å­˜æ”¾äº†å…¨å±€å˜é‡ <code>x</code> çš„åœ°å€)<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="asm ä»£ç å—" data-v-ad49d235>asm</h3><ile-root id="ile-7"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-7--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #D6DEEB">    </span><span style="color: #7FDBCA">movq</span><span style="color: #D6DEEB"> Ox2OO8b9(%</span><span style="color: #82AAFF">rip</span><span style="color: #D6DEEB">), %</span><span style="color: #82AAFF">rax</span><span style="color: #D6DEEB">  </span><span style="color: #637777"> # %rax = *GOT[3] = &amp;x</span></span>
<span><span style="color: #D6DEEB">    addl $0x1, (%</span><span style="color: #82AAFF">rax</span><span style="color: #D6DEEB">)          </span><span style="color: #637777"> # ++x</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #403F53">    </span><span style="color: #0C969B">movq</span><span style="color: #403F53"> Ox2OO8b9(%</span><span style="color: #4876D6">rip</span><span style="color: #403F53">), %</span><span style="color: #4876D6">rax</span><span style="color: #403F53">  </span><span style="color: #989FB1"> # %rax = *GOT[3] = &amp;x</span></span>
<span><span style="color: #403F53">    addl $0x1, (%</span><span style="color: #4876D6">rax</span><span style="color: #403F53">)          </span><span style="color: #989FB1"> # ++x</span></span></code></pre></div></section>
<p>å¦‚æœæ˜¯æœ¬åœ°å®šä¹‰çš„å˜é‡<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥ä½¿ç”¨ PC-relative çš„å®šä½æ–¹å¼ç›´æ¥å¼•ç”¨<span class="mojikumi-line-end">ï¼Œ</span>è€Œåªå¯¹å¤–éƒ¨å®šä¹‰çš„å˜é‡ä½¿ç”¨ GOT<span class="mojikumi-line-end">ï¼Œ</span>ä½†ç¼–è¯‘å™¨ä¹Ÿå¯èƒ½é€‰æ‹©ä¸åšè¿™æ ·çš„åŒºåˆ†è€Œæ˜¯ä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•æ¥å¤„ç†<span class="mojikumi-line-end">ã€‚</span></p>
<p>PIC procedure call ä¹Ÿå¯ä»¥å’Œ data reference ä¸€æ ·å¤„ç†<span class="mojikumi-line-start">ï¼ˆ</span>å¯ä»¥ç”¨ <code>-fno-plt</code> ç¼–è¯‘é€‰é¡¹æ¥è¿™æ ·åš<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½†å®é™…ä¸Šä¼šä½¿ç”¨åä¸º <i>lazy binding</i> çš„æŠ€æœ¯è¿›è¡Œä¼˜åŒ–<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿™æ˜¯å› ä¸º<span class="mojikumi-line-end">ï¼Œ</span>é“¾æ¥åˆ°ä¸€ä¸ªå…±äº«åº“æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¾€å¾€æœ€ç»ˆä¼šè°ƒç”¨çš„åªæ˜¯å®ƒæä¾›çš„å¤§é‡å‡½æ•°ä¸­çš„ä¸€å°éƒ¨åˆ†<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœå¯¹æ•´ä¸ªå…±äº«åº“ç”¨åˆ°çš„å¤–éƒ¨å‡½æ•°éƒ½åœ¨åŠ¨æ€é“¾æ¥æ—¶è®¡ç®—å‡ºç›¸åº”çš„ offset<span class="mojikumi-line-end">ï¼Œ</span>å°±å¯èƒ½é€ æˆæµªè´¹<span class="mojikumi-line-end">ã€‚</span>è€Œ lazy binding åˆ™æ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æŸä¸ªå¤–éƒ¨å‡½æ•°æ—¶ç»‘å®šè¿™ä¸ªå‡½æ•°çš„åœ°å€<span class="mojikumi-line-end">ã€‚</span></p>
<p>lazy binding åŸºäºä¸€ä¸ªåä¸º <i>procedure linkage table</i> (PLT) çš„ç»“æ„<span class="mojikumi-line-end">ã€‚</span>PLT ä½äºä»£ç æ®µä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ä¸­çš„æ¯ä¸€é¡¹å…¶å®æ˜¯ä¸‰æ¡æŒ‡ä»¤<span class="mojikumi-line-end">ï¼Œ</span>å¦‚ CS:APP Figure 7.19 æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span></p>
<p><picture><source type="image/webp" srcset="/assets/csapp-fig7.19.389efa4c.webp"><img srcset="/assets/csapp-fig7.19.44dfb261.png" loading="lazy" src="/assets/csapp-fig7.19.44dfb261.png" width="995" height="602" alt="PLT åŸç†ç¤ºæ„å›¾"></picture></p>
<p>æ•´ä¸ªæµç¨‹å°±æ˜¯<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>è°ƒç”¨ <code>addvec</code> æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ <code>PLT[2]</code> çš„åœ°å€</li>
<li><code>PLT[2]</code> çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ä¼šè·³è½¬åˆ° <code>GOT[4]</code><span class="mojikumi-line-end">ï¼Œ</span><code>GOT[4]</code> é‡Œä¸€å¼€å§‹æ”¾çš„æ˜¯ <code>PLT[2]</code> çš„ç¬¬äºŒæ¡æŒ‡ä»¤<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥é¦–æ¬¡è°ƒç”¨ <code>PLT[2]</code> æ—¶å°±ä»ç¬¬ä¸€æ¡æŒ‡ä»¤è·³åˆ°ç¬¬äºŒæ¡æŒ‡ä»¤</li>
<li>ç¬¬äºŒæ¡æŒ‡ä»¤æ˜¯å¾€æ ˆé‡Œå‹å…¥ <code>addvec</code> çš„ ID<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯ç”¨æ¥å‘Šè¯‰ dynamic linker è¿™æ˜¯å“ªä¸ªå‡½æ•°</li>
<li>ç¬¬ä¸‰æ¡æŒ‡ä»¤ä¼šè·³è½¬åˆ° <code>PLT[0]</code></li>
<li><code>PLT[0]</code> çš„ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯å¾€æ ˆé‡Œå‹å…¥ relocation entries çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>ç¬¬äºŒæ¡æŒ‡ä»¤æ˜¯è·³è½¬åˆ° dynamic linker</li>
<li>dynamic linker é€šè¿‡æ”¾åœ¨æ ˆä¸­çš„å‡½æ•°çš„ ID ä»¥åŠ relocation entries è®¡ç®—å‡º <code>addvec</code> çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>æ”¾åœ¨ <code>GOT[4]</code><span class="mojikumi-line-end">ï¼Œ</span>ç„¶åè·³è½¬åˆ° <code>addvec</code></li>
<li>å› ä¸ºä¸€è·¯ä¸Šéƒ½æ˜¯ <code>jmp</code><span class="mojikumi-line-end">ï¼Œ</span>è·³è½¬åˆ° <code>addvec</code> åå¯ä»¥æ­£å¸¸è¿”å›åˆ°è°ƒç”¨ <code>PLT[2]</code> çš„ä½ç½®</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨ <code>PLT[2]</code> æ—¶<span class="mojikumi-line-end">ï¼Œ</span><code>GOT[4]</code> é‡Œå·²ç»æ˜¯ <code>addvec</code> çš„åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥å°±åœ¨ <code>PLT[2]</code> çš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¤„è·³è½¬åˆ°äº† <code>addvec</code></li>
</ol>
<h2 id="library-interpositioning" class="heading"><a href="#library-interpositioning" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Library Interpositioning" tabindex="-1"></a><span>Library Interpositioning</span></h2>
<p>Linux çš„é“¾æ¥å™¨æ”¯æŒä¸€ä¸ªåä¸º <i>library interpositioning</i> çš„æŠ€æœ¯<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ç”¨æ¥æŠŠå…±äº«åº“çš„å‡½æ•°æ›¿æ¢æ‰<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬ä¼šæ¢æˆä¸€ä¸ª wrapper function ç”¨æ¥ trace<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¹Ÿå¯ä»¥æ¢æˆå®Œå…¨ä¸åŒçš„ä¸œè¥¿<span class="mojikumi-line-end">ã€‚</span></p>
<p>çœ‹äº†ä¸‹ä¸­æ–‡ç‰ˆ CS:APP<span class="mojikumi-line-end">ï¼Œ</span>è¿™ä¸ªä¸œè¥¿ç«Ÿç„¶å«<span class="mojikumi-line-start">â€œ</span>åº“æ‰“æ¡©<span class="mojikumi">â€</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span></p>
<p>ç¼–è¯‘æ—¶çš„ library interpositioning å°±æ˜¯ç”¨ <code>#define</code> æ¢æ‰æŸä¸ªå‡½æ•° <s><span class="mojikumi-line-end">ï¼Œ</span>åœ¨æœºæˆ¿é‡Œè¢« <code>#<wbr>define<wbr> <wbr>sort<wbr> <wbr>random_<wbr>shuffle</code> è¿‡çš„å¤§å®¶æƒ³å¿…å¯¹æ­¤éå¸¸ç†Ÿæ‚‰</s><span class="mojikumi-line-end">ã€‚</span></p>
<p>é“¾æ¥æ—¶çš„ library interpositioning æ˜¯ç»™ linker ä¼ å‚ <code>--wrap foo</code><span class="mojikumi-line-end">ï¼Œ</span>ç„¶åè°ƒç”¨ <code>foo</code> å°±ä¼šå®é™…ä¸Šè°ƒç”¨ <code>__wrap_foo</code><span class="mojikumi-line-end">ï¼Œ</span>è€Œè°ƒç”¨ <code>__real_foo</code> åˆ™ä¼šè°ƒç”¨åŸæœ¬çš„ <code>foo</code><span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬ä¼šç»™ <code>gcc</code> è€Œé <code>ld</code> ä¼ å‚<span class="mojikumi-line-end">ï¼Œ</span>å°±æ˜¯ç”¨ <code>gcc<wbr> -<wbr>Wl<wbr>,--<wbr>wrap<wbr>,<wbr>foo</code> ä»£æ›¿ <code>ld --wrap foo</code><span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ <code>-Wl</code> è¡¨ç¤ºç»™ linker ä¼ å‚<span class="mojikumi-line-end">ï¼Œ</span>åé¢çš„é€—å·ä¼šè¢«æ¢æˆç©ºæ ¼<span class="mojikumi-line-end">ã€‚</span></p>
<p>è¿è¡Œæ—¶çš„ library interpositioning æ˜¯åœ¨è¿è¡Œç¨‹åºæ—¶è®¾ç½®ç¯å¢ƒå˜é‡ <code>LD_<wbr>PRELOAD<wbr>="/<wbr>path<wbr>/<wbr>to<wbr>/<wbr>wrapper<wbr>.<wbr>so<wbr> /<wbr>path<wbr>/<wbr>to<wbr>/<wbr>anotherwrapper<wbr>.<wbr>so<wbr>"</code><span class="mojikumi-line-end">ï¼Œ</span>ç„¶ååœ¨ä½¿ç”¨ä»»æ„å…±äº«åº“ä¸­çš„å‡½æ•°ä¹‹å‰å°±ä¼šä¼˜å…ˆå°è¯•ä½¿ç”¨ <code>wrapper.so</code> å’Œ <code>anotherwrapper<wbr>.<wbr>so</code><span class="mojikumi-line-end">ã€‚</span>è¿™æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¸ºäº†èƒ½åœ¨ wrapper function ä¸­è°ƒç”¨åŸæœ¬çš„å‡½æ•°<span class="mojikumi-line-end">ï¼Œ</span>å°±éœ€è¦ <a href="#loading-and-linking-shared-libraries-from-applications">åœ¨è¿è¡Œæ—¶åŠ è½½å…±äº«åº“</a><span class="mojikumi-line-end">ã€‚</span></p>
<p>å¦‚æœæƒ³çœ‹å…·ä½“å®ç°<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥å‚è€ƒ CS:APP<span class="mojikumi-line-end">ã€‚</span></p>
<p>ç¼–è¯‘æ—¶çš„ library interpositioning éœ€è¦ä¿®æ”¹æºä»£ç <span class="mojikumi-line-end">ï¼Œ</span>é“¾æ¥æ—¶çš„ library interpositioning éœ€è¦è·å–åˆ° object file å¹¶é‡æ–°é“¾æ¥å¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶<span class="mojikumi-line-end">ï¼Œ</span>è€Œè¿è¡Œæ—¶ library interpositioning åªéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡<span class="mojikumi-line-end">ï¼Œ</span>ä¸éœ€è¦å¯¹å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œä»»ä½•ä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æ–¹ä¾¿åœ°å¯¹å¾ˆå¤šä¸åŒç¨‹åºçš„æŸä¸ªå‡½æ•°è°ƒç”¨è¿›è¡Œè·Ÿè¸ª<span class="mojikumi-line-end">ã€‚</span></p>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/csapp">csapp</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
    </channel>
</rss>