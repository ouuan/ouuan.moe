<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>ouuan's blog: æ ‡ç­¾: cnatda</title>
        <link>https://ouuan.moe/tag/cnatda</link>
        <description>æ ‡ç­¾: cnatda - ouuan å†™ä¸œè¥¿çš„åœ°æ–¹ï¼Œæ¶µç›–äº† Web å¼€å‘ã€è®¡ç®—æœºç³»ç»Ÿã€Linux ä½¿ç”¨ã€å¤§å­¦å­¦ä¹ ç”Ÿæ´»ç­‰å¤šä¸ªä¸»é¢˜ã€‚</description>
        <lastBuildDate>Fri, 16 Jun 2023 15:24:34 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-CN</language>
        <copyright>Copyright Â© 2022 - 2023 ouuan
Licensed under CC BY-SA 4.0</copyright>
        <atom:link href="https://ouuan.moe/tag/cnatda/feed.xml" rel="self" type="application/rss+xml"/>
        <item>
            <title><![CDATA[CNATDA ç¬¬äºŒç« å­¦ä¹ ç¬”è®°]]></title>
            <link>https://ouuan.moe/post/2023/06/cnatda-2</link>
            <guid>https://ouuan.moe/post/2023/06/cnatda-2</guid>
            <pubDate>Fri, 16 Jun 2023 15:24:34 GMT</pubDate>
            <description><![CDATA[


<p><span class="mojikumi-line-start">ã€Š</span>Computer Networking A Top-Down Approach (8th Edition)<span class="mojikumi-line-end">ã€‹</span>ç¬¬äºŒç«  <span class="mojikumi">â€œ</span>Application Layer<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>
]]></description>
            <content:encoded><![CDATA[


<p><span class="mojikumi-line-start">ã€Š</span>Computer Networking A Top-Down Approach (8th Edition)<span class="mojikumi-line-end">ã€‹</span>ç¬¬äºŒç«  <span class="mojikumi">â€œ</span>Application Layer<span class="mojikumi">â€</span> çš„å­¦ä¹ ç¬”è®°<span class="mojikumi-line-end">ã€‚</span></p>

<h2 id="principles-of-network-applications" class="heading"><a href="#principles-of-network-applications" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Principles of Network Applications" tabindex="-1"></a><span>Principles of Network Applications</span></h2>
<p>application architecture ä¸»è¦åˆ†ä¸º client-server å’Œ P2P ä¸¤ç§<span class="mojikumi-line-end">ã€‚</span></p>
<p><i>process</i> å³åœ¨æŸä¸ª end system ä¸Šè¿è¡Œçš„ç¨‹åº<span class="mojikumi-line-start">ï¼ˆ</span>è¿›ç¨‹<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒ end system ä¸Šçš„ process åœ¨ç½‘ç»œä¸Šäº’ç›¸å‘é€ message ä»¥è¿›è¡Œé€šä¿¡<span class="mojikumi-line-start">ï¼ˆ</span>æ³¨<span class="mojikumi-line-end">ï¼š</span>message å³ application-layer packet<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸€æ¬¡é€šä¿¡ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å‘èµ·é€šä¿¡çš„ä¸€æ–¹è¢«ç§°ä½œ <i>client</i><span class="mojikumi-line-end">ï¼Œ</span>ç­‰å¾…æ¥æ”¶æ¶ˆæ¯çš„ä¸€æ–¹è¢«ç§°ä½œ <i>server</i><span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>æ³¨<span class="mojikumi-line-end">ï¼š</span>åœ¨ P2P ä¸­<span class="mojikumi-line-end">ï¼Œ</span>client å’Œ server çš„èº«ä»½ä¸æ˜¯å›ºå®šçš„<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>process å’Œç½‘ç»œ<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…è¯´å’Œ transport layer ä¹‹é—´ä»¥ <i>socket</i> ä½œä¸º API<span class="mojikumi-line-end">ã€‚</span></p>
<p>host ç”± IP åœ°å€è¯†åˆ«<span class="mojikumi-line-end">ï¼Œ</span>è€Œ process ç”± IP åœ°å€ + ç«¯å£è¯†åˆ«<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€ä¸ª application å¯ä»¥é€‰æ‹© TCP æˆ–è€… UDP æ¥æä¾› transport service<span class="mojikumi-line-end">ã€‚</span>TCP æä¾› connection-oriented service<span class="mojikumi-line-start">ï¼ˆ</span>éœ€è¦é€šè¿‡ handshaking å»ºç«‹ TCP connection<span class="mojikumi-line-end">ï¼‰</span>å’Œ reliable data transfer service<span class="mojikumi-line-start">ï¼ˆ</span>ä¿è¯æ¥æ”¶åˆ° &#x26; ä¿åº<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠ congestion control<span class="mojikumi-line-end">ã€‚</span>UDP åˆ™è¿™äº›éƒ½ä¸æä¾›<span class="mojikumi-line-end">ã€‚</span>ä¸€èˆ¬ä¼šæ ¹æ®æ˜¯å¦ loss-tolerant<span class="mojikumi-line-start">ï¼ˆ</span>æ˜¯å¦å…è®¸ä¸¢å¤±éƒ¨åˆ†æ•°æ®<span class="mojikumi-line-end">ï¼‰</span>ä»¥åŠå¯¹å»¶æ—¶çš„æ•æ„Ÿåº¦æ¥è¿›è¡Œé€‰æ‹©<span class="mojikumi-line-end">ã€‚</span></p>
<p>TLS (Transport Layer Security) å¯ä»¥åœ¨ TCP çš„åŸºç¡€ä¸Šæä¾› encryption<span class="mojikumi-line-end">ã€</span>data integrity<span class="mojikumi-line-end">ã€</span>end-point authentication<span class="mojikumi-line-end">ã€‚</span>å®ƒè‡ªèº«ä½äº application layer<span class="mojikumi-line-start">ï¼ˆ</span>æˆ–è€…å¯ä»¥è¯´æ˜¯ application ä¸ transport layer ä¹‹é—´ ğŸ¤”<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä¸ä¸ TCP<span class="mojikumi-line-end">ã€</span>UDP å¹¶åˆ—<span class="mojikumi-line-end">ã€‚</span></p>
<p>application-layer protocol å†³å®šäº† message çš„ç»“æ„ä»¥åŠç›¸åº”çš„è¡Œä¸º<span class="mojikumi-line-end">ã€‚</span>å¸¸è§çš„ application-layer protocol åŒ…æ‹¬ HTTP<span class="mojikumi-line-end">ã€</span>SMTP<span class="mojikumi-line-end">ã€</span>Telnet<span class="mojikumi-line-end">ã€</span>FTP<span class="mojikumi-line-end">ã€</span>SIP<span class="mojikumi-line-end">ã€</span>RTP<span class="mojikumi-line-end">ã€</span>DASH ç­‰<span class="mojikumi-line-end">ã€‚</span>æœ‰çš„ application ä¼šä½¿ç”¨ä¸“æœ‰è€Œé public domain çš„ application-layer protocol<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="the-web-and-http" class="heading"><a href="#the-web-and-http" class="heading-anchor" aria-label="ç« èŠ‚ï¼š The Web and HTTP" tabindex="-1"></a><span>The Web and HTTP</span></h2>
<p>HTTP (HyperText Transfer Protocol) æ˜¯ Web çš„ application-layer protocol<span class="mojikumi-line-end">ï¼Œ</span>å®šä¹‰äº† client (browser) å¦‚ä½•å‘ server è¯·æ±‚æ–‡ä»¶<span class="mojikumi-line-start">ï¼ˆ</span>web page<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€</span>server å¦‚ä½•å°†æ–‡ä»¶ä¼ è¾“ç»™ client<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP çš„é»˜è®¤ç«¯å£æ˜¯ 80<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP ä¸å­˜å‚¨ client çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>æ˜¯ä¸€ä¸ª <i>stateless protocol</i><span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP<span class="mojikumi-line-start">ï¼ˆ</span>1.0<span class="mojikumi-line-end">ã€</span>1.1<span class="mojikumi-line-end">ã€</span>2<span class="mojikumi-line-end">ï¼‰</span>åŸºäº TCP<span class="mojikumi-line-end">ï¼Œ</span>æœ‰ persistent connection å’Œ non-persistent connection ä¸¤ç§å·¥ä½œæ–¹å¼<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>non-persistent connection<span class="mojikumi-line-end">ï¼š</span>æ¯æ¬¡ request-response éƒ½ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ TCP connection<span class="mojikumi-line-end">ï¼Œ</span>æ”¶åˆ° response åç«‹åˆ»å…³é—­ TCP connection<span class="mojikumi-line-end">ã€‚</span></li>
<li>persistent connection<span class="mojikumi-line-end">ï¼š</span>åŒä¸€å¯¹ client-server çš„å¤šæ¬¡ request-response<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ä¸€ä¸ªé¡µé¢å¼•ç”¨çš„å¤šä¸ªèµ„æº<span class="mojikumi-line-end">ï¼‰</span>å¯ä»¥å…±ç”¨åŒä¸€ä¸ª TCP connection<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨é—²ç½®ä¸€æ®µæ—¶é—´åè‡ªåŠ¨å…³é—­<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”æ— éœ€ç­‰å¾… response å°±å¯ä»¥è¿ç»­å‘é€å¤šä¸ª request<span class="mojikumi-line-start">ï¼ˆ</span>è¢«ç§°ä½œ <i>pipelining</i><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œçœä¸‹æ¯æ¬¡å»ºç«‹ TCP connection è€—è´¹çš„ RTT (round-trip time)<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>HTTP message æ˜¯çº¯æ–‡æœ¬<span class="mojikumi-line-end">ï¼Œ</span>æ ¼å¼å¦‚ä¸‹<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP request:<sup><a href="#user-content-fn-fig2.8" id="user-content-fnref-fig2.8" data-footnote-ref aria-describedby="footnote-label">1</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-2.8.6bb26d3f.webp"><img srcset="/assets/cnatda-fig-2.8.de34594f.png" loading="lazy" src="/assets/cnatda-fig-2.8.de34594f.png" width="793" height="439" alt="General format of an HTTP request message"></picture></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="http ä»£ç å—" data-v-ad49d235>http</h3><ile-root id="ile-1"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-1--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">GET</span><span style="color: #D6DEEB"> /wireshark-labs/INTRO-wireshark-file1.html </span><span style="color: #C792EA">HTTP</span><span style="color: #D6DEEB">/</span><span style="color: #F78C6C">1.1</span></span>
<span><span style="color: #CAECE6">Host</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">gaia.cs.umass.edu</span></span>
<span><span style="color: #CAECE6">User-Agent</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">curl/8.1.2</span></span>
<span><span style="color: #CAECE6">Accept</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">*/*</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">GET</span><span style="color: #403F53"> /wireshark-labs/INTRO-wireshark-file1.html </span><span style="color: #994CC3">HTTP</span><span style="color: #403F53">/</span><span style="color: #AA0982">1.1</span></span>
<span><span style="color: #994CC3">Host:</span><span style="color: #403F53"> </span><span style="color: #4876D6">gaia.cs.umass.edu</span></span>
<span><span style="color: #994CC3">User-Agent:</span><span style="color: #403F53"> </span><span style="color: #4876D6">curl/8.1.2</span></span>
<span><span style="color: #994CC3">Accept:</span><span style="color: #403F53"> </span><span style="color: #4876D6">*/*</span></span></code></pre></div></section>
<p>HTTP response:<sup><a href="#user-content-fn-fig2.9" id="user-content-fnref-fig2.9" data-footnote-ref aria-describedby="footnote-label">2</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-2.9.d6740f57.webp"><img srcset="/assets/cnatda-fig-2.9.c01ee471.png" loading="lazy" src="/assets/cnatda-fig-2.9.c01ee471.png" width="792" height="443" alt="General format of an HTTP response message"></picture></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="http ä»£ç å—" data-v-ad49d235>http</h3><ile-root id="ile-2"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-2--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #D6DEEB">HTTP/1.1 200 OK</span></span>
<span><span style="color: #CAECE6">Date</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">Tue, 13 Jun 2023 11:14:57 GMT</span></span>
<span><span style="color: #CAECE6">Server</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/7.4.33 mod_perl/2.0.11 Perl/v5.16.3</span></span>
<span><span style="color: #CAECE6">Last-Modified</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">Tue, 13 Jun 2023 05:59:01 GMT</span></span>
<span><span style="color: #CAECE6">ETag</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">&quot;51-5fdfc882a3e6f&quot;</span></span>
<span><span style="color: #CAECE6">Accept-Ranges</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">bytes</span></span>
<span><span style="color: #CAECE6">Content-Length</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">81</span></span>
<span><span style="color: #CAECE6">Content-Type</span><span style="color: #C792EA">:</span><span style="color: #D6DEEB"> </span><span style="color: #ECC48D">text/html; charset=UTF-8</span></span>
<span></span>
<span><span style="color: #D6DEEB">&lt;html&gt;</span></span>
<span><span style="color: #D6DEEB">Congratulations!  You&#39;ve downloaded the first Wireshark lab file!</span></span>
<span><span style="color: #D6DEEB">&lt;/html&gt;</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #403F53">HTTP/1.1 200 OK</span></span>
<span><span style="color: #994CC3">Date:</span><span style="color: #403F53"> </span><span style="color: #4876D6">Tue, 13 Jun 2023 11:14:57 GMT</span></span>
<span><span style="color: #994CC3">Server:</span><span style="color: #403F53"> </span><span style="color: #4876D6">Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/7.4.33 mod_perl/2.0.11 Perl/v5.16.3</span></span>
<span><span style="color: #994CC3">Last-Modified:</span><span style="color: #403F53"> </span><span style="color: #4876D6">Tue, 13 Jun 2023 05:59:01 GMT</span></span>
<span><span style="color: #994CC3">ETag:</span><span style="color: #403F53"> </span><span style="color: #4876D6">&quot;51-5fdfc882a3e6f&quot;</span></span>
<span><span style="color: #994CC3">Accept-Ranges:</span><span style="color: #403F53"> </span><span style="color: #4876D6">bytes</span></span>
<span><span style="color: #994CC3">Content-Length:</span><span style="color: #403F53"> </span><span style="color: #4876D6">81</span></span>
<span><span style="color: #994CC3">Content-Type:</span><span style="color: #403F53"> </span><span style="color: #4876D6">text/html; charset=UTF-8</span></span>
<span></span>
<span><span style="color: #403F53">&lt;html&gt;</span></span>
<span><span style="color: #403F53">Congratulations!  You&#39;ve downloaded the first Wireshark lab file!</span></span>
<span><span style="color: #403F53">&lt;/html&gt;</span></span></code></pre></div></section>
<p>server å¯ä»¥é€šè¿‡ Cookie è¯†åˆ«ç”¨æˆ·<span class="mojikumi-line-end">ï¼Œ</span>cookie é€šè¿‡ response ä¸­çš„ <code>Set-Cookie</code> header è®¾ç½®<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ä¹‹åçš„æ¯æ¬¡ request ä¸­é€šè¿‡ <code>Cookie</code> header å‘ç»™ server<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœºæ„å¯ä»¥è®¾ç½® Web cache<span class="mojikumi-line-end">ï¼Œ</span>ä½¿ç”¨æˆ·å…ˆå‘ Web cache å‘é€è¯·æ±‚<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ cache hit åˆ™ç›´æ¥ç”± Web cache å‘ç»™ç”¨æˆ·<span class="mojikumi-line-end">ï¼Œ</span>è‹¥ cache miss åˆ™ Web cache å‘ origin server å‘é€è¯·æ±‚å†è¿”å›ç»™ç”¨æˆ·<span class="mojikumi-line-end">ã€‚</span>Web cache å¯ä»¥å‡å°å»¶è¿Ÿ<span class="mojikumi-line-end">ï¼Œ</span>é™ä½å¸¦å®½å‹åŠ›<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ä¸ä¹‹ç±»ä¼¼çš„ CDN åˆ™åœ¨<a href="#content-distribution-networks">åæ–‡</a>æœ‰è¯¦ç»†è®²è§£<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>å¯ä»¥é€šè¿‡ <code>If<wbr>-<wbr>Modified<wbr>-<wbr>Since</code> header è¿›è¡Œ <i>conditional GET</i><span class="mojikumi-line-end">ï¼Œ</span>è‹¥æ²¡æœ‰ä¿®æ”¹åˆ™ä¼šè¿”å› body ä¸ºç©ºçš„ 304 Not Modified<span class="mojikumi-line-end">ã€‚</span></p>
<p>HTTP/2 æä¾›äº† request and response multiplexing<span class="mojikumi-line-end">ã€</span>prioritization<span class="mojikumi-line-end">ã€</span>server push æ¥ä¼˜åŒ–æ€§èƒ½<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>multiplexing<span class="mojikumi-line-end">ï¼š</span>persistent connection å‡å°‘äº†å»ºç«‹ TCP connection å¸¦æ¥çš„ RTT<span class="mojikumi-line-end">ï¼Œ</span>ä½†åˆå¼•å…¥äº† Head of Line (HOL) blocking<span class="mojikumi-line-end">ï¼Œ</span>å³å…±ç”¨ä¸€ä¸ª TCP connection æ—¶è¾ƒå°çš„èµ„æºéœ€è¦ç­‰å¾…è¾ƒå¤§çš„èµ„æºåŠ è½½å®Œæ¯•<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥åœ¨ HTTP/1.1 ä¸­æµè§ˆå™¨ç»å¸¸è¿˜æ˜¯ä¼šå»ºç«‹å¤šä¸ª TCP è¿æ¥<span class="mojikumi-line-end">ï¼Œ</span>é™¤äº†è§£å†³ HOL blocking<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿå¯ä»¥åœ¨ TCP çš„ congestion control ä¸­å–å¾—æ›´å¤šå¸¦å®½<span class="mojikumi-line-end">ã€‚</span>HTTP/2 åˆ™å°†æ¯ä¸ª message åˆ’åˆ†æˆäº†å¤šä¸ªå°çš„ frame<span class="mojikumi-line-end">ï¼Œ</span>å¹¶äº¤æ›¿å‘é€ä¸åŒ message çš„ frame<span class="mojikumi-line-start">ï¼ˆ</span>frame interleaving<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä»è€Œå°çš„èµ„æºæ— éœ€ç­‰å¾…å¤§çš„èµ„æºå‘é€å®Œæ¯•<span class="mojikumi-line-end">ã€‚</span></li>
<li>prioritization<span class="mojikumi-line-end">ï¼š</span>åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä¸ºæ¯ä¸ª response è®¾ç½®ä¼˜å…ˆçº§<span class="mojikumi-line-end">ï¼Œ</span>è®© server ä¼˜å…ˆå‘é€é«˜ä¼˜å…ˆçº§çš„ response<span class="mojikumi-line-end">ã€‚</span>é™¤æ­¤ä¹‹å¤–<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯ä»¥è®¾ç½® response ä¹‹é—´çš„ä¾èµ–å…³ç³»<span class="mojikumi-line-end">ã€‚</span></li>
<li>server push<span class="mojikumi-line-end">ï¼š</span>ä¸€ä¸ª request å¯ä»¥æœ‰å¤šä¸ª response<span class="mojikumi-line-end">ï¼Œ</span>å³é™¤äº†å¯¹åº”äº request çš„ response<span class="mojikumi-line-end">ï¼Œ</span>server è¿˜å¯ä»¥é¢å¤– <i>push</i><span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚åœ¨è¿”å›ä¸€ä¸ª HTML é¡µé¢æ—¶å¯ä»¥ push è¿™ä¸ªé¡µé¢å¼•ç”¨çš„å…¶ä»–èµ„æº<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>HTTP/3 ä½¿ç”¨åŸºäº UDP çš„ QUIC ä»£æ›¿äº† TCP<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="electronic-mail-in-the-internet" class="heading"><a href="#electronic-mail-in-the-internet" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Electronic Mail in the Internet" tabindex="-1"></a><span>Electronic Mail in the Internet</span></h2>
<p>e-mail ç³»ç»Ÿæœ‰ä¸‰ä¸ªä¸»è¦ç»„ä»¶<span class="mojikumi-line-end">ï¼š</span>user agent<span class="mojikumi-line-end">ã€</span>mail server å’Œ SMTP (Simple Mail Transfer Protocol)<span class="mojikumi-line-end">ã€‚</span></p>
<p>å‘é€é‚®ä»¶æ—¶<span class="mojikumi-line-end">ï¼Œ</span>Alice å†™å®Œé‚®ä»¶åç”±å¥¹çš„ user agent å‘é€åˆ°å¥¹çš„ mail server<span class="mojikumi-line-end">ï¼Œ</span>å¥¹çš„ mail server å†å‘åˆ° Bob çš„ mail server ä¸­å±äº Bob çš„ mailbox<span class="mojikumi-line-end">ï¼Œ</span>ä¹‹å Bob å†é€šè¿‡ä»–çš„ user agent ä»ä»–çš„ mail server è·å–ä»–çš„ mailbox ä¸­çš„é‚®ä»¶å¹¶é˜…è¯»<span class="mojikumi-line-end">ã€‚</span></p>
<p>å‘é€æ–¹çš„ mail server ä¼šç»´æŠ¤ä¸€ä¸ªå¾…å‘é€é‚®ä»¶åˆ—è¡¨<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœæ¥æ”¶æ–¹çš„ mail server åœ¨å½“æ—¶ä¸å¯ç”¨<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡å°è¯•<span class="mojikumi-line-end">ï¼Œ</span>å¤šæ¬¡å¤±è´¥åˆ™ä¼šé€€å›<span class="mojikumi-line-end">ã€‚</span></p>
<p>mail server ä½¿ç”¨ SMTP å‘å…¶ä»– mail server å‘é€é‚®ä»¶<span class="mojikumi-line-end">ï¼Œ</span>å‘é€æ–¹ä½œä¸º SMTP client<span class="mojikumi-line-end">ï¼Œ</span>æ¥æ”¶æ–¹ä½œä¸º SMTP server<span class="mojikumi-line-end">ã€‚</span></p>
<p>SMTP çš„é»˜è®¤ç«¯å£æ˜¯ 25<span class="mojikumi-line-end">ã€‚</span></p>
<p>SMTP æ˜¯ä¸€ä¸ªæ¯” HTTP è¿˜å¤è€çš„åè®®<span class="mojikumi-line-end">ï¼Œ</span>å¸¦æ¥çš„åæœä¹‹ä¸€æ˜¯å®ƒæ•´ä¸ª message éƒ½åªèƒ½åŒ…å« ASCII<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸€æ¬¡ SMTP é€šä¿¡å¦‚ä¸‹æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span><sup><a href="#user-content-fn-smtp-example" id="user-content-fnref-smtp-example" data-footnote-ref aria-describedby="footnote-label">3</a></sup></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h3 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="plain ä»£ç å—" data-v-ad49d235>plain</h3><ile-root id="ile-3"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-3--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><samp><span><span style="color: #d6deeb">S: 220 smtp.example.com ESMTP Postfix</span></span>
<span><span style="color: #d6deeb">C: HELO relay.example.org</span></span>
<span><span style="color: #d6deeb">S: 250 Hello relay.example.org, I am glad to meet you</span></span>
<span><span style="color: #d6deeb">C: MAIL FROM:&lt;bob@example.org&gt;</span></span>
<span><span style="color: #d6deeb">S: 250 Ok</span></span>
<span><span style="color: #d6deeb">C: RCPT TO:&lt;alice@example.com&gt;</span></span>
<span><span style="color: #d6deeb">S: 250 Ok</span></span>
<span><span style="color: #d6deeb">C: RCPT TO:&lt;theboss@example.com&gt;</span></span>
<span><span style="color: #d6deeb">S: 250 Ok</span></span>
<span><span style="color: #d6deeb">C: DATA</span></span>
<span><span style="color: #d6deeb">S: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span></span>
<span><span style="color: #d6deeb">C: From: &quot;Bob Example&quot; &lt;bob@example.org&gt;</span></span>
<span><span style="color: #d6deeb">C: To: &quot;Alice Example&quot; &lt;alice@example.com&gt;</span></span>
<span><span style="color: #d6deeb">C: Cc: theboss@example.com</span></span>
<span><span style="color: #d6deeb">C: Date: Tue, 15 Jan 2008 16:02:43 -0500</span></span>
<span><span style="color: #d6deeb">C: Subject: Test message</span></span>
<span><span style="color: #d6deeb">C:</span></span>
<span><span style="color: #d6deeb">C: Hello Alice.</span></span>
<span><span style="color: #d6deeb">C: This is a test message with 5 header fields and 4 lines in the message body.</span></span>
<span><span style="color: #d6deeb">C: Your friend,</span></span>
<span><span style="color: #d6deeb">C: Bob</span></span>
<span><span style="color: #d6deeb">C: .</span></span>
<span><span style="color: #d6deeb">S: 250 Ok: queued as 12345</span></span>
<span><span style="color: #d6deeb">C: QUIT</span></span>
<span><span style="color: #d6deeb">S: 221 Bye</span></span></samp></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><samp><span><span style="color: #403f53">S: 220 smtp.example.com ESMTP Postfix</span></span>
<span><span style="color: #403f53">C: HELO relay.example.org</span></span>
<span><span style="color: #403f53">S: 250 Hello relay.example.org, I am glad to meet you</span></span>
<span><span style="color: #403f53">C: MAIL FROM:&lt;bob@example.org&gt;</span></span>
<span><span style="color: #403f53">S: 250 Ok</span></span>
<span><span style="color: #403f53">C: RCPT TO:&lt;alice@example.com&gt;</span></span>
<span><span style="color: #403f53">S: 250 Ok</span></span>
<span><span style="color: #403f53">C: RCPT TO:&lt;theboss@example.com&gt;</span></span>
<span><span style="color: #403f53">S: 250 Ok</span></span>
<span><span style="color: #403f53">C: DATA</span></span>
<span><span style="color: #403f53">S: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span></span>
<span><span style="color: #403f53">C: From: &quot;Bob Example&quot; &lt;bob@example.org&gt;</span></span>
<span><span style="color: #403f53">C: To: &quot;Alice Example&quot; &lt;alice@example.com&gt;</span></span>
<span><span style="color: #403f53">C: Cc: theboss@example.com</span></span>
<span><span style="color: #403f53">C: Date: Tue, 15 Jan 2008 16:02:43 -0500</span></span>
<span><span style="color: #403f53">C: Subject: Test message</span></span>
<span><span style="color: #403f53">C:</span></span>
<span><span style="color: #403f53">C: Hello Alice.</span></span>
<span><span style="color: #403f53">C: This is a test message with 5 header fields and 4 lines in the message body.</span></span>
<span><span style="color: #403f53">C: Your friend,</span></span>
<span><span style="color: #403f53">C: Bob</span></span>
<span><span style="color: #403f53">C: .</span></span>
<span><span style="color: #403f53">S: 250 Ok: queued as 12345</span></span>
<span><span style="color: #403f53">C: QUIT</span></span>
<span><span style="color: #403f53">S: 221 Bye</span></span></samp></pre></div></section>
<p>å…¶ä¸­ <code>HELO</code><span class="mojikumi-line-end">ã€</span><code>MAIL FROM</code><span class="mojikumi-line-end">ã€</span><code>RCPT TO</code><span class="mojikumi-line-end">ã€</span><code>DATA</code><span class="mojikumi-line-end">ã€</span><code>QUIT</code> ç­‰æ˜¯ <i>command</i><span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥è¿›è¡Œ handshake ç­‰æ“ä½œ<span class="mojikumi-line-end">ã€‚</span>å¦‚æœè¦å‘åŒä¸€ä¸ª mail server è¿ç»­å‘é€å¤šå°é‚®ä»¶<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥åª <code>HELO</code><span class="mojikumi-line-end">ã€</span><code>QUIT</code> ä¸€æ¬¡<span class="mojikumi-line-start">ï¼ˆ</span>ä½†è¦ <code>MAIL FROM</code><span class="mojikumi-line-end">ã€</span><code>RCPT TO</code> å¤šæ¬¡<span class="mojikumi-line-end">ï¼‰</span>ä»è€Œå…±ç”¨ä¸€ä¸ª TCP è¿æ¥<span class="mojikumi-line-end">ã€‚</span><code>DATA</code> åæ˜¯é‚®ä»¶çš„å†…å®¹<span class="mojikumi-line-end">ï¼Œ</span>è¿™ä¸€å†…å®¹çš„å¼€å¤´æ˜¯é‚®ä»¶çš„ header<span class="mojikumi-line-end">ï¼Œ</span>ç»“å°¾æ˜¯ä»…åŒ…å« <code>.</code> çš„ä¸€è¡Œ<span class="mojikumi-line-end">ã€‚</span></p>
<p>email æ˜¯ user agent â†’ mail server â†’ mail server â†’ user agent è€Œé user agent â†’ user agent<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å¤§åŸå› æ˜¯å¦‚æœ user agent ç»å¸¸ä¸åœ¨çº¿åˆ™ç›´æ¥å‘å¾ˆå¯èƒ½æ”¶ä¸åˆ°é‚®ä»¶<span class="mojikumi-line-end">ï¼Œ</span>éœ€è¦ç”¨ mail server æ¥æé«˜åœ¨çº¿ç‡ä»¥åŠæä¾›å¯¹æ–¹ä¸åœ¨çº¿æ—¶é‡è¯•çš„æœºåˆ¶<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä» user agent å‘åˆ° mail server æ—¶å¯ä»¥ä½¿ç”¨ SMTP æˆ– HTTP<span class="mojikumi-line-end">ï¼Œ</span>ä» mail server æ‹‰å–åˆ° user agent æ—¶å¯ä»¥ä½¿ç”¨ HTTP æˆ– IMAP (Internet Mail Access Protocol)<span class="mojikumi-line-start">ï¼ˆ</span>ä¸èƒ½ç”¨ SMTP<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸º SMTP æ˜¯ push protocol<span class="mojikumi-line-end">ï¼Œ</span>ä¸èƒ½ç”¨æ¥ pull<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="dns--the-internetâ€™s-directory-service" class="heading"><a href="#dns--the-internetâ€™s-directory-service" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DNSâ€”The Internetâ€™s Directory Service" tabindex="-1"></a><span>DNSâ€”The Internet<span class="mojikumi-narrow-left">â€™</span>s Directory Service</span></h2>
<h3 id="services-provided-by-dns" class="heading"><a href="#services-provided-by-dns" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Services Provided by DNS" tabindex="-1"></a><span>Services Provided by DNS</span></h3>
<p>host ç”± hostname æˆ– IP åœ°å€è¯†åˆ«<span class="mojikumi-line-end">ï¼Œ</span>hostname å¯¹äººç±»æ›´å‹å¥½<span class="mojikumi-line-end">ï¼Œ</span>è€Œ IP åœ°å€å¯¹è·¯ç”±å™¨æ›´å‹å¥½<span class="mojikumi-line-end">ã€‚</span></p>
<p>å°† hostname ç¿»è¯‘ä¸º IP åœ°å€æ˜¯ DNS çš„ä¸»è¦ä»»åŠ¡<span class="mojikumi-line-end">ã€‚</span>DNS æ˜¯ç”±å¤šä¸ªå±‚çº§çš„ DNS server å…±åŒæ„æˆçš„ distributed database<span class="mojikumi-line-end">ï¼Œ</span>ä¹Ÿæ˜¯ä½¿å¾— application èƒ½å¤ŸæŸ¥è¯¢è¿™ä¸ª distributed database çš„ application-layer protocol<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS è¢«å¾ˆå¤šå…¶ä»– application-layer protocol æ‰€ä½¿ç”¨<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚åœ¨ HTTP/SMTP ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥ä½¿ç”¨ hostname æ¥è®¿é—®ç½‘ç«™ / mail server<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ—¶å°±ä¼šè°ƒç”¨ DNS<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS åœ¨æä¾› hostname åˆ° IP åœ°å€çš„ç¿»è¯‘çš„åŒæ—¶<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æä¾›äº†ä¸‹åˆ—åŠŸèƒ½<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>host aliasing: å¯ä»¥è®©ä¸€ä¸ª host åœ¨æœ‰ canonical hostname çš„åŒæ—¶è¿˜æœ‰å…¶ä»– alias<span class="mojikumi-line-end">ã€‚</span></li>
<li>mail server aliasing: å¯ä»¥è®©åŒä¸€ä¸ª hostname åœ¨ä½œä¸º Web server å’Œä½œä¸º mail server æ—¶æŒ‡å‘ä¸åŒçš„ host<span class="mojikumi-line-end">ã€‚</span></li>
<li>load distribution: å¯ä»¥è®©åŒä¸€ä¸ª hostname æŒ‡å‘å¤šä¸ª host<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è¿”å›æŸ¥è¯¢ç»“æœæ—¶è¿›è¡Œ rotate<span class="mojikumi-line-start">ï¼ˆ</span>å³æ”¹å˜ä½äºé¦–ä½çš„ IP åœ°å€<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<h3 id="overview-of-how-dns-works" class="heading"><a href="#overview-of-how-dns-works" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Overview of How DNS Works" tabindex="-1"></a><span>Overview of How DNS Works</span></h3>
<p>ç”±äºä¸‹åˆ—åŸå› <span class="mojikumi-line-end">ï¼Œ</span>DNS å¿…é¡»æ˜¯åˆ†å¸ƒå¼çš„<span class="mojikumi-line-end">ï¼Œ</span>å•ç‚¹å¼çš„ DNS æ— æ³• scale<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>single point of failure</li>
<li>traffic volume è¿‡å¤§</li>
<li>ç¦»éƒ¨åˆ†ç”¨æˆ·è·ç¦»è¿‡è¿œ<span class="mojikumi-line-end">ï¼Œ</span>å¸¦æ¥è¾ƒå¤§çš„å»¶æ—¶</li>
<li>éš¾ä»¥ç»´æŠ¤<span class="mojikumi-line-start">ï¼ˆ</span>æ•°æ®æ€»é‡å¤§<span class="mojikumi-line-end">ï¼Œ</span>æ›´æ–°é¢‘ç¹<span class="mojikumi-line-end">ï¼‰</span></li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>DNS åˆ†ä¸ºä»¥ä¸‹å‡ å±‚<span class="mojikumi-line-end">ï¼š</span></p>
<ol>
<li>root DNS server: åˆ†æ•£åœ¨ä¸–ç•Œå„åœ°çš„ 13 ä¸ªä¸åŒ root server å„è‡ªçš„å…±ä¸Šåƒä¸ª copy<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æŸ¥è¯¢ TLD server</li>
<li>top-level domain (TLD) server: æ¯ä¸ª TLD æœ‰è‡ªå·±çš„ TLD server (or server cluster)<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æŸ¥è¯¢ authoritative DNS server</li>
<li>authoritative DNS server: æ¯ä¸ª subdomain æœ‰è‡ªå·±çš„ authoritative DNS server<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥æ˜¯ç»„ç»‡è‡ªå·±ç»´æŠ¤çš„æˆ–è€…ç”±æœåŠ¡å•†æä¾›çš„<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æŸ¥è¯¢ hostname åˆ° IP åœ°å€çš„æ˜ å°„</li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–<span class="mojikumi-line-end">ï¼Œ</span>TLD server å’Œ authoritative DNS server ä¹‹é—´è¿˜å¯èƒ½æœ‰ intermediate DNS server<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸Šè¿° DNS server çš„ hierarchy ä¹‹å¤–<span class="mojikumi-line-end">ï¼Œ</span>è¿˜æœ‰ local DNS server<span class="mojikumi-line-start">ï¼ˆ</span>å°±æ˜¯ç”µè„‘çš„ç½‘ç»œè®¾ç½®é‡Œè®¾çš„ DNS æœåŠ¡å™¨<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>ä½œä¸º proxy æ¥ä»£æ›¿ requesting host å‘ DNS server è¿›è¡ŒæŸ¥è¯¢<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä»é€»è¾‘ä¸Šæ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>å‘ä¸€ä¸ª DNS server è¿›è¡ŒæŸ¥è¯¢æ—¶<span class="mojikumi-line-end">ï¼Œ</span>å¦‚æœå®ƒè‡ªå·±ä¸çŸ¥é“æœ€ç»ˆçš„ answer (IP åœ°å€)<span class="mojikumi-line-end">ï¼Œ</span>å®ƒå¯ä»¥è®©ä½ æ¢ä¸€ä¸ª DNS server ç»§ç»­æŸ¥ (iterative query)<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…å¸®ä½ å‘å…¶ä»– DNS server å‘é€æŸ¥è¯¢ (recursive query) ç„¶åè¿”å›æœ€ç»ˆçš„ç»“æœ<span class="mojikumi-line-end">ã€‚</span>è€Œåœ¨å®é™…ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¦‚ä¸Šæ–‡æ‰€è¿°<span class="mojikumi-line-end">ï¼Œ</span>ä¸€èˆ¬æ˜¯å‘ local DNS server æŸ¥è¯¢æ—¶ä¼šè¿›è¡Œ recursive query<span class="mojikumi-line-end">ï¼Œ</span>è€Œ local DNS server å†ä» root DNS server å‘ä¸‹ç›´åˆ° authoritative DNS server è¿›è¡Œ iterative query<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸ºäº†å‡å°‘æŸ¥è¯¢çš„æ•°é‡<span class="mojikumi-line-end">ï¼Œ</span>DNS è®¾æœ‰ caching<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ªæŸ¥è¯¢çš„å‘èµ·è€…<span class="mojikumi-line-start">ï¼ˆ</span>requesting host æˆ–è€… local DNS server<span class="mojikumi-line-end">ï¼‰</span>ä¼šå°†æ”¶åˆ°çš„æŸ¥è¯¢ç»“æœä¿å­˜ä¸€æ®µæ—¶é—´<span class="mojikumi-line-end">ï¼Œ</span>cache miss æ‰ä¼šå‘å…¶ä»– DNS server å‘èµ·æŸ¥è¯¢<span class="mojikumi-line-end">ã€‚</span>ä¾‹å¦‚<span class="mojikumi-line-end">ï¼Œ</span>å¸¸ç”¨çš„ TLD server çš„ IP åœ°å€å¾€å¾€éƒ½åœ¨ cache ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å¤§å¤§å‡å°‘äº† root DNS server æ”¶åˆ°çš„è¯·æ±‚æ•°é‡<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="dns-records" class="heading"><a href="#dns-records" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DNS Records" tabindex="-1"></a><span>DNS Records</span></h3>
<p>DNS distributed database å­˜å‚¨çš„ä¿¡æ¯å•å…ƒæ˜¯ <i>resource record</i> (RR)<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ª RR åŒ…å« type<span class="mojikumi-line-end">ã€</span>name<span class="mojikumi-line-end">ã€</span>value<span class="mojikumi-line-end">ã€</span>TTL å››é¡¹ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ TTL è¡¨ç¤º cache å¤šä¹…è¿‡æœŸ<span class="mojikumi-line-end">ã€‚</span>å¸¸è§çš„ type åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ª<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>A: name æ˜¯ hostname<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯ IP åœ°å€<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºä¸€ä¸ª hostname åˆ° IP åœ°å€çš„æ˜ å°„<span class="mojikumi-line-end">ã€‚</span></li>
<li>NS: name æ˜¯ domain<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯å…¶ name server çš„ hostname<span class="mojikumi-line-end">ï¼Œ</span>è¡¨ç¤ºå¯ä»¥åœ¨è¿™ä¸ª name server è¿›è¡Œè¿™ä¸ª domain çš„è¿›ä¸€æ­¥æŸ¥è¯¢<span class="mojikumi-line-end">ã€‚</span></li>
<li>CNAME: name æ˜¯ alias hostname<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯ canonical hostname<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æä¾› host aliasing<span class="mojikumi-line-end">ã€‚</span></li>
<li>MX: name æ˜¯ alias hostname<span class="mojikumi-line-end">ï¼Œ</span>value æ˜¯ canonical hostname<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥æä¾› mail server aliasing<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>å¯¹ä¸€ä¸ª hostname æ¥è¯´ authoritative çš„ DNS server ä¼šåŒ…å«è¢«æŸ¥è¯¢çš„ host çš„ A record<span class="mojikumi-line-end">ã€‚</span>ä¸ authoritative çš„ DNS server åˆ™ä¼šåŒ…å«ç›¸åº”çš„ NS record<span class="mojikumi-line-end">ï¼Œ</span>ä»¥åŠè¿™ä¸ª name server çš„ A record<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<div class="overflow-auto my-6"><table>
<thead>
<tr>
<th align="center">type</th>
<th align="center">name</th>
<th align="center">value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">NS</td>
<td align="center"><code>.</code></td>
<td align="center"><code>a<wbr>.<wbr>root<wbr>-<wbr>servers<wbr>.<wbr>net<wbr>.</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>a<wbr>.<wbr>root<wbr>-<wbr>servers<wbr>.<wbr>net<wbr>.</code></td>
<td align="center"><code>198.41.0.4</code></td>
</tr>
<tr>
<td align="center">NS</td>
<td align="center"><code>moe.</code></td>
<td align="center"><code>ns1<wbr>.<wbr>dns<wbr>.<wbr>nic<wbr>.<wbr>moe<wbr>.</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>ns1<wbr>.<wbr>dns<wbr>.<wbr>nic<wbr>.<wbr>moe<wbr>.</code></td>
<td align="center"><code>156<wbr>.<wbr>154<wbr>.<wbr>144<wbr>.<wbr>114</code></td>
</tr>
<tr>
<td align="center">NS</td>
<td align="center"><code>ouuan.moe.</code></td>
<td align="center"><code>amos<wbr>.<wbr>ns<wbr>.<wbr>cloudflare<wbr>.<wbr>com<wbr>.</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>amos<wbr>.<wbr>ns<wbr>.<wbr>cloudflare<wbr>.<wbr>com<wbr>.</code></td>
<td align="center"><code>172<wbr>.<wbr>64<wbr>.<wbr>35<wbr>.<wbr>120</code></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center"><code>ouuan.moe.</code></td>
<td align="center"><code>172<wbr>.<wbr>67<wbr>.<wbr>181<wbr>.<wbr>123</code></td>
</tr>
</tbody>
</table></div>
<p>åœ¨ registar è´­ä¹°åŸŸåæ—¶å¯ä»¥å¡«å†™ name server çš„ä¿¡æ¯<span class="mojikumi-line-end">ï¼Œ</span>ç”± registar è´Ÿè´£å°†ç›¸åº”çš„ NS ä»¥åŠ A record æ·»åŠ åˆ° TLD server<span class="mojikumi-line-end">ã€‚</span>å¯ä»¥ä½¿ç”¨åŸŸåå•†çš„ DNS server<span class="mojikumi-line-end">ã€</span>å…¶ä»–æœåŠ¡å•†<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ Cloudflare<span class="mojikumi-line-end">ï¼‰</span>çš„ DNS server æˆ–è€…è‡ªå·±æ­å»ºçš„ DNS server ä½œä¸º authoritative DNS server<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS æœ€åˆåªèƒ½é™æ€æ›´æ–°<span class="mojikumi-line-start">ï¼ˆ</span>é€šè¿‡é…ç½®æ–‡ä»¶ç­‰æ–¹å¼<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åæ¥æœ‰äº† DDNS æ¥é€šè¿‡ DNS message åŠ¨æ€æ›´æ–°<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="dns-messages" class="heading"><a href="#dns-messages" class="heading-anchor" aria-label="ç« èŠ‚ï¼š DNS Messages" tabindex="-1"></a><span>DNS Messages</span></h3>
<p>DNS message é€šè¿‡ UDP å‘é€åˆ° port 53<span class="mojikumi-line-end">ã€‚</span></p>
<p>DNS message çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º<span class="mojikumi-line-end">ï¼š</span><sup><a href="#user-content-fn-fig-2.21" id="user-content-fnref-fig-2.21" data-footnote-ref aria-describedby="footnote-label">4</a></sup></p>
<p><picture><source type="image/webp" srcset="/assets/cnatda-fig-2.21.b9121041.webp"><img srcset="/assets/cnatda-fig-2.21.8f9be477.png" loading="lazy" src="/assets/cnatda-fig-2.21.8f9be477.png" width="1349" height="804" alt="DNS message format"></picture></p>
<p>identification ç”± client è®¾ç½®<span class="mojikumi-line-end">ï¼Œ</span>å³ç”¨æ¥è¯†åˆ« query å’Œ reply å¯¹åº”å…³ç³»çš„ ID<span class="mojikumi-line-end">ã€‚</span></p>
<p>flags åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ª<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>query or reply: è¿™æ¡ message æ˜¯ query è¿˜æ˜¯ reply</li>
<li>authoritative or not: è¿”å›çš„ç»“æœæ˜¯å¦æ˜¯æœ€ç»ˆçš„ç­”æ¡ˆ</li>
<li>recursion desired: client æ˜¯å¦å¸Œæœ› server è¿›è¡Œ recursive query</li>
<li>recursion available: server æ˜¯å¦å¯ä»¥è¿›è¡Œ recursive query</li>
</ul>
<p>4 ä¸ª section ä¸­éƒ½åŒ…å«è‹¥å¹² RR<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ query ä¸­<span class="mojikumi-line-end">ï¼Œ</span>question section é‡Œä¼šåŒ…å« name å’Œ type<span class="mojikumi-line-end">ã€‚</span></p>
<p>å¯¹äº type A çš„æŸ¥è¯¢<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>å¦‚æœ reply æ˜¯ authoritative çš„<span class="mojikumi-line-start">ï¼ˆ</span>å‘ authoritative DNS server æŸ¥è¯¢<span class="mojikumi-line-end">ï¼Œ</span>æˆ–è€…è¿›è¡Œäº† recursive query<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šåœ¨ answer section ä¸­åˆ—å‡ºæ‰€æŸ¥è¯¢çš„ A record<span class="mojikumi-line-end">ã€‚</span></li>
<li>å¦‚æœä¸æ˜¯ authoritative çš„<span class="mojikumi-line-end">ï¼Œ</span>åˆ™ä¼šåœ¨ authority section ä¸­åˆ—å‡º NS record<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ additional section ä¸­åˆ—å‡ºè¿™äº› name server çš„ A record<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>åœ¨ additional section ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯èƒ½åˆ—å‡º canonical hostname çš„ A record ä¹‹ç±»çš„<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="peer-to-peer-file-distribution" class="heading"><a href="#peer-to-peer-file-distribution" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Peer-to-Peer File Distribution" tabindex="-1"></a><span>Peer-to-Peer File Distribution</span></h2>
<p>åœ¨ä¼ è¾“å¤§æ–‡ä»¶æ—¶<span class="mojikumi-line-end">ï¼Œ</span>client-server çš„æ¶æ„åœ¨ç”¨æˆ·æ•°é‡å¢å¤šæ—¶éœ€è¦æ›´å¤§çš„ server bandwidth æ‰èƒ½ä¿è¯ç”¨æˆ·çš„ä¸‹è½½é€Ÿåº¦<span class="mojikumi-line-end">ï¼Œ</span>è€Œ P2P çš„æ¶æ„åˆ™æ˜¯ self-scalable çš„<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>ä¹¦ä¸­æœ‰ç®€åŒ–æ¨¡å‹çš„å®šé‡è®¡ç®—<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<p>BitTorrent æ˜¯è¾ƒä¸ºæµè¡Œçš„ P2P file distribution protocol<span class="mojikumi-line-end">ã€‚</span>åœ¨ BitTorrent ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä»¥ chunk ä¸ºä¸‹è½½æ–‡ä»¶çš„åŸºæœ¬å•ä½<span class="mojikumi-line-end">ã€‚</span>ä¸€ä¸ª peer åˆšåŠ å…¥ torrent æ—¶æ²¡æœ‰ trunk æ‰€ä»¥åªèƒ½ä¸‹è½½<span class="mojikumi-line-end">ï¼Œ</span>åœ¨è·å–åˆ°ä¸€äº› trunk åå°±ä¼šå¼€å§‹ä¸Šä¼ ç»™å…¶ä»– peer<span class="mojikumi-line-end">ï¼Œ</span>ä¸‹è½½å®Œæˆåå¯ä»¥è‡ªç§åœ°ç¦»å¼€æˆ–è€…æ— ç§åœ°ä¿ç§<span class="mojikumi-line-end">ã€‚</span></p>
<p>æ¯ä¸ª torrent ä¼šæœ‰<span class="mojikumi-line-start">ï¼ˆ</span>è‡³å°‘<span class="mojikumi-line-end">ï¼‰</span>ä¸€ä¸ª tracker<span class="mojikumi-line-end">ï¼Œ</span>peer åœ¨åŠ å…¥/ç¦»å¼€æ—¶ä¼šé€šçŸ¥ tracker<span class="mojikumi-line-end">ï¼Œ</span>å¹¶åœ¨è¿‡ç¨‹ä¸­å®šæœŸå‘ŠçŸ¥ tracker è‡ªå·±ä»åœ¨æ´»åŠ¨<span class="mojikumi-line-end">ã€‚</span>tracker ä¼šç»™æ¯ä¸ª peer æä¾›ä¸€äº›å…¶ä»– peer çš„ IP åœ°å€å’Œç«¯å£<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª peer æ‹¥æœ‰ä¸€éƒ¨åˆ† chunk<span class="mojikumi-line-end">ï¼Œ</span>å¹¶å‘å…¶ä»– peer è¯·æ±‚ chunk<span class="mojikumi-line-end">ã€‚</span>æ¯ä¸ª peer éœ€è¦å†³å®šä¼˜å…ˆä¸‹è½½å“ªä¸ª trunk ä»¥åŠä¸Šä¼ ç»™è°<span class="mojikumi-line-end">ã€‚</span></p>
<p>ä¼˜å…ˆä¸‹è½½çš„ trunk å¯ä»¥é‡‡ç”¨ <i>rarest first</i> çš„ç­–ç•¥<span class="mojikumi-line-end">ï¼Œ</span>å³ä¼˜å…ˆä¸‹è½½å·²çŸ¥çš„ peer ä¸­æ‹¥æœ‰äººæ•°æœ€å°‘çš„ chunk<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·çš„è¯å°±èƒ½ä½¿å¾—å„ä¸ª trunk è¾ƒä¸ºå‡åŒ€åœ°åœ¨ peer é—´åˆ†å¸ƒ<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>ä¼šé‡‡ç”¨è¢«ç§°ä½œ<span class="mojikumi-line-start">â€œ</span>tit-for-tat<span class="mojikumi-line-end">â€</span>çš„ç­–ç•¥å†³å®šä¸Šä¼ ç»™è°<span class="mojikumi-line-end">ï¼š</span>ä¸Šä¼ ç»™è‡ªå·±<span class="mojikumi-line-start">ï¼ˆ</span>å³ä»ä»–é‚£ä¸‹è½½<span class="mojikumi-line-end">ï¼‰</span>çš„é€Ÿåº¦æœ€å¿«çš„å‡ ä¸ª peer è¢«ç§°ä½œ<span class="mojikumi-line-start">â€œ</span>unchoked<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>é™¤æ­¤ä¹‹å¤–è¿˜ä¼šæ¯éš”ä¸€æ®µæ—¶é—´éšæœºé€‰æ‹©ä¸€ä¸ª peer è¢«ç§°ä½œ<span class="mojikumi-line-start">â€œ</span>optimistically unchoked<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>æœ€ååšå‡ºçš„é€‰æ‹©å°±æ˜¯ä¸Šä¼ ç»™<span class="mojikumi-line-start">â€œ</span>unchoked<span class="mojikumi-line-end">â€</span>å’Œ<span class="mojikumi-line-start">â€œ</span>optimistically unchoked<span class="mojikumi-line-end">â€</span>çš„è¿™äº› peer<span class="mojikumi-line-end">ã€‚</span>è¿™ä¸ªç­–ç•¥å®é™…ä¸Šå¯ä»¥è¢«ç»•è¿‡<span class="mojikumi-line-end">ï¼Œ</span>ä½†ä¸è¢«ç»•è¿‡æ—¶å®ƒæä¾›äº†ä¸€ä¸ªæ¿€åŠ±å¤§å®¶ä¸Šä¼ çš„æœºåˆ¶<span class="mojikumi">ã€‚</span><wbr><span class="mojikumi-line-start">ï¼ˆ</span>æ³¨<span class="mojikumi-line-end">ï¼š</span>åœ¨ä¸‹è½½å®Œæ¯•åä¿ç§æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šä½¿ç”¨å¦å¤–çš„ç­–ç•¥<span class="mojikumi-line-end">ã€‚</span><sup><a href="#user-content-fn-seed-choking" id="user-content-fnref-seed-choking" data-footnote-ref aria-describedby="footnote-label">5</a></sup><span class="mojikumi-line-end">ï¼‰</span></p>
<p>é™¤äº†é€šè¿‡ tracker<span class="mojikumi-line-end">ï¼Œ</span>è¿˜å¯ä»¥é€šè¿‡ Distributed Hash Table (DHT<span class="mojikumi-line-end">ï¼Œ</span>ä¸€ç§ P2P æ¶æ„çš„ distributed database) æ¥è·å– peer<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="video-streaming-and-content-distribution-networks" class="heading"><a href="#video-streaming-and-content-distribution-networks" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Video Streaming and Content Distribution Networks" tabindex="-1"></a><span>Video Streaming and Content Distribution Networks</span></h2>
<h3 id="http-streaming-and-dash" class="heading"><a href="#http-streaming-and-dash" class="heading-anchor" aria-label="ç« èŠ‚ï¼š HTTP Streaming and DASH" tabindex="-1"></a><span>HTTP Streaming and DASH</span></h3>
<p>è§†é¢‘éœ€è¦è€—è´¹å¤§é‡çš„æµé‡<span class="mojikumi-line-start">ï¼ˆ</span>ä»¥åŠå­˜å‚¨ç©ºé—´<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>è€Œ streaming æ—¶éœ€è¦ä¿è¯è‡³å°‘æœ‰è§†é¢‘ bitrate è¿™ä¹ˆå¤šçš„å¸¦å®½æ‰èƒ½é¿å…å¡é¡¿<span class="mojikumi-line-end">ï¼Œ</span>æ‰€ä»¥ä¸€èˆ¬ä¼šæ ¹æ®å¯ç”¨çš„å¸¦å®½é€‰æ‹©ä¸åŒè´¨é‡çš„è§†é¢‘ç‰ˆæœ¬<span class="mojikumi-line-end">ã€‚</span></p>
<p>æœ€åŸºç¡€çš„ streaming æ–¹å¼æ˜¯ HTTP streaming<span class="mojikumi-line-end">ï¼Œ</span>å³é€šè¿‡ HTTP GET è·å–è§†é¢‘æ–‡ä»¶è‡³ç¼“å†²åŒºå¹¶æ’­æ”¾<span class="mojikumi-line-end">ï¼Œ</span>ä½†è¿™æ ·æ— æ³•é€‚åº”ä¸åŒç”¨æˆ·çš„ä¸åŒå¸¦å®½<span class="mojikumi-line-end">ï¼Œ</span>æ›´æ— æ³•é€‚åº”åŒä¸€ä¸ªç”¨æˆ·éšæ—¶é—´å˜åŒ–çš„å¸¦å®½<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ Dynamic Adaptive Streaming over HTTP (DASH) ä¸­<span class="mojikumi-line-end">ï¼Œ</span>è§†é¢‘è¢«ç¼–ç ä¸ºå¤šä¸ªä¸åŒè´¨é‡çš„ç‰ˆæœ¬<span class="mojikumi-line-end">ï¼Œ</span>client æ¯æ¬¡è·å–ä¸€ä¸ªå‡ ç§’çš„è§†é¢‘ç‰‡æ®µ<span class="mojikumi-line-end">ï¼Œ</span>å¹¶æ ¹æ®å¯ç”¨å¸¦å®½åŠ¨æ€è°ƒæ•´é€‰æ‹©çš„ç‰ˆæœ¬<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨å¼€å§‹æ’­æ”¾ä¹‹å‰<span class="mojikumi-line-end">ï¼Œ</span>client é¦–å…ˆä¼šè·å– manifest file æ¥å¾—åˆ°å„ä¸ªè§†é¢‘ç‰ˆæœ¬çš„ URL ä»¥åŠ bitrate<span class="mojikumi-line-end">ã€‚</span>åœ¨æ’­æ”¾è¿‡ç¨‹ä¸­<span class="mojikumi-line-end">ï¼Œ</span>é€šè¿‡ HTTP GET è¯·æ±‚ä»¥åŠ byte range header è·å–è§†é¢‘ç‰‡æ®µ<span class="mojikumi-line-end">ï¼Œ</span>åŒæ—¶è®¡ç®—å¯ç”¨å¸¦å®½<span class="mojikumi-line-end">ï¼Œ</span>å†³å®šæ¥ä¸‹æ¥é€‰æ‹©çš„è§†é¢‘ç‰ˆæœ¬<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="content-distribution-networks" class="heading"><a href="#content-distribution-networks" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Content Distribution Networks" tabindex="-1"></a><span>Content Distribution Networks</span></h3>
<p>å’Œ DNS ç±»ä¼¼<span class="mojikumi-line-end">ï¼Œ</span>video streaming å¾€å¾€ä¹Ÿä¸èƒ½ä»…é€šè¿‡å•ä¸ª data center å®ç°<span class="mojikumi-line-end">ï¼Œ</span>å› ä¸º<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>ç¦»éƒ¨åˆ†ç”¨æˆ·è¿‡è¿œ<span class="mojikumi-line-end">ï¼Œ</span>è™½ç„¶ streaming å¯¹å»¶æ—¶è¦æ±‚ä¸é«˜<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ›´å¤šçš„ communication link å¾ˆå¯èƒ½æ„å‘³ç€æ›´ä½çš„ bottleneck bandwidth<span class="mojikumi-line-end">ã€‚</span></li>
<li>åŒä¸€ä¸ªè§†é¢‘ä¼šåœ¨åŒä¸€ä¸ª communication link ä¸Šè¢«ä¼ è¾“å¤šæ¬¡<span class="mojikumi-line-end">ï¼Œ</span>é€ æˆç½‘ç»œèµ„æºä»¥åŠèµ„è´¹çš„æµªè´¹<span class="mojikumi-line-end">ã€‚</span></li>
<li>single point of failure</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜<span class="mojikumi-line-end">ï¼Œ</span>video-streaming company å¾€å¾€ä¼šä½¿ç”¨ Content Distribution Networks (CDN) æ¥åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ã€‚</span></p>
<p>CDN ä¼šåœ¨å…¨çƒå„åœ°æ”¾ç½® server (cluster)<span class="mojikumi-line-end">ï¼Œ</span>åœ¨æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾ä¸€ä»½ content çš„ copy<span class="mojikumi-line-end">ï¼Œ</span>åœ¨å¤„ç† user request æ—¶å°½é‡ç”±æœ€å¥½<span class="mojikumi-line-start">ï¼ˆ</span>æœ€è¿‘<span class="mojikumi-line-end">ï¼‰</span>çš„èŠ‚ç‚¹è´Ÿè´£å“åº”<span class="mojikumi-line-end">ã€‚</span></p>
<p>CDN å¯ä»¥æ˜¯ private CDN<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ Google çš„ CDN<span class="mojikumi-line-end">ï¼‰</span>æˆ–è€… third-party CDN<span class="mojikumi-line-start">ï¼ˆ</span>ä¾‹å¦‚ Akamai<span class="mojikumi-line-end">ã€</span>Limelight<span class="mojikumi-line-end">ã€</span>Level-3<span class="mojikumi-line-end">ï¼Œ</span><s>ä¹¦ä¸­ç«Ÿç„¶æ²¡æåˆ° Cloudflare</s><span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<p>CDN é€šå¸¸æœ‰ä¸¤ç§æ”¾ç½®ç­–ç•¥<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>Enter Deep: æ”¾åœ¨ access ISP<span class="mojikumi-line-end">ï¼Œ</span>cluster æ•°é‡å¤š<span class="mojikumi-line-end">ï¼Œ</span>æ€§èƒ½æ›´å¥½<span class="mojikumi-line-end">ï¼Œ</span>ç»´æŠ¤æˆæœ¬æ›´é«˜<span class="mojikumi-line-end">ã€‚</span></li>
<li>Bring Home: æ”¾åœ¨ IXP<span class="mojikumi-line-end">ï¼Œ</span>cluster æ•°é‡å°‘<span class="mojikumi-line-end">ï¼Œ</span>ç»´æŠ¤æˆæœ¬æ›´ä½<span class="mojikumi-line-end">ï¼Œ</span>æ€§èƒ½ç›¸å¯¹å·®<span class="mojikumi-line-end">ã€‚</span></li>
</ul>
<p>CDN çš„æ›´æ–°æœ‰ push å’Œ pull ä¸¤ç§æ–¹å¼<span class="mojikumi-line-end">ï¼Œ</span>push å°±æ˜¯å†…å®¹æ›´æ–°æ—¶ push åˆ°å„ä¸ª cluster<span class="mojikumi-line-end">ï¼Œ</span>pull åˆ™ä¸ cache ç±»ä¼¼<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ cache miss æ—¶å†ä»ä¸Šæ¸¸è·å–å¹¶<span class="mojikumi-line-start">ï¼ˆ</span>åœ¨ stream ç»™ç”¨æˆ·çš„åŒæ—¶<span class="mojikumi-line-end">ï¼‰</span>ä¿å­˜ä¸‹æ¥<span class="mojikumi-line-end">ã€‚</span></p>
<p>å°†ç”¨æˆ·é‡å®šå‘åˆ° CDN èŠ‚ç‚¹çš„ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ DNS<span class="mojikumi-line-end">ï¼š</span>authoritative DNS server è¿”å› CDN çš„ DNS server çš„ NS record<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åå†ç”± CDN çš„ DNS server è¿›è¡ŒèŠ‚ç‚¹é€‰æ‹©å¹¶è¿”å›èŠ‚ç‚¹çš„ IP åœ°å€<span class="mojikumi-line-end">ã€‚</span></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>åŸºäº DNS è¿›è¡Œ CDN é‡å®šå‘æ—¶<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>é€‰æ‹©èŠ‚ç‚¹çš„ä¸¤ç§æ–¹å¼æ˜¯<span class="mojikumi-line-end">ï¼š</span></p>
<ul>
<li>
<p>geographically closest: ç”± local DNS server çš„ IP ç¡®å®šåœ°ç†ä½ç½®<span class="mojikumi-line-end">ï¼Œ</span>ç„¶åé€‰æ‹©æœ€è¿‘çš„èŠ‚ç‚¹<span class="mojikumi-line-end">ã€‚</span>è¿™æ ·åšçš„ä¸»è¦é—®é¢˜åœ¨äº<span class="mojikumi-line-end">ï¼Œ</span>åœ°ç†ä½ç½®è¿‘ä¸ä¸€å®šæ„å‘³ç€ç½‘ç»œè·ç¦»è¿‘/å¸¦å®½é«˜<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸” local DNS server æœ‰å¯èƒ½ç¦»ç”¨æˆ·å¾ˆè¿œ<span class="mojikumi-line-end">ã€‚</span></p>
</li>
<li>
<p>real-time measurements: å¯ä»¥æ¯éš”ä¸€æ®µæ—¶é—´å‘å„ä¸ª local DNS server å‘é€æ¢æµ‹ä¿¡å·æ¥æ£€æµ‹ç½‘ç»œæ€§èƒ½<span class="mojikumi-line-end">ï¼Œ</span>è¿™æ ·åšçš„ä¸»è¦é—®é¢˜åœ¨äº DNS server å¯èƒ½ä¼šæ‹’ç»å“åº”è¿™æ ·çš„æ¢æµ‹<span class="mojikumi-line-end">ã€‚</span></p>
</li>
</ul>
<h3 id="case-studies-netflix-and-youtube" class="heading"><a href="#case-studies-netflix-and-youtube" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Case Studies: Netflix and YouTube" tabindex="-1"></a><span>Case Studies: Netflix and YouTube</span></h3>
<p>Netflix å’Œ YouTube éƒ½æ˜¯å¤§å‹ video streaming æœåŠ¡å•†<span class="mojikumi-line-end">ï¼Œ</span>ä½†å®ƒä»¬çš„æ¶æ„æœ‰å¾ˆå¤§ä¸åŒ<span class="mojikumi-line-end">ï¼Œ</span>è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºå®ƒä»¬è§†é¢‘ç±»å‹çš„ä¸åŒ<span class="mojikumi-line-start">ï¼ˆ</span>å‰§ vs UGC<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="netflix" class="heading"><a href="#netflix" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Netflix" tabindex="-1"></a><span>Netflix</span></h4>
<p>Netflix ä½¿ç”¨ Amazon cloud è¿è¡Œ Web server ä»¥åŠè§†é¢‘å¤„ç†<span class="mojikumi-line-end">ï¼Œ</span>è€Œä½¿ç”¨ç§æœ‰çš„ CDN åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ã€‚</span></p>
<p>Netflix çš„ç§æœ‰ CDN cluster å®‰è£…åœ¨ ISP å’Œ IXP ä¸­<span class="mojikumi-line-end">ï¼Œ</span>å…¶ä¸­ IXP çš„ cluster å¾€å¾€å®¹é‡è¾ƒå¤§<span class="mojikumi-line-end">ï¼Œ</span>å¯ä»¥è£…ä¸‹æ•´ä¸ª Netflix çš„æ‰€æœ‰è§†é¢‘çš„å„ä¸ªç‰ˆæœ¬<span class="mojikumi-line-end">ï¼Œ</span>è€Œ ISP çš„ cluster å¾€å¾€å®¹é‡è¾ƒå°<span class="mojikumi-line-end">ï¼Œ</span>åªå­˜æ”¾æœ€çƒ­é—¨çš„è§†é¢‘<span class="mojikumi-line-end">ã€‚</span></p>
<p>Netflix ä¸ä½¿ç”¨ pull-caching<span class="mojikumi-line-end">ï¼Œ</span>è€Œæ˜¯åœ¨æ¯å¤©çš„ä½å³°æœŸé‡‡ç”¨ push è¿›è¡Œæ›´æ–°<span class="mojikumi-line-end">ã€‚</span></p>
<p>å› ä¸º Netflix çš„ç§æœ‰ CDN åªè´Ÿè´£åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ï¼Œ</span>å®ƒä¸éœ€è¦ä½¿ç”¨ DNS redirect<span class="mojikumi-line-end">ï¼Œ</span>ç›´æ¥ç”± Web server å‘Šè¯‰ client IP åœ°å€å³å¯<span class="mojikumi-line-end">ã€‚</span></p>
<h4 id="youtube" class="heading"><a href="#youtube" class="heading-anchor" aria-label="ç« èŠ‚ï¼š YouTube" tabindex="-1"></a><span>YouTube</span></h4>
<a id="google-çš„-network-infrastructure" name="google-çš„-network-infrastructure" aria-hidden="true"></a>
<aside role="note" data-v-a2ab257f><div class="shadow-md rd-1 b-l-6 my-6 bg-blue-1 dark:bg-blue-9 b-blue" data-v-a2ab257f><div class="p-3 flex justify-between items-center" data-v-a2ab257f><h5 class="flex items-center gap-1 font-bold" data-v-a2ab257f><span class="text-5 i-mdi-pencil text-blue" data-v-a2ab257f></span><span class="sr-only" data-v-a2ab257f>Note: </span><span data-v-a2ab257f>Google çš„ network infrastructure</span></h5><!--v-if--></div><div class="overflow-auto rd-br-1 bg-card px-6 dark:bg-bghover" data-v-a2ab257f><p>Google éƒ¨ç½²äº†ä¸€ä¸ªåºå¤§çš„ private network and CDN infrastructure<span class="mojikumi-line-end">ï¼Œ</span>åŒ…å«ä»¥ä¸‹ä¸‰çº§ server clusters<span class="mojikumi-line-end">ï¼š</span></p><ol>
<li>çº¦ 20 ä¸ª<span class="mojikumi-line-start">â€œ</span>mega data center<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>åˆ†å¸ƒåœ¨åŒ—ç¾<span class="mojikumi-line-end">ã€</span>æ¬§æ´²å’Œäºšæ´²<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cluster æœ‰æ•°åä¸‡æœåŠ¡å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥ serve dynamic content<span class="mojikumi-line-end">ã€‚</span></li>
<li>çº¦ 90 ä¸ªéƒ¨ç½²åœ¨ IXP çš„ cluster<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cluster æœ‰æ•°ç™¾ä¸ªæœåŠ¡å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥ serve åŒ…æ‹¬ YouTube è§†é¢‘åœ¨å†…çš„ static content<span class="mojikumi-line-end">ã€‚</span></li>
<li>æ•°ç™¾ä¸ªéƒ¨ç½²åœ¨ access ISP çš„ cluster<span class="mojikumi-line-end">ï¼Œ</span>æ¯ä¸ª cluster æœ‰æ•°åä¸ªæœåŠ¡å™¨<span class="mojikumi-line-end">ï¼Œ</span>ç”¨æ¥è¿›è¡Œ TCP splitting ä»¥åŠ server static content<span class="mojikumi-line-end">ï¼Œ</span>ä¾‹å¦‚ç½‘é¡µä¸Šçš„é™æ€èµ„æº<span class="mojikumi-line-end">ã€‚</span></li>
</ol><p>åœ¨è®¿é—® Google çš„æœåŠ¡æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¸åŒå†…å®¹å¾€å¾€ä¼šæ¥è‡ªä¸åŒå±‚çº§çš„ cluster<span class="mojikumi-line-end">ã€‚</span></p><p>è¿™äº› cluster é€šè¿‡ Google çš„ private network è¿æ¥<span class="mojikumi-line-end">ï¼Œ</span>ä½¿å¾—å®ƒä»¬ä¹‹é—´çš„å¾ˆå¤šé€šä¿¡éƒ½ä¸ä¾èµ–äº public Internet<span class="mojikumi-line-end">ï¼Œ</span>ä¸ç”¨æˆ·çš„é€šä¿¡ä¹Ÿå¾€å¾€åªæ¶‰åŠåˆ° access ISP è¿™ä¸€å±‚<span class="mojikumi-line-end">ã€‚</span></p></div></div></aside>
<p>YouTube ä½¿ç”¨ Google çš„ç§æœ‰ CDN åˆ†å‘è§†é¢‘<span class="mojikumi-line-end">ï¼Œ</span>å¹¶ä¸”ä½¿ç”¨ pull-caching å’Œ DNS redirect<span class="mojikumi-line-end">ã€‚</span>åœ¨é€‰æ‹©èŠ‚ç‚¹æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šç»¼åˆè€ƒè™‘ client åˆ° cluster çš„ RTT ä»¥åŠè´Ÿè½½å‡è¡¡<span class="mojikumi-line-end">ã€‚</span></p>
<p>åœ¨ç”¨æˆ·ä¸Šä¼ è§†é¢‘æ—¶<span class="mojikumi-line-end">ï¼Œ</span>ä¼šåœ¨ Google çš„ data center è¿›è¡Œå¤„ç†<span class="mojikumi-line-end">ã€‚</span></p>
<h2 id="socket-programming-creating-network-applications" class="heading"><a href="#socket-programming-creating-network-applications" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Socket Programming: Creating Network Applications" tabindex="-1"></a><span>Socket Programming: Creating Network Applications</span></h2>
<p>ä¸€èˆ¬æ¥è¯´<span class="mojikumi-line-end">ï¼Œ</span>ç¼–å†™ network application éœ€è¦ç¼–å†™ client program å’Œ server program<span class="mojikumi-line-end">ã€‚</span></p>
<h3 id="socket-programming-with-udp" class="heading"><a href="#socket-programming-with-udp" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Socket Programming with UDP" tabindex="-1"></a><span>Socket Programming with UDP</span></h3>
<p>ä½¿ç”¨ UDP æ—¶<span class="mojikumi-line-end">ï¼Œ</span>æ¯æ¬¡å‘é€ datagram<sup><a href="#user-content-fn-datagram" id="user-content-fnref-datagram" data-footnote-ref aria-describedby="footnote-label">6</a></sup> éƒ½éœ€è¦æŒ‡å®š address<span class="mojikumi-line-start">ï¼ˆ</span>IP åœ°å€ &#x26; ç«¯å£<span class="mojikumi">ï¼‰</span><span class="mojikumi-line-end">ï¼Œ</span>æ¥æ”¶ datagram æ—¶ä¹Ÿä¼šæ”¶åˆ°å¯¹æ–¹çš„ address<span class="mojikumi-line-end">ã€‚</span></p>
<p><s>ä¸€çœ‹å°±æ‡‚ä½†ä¹¦ä¸Šè§£é‡Šäº†åŠå¤©çš„</s> ä¾‹å­<span class="mojikumi-line-end">ï¼š</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-4"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-4--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverName </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">hostname</span><span style="color: #D9F5DD">&#39;</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">clientSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_DGRAM</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># AF_INET è¡¨ç¤º IPv4 åœ°å€ï¼ŒSOCK_DGRAM è¡¨ç¤º UDP</span></span>
<span><span style="color: #D6DEEB">message </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">Input lowercase sentence:</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">sendto</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">message.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">()</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> (serverName, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">modifiedMessage, serverAddress </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> clientSocket.</span><span style="color: #B2CCD6">recvfrom</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">2048</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># 2048 æ˜¯ buffer size</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">modifiedMessage.</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">close</span><span style="color: #D6DEEB">()</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverName </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">hostname</span><span style="color: #111111">&#39;</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">clientSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_DGRAM</span><span style="color: #403F53">) </span><span style="color: #989FB1"># AF_INET è¡¨ç¤º IPv4 åœ°å€ï¼ŒSOCK_DGRAM è¡¨ç¤º UDP</span></span>
<span><span style="color: #403F53">message </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">input</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">Input lowercase sentence:</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">sendto</span><span style="color: #403F53">(</span><span style="color: #4876D6">message.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">()</span><span style="color: #111111">,</span><span style="color: #4876D6"> (serverName, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">modifiedMessage, serverAddress </span><span style="color: #994CC3">=</span><span style="color: #403F53"> clientSocket.</span><span style="color: #0C969B">recvfrom</span><span style="color: #403F53">(</span><span style="color: #AA0982">2048</span><span style="color: #403F53">) </span><span style="color: #989FB1"># 2048 æ˜¯ buffer size</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #4876D6">modifiedMessage.</span><span style="color: #0C969B">decode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">close</span><span style="color: #403F53">()</span></span></code></pre></div></section>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-5"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-5--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">serverSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_DGRAM</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">serverSocket.</span><span style="color: #B2CCD6">bind</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">(</span><span style="color: #D9F5DD">&#39;&#39;</span><span style="color: #82AAFF">, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">â€The server </span><span style="color: #C792EA">is</span><span style="color: #82AAFF"> ready to receiveâ€</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C792EA">while</span><span style="color: #D6DEEB"> </span><span style="color: #FF5874">True</span><span style="color: #D6DEEB">:</span></span>
<span><span style="color: #D6DEEB">    message, clientAddress </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> serverSocket.</span><span style="color: #B2CCD6">recvfrom</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">2048</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">    modifiedMessage </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> message.</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">().</span><span style="color: #B2CCD6">upper</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    serverSocket.</span><span style="color: #B2CCD6">sendto</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">modifiedMessage.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">()</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> clientAddress</span><span style="color: #D6DEEB">)</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">serverSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_DGRAM</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">serverSocket.</span><span style="color: #0C969B">bind</span><span style="color: #403F53">(</span><span style="color: #4876D6">(</span><span style="color: #111111">&#39;&#39;</span><span style="color: #4876D6">, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #4876D6">â€The server </span><span style="color: #994CC3">is</span><span style="color: #4876D6"> ready to receiveâ€</span><span style="color: #403F53">)</span></span>
<span><span style="color: #994CC3">while</span><span style="color: #403F53"> </span><span style="color: #BC5454">True</span><span style="color: #403F53">:</span></span>
<span><span style="color: #403F53">    message, clientAddress </span><span style="color: #994CC3">=</span><span style="color: #403F53"> serverSocket.</span><span style="color: #0C969B">recvfrom</span><span style="color: #403F53">(</span><span style="color: #AA0982">2048</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">    modifiedMessage </span><span style="color: #994CC3">=</span><span style="color: #403F53"> message.</span><span style="color: #0C969B">decode</span><span style="color: #403F53">().</span><span style="color: #0C969B">upper</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    serverSocket.</span><span style="color: #0C969B">sendto</span><span style="color: #403F53">(</span><span style="color: #4876D6">modifiedMessage.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">()</span><span style="color: #111111">,</span><span style="color: #4876D6"> clientAddress</span><span style="color: #403F53">)</span></span></code></pre></div></section>
<h3 id="socket-programming-with-tcp" class="heading"><a href="#socket-programming-with-tcp" class="heading-anchor" aria-label="ç« èŠ‚ï¼š Socket Programming with TCP" tabindex="-1"></a><span>Socket Programming with TCP</span></h3>
<p>TCP æ˜¯ä¸€ä¸ª connection-oriented protocol<span class="mojikumi-line-end">ï¼Œ</span>åœ¨ server ä¸Šåˆ†ä¸º welcoming socket å’Œ connection socket<span class="mojikumi-line-end">ï¼Œ</span>ä¸€å¼€å§‹éœ€è¦é€šè¿‡ welcoming socket å»ºç«‹ connection å¹¶å¾—åˆ° connection socket<span class="mojikumi-line-end">ï¼Œ</span>è€Œåœ¨å»ºç«‹äº† connection ä¹‹åå°±æ— éœ€å†æŒ‡å®šå¯¹æ–¹çš„ address<span class="mojikumi-line-end">ã€‚</span></p>
<p><span class="mojikumi-line-start">ï¼ˆ</span>ä¸‹é¢çš„ä»£ç é™¤äº†æ¢æˆ TCP è¿˜å¯¹ä¸Šé¢çš„ UDP ä»£ç æœ‰è‹¥å¹²æ²¡æœ‰æœ¬è´¨åŒºåˆ«çš„ä¿®æ”¹<span class="mojikumi-line-end">ï¼Œ</span>è¦æ˜¯æˆ‘å†™è‚¯å®šä¼šé¿å…<span class="mojikumi-line-end">ï¼Œ</span>ä½†æ˜¯ä»ä¹¦ä¸Šå¤åˆ¶å°±æ‡’å¾—æ”¹äº†<span class="mojikumi">ã€‚</span><span class="mojikumi-line-end">ï¼‰</span></p>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-6"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-6--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverName </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">servername</span><span style="color: #D9F5DD">&#39;</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">clientSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_STREAM</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># SOCK_STREAM æ˜¯ TCP</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">connect</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">(serverName, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">sentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #C5E478">input</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">Input lowercase sentence:</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">send</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">sentence.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">modifiedSentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> clientSocket.</span><span style="color: #B2CCD6">recv</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1024</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">From Server: </span><span style="color: #D9F5DD">&#39;</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> modifiedSentence.</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">clientSocket.</span><span style="color: #B2CCD6">close</span><span style="color: #D6DEEB">()</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverName </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #111111">&#39;</span><span style="color: #C96765">servername</span><span style="color: #111111">&#39;</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">clientSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_STREAM</span><span style="color: #403F53">) </span><span style="color: #989FB1"># SOCK_STREAM æ˜¯ TCP</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">connect</span><span style="color: #403F53">(</span><span style="color: #4876D6">(serverName, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">sentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #4876D6">input</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">Input lowercase sentence:</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">send</span><span style="color: #403F53">(</span><span style="color: #4876D6">sentence.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">modifiedSentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> clientSocket.</span><span style="color: #0C969B">recv</span><span style="color: #403F53">(</span><span style="color: #AA0982">1024</span><span style="color: #403F53">)</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">From Server: </span><span style="color: #111111">&#39;</span><span style="color: #111111">,</span><span style="color: #4876D6"> modifiedSentence.</span><span style="color: #0C969B">decode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">clientSocket.</span><span style="color: #0C969B">close</span><span style="color: #403F53">()</span></span></code></pre></div></section>
<section class="code-block relative my-6 shadow" itemprop="hasPart" itemscope itemtype="https://schema.org/SoftwareSourceCode" data-v-ad49d235><div class="h-6 items-center rd-t-1 bg-area px-4 dark:bg-#2A313A media-screen:important-flex" style="display:none;" data-v-ad49d235><h4 class="text-3 text-footer" itemprop="programmingLanguage" aria-label="python ä»£ç å—" data-v-ad49d235>python</h4><ile-root id="ile-7"><button title="å¤åˆ¶åˆ°å‰ªè´´æ¿" class="copy-button b-footer text-footer" data-v-9288569d><span class="i-mdi-content-copy" data-v-9288569d></span><span class="sr-only" role="status" data-v-9288569d></span></button></ile-root><!--ISLAND_HYDRATION_PLACEHOLDER_ile-7--></div><div class="light:hidden" itemprop="text" data-v-ad49d235><pre class="shiki dark" style="background-color: #011627" tabindex="0"><code><span><span style="color: #C792EA">from</span><span style="color: #D6DEEB"> socket </span><span style="color: #C792EA">import</span><span style="color: #D6DEEB"> </span><span style="color: #C792EA">*</span></span>
<span><span style="color: #D6DEEB">serverPort </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #F78C6C">12000</span></span>
<span><span style="color: #D6DEEB">serverSocket </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> </span><span style="color: #B2CCD6">socket</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">AF_INET</span><span style="color: #D9F5DD">,</span><span style="color: #82AAFF"> SOCK_STREAM</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">serverSocket.</span><span style="color: #B2CCD6">bind</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">(</span><span style="color: #D9F5DD">&#39;&#39;</span><span style="color: #82AAFF">, serverPort)</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #D6DEEB">serverSocket.</span><span style="color: #B2CCD6">listen</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1</span><span style="color: #D6DEEB">) </span><span style="color: #637777"># 1 æ˜¯ connection queue çš„æœ€å¤§é•¿åº¦</span></span>
<span><span style="color: #C5E478">print</span><span style="color: #D6DEEB">(</span><span style="color: #D9F5DD">&#39;</span><span style="color: #ECC48D">The server is ready to receive</span><span style="color: #D9F5DD">&#39;</span><span style="color: #D6DEEB">)</span></span>
<span><span style="color: #C792EA">while</span><span style="color: #D6DEEB"> </span><span style="color: #FF5874">True</span><span style="color: #D6DEEB">:</span></span>
<span><span style="color: #D6DEEB">    connectionSocket, addr </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> serverSocket.</span><span style="color: #B2CCD6">accept</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    sentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> connectionSocket.</span><span style="color: #B2CCD6">recv</span><span style="color: #D6DEEB">(</span><span style="color: #F78C6C">1024</span><span style="color: #D6DEEB">).</span><span style="color: #B2CCD6">decode</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    capitalizedSentence </span><span style="color: #C792EA">=</span><span style="color: #D6DEEB"> sentence.</span><span style="color: #B2CCD6">upper</span><span style="color: #D6DEEB">()</span></span>
<span><span style="color: #D6DEEB">    connectionSocket.</span><span style="color: #B2CCD6">send</span><span style="color: #D6DEEB">(</span><span style="color: #82AAFF">capitalizedSentence.</span><span style="color: #B2CCD6">encode</span><span style="color: #D6DEEB">())</span></span>
<span><span style="color: #D6DEEB">    connectionSocket.</span><span style="color: #B2CCD6">close</span><span style="color: #D6DEEB">()</span></span></code></pre></div><div class="light:important-block" style="display:none;" data-v-ad49d235><pre class="shiki light" style="background-color: #FBFBFB" tabindex="0"><code><span><span style="color: #994CC3">from</span><span style="color: #403F53"> socket </span><span style="color: #994CC3">import</span><span style="color: #403F53"> </span><span style="color: #994CC3">*</span></span>
<span><span style="color: #403F53">serverPort </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #AA0982">12000</span></span>
<span><span style="color: #403F53">serverSocket </span><span style="color: #994CC3">=</span><span style="color: #403F53"> </span><span style="color: #0C969B">socket</span><span style="color: #403F53">(</span><span style="color: #4876D6">AF_INET</span><span style="color: #111111">,</span><span style="color: #4876D6"> SOCK_STREAM</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">serverSocket.</span><span style="color: #0C969B">bind</span><span style="color: #403F53">(</span><span style="color: #4876D6">(</span><span style="color: #111111">&#39;&#39;</span><span style="color: #4876D6">, serverPort)</span><span style="color: #403F53">)</span></span>
<span><span style="color: #403F53">serverSocket.</span><span style="color: #0C969B">listen</span><span style="color: #403F53">(</span><span style="color: #AA0982">1</span><span style="color: #403F53">) </span><span style="color: #989FB1"># 1 æ˜¯ connection queue çš„æœ€å¤§é•¿åº¦</span></span>
<span><span style="color: #4876D6">print</span><span style="color: #403F53">(</span><span style="color: #111111">&#39;</span><span style="color: #C96765">The server is ready to receive</span><span style="color: #111111">&#39;</span><span style="color: #403F53">)</span></span>
<span><span style="color: #994CC3">while</span><span style="color: #403F53"> </span><span style="color: #BC5454">True</span><span style="color: #403F53">:</span></span>
<span><span style="color: #403F53">    connectionSocket, addr </span><span style="color: #994CC3">=</span><span style="color: #403F53"> serverSocket.</span><span style="color: #0C969B">accept</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    sentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> connectionSocket.</span><span style="color: #0C969B">recv</span><span style="color: #403F53">(</span><span style="color: #AA0982">1024</span><span style="color: #403F53">).</span><span style="color: #0C969B">decode</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    capitalizedSentence </span><span style="color: #994CC3">=</span><span style="color: #403F53"> sentence.</span><span style="color: #0C969B">upper</span><span style="color: #403F53">()</span></span>
<span><span style="color: #403F53">    connectionSocket.</span><span style="color: #0C969B">send</span><span style="color: #403F53">(</span><span style="color: #4876D6">capitalizedSentence.</span><span style="color: #0C969B">encode</span><span style="color: #403F53">())</span></span>
<span><span style="color: #403F53">    connectionSocket.</span><span style="color: #0C969B">close</span><span style="color: #403F53">()</span></span></code></pre></div></section>
<section data-footnotes class="footnotes"><h2 class="sr-only" id="footnote-label">Footnotes</h2>
<ol>
<li id="user-content-fn-fig2.8">
<p>p103, Figure 2.8: General format of an HTTP request message <a href="#user-content-fnref-fig2.8" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-fig2.9">
<p>p104, Figure 2.9: General format of an HTTP response message <a href="#user-content-fnref-fig2.9" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-smtp-example">
<p><a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol#SMTP_transport_example">SMTP transport example - Simple Mail Transfer Protocol - Wikipedia</a> <a href="#user-content-fnref-smtp-example" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-fig-2.21">
<p>p133, Figure 2.21: DNS message format <a href="#user-content-fnref-fig-2.21" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-seed-choking">
<p><a href="https://www.libtorrent.org/reference-Settings.html#seed_choking_algorithm_t">seed_choking_algorithm - libtorrent</a> <a href="#user-content-fnref-seed-choking" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
<li id="user-content-fn-datagram">
<p>åœ¨ä¹¦ä¸­ 1.5 èŠ‚<span class="mojikumi-line-end">ï¼Œ</span>transport-layer packet è¢«ç§°ä½œ <span class="mojikumi">â€œ</span>segment<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>network-layer packet è¢«ç§°ä½œ <span class="mojikumi">â€œ</span>datagram<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>ä½†å®é™…ä¸Š UDP çš„ <span class="mojikumi">â€œ</span>D<span class="mojikumi">â€</span> å°±æ˜¯ <span class="mojikumi">â€œ</span>datagram<span class="mojikumi">â€</span><span class="mojikumi-line-end">ï¼Œ</span>è€Œ TCP çš„ packet æ‰å« <span class="mojikumi">â€œ</span>segment<span class="mojikumi">â€</span><span class="mojikumi-line-end">ã€‚</span>ref: <a href="https://stackoverflow.com/questions/11636405/definition-of-network-units-fragment-segment-packet-frame-datagram">networking - Definition of Network Units: Fragment, Segment, Packet, Frame, Datagram - Stack Overflow</a> <a href="#user-content-fnref-datagram" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">â†©</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category domain="https://ouuan.moe/tag/cnatda">cnatda</category>
            <category domain="https://ouuan.moe/tag/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">å­¦ä¹ ç¬”è®°</category>
        </item>
    </channel>
</rss>