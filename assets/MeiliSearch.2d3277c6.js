var u=(p,s,a)=>new Promise((o,t)=>{var c=e=>{try{i(a.next(e))}catch(l){t(l)}},d=e=>{try{i(a.throw(e))}catch(l){t(l)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(c,d);i((a=a.apply(p,s)).next())});import{c as x,_ as w}from"./PostHead.e14546aa.js";import{d as b,C as T,D as f,E as k,G as q,e as m,f as r,g as D,H as C,i as _,t as S,F as U,j,x as B,o as h,m as g}from"./vendor-vue.f1976dd3.js";const F={class:"m-4 flex flex-col gap-6"},M={class:"flex flex-wrap items-center gap-x-5 gap-y-2"},N={role:"search",class:"max-w-100 flex grow items-center gap-2"},P=r("label",{class:"flex items-center",for:"__search_keywords"},[r("span",{class:"i-mdi-magnify text-xl"}),r("span",{class:"sr-only"},"搜索关键词")],-1),V={class:"my-6 whitespace-pre-wrap"},H=b({__name:"MeiliSearch",setup(p){const s=T("history"),a=f(()=>{var e;return(e=Array.isArray(s.q)?s.q.join(" "):s.q)==null?void 0:e.trim()}),o=`--${Math.random().toFixed(16)}--`,t=k();function c(){return u(this,null,function*(){return fetch("https://meili.ouuan.moe//indexes/blog-posts/search",{method:"POST",headers:{Authorization:"Bearer c01d2dda5c201bbe830a7892f408d28f251770f20f70b78264aa0dabc4284e63","Content-Type":"application/json"},body:JSON.stringify({q:a.value,attributesToRetrieve:["href","filename","date","lastUpdated"],attributesToHighlight:["title","tags","content"],attributesToCrop:["content"],cropLength:20,cropMarker:`

……

`,highlightPreTag:o,highlightPostTag:o})})})}q(a,()=>u(this,null,function*(){if(!a.value){t.value=void 0;return}try{const e=yield c();if(!e.ok)throw new Error;t.value=yield e.json()}catch(e){t.value=null}}),{debounce:300,immediate:!0});const d=f(()=>t.value===void 0?"请输入关键词进行搜索 🧐":t.value===null?"搜索出错了 😵 重新试试？":t.value.hits.length===0?"没有检索到任何结果 😢 试试缩短或更换关键词？":`共检索到 ${t.value.estimatedTotalHits} 个结果`);function i(e){return{title:e._formatted.title,tags:e._formatted.tags,date:new Date(e.date),lastUpdated:new Date(e.lastUpdated)}}return(e,l)=>{const v=x,y=w;return h(),m("div",F,[r("div",M,[r("form",N,[P,D(r("input",{id:"__search_keywords","onUpdate:modelValue":l[0]||(l[0]=n=>_(s).q=n),class:"w-full rd-1 bg-card p-1",type:"search",name:"q",placeholder:"关键词"},null,512),[[C,_(s).q]])]),r("span",null,S(d.value),1)]),t.value&&t.value.hits.length?(h(!0),m(U,{key:0},j(t.value.hits,n=>(h(),m("div",{key:n.href,class:"standard-card"},[g(v,{"title-link":"",frontmatter:i(n),href:n.href,filename:n.filename,"highlight-delimiter":o},null,8,["frontmatter","href","filename"]),r("pre",V,[g(y,{text:n._formatted.content.trim().replace(/\n{3,}/g,`

`),delimiter:o},null,8,["text"])])]))),128)):B("v-if",!0)])}}});export{H as _};
