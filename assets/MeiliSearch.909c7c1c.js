var u=(p,r,s)=>new Promise((l,t)=>{var i=a=>{try{c(s.next(a))}catch(e){t(e)}},d=a=>{try{c(s.throw(a))}catch(e){t(e)}},c=a=>a.done?l(a.value):Promise.resolve(a.value).then(i,d);c((s=s.apply(p,r)).next())});import{c as w,_ as b}from"./PostHead.bcf3d97a.js";import{d as T,C as k,D as _,E as q,r as C,G as D,e as m,f as n,n as S,g as U,H as j,i as g,t as B,F,j as M,x as N,o as h,m as v}from"./vendor-vue.8e27fa9d.js";const P={class:"m-4 flex flex-col gap-6"},V={class:"flex flex-wrap items-center gap-x-5 gap-y-2"},$={role:"search",class:"max-w-100 flex grow items-center gap-2"},A={class:"flex items-center",for:"__search_keywords"},E=n("span",{class:"sr-only"},"搜索关键词",-1),H={class:"my-6 whitespace-pre-wrap"},O=T({__name:"MeiliSearch",setup(p){const r=k("history"),s=_(()=>{var e;return(e=Array.isArray(r.q)?r.q.join(" "):r.q)==null?void 0:e.trim()}),l=`--${Math.random().toFixed(16)}--`,t=q(),i=C(!1);function d(){return u(this,null,function*(){return fetch("https://meili.ouuan.moe//indexes/blog-posts/search",{method:"POST",headers:{Authorization:"Bearer c01d2dda5c201bbe830a7892f408d28f251770f20f70b78264aa0dabc4284e63","Content-Type":"application/json"},body:JSON.stringify({q:s.value,attributesToRetrieve:["href","filename","date","lastUpdated"],attributesToHighlight:["title","tags","content"],attributesToCrop:["content"],cropLength:20,cropMarker:`

……

`,highlightPreTag:l,highlightPostTag:l})})})}D(s,()=>u(this,null,function*(){if(!s.value){t.value=void 0;return}i.value=!0;try{const e=yield d();if(!e.ok)throw new Error;t.value=yield e.json()}catch(e){t.value=null}i.value=!1}),{debounce:300,immediate:!0});const c=_(()=>t.value===void 0?"请输入关键词进行搜索 🧐":t.value===null?"搜索出错了 😵 重新试试？":t.value.hits.length===0?"没有检索到任何结果 😢 试试缩短或更换关键词？":`共检索到 ${t.value.estimatedTotalHits} 个结果`);function a(e){return{title:e._formatted.title,tags:e._formatted.tags,date:new Date(e.date),lastUpdated:new Date(e.lastUpdated)}}return(e,f)=>{const y=w,x=b;return h(),m("div",P,[n("div",V,[n("form",$,[n("label",A,[n("span",{class:S(["text-xl",i.value?"i-mdi-loading motion-safe:animate-spin":"i-mdi-magnify"])},null,2),E]),U(n("input",{id:"__search_keywords","onUpdate:modelValue":f[0]||(f[0]=o=>g(r).q=o),class:"w-full rd-1 bg-card p-1",type:"search",name:"q",placeholder:"关键词"},null,512),[[j,g(r).q]])]),n("span",null,B(c.value),1)]),t.value&&t.value.hits.length?(h(!0),m(F,{key:0},M(t.value.hits,o=>(h(),m("div",{key:o.href,class:"standard-card"},[v(y,{"title-link":"",frontmatter:a(o),href:o.href,filename:o.filename,"highlight-delimiter":l},null,8,["frontmatter","href","filename"]),n("pre",H,[v(x,{text:o._formatted.content.trim().replace(/\n{3,}/g,`

`),delimiter:l},null,8,["text"])])]))),128)):N("v-if",!0)])}}});export{O as _};
